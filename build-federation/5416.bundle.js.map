{"version":3,"file":"5416.bundle.js","mappings":"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ACA,oBACA,+BACA,iBACA,sBACA,iBACA,uBACA,kBACA,yBACA,uBACA,qBACA,sBACA,uBACA,cACA,wBACA,sBACA,oBACA,4BACA,uBACA,+BACA,iBACA,wBACA,wBACA,oBACA,uBACA,sBACA,oBACA,UACA,UACA,sBACA,WACA,6BACA,cACA,oBACA,UACA,WACA,wBACA,sBACA,4BACA,mCACA,4BACA,mCACA,2BACA,wBACA,6BACA,oBACA,0BACA,+BACA,+BACA,iCACA,sBACA,2BACA,kCACA,6BACA,oCACA,sBACA,aACA,wBACA,sBACA,wBACA,uBACA,mBACA,uBACA,sBACA,uBACA,wBACA,kBACA,cACA,WACA,gBACA,oBACA,kCACA,YACA,2BACA,0BACA,YACA,YACA,aACA,UACA,eACA,gBACA,kBACA,uBACA,mBACA,YACA,uBACA,gBACA,mBACA,gBACA,qBACA,iBACA,iBACA,gBACA,sBACA,oBACA,YACA,+BACA,yBACA,eACA,sBACA,qBACA,WACA,yBACA,kBACA,iBACA,iBACA,iBACA,gBACA,SACA,UACA,yBACA,kBACA,iBACA,iBACA,+BACA,UACA,iBACA,0BACA,6BACA,uBACA,6BACA,UACA,kBACA,mBACA,YACA,sBACA,iBACA,mBACA,mBACA,kBACA,YACA,iBACA,uBACA,yBACA,oBACA,oBACA,eACA,4BACA,uBACA,oBACA,qCACA,4BACA,iBACA,2BACA,6BACA,6BACA,+BACA,aACA,aACA,qBCnII7oB,IAAYC,EAAAA,EAAAA,aAAW,SAACC,GAAD,MAAY,CACvC2jB,QAAS,CACPnW,SAAUxN,EAAM4jB,WAAWC,QAAQ,IACnCpW,WAAYzN,EAAM4jB,WAAWE,mBAE/B7O,MAAO,CACLvU,MAAO,QAETqmB,SAAU,CACRjL,OAAQ,IACRpb,MAAO,OACPsD,OAAQ,QAEVmgB,YAAa,CACXngB,OAAQ,MACR6I,UAAW,OACXuX,UAAW,SACX,uBAAwB,CACtB1jB,MAAO,SAET,6BAA8B,CAC5B,qBAAsB,kCAExB,6BAA8B,CAC5B5B,gBAAiB,iBACjBu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","sources":["webpack://ciqo/./src/history.js","webpack://ciqo/./src/Components/NavBarElem/NavBarElem.jsx","webpack://ciqo/./src/Components/AppContainerElem/AppContainerElem.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/BcfDialog/BcfDialog.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/Login/Login.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/PortalList/PortalList.js","webpack://ciqo/./src/Components/SearchBar/SearchBar.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectsSetsList/TreeClass.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectsSetsList/ObjectsSetsList.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/PropertyList/DefineTypeComponent.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/PropertyList/PropertyList.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectList/DefineTypeComponent.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectList/SelectionComponent.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectList/ObjectList.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/DatBimApi.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DropBox/DropBox.js","webpack://ciqo/./src/Components/ToolTipsElem/ToolTipsElem.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Tracim/img/TracimLogo.svg","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Tracim/Tracim.hooks.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Tracim/Tracim.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/img/IdsLogo.svg","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Marketplace.js","webpack://ciqo/./src/Views/IfcRenderer/Components/SearchData/SearchData.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/Components/Tree/index.js","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/reducer.js","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/actions.js","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/ProjectTree.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Settings/utils/ifcClasses.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Settings/Settings.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/SpatialStructure/SpatialStructure.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Properties/Properties.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Validation/Validation.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Cuts/Cuts.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Drawings/Scenes/DrawingList/index.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Drawings/Scenes/DxfViewer/index.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Drawings/Drawings.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Measures/Measures.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/ContextMenu/ContextMenu.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/DraggableCard/DraggableCard.js","webpack://ciqo/./src/Views/IfcRenderer/Utils/geometry-types.js","webpack://ciqo/./src/Views/IfcRenderer/Utils/TriBim.js","webpack://ciqo/./src/Views/IfcRenderer/IfcRenderer.js","webpack://ciqo/./src/Views/IfcRenderer/IfcRenderer.hooks.js","webpack://ciqo/./src/App.js","webpack://ciqo/./src/serviceWorker.js","webpack://ciqo/./src/bootstrap.js","webpack://ciqo/./node_modules/web-ifc/ sync"],"sourcesContent":["import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Button,\n  IconButton,\n} from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nconst NavBarElem = ({ title, classes, handleDrawerOpen, open }) => {\n  // const classes = useStyles();\n\n  const { REACT_APP_LOGO, REACT_APP_COMPANY, REACT_APP_VERSION } = process.env;\n\n  return (\n    <AppBar\n      position=\"fixed\"\n      className={clsx(classes.appBar, {\n        [classes.appBarShift]: open,\n      })}\n    >\n      <Toolbar\n        style={{ backgroundColor: 'white', color: 'black' }}\n      >\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"open drawer\"\n          onClick={handleDrawerOpen}\n          edge=\"start\"\n          className={clsx(classes.menuButton, {\n            [classes.hide]: open,\n          })}\n        >\n          <MenuIcon />\n        </IconButton>\n        <Typography variant=\"h6\" noWrap>\n          {title}\n        </Typography>\n        <div style={{ position: \"absolute\", right: \"10px\" }}>\n          <a style={{ color: \"inherit\", margin: \"0 20px\" }} target=\"_blank\">\n            {`${REACT_APP_VERSION}`}\n          </a>\n          <a\n            href=\"https://documentation-ciqo.notion.site/documentation-ciqo/Doc-CIQO-f47d770ccf344ea6ae50119e58c82198\"\n            style={{ color: \"inherit\", margin: \"0 20px\" }}\n            target=\"_blank\"\n          >\n            Documentation\n            </a>\n          <a\n            href=\"https://alliance-batiment.mydatbim.com/mydatbimCom/mentions-legales\"\n            style={{ color: \"inherit\", margin: \"0 20px\" }}\n            target=\"_blank\"\n          >\n            Mentions légales\n            </a>\n          <a\n            href=\"https://alliance-batiment.mydatbim.com/template/contact/387982\"\n            style={{ color: \"inherit\", margin: \"0 20px\" }}\n            target=\"_blank\"\n          >\n            Contact\n            </a>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default NavBarElem;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport {\n  Container,\n  Drawer,\n  List,\n  CssBaseline,\n  Divider,\n  IconButton,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Icon\n} from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport NavBarElem from '../NavBarElem';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  content: {\n    flexGrow: 1,\n    // padding: theme.spacing(3),\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: -drawerWidth,\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: 0,\n  },\n}));\n\nexport default function PersistentDrawerLeft({\n  title,\n  menu,\n  children\n}) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <NavBarElem\n        title={title}\n        classes={classes}\n        handleDrawerOpen={handleDrawerOpen}\n        open={open}\n      />\n      <Drawer\n        className={classes.drawer}\n        variant=\"persistent\"\n        anchor=\"left\"\n        open={open}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <div className={classes.drawerHeader}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <List>\n          {menu.MenuSideBarSup.map((item, index) => (\n            <Link to={item.link} style={{ textDecoration: 'none' }}>\n              <ListItem button key={index}>\n                <ListItemIcon><Icon>{item.icon}</Icon></ListItemIcon>\n                <ListItemText primary={item.text} />\n              </ListItem>\n            </Link>\n          ))}\n        </List>\n        <Divider />\n        <List>\n          {menu.MenuSideBarInf.map((item, index) => (\n            <a href={item.href} target='_blank' style={{ textDecoration: 'none' }}>\n              <ListItem button key={index}>\n                <ListItemIcon><Icon>{item.icon}</Icon></ListItemIcon>\n                <ListItemText primary={item.text} />\n              </ListItem>\n            </a>\n          ))}\n        </List>\n      </Drawer>\n      <main\n        className={clsx(classes.content, {\n          [classes.contentShift]: open,\n        })}\n      >\n        <div className={classes.drawerHeader} />\n        <Container maxWidth=\"lg\" className={classes.container}>\n          {children}\n        </Container>\n      </main>\n    </div>\n  );\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { BcfReader } from '@parametricos/bcf-js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport { Box, Dialog, DialogActions, DialogContent, DialogTitle, Grid, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 140,\n  },\n});\n\nexport default function BcfDialog({\n  open,\n  onClose,\n  onOpenViewpoint\n}) {\n  const [file, setFile] = useState();\n  const [topics, setTopics] = useState([]);\n  const [fitleredTopics, setFitleredTopics] = useState([]);\n\n  useEffect(() => {\n    const fitleredTopics = topics.filter((t) => t.viewpoints.length > 0);\n    setFitleredTopics(fitleredTopics);\n  }, []);\n\n  const handleOpenViewpoint = (viewpoint) => {\n    onOpenViewpoint(viewpoint);\n    onClose();\n  }\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    const reader = new BcfReader();\n    await reader.read(acceptedFiles[0]);\n    console.log('SET TOPICS', reader.topics)\n    setTopics(reader.topics);\n    setFile(acceptedFiles[0])\n    const fitleredTopics = reader.topics.filter((t) => t.viewpoints.length > 0);\n    setFitleredTopics(fitleredTopics);\n    console.log('SET TOPICS', fitleredTopics)\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop, accept: \".bcf\" });\n\n  return (\n    <Dialog\n      maxWidth='xl'\n      fullWidth\n      disableBackdropClick\n      open={open}\n      onClose={onClose}\n    >\n      <DialogTitle>BCF Viewer</DialogTitle>\n      <DialogContent>\n        {!file && (\n          <Box\n            height={600}\n            display='flex'\n            alignItems=\"center\"\n            justifyContent=\"center\"\n            border={isDragActive ? \"solid 4px\" : \"none\"}\n            borderColor={isDragActive ? \"#ffa50f\" : \"\"}\n            borderRadius={20}\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} />\n            {\n              isDragActive ?\n                <Typography variant=\"h6\">Drop the BCF here ...</Typography> :\n                <Typography variant=\"h6\">Drag 'n' drop a BCF here, or click to select</Typography>\n            }\n          </Box>\n        )}\n        {file && (\n          <Grid container spacing={2}>\n            {fitleredTopics.map((topic, i) => (\n              <Grid key={i} item>\n                <TopicCard topic={topic} onOpenViewpoint={handleOpenViewpoint} />\n              </Grid>\n            ))}\n          </Grid>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>\n          Close\n              </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction TopicCard({\n  topic,\n  onOpenViewpoint\n}) {\n\n  const classes = useStyles();\n  const [defaultViewpoint, setDefaultViewpoint] = useState(null);\n  const [defaultViewpointUrl, setDefaultViewpointUrl] = useState(\"\");\n  // const { topic, onOpenViewpoint } = props;\n\n  // const defaultViewpoint = topic?.markup?.viewpoints?.length > 0 ? topic.markup.viewpoints[0] : null;\n\n  const handleClick = () => {\n    if (topic.viewpoints.length > 0) {\n      onOpenViewpoint(topic.viewpoints[0]);\n    }\n  }\n\n  // useEffect(() => {\n  //   const getViewpoint = async () => {\n  //     const newDefaultViewpoint = topic?.markup?.viewpoints?.length > 0 ? topic.markup.viewpoints[0] : null;\n  //     if (newDefaultViewpoint) {\n  //       const data = await topic.getViewpointSnapshot(defaultViewpoint);\n  //       const url = window.URL.createObjectURL(data);\n  //       setDefaultViewpointUrl(url);\n  //     }\n  //     setDefaultViewpoint(newDefaultViewpoint)\n  //   }\n  //   getViewpoint()\n  // }, [defaultViewpoint, topic]);\n\n  return (\n    <Card className={classes.root}>\n      <CardActionArea onClick={handleClick}>\n        <CardMedia\n          className={classes.media}\n          image={defaultViewpointUrl}\n          title={topic.markup.topic.title}\n        />\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\n            {topic.markup.topic.title}\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            {topic.markup.topic.description}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      {/*<CardActions>\n              <Button size=\"small\" color=\"primary\">\n                  Open\n              </Button>\n              <Button size=\"small\" color=\"primary\">\n                  Learn More\n              </Button>\n          </CardActions>*/}\n    </Card>\n  )\n}","import { useState } from \"react\";\nimport {\n  makeStyles,\n  Grid,\n  Button,\n  TextField,\n  FormControl,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  button: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n  datBimTitle: {\n    textAlign: \"center\",\n    // color: '#E6464D',\n    textTransform: \"none\",\n  },\n}));\n\nconst { REACT_APP_COMPANY } = process.env;\n\nconst Login = ({ handleSubmit }) => {\n  const classes = useStyles();\n\n  const username = localStorage.getItem(\"email\");\n  const [email, setEmail] = useState(username);\n\n  const handleChange = (event) => {\n    setEmail(event.target.value);\n  };\n\n  let createAccountLink;\n  if (REACT_APP_COMPANY === \"TriDyme\") {\n    createAccountLink = \"https://www.datbim.com/template/espace-client\";\n  } else if (REACT_APP_COMPANY === \"VBMC\") {\n    createAccountLink =\n      \"https://boxboisbim.mydatbim.com/template/espace-client\";\n  } else if (REACT_APP_COMPANY === \"Alliance-Batiment\") {\n    createAccountLink =\n      \"https://alliance-batiment.mydatbim.com/template/espace-client\";\n  } else {\n    createAccountLink =\n    \"https://alliance-batiment.mydatbim.com/template/espace-client\";\n  }\n\n  let lostPasswordLink;\n  if (REACT_APP_COMPANY === \"TriDyme\") {\n    lostPasswordLink = \"https://www.datbim.com/inscription/oublie-mdp\";\n  } else if (REACT_APP_COMPANY === \"VBMC\") {\n    lostPasswordLink = \"https://boxboisbim.mydatbim.com/inscription/oublie-mdp\";\n  } else if (REACT_APP_COMPANY === \"Alliance-Batiment\") {\n    lostPasswordLink =\n      \"https://alliance-batiment.mydatbim.com/inscription/oublie-mdp\";\n  } else {\n    lostPasswordLink =\n    \"https://alliance-batiment.mydatbim.com/template/espace-client\";\n  }\n\n  return (\n    <>\n      <h2 className={classes.datBimTitle}>Open dthX API Connexion</h2>\n      <Grid item xs={12}>\n        <form\n          className={classes.root}\n          noValidate\n          autoComplete=\"off\"\n          onSubmit={handleSubmit}\n        >\n          <FormControl fullWidth className={classes.margin}>\n            <TextField\n              id=\"filled-basic\"\n              label=\"Email\"\n              name=\"email\"\n              variant=\"filled\"\n              value={email}\n              onChange={handleChange}\n            />\n            <TextField\n              type=\"password\"\n              id=\"outlined-basic\"\n              label=\"Mot de passe\"\n              name=\"password\"\n              variant=\"filled\"\n            />\n            <Button type=\"submit\" className={classes.button}>\n              Connexion\n            </Button>\n            <a href={createAccountLink} target=\"_blank\" rel=\"noreferrer\">\n              Créer un compte\n            </a>\n            <a href={lostPasswordLink} target=\"_blank\" rel=\"noreferrer\">\n              Mot de passe oublié?\n            </a>\n          </FormControl>\n        </form>\n      </Grid>\n    </>\n  );\n};\n\nexport default Login;\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  makeStyles,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  CircularProgress,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  datBimCard: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    margin: theme.spacing(1),\n    cursor: \"pointer\",\n    height: \"8em\",\n  },\n  datBimCardTitle: {\n    margin: 0,\n    color: \"white\",\n  },\n  loader: {\n    color: \"inherit\",\n    marginTop: \"80px\",\n  },\n}));\n\nconst PortalList = ({\n  openObjects,\n  setBreadcrumbMap,\n  handleNext,\n  setActiveStep,\n}) => {\n  const classes = useStyles();\n\n  const [portals, setPortals] = useState([]);\n  const [portalsLoader, setPortalsLoader] = useState(false);\n\n  useEffect(() => {\n    const getPortalList = async () => {\n      try {\n        setPortalsLoader(true);\n\n        const portalList = await axios.get(\n          `${process.env.REACT_APP_API_DATBIM}/portals`,\n          {\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          }\n        );\n\n        setPortals(portalList.data.data);\n        setPortalsLoader(false);\n      } catch (error) {\n        setActiveStep(0);\n      }\n    };\n\n    getPortalList();\n  }, []);\n\n  return (\n    <Grid item xs={12}>\n      <Grid container spacing={1}>\n        <Grid item xs={12}>\n          <Typography variant=\"subtitle1\" component=\"h3\">\n            Sélectionnez un portail:\n          </Typography>\n        </Grid>\n        {portalsLoader ? (\n          <Grid container justify=\"center\">\n            <CircularProgress className={classes.loader} />\n          </Grid>\n        ) : (\n          <>\n            {portals?.map((portal) => (\n              <Grid item lg={4}>\n                <Card\n                  key={portal.portal_id}\n                  className={`${classes.root} ${classes.datBimCard}`}\n                >\n                  <CardContent\n                    onClick={() => {\n                      openObjects(portal.portal_id);\n                      setBreadcrumbMap([portal.portal_name]);\n                      handleNext();\n                    }}\n                  >\n                    <Typography\n                      variant=\"h6\"\n                      component=\"h3\"\n                      className={classes.datBimCardTitle}\n                    >{`${portal.portal_name}`}</Typography>\n                    {/* <Typography variant=\"body1\" component=\"body1\" className={classes.datBimCardTitle}>{`url: ${portal.portal_url}`}</Typography> */}\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default PortalList;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { Paper, InputBase, ButtonGroup, Button } from \"@material-ui/core\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport RotateLeftIcon from \"@material-ui/icons/RotateLeft\";\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    height: \"3em\",\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\",\n    // marginBotton: \"2em\",\n    \"&:disabled\": {\n      cursor: \"not-allowed\",\n    },\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1,\n  },\n  iconButton: {\n    border: \"none\",\n    color: \"black\",\n    // \"&:hover\": {\n    //   backgroundColor: \"#E6464D\",\n    //   color: \"white\",\n    // },\n    // \"&:disabled\": {\n    //   border: \"none\",\n    // },\n  },\n}));\n\nconst SearchBar = ({\n  keyword,\n  onChange,\n  placeholder,\n  className,\n  onClickOne,\n  onClickTwo,\n  disabled,\n  input,\n}) => {\n  const classes = useStyles();\n\n  const onKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      if (e.target.value.length === 0) {\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n        onClickOne();\n      }\n    }\n  };\n\n  const onClickOneCheck = () => {\n    // console.log(\"input ==>\", input);\n    if (input.length > 0) {\n      onClickOne();\n    }\n  };\n\n  return (\n    // <Input\n    //     value={keyword}\n    //     placeholder={placeholder}\n    //     onChange={(e) => onChange(e.target.value)}\n    //     className={className}\n    // />\n    <Paper component=\"form\" className={classes.search}>\n      <InputBase\n        disabled={disabled}\n        value={input}\n        className={classes.input}\n        placeholder={placeholder}\n        inputProps={{ \"aria-label\": \"search google maps\" }}\n        onChange={(e) => onChange(e.target.value)}\n        onKeyDown={onKeyDown}\n      />\n      <ButtonGroup aria-label=\"search button group\">\n        <Button\n          className={classes.iconButton}\n          disabled={disabled}\n          onClick={onClickOneCheck}\n        >\n          <SearchIcon />\n        </Button>\n        <Button\n          className={classes.iconButton}\n          disabled={disabled}\n          onClick={onClickTwo}\n        >\n          <RotateLeftIcon />\n        </Button>\n      </ButtonGroup>\n    </Paper>\n  );\n};\n\nexport default SearchBar;\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Grid, CircularProgress } from \"@material-ui/core\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\n\nconst TreeClass = ({ selectedPortal, getobjectsSetsBySelectedClass }) => {\n  const [classListing, setClassListing] = useState({});\n  const [treeClassListLoader, setTreeClassListLoader] = useState(false);\n\n  useEffect(() => {\n    getTreeClassList();\n  }, []);\n\n  const getTreeClassList = async () => {\n    try {\n      setTreeClassListLoader(true);\n      const treeClassList = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/tree-class`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n      // console.log(treeClassList);\n      setClassListing({\n        id: \"ClassList\",\n        name: \"Liste des classes\",\n        children: treeClassList.data,\n      });\n      setTreeClassListLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // async function getObjectsSets() {\n  //   setObjectsSetsListLoader(true);\n  //   const organizations = await axios.get(\n  //     `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/organizations`,\n  //     {\n  //       headers: {\n  //         \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //       },\n  //     }\n  //   );\n\n  //   Promise.allSettled(\n  //     organizations.data.data.map(async (organizationProperty) => {\n  //       return await axios.get(\n  //         `${process.env.REACT_APP_API_DATBIM}/organizations/${organizationProperty.organization_id}/object-sets`,\n  //         {\n  //           headers: {\n  //             \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //           },\n  //         }\n  //       );\n  //     })\n  //   ).then(function (values) {\n  //     const objects = values.reduce((acc, value) => {\n  //       if (value.status === \"fulfilled\") {\n  //         value.value.data.data.map((value) => acc.push(value));\n  //       }\n  //       return acc;\n  //     }, []);\n  //     setObjectsSetsListDefault(objects);\n  //     setObjectsSetsListLoader(false);\n  //   });\n  // }\n\n  const renderTree = (nodes) => (\n    <TreeItem\n      key={nodes.id}\n      nodeId={nodes.id}\n      label={nodes.name}\n      onClick={() => {\n        if (nodes.children.length === 0) {\n          console.log(\"nodes.id\", nodes.id);\n          getobjectsSetsBySelectedClass(nodes.id);\n        }\n      }}\n    >\n      {Array.isArray(nodes.children) &&\n        nodes.children.map((node) => <div>{renderTree(node)}</div>)}\n    </TreeItem>\n  );\n\n  return (\n    <>\n      {treeClassListLoader ? (\n        <Grid container justify=\"center\">\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n      ) : (\n        <>\n          {classListing && (\n            <TreeView\n              aria-label=\"rich object\"\n              defaultCollapseIcon={<ExpandMoreIcon />}\n              defaultExpandIcon={<ChevronRightIcon />}\n              defaultExpanded={[`ClassList`]}\n              sx={{\n                height: 110,\n                flexGrow: 1,\n                maxWidth: 400,\n                overflowY: \"auto\",\n              }}\n            >\n              {console.log(\"classListing\", classListing)}\n              {renderTree(classListing)}\n            </TreeView>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default TreeClass;\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  makeStyles,\n  Grid,\n  Card,\n  CardContent,\n  CircularProgress,\n  Breadcrumbs,\n  Typography,\n  Divider,\n  CardActions,\n  CardActionArea,\n  Chip,\n} from \"@material-ui/core\";\nimport SearchBar from \"../../../../../../../Components/SearchBar\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport TreeClass from \"./TreeClass\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  datBimCard: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    margin: theme.spacing(1),\n    cursor: \"pointer\",\n    // height: \"8em\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n  },\n  datBimCardActionArea: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  datBimCardContent: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    padding: 0,\n  },\n  datBimCardTitle: {\n    fontSize: 12,\n    margin: 0,\n    color: \"white\",\n    fontWeight: \"bold\",\n    padding: \"1.5em 0 0 1.5em\",\n  },\n  datBimCardDesc: {\n    fontSize: 8,\n    margin: 0,\n    // fontStyle: \"italic\",\n  },\n  datBimCardImg: {\n    width: \"100%\",\n    height: \"100%\",\n    marginBottom: \"1em\",\n    maxHeight: \"250px\",\n    objectFit: \"contain\",\n  },\n  button: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n  link: {\n    color: \"inherit\",\n    \"&:hover\": {\n      color: \"textPrimary\",\n      cursor: \"pointer\",\n      textDecoration: \"underline\",\n    },\n  },\n\n  noObjectSetsMessage: {\n    textAlign: \"center\",\n  },\n}));\n\nconst ObjectsSetsList = ({\n  viewer,\n  selectedPortal,\n  setSelectedObjectSet,\n  setSelectedObjectSetName,\n  eids,\n  breadcrumbMap,\n  setBreadcrumbMap,\n  handleNext,\n  setActiveStep,\n}) => {\n  const classes = useStyles();\n\n  const [objectsSetsList, setObjectsSetsList] = useState([]);\n  const [objectsSetsListDefault, setObjectsSetsListDefault] = useState([]);\n  const [objectsSetsListWithEIDS, setObjectsSetsListWithEIDS] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [objectsSetsListLoader, setObjectsSetsListLoader] = useState(false);\n\n  useEffect(() => {\n    getObjectsSetsList();\n  }, [eids]);\n\n  const getObjectsSetsList = () => {\n    setSearchInput(\"\");\n\n    if (eids.length > 0) {\n      getobjectsSetsBySelectedEids();\n    } else {\n      setObjectsSetsList(objectsSetsListDefault);\n      getObjectsSets();\n    }\n  };\n\n  const getObjectsSets = async () => {\n    try {\n      setObjectsSetsListLoader(true);\n\n      if (objectsSetsListDefault && objectsSetsListDefault.length > 0) {\n        setObjectsSetsListLoader(false);\n      } else {\n        const getObjectsSetsList = await axios.get(\n          `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/object-sets`,\n          {\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          }\n        );\n\n        console.log(\"objectsSetsList\", objectsSetsList);\n\n        const objectsSets = getObjectsSetsList.data.data;\n\n        console.log(\"objectsSetsList\", objectsSets);\n\n        setObjectsSetsListDefault(objectsSets);\n        setObjectsSetsList(objectsSets);\n\n        console.log(\"objectsSetsListDefault\", objectsSets);\n        setObjectsSetsListLoader(false);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getobjectsSetsBySelectedClass = async (classId) => {\n    try {\n      setObjectsSetsListLoader(true);\n      const objectsSetsBySelectedClass = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/object-sets/classes/${classId}`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n\n      setObjectsSetsList(objectsSetsBySelectedClass.data.data);\n      setObjectsSetsListWithEIDS(objectsSetsBySelectedClass.data.data);\n      setObjectsSetsListLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getobjectsSetsBySelectedEids = async () => {\n    try {\n      setObjectsSetsListLoader(true);\n      const ifcClass = await viewer.IFC.loader.ifcManager.getIfcType(\n        0,\n        eids[0]\n      );\n      console.log(\"ifcClass\", ifcClass);\n      const treeClassList = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/classes/mapping/${ifcClass}`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n      // console.log(\"treeClassList.data.data\", treeClassList.data.data);\n\n      Promise.allSettled(\n        treeClassList.data.data.map(async (treeClassListElement) => {\n          return await axios.get(\n            `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/object-sets/classes/${treeClassListElement.class_reference_id}`,\n            {\n              headers: {\n                \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n              },\n            }\n          );\n        })\n      ).then(function (values) {\n        const objectsSets = values.reduce((acc, value) => {\n          if (value.status === \"fulfilled\") {\n            value.value.data.data.map((value) => acc.push(value));\n          }\n          return acc;\n        }, []);\n        setObjectsSetsListWithEIDS(objectsSets);\n        setObjectsSetsList(objectsSets);\n        // console.log(\"ObjectsSetsListWithEIDS\", objectsSets);\n        setObjectsSetsListLoader(false);\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const searchObject = (input) => {\n    // console.log(\"input ==>\", input);\n    if (eids.length > 0) {\n      if (objectsSetsListWithEIDS && objectsSetsListWithEIDS.length > 0) {\n        const filtered = objectsSetsListWithEIDS.filter((objectsSets) => {\n          // console.log(\"objectsSetsListWithEIDS\", objectsSetsListWithEIDS);\n          const searchByObjectName = objectsSets.object_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n          const searchByOrganizationName = objectsSets.organization_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n\n          if (searchByObjectName) {\n            // console.log(\"searchByObjectName\", searchByObjectName);\n            return searchByObjectName;\n          } else if (searchByOrganizationName) {\n            return searchByOrganizationName;\n          }\n        });\n        setSearchInput(input);\n        setObjectsSetsList(filtered);\n      } else {\n        setSearchInput(input);\n      }\n    } else {\n      if (objectsSetsListDefault && objectsSetsListDefault.length > 0) {\n        const filtered = objectsSetsListDefault.filter((objectsSets) => {\n          const searchByObjectName = objectsSets.object_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n          const searchByOrganizationName = objectsSets.organization_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n\n          if (searchByObjectName) {\n            return searchByObjectName;\n          } else if (searchByOrganizationName) {\n            return searchByOrganizationName;\n          }\n        });\n        setSearchInput(input);\n        setObjectsSetsList(filtered);\n      }\n    }\n  };\n\n  const getObjectsSetsByKeyWord = async () => {\n    try {\n      setObjectsSetsListLoader(true);\n\n      const organizations = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/organizations`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n\n      Promise.allSettled(\n        organizations.data.data.map(async (organizationProperty) => {\n          return await axios({\n            method: \"get\",\n            url: `${process.env.REACT_APP_API_DATBIM}/organizations/${organizationProperty.organization_id}/object-sets`,\n            params: { search: `${searchInput}` },\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          });\n        })\n      ).then(function (values) {\n        // console.log(\"values\", values);\n        const objectsSets = values.reduce((acc, value) => {\n          if (value.status === \"fulfilled\") {\n            value.value.data.data.map((value) => acc.push(value));\n          }\n          return acc;\n        }, []);\n        // console.log(\"objectsSets\", objectsSets);\n        setObjectsSetsList(objectsSets);\n\n        // console.log(\"objectsSetsListDefault\", objectsSets);\n        setObjectsSetsListLoader(false);\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const resetObjectsSetsList = () => {\n    setSearchInput(\"\");\n    setObjectsSetsList(objectsSetsListDefault);\n\n    if (eids.length > 0) {\n      getobjectsSetsBySelectedEids();\n    }\n  };\n\n  let usedList =\n    (eids.length > 0) & (searchInput.length === 0)\n      ? objectsSetsListWithEIDS\n      : objectsSetsList;\n\n  return (\n    <Grid container spacing={3}>\n      <Grid item xs={12}>\n        <Breadcrumbs\n          separator={<NavigateNextIcon fontSize=\"small\" />}\n          aria-label=\"breadcrumb\"\n        >\n          <Typography\n            className={classes.link}\n            onClick={(e) => setActiveStep(1)}\n          >\n            Portails\n          </Typography>\n          <Typography color=\"textPrimary\">\n            {breadcrumbMap[0].length > 15\n              ? breadcrumbMap[0].slice(0, 15) + \"...\"\n              : breadcrumbMap[0]}\n          </Typography>\n        </Breadcrumbs>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant=\"subtitle1\" component=\"h3\">\n          Sélectionnez une collection d'objets:\n        </Typography>\n      </Grid>\n      <Divider />\n      <Grid item xs={12}>\n        <SearchBar\n          disabled={objectsSetsListLoader === true}\n          input={searchInput}\n          onChange={searchObject}\n          className={classes.searchBar}\n          placeholder=\"Mot clé\"\n          onClickOne={getObjectsSetsByKeyWord}\n          onClickTwo={resetObjectsSetsList}\n        />\n      </Grid>\n      {objectsSetsListLoader ? (\n        <Grid container justify=\"center\">\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n      ) : (\n        <>\n          <Grid item xs={4}>\n            <TreeClass\n              selectedPortal={selectedPortal}\n              getobjectsSetsBySelectedClass={getobjectsSetsBySelectedClass}\n            />\n          </Grid>\n          <Grid item xs={8}>\n            {objectsSetsListLoader ? (\n              <Grid container justify=\"center\">\n                <CircularProgress color=\"inherit\" />\n              </Grid>\n            ) : (\n              <Grid container spacing={1}>\n                {usedList.length === 0 ? (\n                  <Grid item sm={12} className={classes.noObjectSetsMessage}>\n                    Aucune collection trouvée. Veuillez faire une recherche par\n                    mot clé.\n                  </Grid>\n                ) : (\n                  usedList.map((object, index) => (\n                    <Grid item sm={4}>\n                      <Card\n                        key={index}\n                        className={`${classes.root} ${classes.datBimCard}`}\n                      >\n                        <CardActionArea\n                          className={`${classes.datBimCardActionArea}`}\n                        >\n                          <CardContent\n                            className={`${classes.datBimCardContent}`}\n                            onClick={() => {\n                              setSelectedObjectSet(object.object_id);\n                              setSelectedObjectSetName(object.object_name);\n                              setBreadcrumbMap([\n                                ...breadcrumbMap,\n                                object.object_name,\n                              ]);\n                              handleNext();\n                            }}\n                          >\n                            <Typography className={classes.datBimCardTitle}>\n                              {object.object_name}\n                              <br />\n                            </Typography>\n                            <img\n                              className={classes.datBimCardImg}\n                              src={object.img_ref}\n                              alt={object.object_name}\n                            />\n                          </CardContent>\n                        </CardActionArea>\n                        <CardActions>\n                          {/* <Typography className={classes.datBimCardDesc}>\n                                          {object.organization_name}\n                                        </Typography> */}\n                          <Chip\n                            className={classes.datBimCardDesc}\n                            label={`${object.organization_name}`}\n                          />\n                        </CardActions>\n                      </Card>\n                    </Grid>\n                  ))\n                )}\n\n                {objectsSetsList?.meta && (\n                  <Pagination\n                    count={objectsSetsList.meta.current_items}\n                    onChange={(e, value) => getObjectsSetsList()}\n                    variant=\"outlined\"\n                  />\n                )}\n              </Grid>\n            )}\n          </Grid>\n        </>\n      )}\n    </Grid>\n  );\n};\n\nexport default ObjectsSetsList;\n","import { useState } from \"react\";\nimport {\n  Grid,\n  Input,\n  Select,\n  MenuItem,\n  Slider,\n  RadioGroup,\n  Radio,\n  FormControlLabel,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow\n} from \"@material-ui/core\";\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\nfunction isStaticProperty(property_type) {\n  return property_type === \"S\";\n}\n\nfunction toBoolean(property_value) {\n  if (property_value === \"true\" || property_value) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction DefineTypeComponent(type, property, propertyIndex, configureProperty) {\n  let component = null;\n  switch (type) {\n    case \"Réel\":\n      component = (\n        <Input\n          type=\"number\"\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Entier\":\n      component = (\n        <Input\n          type=\"number\"\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Date\":\n      component = (\n        <Input\n          type=\"date\"\n          name=\"text_value\"\n          format=\"DD/MM/YYYY\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Lien\":\n    case \"Texte\":\n    case \"Texte paramétrique\":\n      component = (\n        <Input\n          type=\"text\"\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Liste\":\n      component = (\n        <Select\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        >\n          {property.list_value.map((value, index) => (\n            <MenuItem key={index} value={value}>\n              {value}\n            </MenuItem>\n          ))}\n        </Select>\n      );\n      break;\n    case \"Grid/Tableau\":\n      const { values } = JSON.parse(property.text_value)\n      component = (\n        <TableContainer>\n          <Table style={{ minWidth: 650 }} aria-label=\"simple table\">\n            <TableBody>\n              {values.map((row, index) => (\n                <TableRow\n                  key={`row ${index}`}\n                  style={{ '&:last-child td, &:last-child th': { border: 0 } }}\n                >\n                  {row.map((cell, i) => (\n                    <TableCell key={`cell ${index} ${i}`} component=\"th\" scope=\"row\">\n                      {cell.data}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      );\n      break;\n    case \"Booléen\":\n      component = (\n        <RadioGroup\n          name=\"text_value\"\n          value={`${property.text_value}`}\n          onChange={configureProperty(propertyIndex)}\n          row\n        >\n          <FormControlLabel\n            value=\"true\"\n            control={<Radio />}\n            label=\"OUI\"\n            disabled={isStaticProperty(property.property_type)}\n          />\n          <FormControlLabel\n            value=\"false\"\n            control={<Radio />}\n            label=\"NON\"\n            disabled={isStaticProperty(property.property_type)}\n          />\n        </RadioGroup>\n      );\n      break;\n    case \"Intervalle\":\n      const marks = [\n        {\n          label: `${property.min_interval}`,\n          value: property.min_interval,\n        },\n        {\n          label: `${property.max_interval}`,\n          value: property.max_interval,\n        },\n      ];\n      component = (\n        <Slider\n          disabled={isStaticProperty(property.property_type)}\n          name=\"num_value\"\n          onChange={configureProperty(propertyIndex, \"num_value\")}\n          defaultValue={parseFloat(property.num_value)}\n          getAriaValueText={valuetext}\n          aria-labelledby=\"discrete-slider-custom\"\n          min={parseFloat(property.min_interval)}\n          step={\n            Math.pow(\n              10,\n              Math.floor(\n                Math.log10(property.max_interval - property.min_interval)\n              )\n            ) * 0.1\n          }\n          value={property.num_value}\n          max={parseFloat(property.max_interval)}\n          marks={marks}\n          valueLabelDisplay=\"auto\"\n        />\n      );\n      break;\n    default:\n      console.log(`Sorry, we are out of ${type}.`);\n  }\n\n  return component;\n}\n\nexport default DefineTypeComponent;\n","import { useEffect, useState } from \"react\";\n\nimport {\n  Grid,\n  Button,\n  TableContainer,\n  Table,\n  TableBody,\n  TableRow,\n  TableHead,\n  Paper,\n  TableCell,\n  makeStyles,\n  Input,\n  InputLabel,\n  InputAdornment,\n  Tooltip,\n  IconButton,\n  Checkbox,\n} from \"@material-ui/core\";\nimport Add from \"@material-ui/icons/Add\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport SearchBar from \"../../../../../../../Components/SearchBar/SearchBar.jsx\";\nimport DefineTypeComponent from \"./DefineTypeComponent\";\nimport InfoIcon from \"@mui/icons-material/Info\";\n\nconst useStyles = makeStyles((theme) => ({\n  searchBar: {\n    width: \"100%\",\n    underline: \"black\",\n    margin: \"20px 0px\",\n    \"&:before\": {\n      borderBottom: \"1px solid #E6464D\",\n    },\n    \"&:after\": {\n      borderBottom: `2px solid #E6464D`,\n    },\n  },\n  datBimList: {\n    color: \"white\",\n    \"&:nth-child(odd)\": {\n      backgroundColor: \"#DCDCDC\",\n      opacity: 0.8,\n    },\n  },\n  datBimCardTitle: {\n    margin: 0,\n    color: \"white\",\n  },\n  table: {\n    minWidth: \"100%\",\n  },\n  button: {\n    marginTop: \"10px\",\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n}));\n\nconst PropertyList = ({\n  projectId,\n  setLoader,\n  objSelected,\n  selectedObject,\n  bimData,\n  setBimData,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  addElementsNewProperties,\n  handleShowMarketplace,\n}) => {\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [propertyListDefault, setPropertyListDefault] = useState([]);\n  const [properties, setProperties] = useState([]);\n  const [allChecked, setAllChecked] = useState(true);\n  const history = useHistory();\n  const classes = useStyles();\n\n  function searchProperty(input) {\n    const filtered = propertyListDefault.filter((property) => {\n      return property.property_name.toLowerCase().includes(input.toLowerCase());\n    });\n    setSearchInput(input);\n    setProperties(filtered);\n  }\n\n\n  useEffect(() => {\n    const getPropertiesValues = async () => {\n      try {\n        const { data: dataProp } = await axios.get(\n          `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObject}/properties-values`,\n          {\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          }\n        );\n        //console.log(\"data\", dataProp);\n        const dataPropFilter = dataProp.data.filter(\n          (prop) => prop.property_visibility\n        );\n\n        const dataWithCheckStatus = dataPropFilter.map((property) => {\n          return {\n            ...property,\n            checked: true,\n          };\n        });\n\n        const temporaryFixProperties = dataWithCheckStatus.map((property) => {\n          if (\n            property.data_type_name === \"Entier\" &&\n            property.text_value === \"A saisir\"\n          ) {\n            return {\n              ...property,\n              text_value: 0,\n            };\n          }\n\n          if (property.data_type_name === \"Lien\") {\n            const newLink = property.text_value.replace(\"Https\", \"https\");\n            return {\n              ...property,\n              text_value: newLink,\n            };\n          }\n          // console.log(\"Property =>\", property);\n          return property;\n        });\n\n        setPropertyListDefault(temporaryFixProperties);\n        setProperties(temporaryFixProperties);\n\n        // console.log(\"temporaryFixProperties\", temporaryFixProperties);\n      } catch (err) {\n        console.log(\"error\", err);\n      }\n    };\n\n    getPropertiesValues();\n  }, [selectedObject]);\n\n  const handleCheckedProperties = (e) => {\n    // console.log(`Checkbox id:`, e.target.id);\n    // console.log(`Checkbox check:`, e.target.checked);\n    console.log(\"properties\", properties);\n\n    const index = e.target.id;\n    const checkStatus = e.target.checked;\n\n    const newPropertiesArr = [...properties];\n    newPropertiesArr[index].checked = checkStatus;\n\n    if (!checkStatus) {\n      setAllChecked(false);\n    } else {\n      for (let i = 0; i < properties.length; i++) {\n        if (properties[i].checked === true) {\n          setAllChecked(true);\n        } else {\n          setAllChecked(false);\n          break;\n        }\n      }\n    }\n\n    setProperties(newPropertiesArr);\n  };\n\n  const handleGlobalCheckedProperties = (e) => {\n    const checked = e.target.checked;\n\n    if (!checked) {\n      // console.log(\"properties ==>\", properties);\n      // console.log(\"All checked ==> now to be unchecked\");\n\n      properties.map((property) => {\n        property.checked = false;\n      });\n\n      setAllChecked(false);\n    } else {\n      // console.log(\"properties 2 ==>\", properties);\n      // console.log(\"One or more are unchecked ==> all are now checked\");\n\n      properties.map((property) => {\n        property.checked = true;\n      });\n\n      setAllChecked(true);\n    }\n  };\n\n  const configureProperty = (index, key) => (e, value) => {\n    // console.log(\"Value =>\", value);\n    // console.log(\"index=>\", index);\n\n    // console.log(\"properties\", properties);\n\n    // let keyValue = key ? key : 'text_value';\n    let inputValue = e.target.value;\n\n    let property = properties[index];\n    const newPropertiesArr = [...properties];\n    switch (property.data_type_name) {\n      case \"Intervalle\":\n        newPropertiesArr[index]['num_value'] = inputValue || value;\n        newPropertiesArr[index]['text_value'] = inputValue || value;\n        break;\n      default:\n        newPropertiesArr[index]['text_value'] = inputValue || value;\n        break;\n    }\n    // const newPropertiesArr = [...properties];\n    // newPropertiesArr[index][keyValue] = inputValue || value;\n    // newPropertiesArr[index].value = inputValue || value;\n\n    setProperties(newPropertiesArr);\n  };\n\n\n  const updatePorperty = (property) => {\n    switch (property.data_type_name) {\n      case \"Intervalle\":\n        return {\n          ...property,\n          text_value: property.num_value,\n          value: property.num_value\n        }\n      case \"Grid/Tableau\":\n        const { values } = JSON.parse(property.text_value)\n        const newValues = [];\n        for (let value of values) {\n          newValues.push(`${value[0].data}: ${value[1].data}`)\n        }\n        return {\n          ...property,\n          text_value: newValues.toString(),\n          value: newValues.toString(),\n        }\n      default:\n        return {\n          ...property,\n          value: property.text_value\n        };\n    }\n  }\n\n\n\n  const addElementsDatBimProperties = async (properties, objSelected) => {\n    const filteredProperties = properties.filter(\n      (property) => property.checked\n    );\n\n    const updateProperties = [];\n    for (let property of filteredProperties) {\n      updateProperties.push(updatePorperty(property));\n    }\n\n    console.log('updateProperties', updateProperties)\n    console.log('objSelected', objSelected)\n    const response = await axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_API_DATBIM}/objects/${objSelected}/signing`,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n      },\n      data: updateProperties\n    });\n\n    console.log('data', response.data)\n\n    await addElementsNewProperties({\n      bimData,\n      setBimData,\n      viewer,\n      modelID,\n      expressIDs: eids,\n      properties: response.data.property ? response.data.property : updateProperties,\n    });\n    handleShowMarketplace(\"home\");\n  };\n\n  console.log(\"properties\", properties);\n  return (\n    <TableContainer component={Paper}>\n      {/* <SearchBar\n            input={searchInput}\n            onChange={searchProperty}\n            className={classes.searchBar}\n            placeholder=\"Chercher un Objet\"\n          /> */}\n      <Table className={classes.table} aria-label=\"simple table\">\n        <TableHead>\n          <TableRow className={`${classes.root} ${classes.datBimCardTitle}`}>\n            <TableCell>Propriété</TableCell>\n            <TableCell align=\"center\">Info</TableCell>\n            <TableCell align=\"center\">Valeur</TableCell>\n            <TableCell align=\"center\">Unité</TableCell>\n            {selectedObject ? (\n              <TableCell align=\"center\">\n                Ajouter\n                <Checkbox\n                  defaultChecked\n                  checked={allChecked}\n                  onChange={handleGlobalCheckedProperties}\n                />\n              </TableCell>\n            ) : (\n              \"\"\n            )}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {properties?.map((property, propertyIndex) => (\n            <TableRow\n              key={propertyIndex}\n              className={`${classes.root} ${classes.datBimList}`}\n            >\n              <TableCell width=\"35%\" component=\"th\" scope=\"row\">\n                {property.property_name}\n              </TableCell>\n              <TableCell width=\"10%\" component=\"th\" scope=\"row\">\n                {property.property_definition && (\n                  <Tooltip\n                    title={`${property.property_definition}`}\n                    placement=\"top-start\"\n                  >\n                    <IconButton>\n                      <InfoIcon />\n                    </IconButton>\n                  </Tooltip>\n                )}\n              </TableCell>\n              <TableCell width=\"35%\" align=\"right\">\n                {DefineTypeComponent(\n                  property.data_type_name,\n                  property,\n                  propertyIndex,\n                  configureProperty\n                )}\n              </TableCell>\n              <TableCell width=\"10%\" align=\"center\">\n                {property.unit}\n              </TableCell>\n              <TableCell width=\"10%\" align=\"center\">\n                <Checkbox\n                  defaultChecked\n                  checked={properties[propertyIndex].checked}\n                  onChange={handleCheckedProperties}\n                  id={propertyIndex}\n                />\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n      <Grid row align=\"right\">\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            addElementsDatBimProperties(properties, selectedObject);\n          }}\n          color=\"primary\"\n          className={classes.button}\n        >\n          Ajouter\n        </Button>\n      </Grid>\n    </TableContainer>\n  );\n};\n\nexport default PropertyList;\n","import { useState } from \"react\";\nimport { Input, Select, MenuItem, Slider, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  datBIMColor: {\n    color: \"#E6464D\",\n  },\n  slider: {\n    marginTop: \"25px\",\n  },\n}));\n\nconst valuetext = (value) => {\n  return `${value}`;\n};\n\nconst isStaticSelector = (selector_type) => {\n  return selector_type === \"S\";\n};\n\nconst DefineTypeComponent = ({\n  type,\n  selector,\n  selectorsRequest,\n  setSelectorsRequest,\n  getObjectsOfAdvancedSearch,\n}) => {\n  const classes = useStyles();\n\n  const [selectedRangedValues, setSelectedRangedValues] = useState([\n    selector.value_min,\n    selector.value_max,\n  ]);\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const handleChangeIntervalCommitted = (event, selectorIndex) => {\n    const newSelectorRequest = [...selectorsRequest];\n    let checkExist = false;\n\n    selectorsRequest.forEach((select, index) => {\n      if (select.id === selector.id) {\n        checkExist = true;\n        newSelectorRequest.splice(index, 1, {\n          id: select.id,\n          type: select.type,\n          value: selectorIndex,\n        });\n      }\n    });\n\n    if (!checkExist) {\n      newSelectorRequest.push({\n        id: selector.id,\n        type: selector.type,\n        value: selectorIndex,\n      });\n    }\n    setSelectorsRequest(newSelectorRequest);\n    //console.log(\"selectorsRequest\", newSelectorRequest);\n    getObjectsOfAdvancedSearch(newSelectorRequest);\n    //console.log(\"selectorsIndex ==>\", selectorIndex);\n  };\n\n  const updateSelectedRangedValues = (event, selectorIndex) => {\n    //console.log(\"selectorIndex ==>\", selectorIndex);\n    setSelectedRangedValues(selectorIndex);\n  };\n\n  const handleChangeDefinitionCommitted = (event) => {\n    const newSelectorRequest = [...selectorsRequest];\n    let checkExist = false;\n\n    selectorsRequest.forEach((select, index) => {\n      if (select.id === selector.id) {\n        checkExist = true;\n        newSelectorRequest.splice(index, 1, {\n          id: select.id,\n          type: select.type,\n          value_min: selectedRangedValues[0],\n          value_max: selectedRangedValues[1],\n        });\n      }\n    });\n\n    if (!checkExist) {\n      newSelectorRequest.push({\n        id: selector.id,\n        type: selector.type,\n        value_min: selectedRangedValues[0],\n        value_max: selectedRangedValues[1],\n      });\n    }\n    setSelectorsRequest(newSelectorRequest);\n    //console.log(\"selectorsRequest\", newSelectorRequest);\n    getObjectsOfAdvancedSearch(newSelectorRequest);\n    //console.log(\"selectorsIndex ==>\", selectorIndex);\n  };\n\n  const searchSubmit = (event, selectorIndex) => {\n    // console.log(\"selectorsRequest\", selectorsRequest);\n    // console.log(\"event\", event);\n    // console.log(\"selectorIndex\", selectorIndex);\n    const newSelectorRequest = [...selectorsRequest];\n    let checkExist = false;\n\n    selectorsRequest.forEach((select, index) => {\n      if (select.id === selector.id) {\n        checkExist = true;\n        newSelectorRequest.splice(index, 1, {\n          id: select.id,\n          type: select.type,\n          value:\n            inputValue && inputValue.length > 0\n              ? inputValue\n              : selectorIndex.props.value,\n        });\n      }\n    });\n\n    if (!checkExist) {\n      newSelectorRequest.push({\n        id: selector.id,\n        type: selector.type,\n        value:\n          inputValue && inputValue.length > 0\n            ? inputValue\n            : selectorIndex.props.value,\n      });\n    }\n    setSelectorsRequest(newSelectorRequest);\n    // console.log(\"selectorsRequest\", newSelectorRequest);\n    // console.log(\"selectorsIndex ==>\", selectorIndex);\n  };\n\n  const marks = [\n    {\n      label: `${selector.value_min}`,\n      value: selector.value_min,\n    },\n    {\n      label: `${selector.value_max}`,\n      value: selector.value_max,\n    },\n  ];\n\n  let component = null;\n  switch (type) {\n    // case 'Réel':\n    //     component = <Input type=\"number\" name=\"text_value\" fullWidth value={selector.text_value} disabled={isStaticSelector(selector.selector_type)} onChange={configureSelector(selectorIndex)} />\n    //     break;\n    // case 'Entier':\n    //     component = <Input type=\"number\" name=\"text_value\" fullWidth value={selector.text_value} disabled={isStaticSelector(selector.selector_type)} onChange={configureSelector(selectorIndex)} />\n    //     break;\n    // case 'Date':\n    //     component = <Input type=\"date\" name=\"text_value\" format=\"DD/MM/YYYY\" fullWidth value={selector.text_value} disabled={isStaticSelector(selector.selector_type)} onChange={configureSelector(selectorIndex)} />\n    //     break;\n    // case 'Lien':\n    case \"text\":\n      component = (\n        <Input\n          type=\"text\"\n          name=\"text_value\"\n          fullWidth\n          value={selector.text_value}\n          disabled={isStaticSelector(selector.selector_type)}\n          onChange={setInputValue}\n        />\n      );\n      break;\n    case \"list\":\n      component = (\n        <Select\n          name=\"text_value\"\n          fullWidth\n          value={selector.text_value}\n          disabled={isStaticSelector(selector.selector_type)}\n          onChange={searchSubmit}\n        >\n          {selector.list_value.map((value, index) => (\n            <MenuItem key={index} value={value}>\n              {value}\n            </MenuItem>\n          ))}\n        </Select>\n      );\n      break;\n    // case \"booléen\":\n    //   component = (\n    //     <RadioGroup\n    //       name=\"text_value\"\n    //       value={selector.text_value}\n    //       disabled={isStaticSelector(selector.selector_type)}\n    //       //   onChange={configureSelector(selectorIndex)}\n    //       row\n    //     >\n    //       <FormControlLabel value=\"1\" control={<Radio />} label=\"OUI\" />\n    //       <FormControlLabel value=\"0\" control={<Radio />} label=\"NON\" />\n    //     </RadioGroup>\n    //   );\n    //   break;\n    case \"interval\":\n      component = (\n        <Slider\n          className={`${classes.slider} ${classes.datBIMColor}`}\n          defaultValue={selector.value_min}\n          getAriaValueText={valuetext}\n          aria-labelledby=\"discrete-slider\"\n          valueLabelDisplay=\"auto\"\n          step={(selector.value_max - selector.value_min) / 100}\n          marks={marks}\n          min={selector.value_min}\n          max={selector.value_max}\n          onChangeCommitted={handleChangeIntervalCommitted}\n        />\n      );\n      break;\n\n    case \"definition\":\n      console.log('definition', selector);\n      console.log('selector.value_min', parseInt(selector.value_min));\n\n      component = (\n        <Slider\n          className={`${classes.slider} ${classes.datBIMColor}`}\n          name=\"text_value\"\n          getAriaValueText={valuetext}\n          aria-labelledby=\"range-slider\"\n          valueLabelDisplay=\"auto\"\n          defaultValue={selectedRangedValues}\n          step={(selector.value_max - selector.value_min) / 100}\n          marks={marks}\n          value={selectedRangedValues}\n          min={selector.value_min}\n          max={selector.value_max}\n          onChange={updateSelectedRangedValues}\n          onChangeCommitted={handleChangeDefinitionCommitted}\n        />\n      );\n      break;\n    default:\n      console.log(`Sorry, we are out of ${type}.`);\n  }\n\n  return component;\n};\n\nexport default DefineTypeComponent;\n","import {\n  Grid,\n  TableContainer,\n  Table,\n  TableBody,\n  TableRow,\n  Paper,\n  CircularProgress,\n  TableCell,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Typography,\n  Button\n} from \"@material-ui/core\";\n\nimport DefineTypeComponent from \"./DefineTypeComponent\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport React from \"react\";\n\n\n\nconst SelectionComponent = ({\n  selectors,\n  selectorsLoader,\n  getObjectsOfAdvancedSearch,\n  selectorsRequest,\n  setSelectorsRequest,\n  resetSelectors\n}) => {\n  // const classes = useStyles();\n\n\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>Sélection</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        {selectorsLoader ? (\n          <Grid container justify=\"center\">\n            <CircularProgress color=\"inherit\" />\n          </Grid>\n        ) : (\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              {selectors && selectors.length > 0 ? (\n                <TableContainer component={Paper}>\n                  <Table aria-label=\"simple table\">\n                    <TableBody>\n                      {selectors?.map((selector, selectorIndex) => (\n                        <TableRow key={selector.id}>\n                          <TableCell width=\"40%\" component=\"th\" scope=\"row\">\n                            {selector.name}\n                          </TableCell>\n                          <TableCell width=\"40%\" align=\"right\">\n                            {DefineTypeComponent({\n                              type: selector.type,\n                              selector,\n                              selectorsRequest,\n                              setSelectorsRequest,\n                              getObjectsOfAdvancedSearch,\n                            })}\n                          </TableCell>\n                          <TableCell width=\"10%\" align=\"center\">\n                            {selector.unit}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              ) : (\n                <Typography>Aucun sélecteur disponible</Typography>\n              )}\n            </Grid>\n            <Grid item xs={12} style={{ textAlign: 'right' }}>\n              <Button\n                variant=\"contained\"\n                onClick={resetSelectors}\n                color=\"primary\"\n                style={{ backgroundColor: \"#E6464D\", color: \"white\" }}\n              >\n                Réinitialiser\n              </Button>\n            </Grid>\n          </Grid>\n        )}\n      </AccordionDetails>\n    </Accordion>\n  );\n};\n\nexport default SelectionComponent;\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  makeStyles,\n  Grid,\n  CircularProgress,\n  Typography,\n  Breadcrumbs,\n  Divider,\n} from \"@material-ui/core\";\nimport PropertyList from \"../PropertyList/PropertyList\";\nimport SelectionComponent from \"./SelectionComponent\";\n\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport SearchBar from \"../../../../../../../Components/SearchBar\";\n\nconst useStyles = makeStyles((theme) => ({\n  link: {\n    color: \"inherit\",\n    \"&:hover\": {\n      color: \"textPrimary\",\n      cursor: \"pointer\",\n      textDecoration: \"underline\",\n    },\n  },\n  button: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n}));\n\nconst ObjectList = ({\n  bimData,\n  setBimData,\n  projectId,\n  objSelected,\n  addElementsNewProperties,\n  selectedObject,\n  selectedObjectSet,\n  setSelectedObject,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  breadcrumbMap,\n  handleShowMarketplace,\n  setActiveStep,\n}) => {\n  const classes = useStyles();\n\n  const [searchBarInput, setSearchBarInput] = useState(\"\");\n  const [selectors, setSelectors] = useState([]);\n  const [selectorsRequest, setSelectorsRequest] = useState([]);\n  const [selectorsLoader, setSelectorsLoader] = useState(false);\n  const [objectsLoader, setObjectsLoader] = useState(false);\n  const [objectListing, setObjectListing] = useState({});\n  const [selectedObjectName, setSelectedObjectName] = useState(\"\");\n\n  // const classes = await axios.get(\n  //   `${process.env.REACT_APP_API_DATBIM}/classes/mapping/${typeProperties}`,\n  //   {\n  //     headers: {\n  //       \"content-type\": \"application/json\",\n  //       \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //     },\n  //   }\n  // );\n\n  useEffect(() => {\n    getSelectorsOfObjectSet();\n    getObjectsOfSelectedObject();\n  }, []);\n\n  const getSelectorsOfObjectSet = async () => {\n    try {\n      setSelectorsLoader(true);\n      const selectorsOfObjectSet = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObjectSet}/get-selector`,\n        {\n          headers: {\n            \"content-type\": \"application/json\",\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n      // console.log(\"selectorsOfObjectSet.data\", selectorsOfObjectSet.data);\n      setSelectors(selectorsOfObjectSet.data);\n      setSelectorsLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getObjectsOfAdvancedSearch = async (selectorsRequest) => {\n    try {\n      setSelectorsLoader(true);\n      setObjectsLoader(true);\n      // console.log(\"selectorsRequest ==>\", selectorsRequest);\n      const objectsOfAdvancedSearch = await axios({\n        method: \"post\",\n        url: `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObjectSet}/search-on-selector?tree=1`,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n        },\n        data: {\n          keyword: searchBarInput,\n          property: selectorsRequest,\n        },\n      });\n\n      setSelectors(objectsOfAdvancedSearch.data.search);\n      // console.log(\n      //   \"objectsListOfAdvancedSearch.data.result ==>\",\n      //   objectsOfAdvancedSearch.data.result\n      // );\n      setObjectListing({\n        id: \"FiltredObjects\",\n        name: \"Liste des objets filtrés\",\n        children: objectsOfAdvancedSearch.data.result,\n      });\n      setSelectorsLoader(false);\n      setObjectsLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getObjectsOfSelectedObject = async () => {\n    try {\n      setObjectsLoader(true);\n\n      const treeOfObjectSet = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObjectSet}/tree-structure`,\n        {\n          headers: {\n            \"content-type\": \"application/json\",\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n\n      setObjectListing(treeOfObjectSet.data);\n      //console.log(\"objectListing ==>\", treeOfObjectSet.data);\n\n      setObjectsLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // const getObjects = async (typeProperties, selectedPage) => {\n  //   const classes = await axios.get(\n  //     `${process.env.REACT_APP_API_DATBIM}/classes/mapping/${typeProperties}`,\n  //     {\n  //       headers: {\n  //         \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //       },\n  //     }\n  //   );\n\n  //   Promise.all(\n  //     classes.data.properties.map(async (classProperty) => {\n  //       return await axios.get(\n  //         `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/objects/${classProperty.class_reference_id}`,\n  //         {\n  //           headers: {\n  //             \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //           },\n  //         }\n  //       );\n  //     })\n  //   ).then(function (values) {\n  //     const objects = values.reduce((acc, value) => {\n  //       if (value.data.properties) {\n  //         return acc.concat(value.data.properties);\n  //       }\n\n  //       return acc;\n  //     }, []);\n  //     setObjectListDefault(objects);\n  //     setObjects(objects);\n  //     setObjectsLoader(false);\n  //   });\n  // }\n\n  // const searchObject = (input) => {\n  //   if (objectListDefault && objectListDefault.length > 0) {\n  //     const filtered = objectListDefault.filter((object) => {\n  //       const searchByObjectName = object.object_name\n  //         .toLowerCase()\n  //         .includes(input.toLowerCase());\n  //       const searchByOrganizationName = object.organization_name\n  //         .toLowerCase()\n  //         .includes(input.toLowerCase());\n\n  //       if (searchByObjectName) {\n  //         return searchByObjectName;\n  //       } else if (searchByOrganizationName) {\n  //         return searchByOrganizationName;\n  //       }\n  //     });\n  //     setSearchInput(input);\n  //     setObjects(filtered);\n  //   }\n  // }\n\n  const handleChangeKeyword = (value) => {\n    console.log(value);\n    setSearchBarInput(value);\n  };\n\n  const resetSelectors = () => {\n    setSearchBarInput(\"\");\n    setSelectorsRequest([]);\n    getSelectorsOfObjectSet();\n    getObjectsOfSelectedObject();\n    setSelectedObject(null);\n  };\n\n  const childRenderTree = ([renderedChildren, count], node) => {\n    const [renderedChild, newCount] = renderTree(node, count);\n    return [renderedChildren.concat(<div>{renderedChild}</div>), newCount];\n  };\n\n  const renderTree = (nodes, count) => {\n    const [children, newCount] =\n      Array.isArray(nodes.children) && nodes.children.length > 0\n        ? nodes.children.reduce(childRenderTree, [[], count])\n        : [null, count + 1];\n    return [\n      <TreeItem\n        key={nodes.id}\n        nodeId={nodes.id}\n        label={nodes.name}\n        onClick={() => {\n          setSelectedObject(nodes.id);\n          setSelectedObjectName(nodes.name);\n        }}\n      >\n        {children}\n      </TreeItem>,\n      newCount,\n    ];\n  };\n\n  const getExpandedNodes = async (list, node) => {\n    list.push(`${node.id}`);\n    if (node.children && node.children.length > 0) {\n      node.children.forEach((child) => {\n        getExpandedNodes(list, child);\n      });\n    }\n  };\n\n  let listing = null;\n\n  if (objectListing) {\n    const [tree, count] = renderTree(objectListing, 0);\n    let selectedObjectListing = [];\n    if (objectListing.id === \"FiltredObjects\") {\n      getExpandedNodes(selectedObjectListing, objectListing);\n      console.log(\"selectedObjectListing\", selectedObjectListing);\n    }\n\n    console.log(\"objectListing\", objectListing);\n    console.log(\"selectedObjectListing\", selectedObjectListing);\n    listing = (\n      <Grid item xs={12}>\n        <Typography>Objets trouvés: {count}</Typography>\n        <TreeView\n          aria-label=\"rich object\"\n          defaultCollapseIcon={<ExpandMoreIcon />}\n          // defaultExpanded={\n          //   objectListing.id === \"FiltredObjects\"\n          //     ? [`${objectListing.id}`, `${objectListing.children[0].id}`]\n          //     : [`${objectListing.id}`]\n          // }\n          defaultExpanded={\n            objectListing.id === \"FiltredObjects\"\n              ? selectedObjectListing\n              : [`${objectListing.id}`]\n          }\n          defaultExpandIcon={<ChevronRightIcon />}\n          sx={{\n            height: 1100,\n            flexGrow: 1,\n            maxWidth: 400,\n            overflowY: \"auto\",\n          }}\n        >\n          {tree}\n        </TreeView>\n      </Grid>\n    );\n  }\n\n  return (\n    <>\n      <Grid container spacing={3}>\n        <Grid item xs={12}>\n          <Breadcrumbs\n            separator={<NavigateNextIcon fontSize=\"small\" />}\n            aria-label=\"breadcrumb\"\n          >\n            <Typography\n              href=\"/\"\n              className={classes.link}\n              onClick={(e) => setActiveStep(1)}\n            >\n              Portails\n            </Typography>\n            <Typography\n              href=\"/\"\n              className={classes.link}\n              onClick={(e) => setActiveStep(2)}\n            >\n              {breadcrumbMap[0].length > 15\n                ? breadcrumbMap[0].slice(0, 15) + \"...\"\n                : breadcrumbMap[0]}\n            </Typography>\n            <Typography color={selectedObjectName ? \"inherit\" : \"textPrimary\"}>\n              {breadcrumbMap[1]}\n            </Typography>\n            {/* <Typography color={selectedObjectName ? \"textPrimary\" : \"inherit\"}>\n              {selectedObject &&\n                (selectedObjectName.length > 20\n                  ? selectedObjectName.slice(0, 20) + \"...\"\n                  : selectedObjectName)}\n            </Typography> */}\n          </Breadcrumbs>\n        </Grid>\n\n        <Grid item xs={12}>\n          <Typography variant=\"subtitle1\" component=\"h3\">\n            {`Sélectionnez un objet: ${selectedObjectName}`}\n          </Typography>\n        </Grid>\n\n        <Grid item xs={12}>\n          <SearchBar\n            disabled={objectsLoader === true}\n            input={searchBarInput}\n            onChange={handleChangeKeyword}\n            className={classes.searchBar}\n            placeholder=\"Mot clé\"\n            onClickOne={() => getObjectsOfAdvancedSearch(selectorsRequest)}\n            onClickTwo={resetSelectors}\n          />\n        </Grid>\n        <Divider />\n\n        <Grid item sm={5}>\n          {objectsLoader ? (\n            <Grid container justify=\"center\">\n              <CircularProgress color=\"inherit\" />\n            </Grid>\n          ) : (\n            <>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <SelectionComponent\n                    zIndex=\"2\"\n                    selectors={selectors}\n                    selectorsLoader={selectorsLoader}\n                    getObjectsOfAdvancedSearch={getObjectsOfAdvancedSearch}\n                    selectorsRequest={selectorsRequest}\n                    setSelectorsRequest={setSelectorsRequest}\n                    resetSelectors={resetSelectors}\n                  />\n                </Grid>\n                {listing}\n              </Grid>\n\n              {/* {objects?.meta && (\n                  <Pagination\n                    count={objects.meta.current_items}\n                    onChange={(e, value) => getObjects(typeProperties, value)}\n                    variant=\"outlined\"\n                  />\n                )} */}\n            </>\n          )}\n        </Grid>\n\n        <Grid item sm={7}>\n          <PropertyList\n            classes={classes}\n            projectId={projectId}\n            objSelected={objSelected}\n            selectedObject={selectedObject}\n            bimData={bimData}\n            setBimData={setBimData}\n            viewer={viewer}\n            modelID={modelID}\n            eids={eids}\n            setEids={setEids}\n            addElementsNewProperties={addElementsNewProperties}\n            handleShowMarketplace={handleShowMarketplace}\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default ObjectList;\n","import { useState, useEffect } from \"react\";\nimport {\n  Grid,\n  makeStyles,\n  Typography,\n  Step,\n  StepLabel,\n  withStyles,\n  Stepper,\n} from \"@material-ui/core\";\nimport {\n  Alert\n} from \"@mui/material\";\nimport StepConnector from \"@material-ui/core/StepConnector\";\nimport clsx from \"clsx\";\nimport Check from \"@material-ui/icons/Check\";\nimport Login from \"./Components/Login/Login\";\nimport PortalList from \"./Components/PortalList/PortalList\";\nimport ObjectsSetsList from \"./Components/ObjectsSetsList/ObjectsSetsList\";\nimport ObjectList from \"./Components/ObjectList/ObjectList\";\nimport axios from \"axios\";\nimport KeyboardBackspaceIcon from \"@material-ui/icons/KeyboardBackspace\";\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  button: {\n    fontSize: 40,\n    borderRadius: \"10%\",\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n      cursor: \"pointer\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n  headerButton: {\n    // fontSize: 30,\n    borderRadius: \"50%\",\n    color: \"#E6464D\",\n    \"&:hover\": {\n      color: \"white\",\n      backgroundColor: \"#E6464D\",\n      cursor: \"pointer\",\n    },\n  },\n  navigationBar: {\n    margin: 0,\n    bottom: 0,\n    width: \"100%\",\n    backgroundColor: \"white\",\n    padding: \"10px\",\n  },\n  modal: {\n    display: \"flex\",\n    padding: theme.spacing(1),\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  modalDatBim: {\n    width: \"50%\",\n    height: \"70%\",\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflow: \"hidden scroll\",\n    position: \"relative\",\n  },\n  datBimCard: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    margin: theme.spacing(1),\n    cursor: \"pointer\",\n    height: \"8em\",\n  },\n  datBimTitle: {\n    textAlign: \"center\",\n    textTransform: \"none\",\n  },\n  datBimCardTitle: {\n    margin: 0,\n    color: \"white\",\n  },\n  datBimFooterCard: {\n    display: \"block\",\n    textAlign: \"right\",\n  },\n  datBimCardButton: {\n    textAlign: \"right\",\n    color: \"white\",\n  },\n  accordionDetails: {\n    display: \"block\",\n  },\n  datBimIcon: {\n    width: \"3em\",\n  },\n}));\n\nconst useQontoStepIconStyles = makeStyles({\n  root: {\n    color: \"#E6464D\",\n    display: \"flex\",\n    height: 22,\n    alignItems: \"right\",\n  },\n  active: {\n    color: \"#E6464D\",\n  },\n  circle: {\n    width: 8,\n    height: 8,\n    borderRadius: \"50%\",\n    backgroundColor: \"currentColor\",\n  },\n  completed: {\n    color: \"#E6464D\",\n    zIndex: 1,\n    fontSize: 18,\n  },\n});\n\nconst QontoConnector = withStyles({\n  alternativeLabel: {\n    top: 10,\n    left: \"calc(-50% + 16px)\",\n    right: \"calc(50% + 16px)\",\n  },\n  active: {\n    \"& $line\": {\n      borderColor: \"#E6464D\",\n    },\n  },\n  completed: {\n    \"& $line\": {\n      borderColor: \"#E6464D\",\n    },\n  },\n  line: {\n    borderColor: \"#eaeaf0\",\n    borderTopWidth: 3,\n    borderRadius: 1,\n  },\n})(StepConnector);\n\nconst DatBimApi = ({\n  bimData,\n  setBimData,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  addElementsNewProperties,\n  handleShowMarketplace, s\n}) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [breadcrumbMap, setBreadcrumbMap] = useState([]);\n  const [selectedPortal, setSelectedPortal] = useState(null);\n  const [selectedObjectSet, setSelectedObjectSet] = useState(null);\n  const [selectedObjectSetName, setSelectedObjectSetName] = useState(null);\n  const [selectedObject, setSelectedObject] = useState(null);\n  const [validation, setValidation] = useState({\n    status: true,\n    message: 'Connected',\n  });\n\n  useEffect(() => {\n    const init = async () => {\n      const token = sessionStorage.getItem(\"token\");\n      if (token) {\n        handleNext();\n      }\n    };\n    init();\n  }, []);\n\n  const steps = getSteps();\n  const classes = useStyles();\n\n  function QontoStepIcon(props) {\n    const classes = useQontoStepIconStyles();\n    const { active, completed } = props;\n\n    return (\n      <div\n        className={clsx(classes.root, {\n          [classes.active]: active,\n        })}\n      >\n        {completed ? (\n          <Check className={classes.completed} />\n        ) : (\n          <div className={classes.circle} />\n        )}\n      </div>\n    );\n  }\n\n  function getSteps() {\n    return [\"Connexion\", \"Portails\", \"Collections d'objets\", \"Objets\"];\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const data = new FormData(e.target);\n    localStorage.setItem(\"email\", data.get(\"email\"));\n\n    axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_API_DATBIM}/auth-token`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n      data: {\n        entry_mode: \"string\",\n        ip: \"string\",\n        lang: \"fr\",\n        local_at: \"string\",\n        login: `${data.get(\"email\")}`,\n        password: `${data.get(\"password\")}`,\n        service: \"string\",\n      },\n    })\n      .then((r) => {\n        console.log(\"TOKEN\", r.data);\n        sessionStorage.setItem(\"token\", r.data.token);\n        setValidation({\n          status: true,\n          message: 'Connecté'\n        })\n        handleNext();\n      })\n      .catch((error) => {\n        console.log('error', error);\n        setValidation({\n          status: false,\n          message: 'Erreur de connexion'\n        })\n        setActiveStep(0);\n      });\n  };\n\n  const handleDisconnect = async () => {\n    sessionStorage.setItem(\"token\", null);\n    setActiveStep(0);\n  };\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  function openObjects(id) {\n    setSelectedPortal(id);\n  }\n\n  function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return <Login handleSubmit={handleSubmit} />;\n      case 1:\n        return (\n          <PortalList\n            openObjects={openObjects}\n            setSelectedPortal={setSelectedPortal}\n            handleNext={handleNext}\n            breadcrumbMap={breadcrumbMap}\n            setBreadcrumbMap={setBreadcrumbMap}\n            setActiveStep={setActiveStep}\n          />\n        );\n      case 2:\n        return (\n          <ObjectsSetsList\n            selectedPortal={selectedPortal}\n            setSelectedObjectSet={setSelectedObjectSet}\n            setSelectedObjectSetName={setSelectedObjectSetName}\n            viewer={viewer}\n            eids={eids}\n            breadcrumbMap={breadcrumbMap}\n            setBreadcrumbMap={setBreadcrumbMap}\n            handleNext={handleNext}\n            setActiveStep={setActiveStep}\n          />\n        );\n      case 3:\n        return (\n          <ObjectList\n            selectedObject={selectedObject}\n            selectedObjectSet={selectedObjectSet}\n            selectedObjectSetName={selectedObjectSetName}\n            setSelectedObject={setSelectedObject}\n            handleNext={handleNext}\n            selectedPortal={selectedPortal}\n            // typeProperties={window.objProperties.type}\n            typeProperties={\"IfcWall\"}\n            bimData={bimData}\n            setBimData={setBimData}\n            viewer={viewer}\n            modelID={modelID}\n            eids={eids}\n            setEids={setEids}\n            addElementsNewProperties={addElementsNewProperties}\n            handleShowMarketplace={handleShowMarketplace}\n            breadcrumbMap={breadcrumbMap}\n            setBreadcrumbMap={setBreadcrumbMap}\n            setActiveStep={setActiveStep}\n          />\n        );\n      default:\n        return \"Unknown step\";\n    }\n  }\n\n  return (\n    <>\n      <Grid container>\n        <Grid item xs={6} style={{ textAlign: \"left\" }}>\n          {activeStep > 0 && (\n            <KeyboardBackspaceIcon\n              disabled={activeStep === 0}\n              onClick={handleBack}\n              className={classes.headerButton}\n            />\n          )}\n        </Grid>\n        <Grid item xs={6} style={{ textAlign: \"right\" }}>\n          {activeStep > 0 && (\n            <PowerSettingsNewIcon\n              className={classes.headerButton}\n              onClick={handleDisconnect}\n            />\n          )}\n        </Grid>\n      </Grid>\n      <Stepper\n        alternativeLabel\n        activeStep={activeStep}\n        connector={<QontoConnector />}\n      >\n        {steps.map((label) => (\n          <Step key={label}>\n            <StepLabel StepIconComponent={QontoStepIcon}>{label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n      {/* <div className={classes.navigationBar}>\n        <Grid container>\n          <Grid item xs={6}>\n            {activeStep > 0 && (\n              <Button\n                disabled={activeStep === 0}\n                onClick={handleBack}\n                className={classes.button}\n              >\n                Back\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n      </div> */}\n      <Typography className={classes.instructions}>\n        {getStepContent(activeStep)}\n      </Typography>\n      {(!validation.status && activeStep === 0) &&\n        <Grid item xs={12}>\n          <Alert severity={'error'}>{`${validation.message}`}</Alert>\n        </Grid>\n      }\n    </>\n  );\n};\n\nexport default DatBimApi;\n","import React, { useState } from 'react';\nimport {\n  Grid,\n  Button,\n  TextField,\n  FormControl,\n  makeStyles,\n  Card,\n  CardHeader,\n  CardActionArea,\n  CardContent,\n  Avatar,\n  Badge,\n  Typography\n} from '@material-ui/core';\nimport DropBoxLogo from './img/DropBoxLogo.jpg';\nimport DropboxChooser from 'react-dropbox-chooser';\n\nconst {\n  REACT_APP_DROPBOX_APP_KEY\n} = process.env;\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\nconst DropBox = ({\n  viewer,\n  onDrop\n}) => {\n  const [selectedApp, setSelectedApp] = useState({\n    name: 'DropBox',\n    img: DropBoxLogo,\n    type: 'storage',\n  })\n\n  async function handleSuccess(files) {\n    const rawResponse = await fetch(files[0].link, {\n      mode: 'no-cors'\n    });\n    const result = await rawResponse.text();\n    const ifcBlob = new Blob([result], { type: 'text/plain' });\n    const file = new File([ifcBlob], 'ifcFile');\n    onDrop({ files: [file], viewer });\n  }\n\n  return (\n    <>\n      <Grid container>\n        {/* <Grid item xs={3} /> */}\n        <Grid item xs={12}>\n          <DropboxChooser\n            appKey={REACT_APP_DROPBOX_APP_KEY}\n            success={handleSuccess}\n            cancel={() => console.log('closed')}\n            multiselect={false}\n            extensions={['.ifc']}\n          >\n            <Card\n            >\n              <CardActionArea\n              >\n                <CardHeader\n                  avatar={\n                    <Avatar\n                      aria-label=\"recipe\"\n                      src={selectedApp.img}\n                      alt={selectedApp.name}\n                      title={selectedApp.name}\n                    />\n                  }\n                  title={selectedApp.name}\n                  subheader={<Badge color=\"success\" pill>{selectedApp.type}</Badge>}\n                />\n                {/* <CardContent>\n                  <Typography\n                    variant=\"h4\"\n                    color=\"textSecondary\"\n                    component=\"h4\"\n                  >\n                    {'Connexion'}\n                  </Typography>\n                </CardContent> */}\n              </CardActionArea>\n            </Card>\n          </DropboxChooser>\n          {/* <Grid item xs={3} /> */}\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default DropBox;\n\n","import { Tooltip, Fab } from \"@material-ui/core\";\n\nconst ToolTipsElem = ({\n  title,\n  placement,\n  disabled,\n  className,\n  onClick,\n  children\n}) => {\n  return (\n    <Tooltip arrow title={title} placement={placement}>\n      <Fab size=\"small\" className={className} onClick={onClick} disabled={disabled}>\n        {children}\n      </Fab>\n    </Tooltip>\n  );\n};\n\nexport default ToolTipsElem;\n","var _defs, _sodipodi$namedview, _metadata, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTracimLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"xmlns:dc\": \"http://purl.org/dc/elements/1.1/\",\n    \"xmlns:cc\": \"http://creativecommons.org/ns#\",\n    \"xmlns:rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"xmlns:svg\": \"http://www.w3.org/2000/svg\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    \"xmlns:sodipodi\": \"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\",\n    \"xmlns:inkscape\": \"http://www.inkscape.org/namespaces/inkscape\",\n    width: 350,\n    height: 350,\n    viewBox: \"0 0 92.604165 92.604169\",\n    id: \"svg8\",\n    \"inkscape:version\": \"0.92.4 (5da689c313, 2019-01-14)\",\n    \"sodipodi:docname\": \"tracim juejue.svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", {\n    id: \"defs2\"\n  })), _sodipodi$namedview || (_sodipodi$namedview = /*#__PURE__*/React.createElement(\"sodipodi:namedview\", {\n    id: \"base\",\n    pagecolor: \"#ffffff\",\n    bordercolor: \"#666666\",\n    borderopacity: 1,\n    \"inkscape:pageopacity\": 0,\n    \"inkscape:pageshadow\": 2,\n    \"inkscape:zoom\": 0.35,\n    \"inkscape:cx\": -257.14286,\n    \"inkscape:cy\": 548.57143,\n    \"inkscape:document-units\": \"px\",\n    \"inkscape:current-layer\": \"layer1\",\n    showgrid: \"false\",\n    units: \"px\",\n    \"inkscape:window-width\": 1920,\n    \"inkscape:window-height\": 1016,\n    \"inkscape:window-x\": 0,\n    \"inkscape:window-y\": 27,\n    \"inkscape:window-maximized\": 1\n  })), _metadata || (_metadata = /*#__PURE__*/React.createElement(\"metadata\", {\n    id: \"metadata5\"\n  }, /*#__PURE__*/React.createElement(\"rdf:RDF\", null, /*#__PURE__*/React.createElement(\"cc:Work\", {\n    \"rdf:about\": \"\"\n  }, /*#__PURE__*/React.createElement(\"dc:format\", null, \"image/svg+xml\"), /*#__PURE__*/React.createElement(\"dc:type\", {\n    \"rdf:resource\": \"http://purl.org/dc/dcmitype/StillImage\"\n  }), /*#__PURE__*/React.createElement(\"dc:title\", null))))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    \"inkscape:label\": \"Calque 1\",\n    \"inkscape:groupmode\": \"layer\",\n    id: \"layer1\",\n    transform: \"translate(0,-204.39583)\"\n  }, /*#__PURE__*/React.createElement(\"image\", {\n    width: 96.194939,\n    height: 91.961594,\n    preserveAspectRatio: \"none\",\n    xlinkHref: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXcAAAF7CAYAAAApAsuFAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz AAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABZJSURB VHic7d17mFx1fcfxz/ecM7PZTULIZUUhSpSFAIkRCVJRLiaIlIuX8kioqA8+fapttdrijQe1MKhU sRZ9aqtC20cr3gj1Vm5yc8NVoAmFkIVEYgwIkbAJYcleZ+acb/8g9UEpyGVnfrO/8379lb92P7vP zDtnz5w5IwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAYmKhB2BqWnjewpnVndU/MrND3f0AyfYxs7ku75GUhd6HOJg04a5Rmf3a 5RvNk3s8a964rrZunaQi9L5ORtzx7NSUHDZ0WNfItJETlNppMi2X1BN6FsrH3V1mD1vhlzST5nfv 2XrPHbpQTUkeelsnIe54Zu9TpW9u3+49Wc87XfqIyeaHngT8lmvMTTe62T+NJ8M3btTGYdU4opeI O55OTcl+2m9Oteg+Lin0dy7vMzMeL+hMrhE3XaGi+OdiR3HHwFcHhkNPCo0nK55iQW3BtFn5rAPc /WMye6s4/YKpwvUryb+WN/KLBzYNPKRLlIeeFEoaegA6S1+tb7ee5sxjZTrPzI6W1BV6E/CsmWa7 6TBLkjm9c+Y9MHjA4HatKedpGuKO31pUWzSnK+96u0yfkmuJmfH4wJRjsqrJDkrM9ujt6b2/9+je rYOrBkt3BM+TF5KkBbWDdu/Kk1PM7aNmtpDz65jSTIlk+1tieyZ58outR299WKvKdQRP3KFF7180 o2ta8pZE+rBM+4feA0wKk8mtzxOb19uYd9fgTYPbQk9qJ+JedjVlL+l+yeslnSHXqzliR1RMZq59 k9SmzVs+76bBVYNjoSe1SxJ6AMJa0lyyjwp7r7kdQtgRJVMq2Z8mjew9oae0E3EvsVec8YpZbnaC TMfKVAm9B2ihGTL/20WfOOig0EPahbiXl01Pph8o99Mk7R56DNBqZvbSJPWzdXI5TkcT95JaVFs0 W5XkOJMdEHoL0C7mOnbxAYuXh97RDsS9pDzP9pb7qZyOQamYus3Tj6oE784n7iW05KNLpmfyo8xt QegtQLuZdOjiTy5eGnpHqxH3EpqYMTFLshOfuIoAKJ0es/TtoUe0GnEvoSzPeuU6MvQOIAR3r0h+ ompx9y/qHw5P1ffBvq7Ek9dyrh1ltev9HPMWji7cN/SWViLuJZN2p1VZcmjoHUBIZtZVqVQODL2j lYh7yVSTambSwtA7gMCqniR7hx7RSsS9ZMZsLHP5PqF3AIFlqSV7hh7RSsS9ZCpWycytN/QOILDU 83xu6BGtRNxLxqvexSWQKDt3TxJLo/6UMeJeMl0TXdXQG4DQzMxcnoXe0UrEHQAiRNwBIELEHQAi FPU5J3Qud5+QaZNJD7hs1FSuDy8uI5dSuXY3U5+k+aH3xI64o93qLv+pzC822S/zZr6zSItG6FFo Pc+rVsmKLpfmSFpqnrxbptJ8MlK7EXe0j2vME32yXujHWVY8NFAbqIeehDAWfnzhHV2Vrlsk/aVk 7+Ly3MlH3NE2hfwjnuQXbfj0wHDoLQhrwxc27FRNty9uLh5KlCSSvTv0ptjwgirawgv/yXD2+DcG aoQdu9RUrMvWbZD0TbmvCz0nNsQdbVEk+dmba5vHQ+9Ah6mpeDx7/A43/2HoKbEh7mg5l//P0PDQ L0LvQGfaXNv8mHtyl6StobfEhLij9VxrpzWncakjnpZ5sc3lD4beERPijjawR7se7vLQK9C58sQm ZBoJvSMmxB2tZyLsQJsRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEH gAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgR dwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIEHEHgAgRdwCIUBZ6wFRxwQWqLF2qys6dquY9 SqsTSup1JWkqa/eWel3F0EztXPE6jbX7e7dbraZk+XLNzXOlobe0St4tz3N5ta4iy5Q3m2qMjalx 3HGqm8lD78PURNyfQX+/ZtQTzU5NM9NM+w3Xta+6tE/a1IvzTNOzVD0uVdu9q1rRY3sU+oqk/2r3 9263o07UnKKu/1Cq3tBbWiUtlKemMVU10pAetaru765oY/+tWn/dzdrWbdrx4IMaWrFCeeitmDqI ++9ZuVLp7ntqj8S0txc6rJpouVyHyjXP9aSjdFfIQ6rBQvHG7ska46pWTEsk7RV6S8s86YFkT/5H rpHEdO9EoVW983XdtTdqU32n7j/+eE0EWIkphrjv4q5k1SrtqS4dpEInyHWCEu0pKcCJF0Ay03RJ h8h0iFwfSBPd0DNLF19zvVbPnq71hxyiRuiN6FzEXdI112jW9TfrYFV0klxvs0R7uvNiMzpKt6Rj XTo6y3TdznFddP3tuuGoQ/Xr0MPQmUodd3fZDTdofpHopML0LklLTKo6L2Ghc2WS3mSmVxd1XdJ/ k76thlYvW6Zm6GHoLKU9Ol25UumqW7SoqOjjnujjJh1iAV4cBZ4Hc+lFMv2ZpM94VW9dvVo9oUeh s5TyyL2/X5kqOshcH3PpeJNmhN4EPA/dMh0lqXekrlnXXKMfHHOMhkKPQmco3ZF7raYkT3WgTGe7 6S0i7JjaKnItdukjSbdO7u/n8YwnlC7uRxyjl6apznHpTZKmhd4DvFBmSt21MDF9KK/qxCuuUFfo TQivVHG/5RZ1J64zJf0x59cRmVTSAanrr6fN0GslLuAtu1LFfazQaTKdKo7YEadMpkMs0Z9ffb36 Qo9BWKWJ+/XX66WJ6SxJM0NvAVqoy0xvrWY65qqrND30GIRTmrgXmc6X9OLQO4BWc2lGYfqLbKYW hd6CcEoR9/6b9FqXThLnIVEOZq5XJq7jLrtRs0OPQRhliLtJ+riV42cF/o+5dGqP9LLQQxBG9MG7 9lYdINMbQ+8A2s2k/SzV4Zfy7tVSij7uSaFT3LnsEeXkrjf31Dk1U0ZRx/2CC1RJXMfJVAm9BQjB XIdXTHu483pT2UQd977FepmkvTjfjtIyTc9zHXzllfz1WjZRRy8tdKC7ukPvAEJy06G77Ubcyybq uCvRghCfcQp0EnMdmCScmiybqOPu0l6cb0fZmenl7uW8vXeZxR33QnPsiRsqAaXlUu8IcS+dqOOu RNMU+88I/GGVbudmeWUTdfgSUyZuOQBoLNFuoTegvaKOO4AnpLmq4kCnVIg7UAaccS8d4g4AEeL/ 8zYxaVvh2p4kyl/o1ypcOyTtmIRZHW9aoUae6T6ThkJvebZ2vdV/N5N6eZ8FQiHurTXkhf7dM31n ONd900ZUTMYXrc+Vz9ip+mR8rU535JHadumlOqFanVrni6tV2USi3mkVHVO4TndpP26DgXYi7q3i WpUX+pubfqZ1tdrkRL2k/M1v1mjoEc/TsKQLV67URb3z9fdyfVC87wJtQtwnmUuFua5WotPfeLjW h96D8Fas0Jik06+7USNJojPE8w5twJ+Jk8ykX+XS+W84TBtCb0FnufE6neXSDaF3oByI+yRyqZDr R9Ue3WkmD70HnaVWU1G4apIaobcgfsR9cj2Wm9YcebAGQw9BZ0ob+m8z3Rd6B+JH3CeRSfeniR4O vQOda+ZM5ZJWh96B+BH3SeSuUSs0EXoHOteaNVLu5XiPAsIi7pPIpMKdc+14ZonUDL0B8SPuABAh 4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4A ESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLu ABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh 4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4AESLuABAh4g4A ESLuaDmTMi0KvQKdLCtkVtCjycQvEy3nXsyZ2D5hoXegc3niXS71hN4RE+KO1jMdPJ6N81jD0/I8 2UPS3qF3xIQnHFrOZH2ze2a/JvQOdKa+M/t601RLZZodektMiDvawKqWJGeJxxueynqsZ0khnWQy Hh+TiF8m2uWoV579qnNCj0Bn2f/M/ff1VB+W/BWht8SGuKNdMst15is/ueRL80+f3x16DIKzJZ9Y sriSVr8m13EctU++LPQAlIgplelDc2bMPX72p+ae3/T6T4cqQ4PJUOKhpz0X2azMN9c2T0iaUruf l5OVLli0oNIcak7K1U5z0jlJXs33tTR9p6T3mmzWZHxdPBVxR1vtOkLbz0xfr1i1Pi/vHfQZ/rjk UyaUltvgktqSFWtrax8JvaXVFh+w+C1JnpzuM3zuC/9qlrjUmyqbhK+FP4S4I6SqpL1Mtpc0dS6D d+k3dY2X47nj6WxJC032otBT8NxwngsAIkTcASBCxB0AIkTcS2bCJ+qhNwChubub1Ay9o5WIe8lk STYmVyP0DiAkkxW5+VjoHa1E3EumXq3nkqK/hA94RuZ5mtijoWe0EnEvma7xrtzNN4XeAYRlDc99 S+gVrUTcS6aYVjTkfk/oHUBgDU98c+gRrUTcy6fultweegQQksvHveLrQu9oJeJeMgO1gYbnzTsk Hw69BQjB5YWkh7p+3fVA6C2tRNzLxwsVW+W6KfQQIJCmZFeuuXBN1FeNEfcSGto2NCTTpaF3AIHU i2bze6FHtBpxL6EtF24ZLfLiJkkbQm8B2s71s4HPDdwbekarEfeSyqrZA67i2+5T51a7wAvl8kK5 f14luBc/cS+pO2t3PqaGrpR0N4FHGbi7m+vHd3/u7p+H3tIOxL3EHmnaek/0dZlGQm8BWs1MWxve +HDoHe1C3Ets6xfXjng9v8bcfuTuE6H3AK3i8mF3/+y95957f+gt7ULcS27g8wMb3Yt/M7PVivwu eSgnl4+r8JWPjD/yzdBb2om4Q2OPj91WFPqK3NfLlYfeA0yiuklXm9lnt35x62joMe1E3KGNX9k4 4Tual0v6sps2EHjEwOXjLr82z/Oz12Zr71cJrpB5MuIOSdLAVweGhxvD/+nu57tpHfd8x5TmGnHp 8iK1cwaqA+tUUxF6UrsRd/zWpvM2DXVlle+Z+Wdcfr2kUv0Zizi49BuZX6S0+PTAwF1rVCvna0lZ 6AHoLGtqa0ZV00+W5Esekvm7JXu7u/eamYXeBjwjV8PN18r9Ow1v/vDez9z7gEp2KubJiDueqqbm Wq29ddEZi7ZYNft5YvYud19uZpXQ04Df5+5upi2F6SeJ6YfD9ZHVm87bNBR6V2jEHU9r4LyBB5a+ b+nF9T3qd7klr5F0irmOkKk79DZArlzmv5HZFV4UV0h+x9rKuod0XvnOr/9/iDue0a7bot7d98G+ X/TM6rnZ5fuY23I3O1LuB5rZ9NAbUS4u3y7pNnf1e57/PEuyzXdV7t5a1nPrT4e441nZ+JWNE5I2 6GRt3L9v/9tST7+epuk8t2J/c+uT9DKX5kqabrJumaeBJ7eMSdvyibwUVxO5+zY3u8vkc9r/zdWQ 2WghHzHXwyb9StJ9Mt9QpMVQc6K5Y8MXNgyrxOfVnwlxx3NzifL1Wr9d0nZJv1xQW3BnpqyaTWSV zLLMq27N0WbiFY/2BdhKvZJvnL5xe+gd7bAj23btbM2+vdFotP0/a2uYZz1ZkSot8qG8qVmqa0D1 gUsG6u3eMhURd7wQvrm2eVzSeOghaI0ttS2jW7SFS2KnIK5zB4AIEXcAiBBxB4AIEXcAiBBxB4AI EXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcA iBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBxB4AIEXcAiBBx B4AIEXegzUyy0BsQP+I+idw0vemaFnoHOtfSpZJLc0LvQPyI++SanyaaG3oEOtcjs5SYtCT0DsSP uE8ik14k16v6+7V76C3oTN2PaF+XDg69A/Ej7pPMTH+SVHVwrcbvFr/riivUZa5zQu9AORCgybc4 l96z7FgtdOf3iydcdZWmT5up09x0UugtKIcs9IAouU4tchX9t+pr/f0aWLZMw6EnIYyVK1Wdu5de kpneVkjnykMvQlkQ9xYwUyrpNCv0KqvoW9fdrDWJ9GjS1ERR8PSOXpfUbKiSmGYmqV4h6ZTcdbxJ 1dDTUB7EvbUOctNBifSgpPu8osfkykOPQmt5oSSrqMell6nQPjJ1cWE72o24t8d8SfOdY/ZSMJPk u96pRNURCC/4AUCEiDsARIi4AyVgqSYkXswvk6jj7oVy8YAGVB/VSOgNaK+o426pxiUVoXcAgeWV Lo2FHoH2ijruKvSoi0sPUXKmQR9VM/QMtFfUcXfXb8zVCL0DCMr1K4m4l03ccZcekKkeegcQlOkX 9Rkc5JRN1HGXNCBpPPQIICjTrXpUE6FnoL2ijvuy1+s+SdvFFTMor0Yq3X788fwFWzZRx91MhaTL JR7YKK2b8nE9Ig5wSifquEtS3tAPJI2G3gEEkOuJg5vHQg9B+0Uf9zcepdWSbg+9A2g71wNeaBWf J1BO0cddJi+k8yXexIFSaXqi7480dX/oIQgj/rhL2v46XefSNaF3AG203gpdceIbtD30EIRRiriv MOUqdJZJvw69BWiDIXd9Sw2tM+OF1LIqRdwlafkRukuJvuzODZQQtYakq/Ncly1bxgupZVaauEvS cFPfkPR9cb8ZxMklrTHXv2aF7gs9BmGVKu4nHK7H0lT/KNdl4rpfxGd9YvqaN/TzZcu4l0zZlSru ZvJiXPdJ+ry5fioCj3hsVKF/SXJdyqWPkEoWd0latkzNwS26oyh0rpl+JOcUDaY0l7RBri/mVX3/ iCO0I/QgdIbSfjb76tWq7JzQIpfeL9c7zDQj9CbgOWpKulPSec1RXXPMMRoKPQido7Rxl6SVK5XO 3lN7pYlOsUJ/JdPLQ28Cng0zjRaFLjPpHwYTDax4HW/Sw+8qddx3sf5+TfdUSy3VByQdJ3EUj47l kn4p6dw01+U/O0Lba8ZHSeKpiPsuK1cq7e3VzCLTEYnpgzIdLqk79C7gSR70Ql8aa+q7I4N6dMUK 7naKp0fcf4+77JJ7VJm9QwenpneYa4VMe4jfFQIw02jh6remLhosdLkGNbZiBRcB4A8jWH9AraZk +XItzjMd4a5F5tpXpvnumm6mauh9iINLeSKNyrWtcG1y6d60ottGpduOf60eD70PAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACE 9b8CkgPQMbepVAAAAABJRU5ErkJggg== \",\n    id: \"image909\",\n    x: -1.7953858,\n    y: 205.85104\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTracimLogo);\nexport default __webpack_public_path__ + \"static/media/TracimLogo.5ddec76c77f0947c2b34359b650a9690.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useState } from 'react';\nimport axios from \"axios\";\n\nconst {\n  REACT_APP_THIRD_PARTY_API,\n  REACT_APP_IDS_API_URL\n} = process.env;\n\nfunction UseTracim({\n  viewer\n}) {\n  const [locked, setLocked] = useState(false);\n  const [apiInformation, setApiInformation] = useState({\n    lockProject: \"\",\n    unlockProject: \"\",\n    updateProject: \"\",\n  });\n\n  const handleUpdateProject = async () => {\n    try {\n      // EXPORT FICHIER IFC\n      const ifcData = await viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n      console.log('ifcData', ifcData);\n      let ifcDataString = new TextDecoder().decode(ifcData);\n      console.log('IFC STRING', ifcDataString);\n      let newIfcDataString = ifcDataString.replace(\n        \"FILE_NAME('no name', '', (''), (''), 'web-ifc-export');\",\n        \"FILE_NAME('0001','2011-09-07T12:40:02',(''),(''),'Autodesk Revit MEP 2011 - 1.0','20100326_1700 (Solibri IFC Optimizer)','');\"\n      );\n      console.log('newIfcDataString', newIfcDataString);\n\n\n\n\n      const ifcBlob = new Blob([newIfcDataString], { type: 'text/plain' });\n      console.log('ifcBlob', ifcBlob)\n      const ifcFile = new File([ifcBlob], 'ifcFile');\n      console.log('model', ifcFile)\n\n      // Accès à Tracim\n      const query = new URLSearchParams(window.location.search);\n\n      const content_id = query.get('content_id');\n      const space_id = query.get('space_id');\n      const user_id = query.get('user_id');\n\n      console.log('handleInitTracim Content ID:', content_id);\n      console.log('handleInitTracim Space ID:', space_id);\n      console.log('handleInitTracim User ID:', user_id);\n\n      const formData = new FormData();\n      formData.append('content_id', content_id);\n      formData.append('space_id', space_id);\n      formData.append('user_id', user_id);\n      formData.append('file', ifcFile);\n      const res = await axios.put(`${REACT_APP_IDS_API_URL}/tracim/updateModel`, formData);\n\n      console.log('res', res);\n\n      //sessionStorage.setItem(\"axeobim_lock_token\", res.data.lock_token);\n      //setLocked(false);\n      setApiInformation({\n        ...apiInformation,\n        updateProject: 'Maquette mise à jour'\n      })\n    } catch (err) {\n      setApiInformation({\n        ...apiInformation,\n        updateProject: 'Non connecté à Tracim'\n      })\n    }\n  }\n\n  return {\n    setLocked,\n    setApiInformation,\n    handleUpdateProject\n  }\n};\n\nexport {\n  UseTracim\n};","import { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Alert,\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  ButtonGroup,\n  Divider,\n  Tooltip,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Stack\n} from \"@mui/material\";\nimport ToolTipsElem from '../../../../../Components/ToolTipsElem/ToolTipsElem';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport LockIcon from '@mui/icons-material/Lock';\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\nimport KeyboardCapslockIcon from '@mui/icons-material/KeyboardCapslock';\nimport FileUploadIcon from '@mui/icons-material/FileUpload';\nimport StepConnector from \"@material-ui/core/StepConnector\";\nimport clsx from \"clsx\";\nimport Check from \"@material-ui/icons/Check\";\nimport axios from \"axios\";\nimport OAuth2Login from 'react-simple-oauth2-login';\nimport TracimLogo from './img/TracimLogo.svg'\nimport { UseTracim } from './Tracim.hooks';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  table: {\n    width: \"100%\",\n  },\n  iconButton: {\n    backgroundColor: 'red'\n  }\n}));\n\n\nconst {\n  REACT_APP_THIRD_PARTY_API\n} = process.env;\n\nconst Tracim = ({\n  openProperties,\n  projectId,\n  objSelected,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  addElementsNewProperties,\n  handleShowMarketplace,\n  setSelectedApp\n}) => {\n  const classes = useStyles();\n\n  const {\n    locked,\n    setLocked,\n    apiInformation,\n    setApiInformation,\n    handleUpdateProject\n  } = UseTracim({\n    viewer\n  });\n\n  useEffect(() => {\n    async function init() {\n      const lockToken = sessionStorage.getItem(\"axeobim_lock_token\");\n      console.log('lockToekn', lockToken)\n      if (!lockToken || lockToken === \"\") {\n        setLocked(false);\n      } else {\n        setLocked(true);\n      }\n    }\n    init();\n  }, []);\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12}>\n        <Typography variant=\"subtitle1\" component=\"h3\">\n          Modèle BIM en cours de traitement:\n        </Typography>\n      </Grid>\n\n      <Grid item xs={12}>\n        <List sx={{ width: \"100%\", backgroundColor: '#1890ff', color: 'white', borderRadius: '1em' }}>\n          <ListItem\n            key={0}\n            secondaryAction={\n              <>\n                <Tooltip\n                  title={\n                    <p>\n                      Tracim:\n                      <br />\n                      Mise à jour de la maquette dans Tracim pour les autres utilisateurs\n                    </p>\n                  }\n                  placement=\"top\"\n                >\n                  <IconButton\n                    edge=\"end\"\n                    aria-label=\"comments\"\n                    onClick={handleUpdateProject}\n                    className={classes.icons}\n                  >\n                    <FileUploadIcon sx={{ color: 'white' }} />\n                  </IconButton>\n                </Tooltip>\n              </>\n            }\n            disablePadding\n          >\n            Mise à jour de la maquette dans Tracim\n          </ListItem>\n        </List>\n      </Grid >\n      \n    </Grid >\n  );\n};\n\nexport default Tracim;\n","var _path, _path2, _path3, _path4, _path5;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIdsLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 890,\n    height: 480,\n    viewBox: \"0 0 890 480\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 0.462 1.250 C 0.201 1.938, 0.103 109.825, 0.244 241 L 0.500 479.500 444.940 479.751 C 799.833 479.952, 889.541 479.750, 890.175 478.751 C 890.612 478.063, 890.976 370.063, 890.985 238.750 L 891 0 445.969 0 C 90.863 0, 0.841 0.253, 0.462 1.250 M 0.492 240 C 0.492 371.725, 0.608 425.613, 0.750 359.750 C 0.892 293.888, 0.892 186.113, 0.750 120.250 C 0.608 54.388, 0.492 108.275, 0.492 240 M 440 14.883 C 440 15.369, 439.212 16.018, 438.250 16.324 C 436.443 16.900, 428.598 21.246, 419 26.989 C 415.975 28.799, 412.038 31.117, 410.250 32.140 C 402.318 36.680, 399.214 38.443, 395 40.800 C 392.525 42.185, 388.821 44.371, 386.770 45.659 C 384.718 46.947, 382.816 48, 382.543 48 C 382.271 48, 377.526 50.700, 372 54 C 366.474 57.300, 361.513 60, 360.976 60 C 360.439 60, 360 60.450, 360 61 C 360 61.550, 359.438 62.031, 358.750 62.068 C 358.063 62.105, 353.225 64.710, 348 67.856 L 338.500 73.576 338.229 97.038 L 337.959 120.500 329.229 125.418 C 324.428 128.123, 313.616 134.331, 305.202 139.215 C 296.788 144.098, 287.788 149.262, 285.202 150.690 C 282.616 152.118, 272.400 158.019, 262.500 163.802 C 252.600 169.585, 242.250 175.563, 239.500 177.086 L 234.500 179.856 234.242 240.332 L 233.985 300.808 244.003 306.404 C 249.513 309.482, 254.429 312, 254.927 312 C 255.426 312, 255.983 312.363, 256.167 312.807 C 256.350 313.251, 260.775 316.039, 266 319.002 C 271.225 321.965, 281.480 327.902, 288.790 332.195 C 296.099 336.488, 302.254 340, 302.466 340 C 302.679 340, 306.599 342.310, 311.177 345.133 C 315.754 347.956, 320.625 350.770, 322 351.387 C 323.375 352.005, 327.522 354.307, 331.216 356.505 L 337.933 360.500 338.216 382.871 L 338.500 405.242 354 414.211 C 362.525 419.144, 371.300 424.216, 373.500 425.481 C 375.700 426.746, 387.850 433.740, 400.500 441.024 C 413.150 448.307, 425.300 455.219, 427.500 456.383 C 429.700 457.547, 431.725 458.725, 432 459 C 435.658 462.658, 444.024 464.070, 447.527 461.621 C 449.841 460.004, 454.175 457.507, 466.500 450.689 C 471.450 447.952, 476.625 444.945, 478 444.008 C 479.375 443.072, 482.975 440.950, 486 439.293 C 489.025 437.636, 498.700 432.100, 507.500 426.990 C 516.300 421.881, 525.300 416.685, 527.500 415.444 C 529.700 414.204, 534.650 411.343, 538.500 409.087 L 545.500 404.984 546 382.374 L 546.500 359.763 554 355.426 C 558.125 353.040, 566.675 348.119, 573 344.490 C 579.325 340.862, 585.175 337.475, 586 336.965 C 588.755 335.262, 598.437 329.741, 604 326.701 C 607.025 325.047, 610.694 322.863, 612.154 321.847 C 613.614 320.831, 615.061 320, 615.369 320 C 615.677 320, 621.981 316.400, 629.378 312 C 636.775 307.600, 643.134 304, 643.509 304 C 643.884 304, 645.498 303.069, 647.096 301.932 L 650 299.864 650 240.468 L 650 181.072 646.268 178.536 C 644.215 177.141, 641.965 176, 641.268 176 C 640.571 176, 640 175.633, 640 175.185 C 640 174.737, 638.334 173.576, 636.298 172.605 C 634.262 171.634, 629.320 168.851, 625.315 166.420 C 621.310 163.989, 617.576 162, 617.017 162 C 616.458 162, 616 161.550, 616 161 C 616 160.450, 615.570 160, 615.044 160 C 614.518 160, 611.706 158.574, 608.794 156.832 C 605.882 155.089, 600.575 152.015, 597 150 C 589.364 145.697, 585.414 143.415, 578.206 139.140 C 575.294 137.413, 572.735 136, 572.518 136 C 572.302 136, 566.979 132.920, 560.691 129.156 C 554.403 125.393, 548.533 122.035, 547.647 121.695 C 546.239 121.155, 546.003 118.084, 545.768 97.341 L 545.500 73.605 537 68.661 C 511.403 53.772, 497.639 46, 496.867 46 C 496.390 46, 496 45.550, 496 45 C 496 44.450, 495.570 44, 495.044 44 C 494.518 44, 491.706 42.574, 488.794 40.832 C 483.258 37.519, 473.342 31.883, 464 26.740 C 460.975 25.075, 458.050 23.375, 457.500 22.963 C 456.950 22.550, 454.813 21.265, 452.750 20.107 C 450.688 18.948, 447.411 17.100, 445.470 16 C 441.645 13.833, 440 13.498, 440 14.883 M 431.500 125.579 C 426.550 128.535, 421.375 131.566, 420 132.314 C 416.887 134.007, 412.067 136.791, 405.206 140.860 C 402.294 142.587, 399.753 144, 399.558 144 C 399.364 144, 396.242 145.800, 392.620 148 C 388.999 150.200, 385.578 152, 385.018 152 C 384.458 152, 384 152.378, 384 152.839 C 384 153.301, 382.762 154.231, 381.250 154.906 C 378.478 156.142, 373.795 158.818, 355.523 169.608 C 350.035 172.849, 343.844 176.302, 341.765 177.283 L 337.984 179.065 338.242 239.139 L 338.500 299.213 354 308.188 C 362.525 313.124, 371.300 318.185, 373.500 319.434 C 375.700 320.683, 382.225 324.540, 388 328.006 C 393.775 331.472, 400.975 335.657, 404 337.306 C 407.025 338.956, 410.694 341.137, 412.154 342.153 C 413.614 343.169, 415.085 344, 415.422 344 C 415.760 344, 418.999 345.800, 422.620 348 C 426.242 350.200, 429.368 352, 429.567 352 C 429.767 352, 432.059 353.350, 434.661 355 C 437.263 356.650, 440.409 358, 441.652 358 C 443.549 358, 449.545 355.082, 456 351.017 C 457.736 349.924, 464.529 345.989, 474.500 340.299 C 478.350 338.102, 487.125 333.031, 494 329.028 C 512.116 318.482, 516.899 315.732, 525 311.200 C 527.475 309.815, 531.179 307.629, 533.230 306.341 C 535.282 305.053, 537.203 304, 537.500 304 C 537.797 304, 539.831 302.869, 542.020 301.487 L 546 298.975 546 239.556 L 546 180.136 543.096 178.068 C 541.498 176.931, 539.913 176, 539.574 176 C 539.035 176, 533.020 172.490, 513.684 160.889 C 511.035 159.300, 508.692 158, 508.478 158 C 508.263 158, 505.706 156.587, 502.794 154.860 C 499.882 153.133, 495.925 150.839, 494 149.761 C 483.091 143.654, 472.435 137.487, 471.997 137.028 C 471.437 136.440, 463.740 132.197, 460.258 130.556 C 459.025 129.975, 458.012 129.162, 458.008 128.750 C 458.004 128.338, 457.590 128, 457.090 128 C 456.589 128, 453.003 126.200, 449.120 124 C 445.238 121.800, 441.710 120.046, 441.281 120.102 C 440.851 120.158, 436.450 122.623, 431.500 125.579 M 632 449.154 C 632 449.619, 632.675 450, 633.500 450 C 634.583 450, 635 451.111, 635 454 C 635 456.200, 635.450 458, 636 458 C 636.550 458, 637 456.200, 637 454 C 637 451.111, 637.417 450, 638.500 450 C 639.325 450, 640 449.619, 640 449.154 C 640 448.688, 638.200 448.308, 636 448.308 C 633.800 448.308, 632 448.688, 632 449.154 M 641.688 448.646 C 640.625 449.708, 640.876 456.805, 642 457.500 C 642.554 457.842, 643.014 457.088, 643.032 455.809 C 643.063 453.571, 643.108 453.559, 644.521 455.427 C 646.092 457.502, 646.120 457.494, 647.881 454.500 C 649.024 452.555, 649.049 452.561, 648.778 454.705 C 648.625 455.917, 648.950 456.930, 649.500 456.955 C 650.050 456.980, 650.500 455.200, 650.500 453 C 650.500 448.587, 649.045 447.547, 647.513 450.863 C 646.249 453.598, 645.225 453.585, 644.820 450.828 C 644.488 448.573, 642.880 447.453, 641.688 448.646\",\n    stroke: \"none\",\n    fill: \"#ffffff\",\n    fillRule: \"evenodd\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 433.191 18.780 C 430.821 20.119, 429.141 21.474, 429.458 21.791 C 429.774 22.108, 430.566 21.834, 431.217 21.183 C 431.867 20.533, 433.017 20, 433.771 20 C 435.132 20, 438.577 17.162, 437.869 16.625 C 437.666 16.471, 435.561 17.441, 433.191 18.780 M 419 26.834 C 413.842 30.018, 412.065 31.575, 413.309 31.817 C 414.304 32.011, 415.932 31.231, 416.927 30.085 C 417.921 28.938, 419.469 28, 420.367 28 C 421.265 28, 422 27.550, 422 27 C 422 26.450, 422.707 26, 423.571 26 C 425.087 26, 428 23.745, 428 22.571 C 428 21.494, 426.489 22.210, 419 26.834 M 456 22.618 C 456 23.881, 459.137 26.117, 460.496 25.823 C 461.487 25.609, 460.981 24.927, 458.995 23.797 C 457.348 22.860, 456 22.329, 456 22.618 M 408.616 32.812 C 408.295 33.332, 406.413 34.525, 404.435 35.464 C 402.456 36.403, 401.100 37.433, 401.420 37.754 C 402.080 38.414, 406.800 36.163, 408.869 34.202 C 409.622 33.489, 410.005 32.671, 409.719 32.386 C 409.434 32.100, 408.937 32.292, 408.616 32.812 M 474.708 33.885 C 475.923 35.048, 477.610 36, 478.458 36 C 479.306 36, 480 36.450, 480 37 C 480 37.550, 480.590 38, 481.311 38 C 482.033 38, 483.589 38.900, 484.770 40 C 485.950 41.100, 487.610 42, 488.458 42 C 489.306 42, 490 42.450, 490 43 C 490 43.550, 490.590 44, 491.311 44 C 492.033 44, 493.621 44.930, 494.842 46.067 C 496.063 47.205, 497.835 47.927, 498.781 47.673 C 500.211 47.289, 500.122 47.091, 498.250 46.489 C 497.012 46.092, 496 45.369, 496 44.883 C 496 44.398, 495.542 44, 494.983 44 C 494.424 44, 490.711 42.035, 486.733 39.633 C 482.755 37.231, 477.925 34.479, 476 33.518 L 472.500 31.769 474.708 33.885 M 390.233 43.496 C 383.968 47.308, 383.186 48, 385.145 48 C 385.958 48, 387.589 47.100, 388.770 46 C 389.950 44.900, 391.417 44, 392.030 44 C 393.223 44, 396.484 41.110, 395.869 40.598 C 395.666 40.429, 393.130 41.733, 390.233 43.496 M 375.673 51.668 C 372.468 53.599, 370.026 55.359, 370.246 55.579 C 370.833 56.166, 375.983 53.630, 375.992 52.750 C 375.996 52.337, 376.694 52, 377.542 52 C 378.390 52, 380.050 51.100, 381.230 50 C 384.391 47.056, 382.274 47.691, 375.673 51.668 M 502.609 49.743 C 504.667 51.765, 512.162 56, 513.683 56 C 514.685 56, 511.675 53.974, 505.500 50.491 C 501.581 48.281, 500.956 48.119, 502.609 49.743 M 516.500 57.610 C 517.600 58.649, 519.737 60.139, 521.250 60.919 C 522.763 61.699, 524 62.712, 524 63.169 C 524 63.626, 524.900 64, 526 64 C 527.100 64, 528 64.450, 528 65 C 528 65.550, 528.788 65.976, 529.750 65.948 C 531.174 65.905, 531.050 65.578, 529.085 64.198 C 524.430 60.926, 514.520 55.738, 516.500 57.610 M 360 60.883 C 360 61.369, 359.007 62.026, 357.794 62.344 C 356.580 62.661, 355.847 63.180, 356.164 63.498 C 356.916 64.249, 362 61.933, 362 60.839 C 362 60.378, 361.550 60, 361 60 C 360.450 60, 360 60.398, 360 60.883 M 532 66.805 C 532 67.329, 533.350 68.317, 535 69 C 536.650 69.683, 538 70.638, 538 71.121 C 538 71.605, 538.707 72, 539.571 72 C 540.436 72, 541.898 72.755, 542.821 73.678 C 544.263 75.119, 544.548 78.331, 544.841 96.428 C 545.162 116.191, 545.061 117.640, 543.224 119.750 C 542.147 120.987, 540.531 122, 539.633 122 C 538.735 122, 538 122.450, 538 123 C 538 124.518, 542.948 124.195, 544.571 122.571 C 546.529 120.614, 546.695 74.781, 544.750 73.281 C 541.532 70.800, 532 65.959, 532 66.805 M 342.727 71.062 C 339.332 73.175, 338.009 74.637, 338.030 76.252 C 338.060 78.441, 338.091 78.447, 339.216 76.500 C 340.820 73.721, 342.650 72, 344 72 C 345.282 72, 348.455 69.122, 347.846 68.512 C 347.630 68.296, 345.326 69.444, 342.727 71.062 M 436.250 121.220 C 435.012 121.817, 434 122.687, 434 123.153 C 434 123.619, 433.293 124, 432.429 124 C 431.564 124, 430.182 124.675, 429.357 125.500 C 428.532 126.325, 428.172 127, 428.557 127 C 429.498 127, 440 120.967, 440 120.427 C 440 119.762, 438.705 120.036, 436.250 121.220 M 338.667 123.667 C 337.629 124.704, 337.883 128, 339 128 C 339.550 128, 340 126.875, 340 125.500 C 340 122.882, 339.769 122.564, 338.667 123.667 M 452.500 125.869 C 454.150 126.891, 455.666 127.585, 455.869 127.411 C 456.671 126.725, 453.034 124, 451.321 124.005 C 449.979 124.009, 450.289 124.499, 452.500 125.869 M 533 126 C 532.207 127.100, 530.758 128, 529.779 128 C 528.801 128, 528 128.450, 528 129 C 528 129.550, 527.199 130, 526.221 130 C 525.242 130, 523.793 130.900, 523 132 C 522.207 133.100, 520.758 134, 519.779 134 C 518.801 134, 518 134.450, 518 135 C 518 135.550, 517.199 136, 516.221 136 C 515.242 136, 513.793 136.900, 513 138 C 512.205 139.103, 510.411 140, 509 140 C 507.589 140, 505.795 140.897, 505 142 C 504.207 143.100, 502.758 144, 501.779 144 C 499.896 144, 499.372 145.494, 500.919 146.450 C 501.425 146.763, 502.518 146.339, 503.348 145.509 C 504.178 144.679, 505.564 144, 506.429 144 C 507.293 144, 508 143.550, 508 143 C 508 142.450, 508.900 142, 510 142 C 511.100 142, 512 141.550, 512 141 C 512 140.450, 512.801 140, 513.779 140 C 514.758 140, 516.207 139.100, 517 138 C 517.793 136.900, 519.242 136, 520.221 136 C 521.199 136, 522 135.550, 522 135 C 522 134.450, 522.801 134, 523.779 134 C 524.758 134, 526.207 133.100, 527 132 C 527.793 130.900, 529.242 130, 530.221 130 C 531.199 130, 532 129.550, 532 129 C 532 128.450, 532.707 128, 533.571 128 C 535.087 128, 538 125.745, 538 124.571 C 538 123.145, 534.295 124.204, 533 126 M 421.250 129.496 C 418.572 132.538, 420.341 132.862, 424 130 C 426.283 128.214, 426.326 128.046, 424.500 128.060 C 423.400 128.069, 421.938 128.715, 421.250 129.496 M 461 130.405 C 461 130.958, 469.667 136, 470.617 136 C 471.035 136, 470.411 135.100, 469.230 134 C 468.050 132.900, 466.390 132, 465.542 132 C 464.694 132, 464 131.550, 464 131 C 464 130.450, 463.325 130, 462.500 130 C 461.675 130, 461 130.182, 461 130.405 M 416 132.756 C 416 133.172, 414.650 134.109, 413 134.840 C 411.350 135.570, 410 136.572, 410 137.067 C 410 137.561, 411.688 137.031, 413.750 135.889 C 418.659 133.169, 419.847 132, 417.700 132 C 416.765 132, 416 132.340, 416 132.756 M 472.017 136.750 C 472.026 137.162, 474.726 138.951, 478.017 140.723 C 481.307 142.496, 483.993 143.621, 483.984 143.223 C 483.976 142.826, 481.726 141.399, 478.984 140.053 C 476.243 138.707, 474 137.245, 474 136.803 C 474 136.361, 473.550 136, 473 136 C 472.450 136, 472.007 136.338, 472.017 136.750 M 406 139 C 406 139.550, 405.293 140, 404.429 140 C 402.958 140, 400 142.243, 400 143.358 C 400 143.634, 402.025 142.727, 404.500 141.344 C 409.298 138.662, 409.892 138, 407.500 138 C 406.675 138, 406 138.450, 406 139 M 485.550 144.857 C 486.072 145.328, 488.483 146.791, 490.906 148.107 C 494.093 149.837, 495.431 150.154, 495.740 149.250 C 495.974 148.563, 497.029 148, 498.083 148 C 499.137 148, 500 147.550, 500 147 C 500 146.450, 499.100 146, 498 146 C 496.900 146, 496 146.450, 496 147 C 496 147.550, 495.100 148, 494 148 C 492.900 148, 492 147.550, 492 147 C 492 146.450, 491.100 146, 490 146 C 488.900 146, 488 145.550, 488 145 C 488 144.450, 487.235 144, 486.300 144 C 485.284 144, 484.982 144.345, 485.550 144.857 M 391.992 146.750 C 391.983 147.592, 387.188 150, 385.521 150 C 384.927 150, 383.793 150.900, 383 152 C 382.207 153.100, 380.758 154, 379.779 154 C 378.801 154, 378 154.450, 378 155 C 378 155.550, 377.293 156, 376.429 156 C 374.975 156, 372 158.239, 372 159.332 C 372 159.845, 383.171 154.015, 384 153.070 C 384.275 152.756, 386.525 151.423, 389 150.107 C 394.644 147.105, 395.909 146, 393.700 146 C 392.765 146, 391.996 146.338, 391.992 146.750 M 368 161 C 368 161.550, 367.100 162, 366 162 C 364.900 162, 364 162.340, 364 162.756 C 364 163.172, 362.650 164.109, 361 164.840 C 359.350 165.570, 358 166.528, 358 166.968 C 358 167.409, 360.925 166.216, 364.500 164.318 C 371.200 160.760, 372.080 160, 369.500 160 C 368.675 160, 368 160.450, 368 161 M 338.574 166.297 C 338.126 167.835, 338.039 169.372, 338.380 169.713 C 339.499 170.833, 340.158 169.235, 339.770 166.341 L 339.389 163.500 338.574 166.297 M 346.250 173.220 C 345.012 173.817, 344 174.687, 344 175.153 C 344 176.489, 345.295 176.116, 348 174 C 350.714 171.877, 349.842 171.488, 346.250 173.220 M 337.112 175.644 C 335.419 177.556, 337.131 179.040, 340.126 178.257 C 342.572 177.617, 343.598 176, 341.559 176 C 340.702 176, 340 175.550, 340 175 C 340 173.551, 338.711 173.838, 337.112 175.644 M 540.500 302.294 C 538.300 303.507, 534.475 305.686, 532 307.136 C 526.116 310.583, 520.397 313.822, 515.750 316.339 C 513.688 317.457, 512 318.738, 512 319.186 C 512 319.633, 511.382 320, 510.627 320 C 509.871 320, 505.934 321.960, 501.877 324.356 C 493.644 329.218, 478.131 338.210, 467.500 344.281 C 463.650 346.480, 459.281 349.116, 457.790 350.140 C 456.300 351.163, 454.858 352, 454.584 352 C 454.311 352, 451.798 353.350, 449 355 C 446.202 356.650, 442.895 358, 441.652 358 C 440.409 358, 437.263 356.650, 434.661 355 C 432.059 353.350, 429.678 352, 429.370 352 C 429.061 352, 427.614 351.169, 426.154 350.153 C 424.694 349.137, 421.025 346.953, 418 345.299 C 414.975 343.646, 410.118 340.877, 407.206 339.147 C 404.294 337.416, 401.722 336, 401.491 336 C 401.259 336, 398.941 334.650, 396.339 333 C 391.596 329.992, 388 329.130, 388 331 C 388 331.550, 387.100 332, 386 332 C 384.667 332, 384 332.667, 384 334 C 384 335.475, 383.333 336, 381.458 336 C 380.060 336, 377.950 336.900, 376.770 338 C 375.589 339.100, 374.033 340, 373.311 340 C 372.590 340, 372 340.450, 372 341 C 372 341.550, 371.100 342, 370 342 C 368.900 342, 368 342.450, 368 343 C 368 343.550, 367.100 344, 366 344 C 364.900 344, 364 344.450, 364 345 C 364 345.550, 363.261 346, 362.358 346 C 361.455 346, 359.426 347.350, 357.850 349 C 356.273 350.650, 353.961 352, 352.712 352 C 351.463 352, 349.793 352.900, 349 354 C 348.207 355.100, 346.758 356, 345.779 356 C 344.801 356, 344 356.450, 344 357 C 344 357.550, 343.293 358, 342.429 358 C 338.257 358, 337.949 359.839, 338.231 383.069 L 338.500 405.242 354 414.211 C 401.917 441.939, 414.363 448.894, 415.171 448.394 C 415.627 448.112, 416 448.316, 416 448.846 C 416 449.793, 422.590 454.065, 428.500 456.951 C 430.150 457.756, 431.725 458.659, 432 458.958 C 435.350 462.591, 444.014 464.077, 447.527 461.621 C 449.712 460.094, 453.591 457.848, 465.500 451.215 C 469.900 448.765, 476.755 444.789, 480.733 442.380 C 484.711 439.971, 488.230 438, 488.553 438 C 488.876 438, 491.102 436.650, 493.500 435 C 495.898 433.350, 498.095 432, 498.382 432 C 498.669 432, 504.427 428.785, 511.179 424.855 C 517.931 420.926, 524.841 416.932, 526.535 415.981 C 528.229 415.029, 533.301 412.109, 537.807 409.490 L 546 404.730 545.985 353.115 C 545.975 319.422, 545.633 302.021, 545 303 C 544.162 304.297, 544.029 304.275, 544.015 302.833 C 544.007 301.917, 544.563 300.940, 545.250 300.662 C 545.938 300.385, 546.050 300.142, 545.500 300.123 C 544.950 300.104, 542.700 301.081, 540.500 302.294\",\n    stroke: \"none\",\n    fill: \"#a03289\",\n    fillRule: \"evenodd\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 544.600 122.542 C 543.799 123.344, 542.436 124, 541.571 124 C 540.707 124, 540 124.450, 540 125 C 540 125.550, 539.100 126, 538 126 C 536.900 126, 536 126.450, 536 127 C 536 127.550, 535.100 128, 534 128 C 532.900 128, 532 128.450, 532 129 C 532 129.550, 531.438 130.001, 530.750 130.001 C 530.063 130.002, 528.178 131.140, 526.562 132.529 C 524.945 133.919, 522.470 135.341, 521.062 135.688 C 519.653 136.036, 517.772 137.148, 516.883 138.160 C 515.993 139.172, 514.531 140, 513.633 140 C 512.735 140, 512 140.450, 512 141 C 512 141.550, 511.100 142, 510 142 C 508.900 142, 508 142.450, 508 143 C 508 143.550, 507.100 144, 506 144 C 504.900 144, 504 144.382, 504 144.848 C 504 145.315, 502.200 146.508, 500 147.500 C 497.800 148.492, 496 149.649, 496 150.070 C 496 150.852, 498.973 152.793, 507 157.253 C 515.633 162.050, 523.555 166.643, 531.233 171.305 C 535.486 173.887, 539.242 176, 539.579 176 C 539.916 176, 541.498 176.931, 543.096 178.068 L 546 180.136 545.989 269.724 C 545.983 318.997, 546.096 359.420, 546.239 359.552 C 546.383 359.684, 549.875 357.834, 554 355.440 C 558.125 353.047, 566.675 348.119, 573 344.490 C 579.325 340.862, 585.175 337.475, 586 336.965 C 588.755 335.262, 598.437 329.741, 604 326.701 C 607.025 325.047, 610.694 322.863, 612.154 321.847 C 613.614 320.831, 615.061 320, 615.369 320 C 615.677 320, 621.981 316.400, 629.378 312 C 636.775 307.600, 643.134 304, 643.509 304 C 643.884 304, 645.498 303.069, 647.096 301.932 L 650 299.864 650 240.468 L 650 181.072 646.268 178.536 C 644.215 177.141, 641.965 176, 641.268 176 C 640.571 176, 640 175.633, 640 175.185 C 640 174.737, 638.334 173.576, 636.298 172.605 C 634.262 171.634, 629.320 168.851, 625.315 166.420 C 621.310 163.989, 617.576 162, 617.017 162 C 616.458 162, 616 161.550, 616 161 C 616 160.450, 615.570 160, 615.044 160 C 614.518 160, 611.706 158.574, 608.794 156.832 C 605.882 155.089, 600.575 152.015, 597 150 C 589.364 145.697, 585.414 143.415, 578.206 139.140 C 575.294 137.413, 572.735 136, 572.518 136 C 572.302 136, 566.979 132.920, 560.691 129.156 C 546.870 120.884, 546.437 120.706, 544.600 122.542 M 318.250 131.573 C 314.813 133.522, 312 135.348, 312 135.631 C 312 136.185, 322.869 130.264, 324.450 128.850 C 326.209 127.276, 324.533 128.012, 318.250 131.573 M 277.250 155.105 C 274.363 156.788, 272 158.396, 272 158.678 C 272 159.233, 280.893 154.288, 282.450 152.867 C 284.145 151.320, 282.605 151.983, 277.250 155.105 M 258.250 166.105 C 255.363 167.788, 253 169.396, 253 169.678 C 253 170.233, 261.893 165.288, 263.450 163.867 C 265.145 162.320, 263.605 162.983, 258.250 166.105 M 337.463 240 C 337.463 266.675, 337.592 277.587, 337.749 264.250 C 337.907 250.912, 337.907 229.088, 337.749 215.750 C 337.592 202.412, 337.463 213.325, 337.463 240 M 337.261 297.482 C 337.499 299.302, 349.611 307.722, 350.587 306.746 C 350.800 306.534, 348.225 304.816, 344.865 302.930 C 341.505 301.043, 338.362 298.600, 337.879 297.500 C 337.015 295.528, 337.006 295.528, 337.261 297.482 M 352.323 307.714 C 352.695 308.316, 355.588 310.259, 358.750 312.032 C 361.913 313.804, 366.413 316.365, 368.750 317.722 C 371.087 319.080, 373 319.974, 373 319.709 C 373 319.444, 369.738 317.316, 365.750 314.980 C 361.762 312.644, 356.958 309.807, 355.073 308.675 C 353.188 307.544, 351.951 307.111, 352.323 307.714 M 256.083 313.319 C 258.243 314.974, 264 317.761, 264 317.151 C 264 316.722, 262.410 315.612, 260.466 314.685 C 257.327 313.188, 254.943 312.445, 256.083 313.319 M 374.500 320.765 C 375.859 322.144, 387 328.317, 387 327.691 C 387 327.416, 384.413 325.686, 381.250 323.846 C 374.665 320.016, 373.023 319.266, 374.500 320.765 M 283 328.306 C 283 329.071, 302.189 340.144, 302.674 339.659 C 302.907 339.427, 300.262 337.669, 296.798 335.754 C 293.334 333.838, 288.813 331.265, 286.750 330.037 C 284.688 328.808, 283 328.029, 283 328.306 M 314.171 346.894 C 321.250 351.383, 323 352.204, 323 351.035 C 323 350.466, 322.557 350, 322.015 350 C 321.473 350, 318.836 348.650, 316.154 347 C 313.473 345.350, 310.903 344, 310.444 344 C 309.984 344, 311.662 345.302, 314.171 346.894 M 325 352.346 C 325 353.024, 336.520 360.001, 337.631 359.996 C 338.109 359.994, 336.925 359.047, 335 357.891 C 333.075 356.735, 330.038 354.900, 328.250 353.813 C 326.462 352.726, 325 352.066, 325 352.346\",\n    stroke: \"none\",\n    fill: \"#149db0\",\n    fillRule: \"evenodd\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 317.500 133 C 307.050 139.021, 297.938 143.959, 297.250 143.974 C 296.563 143.988, 296 144.370, 296 144.823 C 296 145.275, 293.937 146.738, 291.415 148.073 C 288.893 149.408, 286.081 150.950, 285.165 151.500 C 282.309 153.215, 271.670 159.380, 267.929 161.488 C 239.228 177.657, 235.188 180.309, 234.572 183.390 C 233.716 187.670, 233.930 298.280, 234.797 299.627 C 235.184 300.227, 241.575 304.135, 249 308.311 C 256.425 312.487, 263.044 316.375, 263.708 316.952 C 264.372 317.528, 265.128 318, 265.389 318 C 266.041 318, 298.909 336.811, 302 338.954 C 304.461 340.660, 316.361 347.304, 320.742 349.418 C 321.975 350.013, 322.988 350.837, 322.992 351.250 C 322.996 351.663, 323.484 352, 324.075 352 C 324.667 352, 328.346 353.899, 332.252 356.219 C 336.925 358.995, 339.493 360.021, 339.760 359.219 C 339.984 358.549, 341.029 358, 342.083 358 C 343.137 358, 344 357.550, 344 357 C 344 356.450, 344.801 356, 345.779 356 C 346.758 356, 348.207 355.100, 349 354 C 349.793 352.900, 351.463 352, 352.712 352 C 353.961 352, 356.273 350.650, 357.850 349 C 359.426 347.350, 361.455 346, 362.358 346 C 363.261 346, 364 345.550, 364 345 C 364 344.450, 364.900 344, 366 344 C 367.100 344, 368 343.550, 368 343 C 368 342.450, 368.900 342, 370 342 C 371.100 342, 372 341.550, 372 341 C 372 340.450, 372.590 340, 373.311 340 C 374.033 340, 375.589 339.100, 376.770 338 C 377.950 336.900, 380.060 336, 381.458 336 C 383.333 336, 384 335.475, 384 334 C 384 332.704, 384.667 332, 385.893 332 C 386.934 332, 388.027 331.372, 388.321 330.605 C 388.800 329.357, 377.281 322.250, 348.680 306.146 C 346.381 304.852, 342.838 302.725, 340.806 301.420 L 337.113 299.046 337.306 238.523 C 337.433 198.979, 337.153 177.826, 336.500 177.500 C 335.902 177.201, 336.003 176.765, 336.750 176.417 C 337.705 175.971, 338 169.472, 338 148.917 C 338 134.113, 337.663 122.012, 337.250 122.026 C 336.837 122.041, 327.950 126.979, 317.500 133 M 633.250 449.689 C 634.487 450.013, 635 451.151, 635 453.573 C 635 455.458, 635.450 457, 636 457 C 636.550 457, 637 455.458, 637 453.573 C 637 451.151, 637.513 450.013, 638.750 449.689 C 639.712 449.438, 638.475 449.232, 636 449.232 C 633.525 449.232, 632.288 449.438, 633.250 449.689 M 642.118 453.167 C 642.225 457.090, 642.302 457.216, 642.923 454.500 C 643.576 451.648, 643.648 451.611, 644.372 453.750 C 644.792 454.988, 645.524 456, 646 456 C 646.476 456, 647.208 454.988, 647.628 453.750 C 648.352 451.611, 648.424 451.648, 649.077 454.500 C 649.705 457.244, 649.773 457.138, 649.882 453.250 C 650.011 448.603, 648.589 447.518, 647.589 451.500 C 646.817 454.576, 645.251 454.762, 644.820 451.828 C 644.644 450.634, 643.938 449.471, 643.250 449.245 C 642.368 448.954, 642.035 450.108, 642.118 453.167\",\n    stroke: \"none\",\n    fill: \"#0c4f9d\",\n    fillRule: \"evenodd\"\n  })), _path5 || (_path5 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 437 18 C 436.207 19.100, 434.977 20, 434.266 20 C 432.533 20, 428.897 22.096, 426.893 24.250 C 425.998 25.212, 424.531 26, 423.633 26 C 422.735 26, 422 26.450, 422 27 C 422 27.550, 421.199 28, 420.221 28 C 419.242 28, 417.793 28.900, 417 30 C 416.207 31.100, 414.473 32, 413.147 32 C 411.820 32, 410.002 32.788, 409.107 33.750 C 407.010 36.003, 403.443 38, 401.514 38 C 400.681 38, 400 38.450, 400 39 C 400 39.550, 399.199 40, 398.221 40 C 397.242 40, 395.793 40.900, 395 42 C 394.207 43.100, 392.964 44, 392.237 44 C 391.511 44, 389.950 44.900, 388.770 46 C 387.589 47.100, 385.893 48, 385 48 C 384.107 48, 382.411 48.900, 381.230 50 C 380.050 51.100, 378.390 52, 377.542 52 C 376.694 52, 375.996 52.337, 375.992 52.750 C 375.983 53.592, 371.188 56, 369.521 56 C 368.927 56, 367.793 56.900, 367 58 C 366.207 59.100, 364.951 60, 364.208 60 C 363.465 60, 362.183 60.674, 361.359 61.498 C 360.534 62.323, 358.654 63.295, 357.180 63.658 C 355.706 64.022, 353.772 65.148, 352.883 66.160 C 351.993 67.172, 350.630 68, 349.853 68 C 349.077 68, 347.793 68.900, 347 70 C 346.207 71.100, 344.951 72, 344.208 72 C 342.595 72, 340.752 73.727, 339.131 76.756 C 337.668 79.489, 337.606 124.362, 339.066 123.459 C 339.580 123.142, 340 124.034, 340 125.441 C 340 126.848, 339.550 128, 339 128 C 337.427 128, 337.671 159.680, 339.250 160.417 C 340.250 160.883, 340.250 161.117, 339.250 161.583 C 338.563 161.904, 338.007 163.142, 338.015 164.333 C 338.028 166.099, 338.210 166.222, 339 165 C 339.736 163.862, 339.973 164.284, 339.985 166.750 C 339.993 168.537, 339.550 170, 339 170 C 337.515 170, 337.790 172.933, 339.429 174.571 C 341.257 176.400, 342.763 176.380, 344.641 174.502 C 345.466 173.677, 347.346 172.705, 348.820 172.342 C 350.294 171.978, 352.228 170.852, 353.117 169.840 C 354.007 168.828, 355.263 168, 355.909 168 C 356.555 168, 358.050 167.100, 359.230 166 C 360.411 164.900, 361.967 164, 362.689 164 C 363.410 164, 364 163.550, 364 163 C 364 162.450, 364.900 162, 366 162 C 367.100 162, 368 161.550, 368 161 C 368 160.450, 368.801 160, 369.779 160 C 370.758 160, 372.207 159.100, 373 158 C 373.793 156.900, 375.242 156, 376.221 156 C 377.199 156, 378 155.550, 378 155 C 378 154.450, 378.801 154, 379.779 154 C 380.758 154, 382.207 153.100, 383 152 C 383.793 150.900, 384.927 150, 385.521 150 C 387.188 150, 391.983 147.592, 391.992 146.750 C 391.996 146.338, 392.900 146, 394 146 C 395.100 146, 396 145.550, 396 145 C 396 144.450, 396.801 144, 397.779 144 C 398.758 144, 400.207 143.100, 401 142 C 401.793 140.900, 403.242 140, 404.221 140 C 405.199 140, 406 139.550, 406 139 C 406 138.450, 406.694 138, 407.542 138 C 408.390 138, 410.050 137.100, 411.230 136 C 412.411 134.900, 413.967 134, 414.689 134 C 415.410 134, 416 133.550, 416 133 C 416 132.450, 416.801 132, 417.779 132 C 418.758 132, 420.207 131.100, 421 130 C 421.795 128.897, 423.589 128, 425 128 C 426.411 128, 428.205 127.103, 429 126 C 429.793 124.900, 431.242 124, 432.221 124 C 433.199 124, 434 123.622, 434 123.161 C 434 121.812, 438.812 120, 442.392 120 C 444.420 120, 446.387 120.770, 447.500 122 C 448.495 123.100, 450.266 124, 451.434 124 C 452.603 124, 454.207 124.900, 455 126 C 455.793 127.100, 457.242 128, 458.221 128 C 459.199 128, 460 128.450, 460 129 C 460 129.550, 460.900 130, 462 130 C 463.100 130, 464 130.450, 464 131 C 464 131.550, 464.694 132, 465.542 132 C 466.390 132, 468.050 132.900, 469.230 134 C 470.411 135.100, 471.967 136, 472.689 136 C 473.410 136, 474 136.361, 474 136.803 C 474 137.245, 476.243 138.707, 478.984 140.053 C 481.726 141.399, 483.976 142.838, 483.984 143.250 C 483.993 143.662, 484.900 144, 486 144 C 487.100 144, 488 144.450, 488 145 C 488 145.550, 488.900 146, 490 146 C 491.100 146, 492 146.450, 492 147 C 492 147.550, 492.900 148, 494 148 C 495.100 148, 496 147.550, 496 147 C 496 146.450, 496.900 146, 498 146 C 499.100 146, 500 145.550, 500 145 C 500 144.450, 500.801 144, 501.779 144 C 502.758 144, 504.207 143.100, 505 142 C 505.795 140.897, 507.589 140, 509 140 C 510.411 140, 512.205 139.103, 513 138 C 513.793 136.900, 515.242 136, 516.221 136 C 517.199 136, 518 135.550, 518 135 C 518 134.450, 518.801 134, 519.779 134 C 520.758 134, 522.207 133.100, 523 132 C 523.793 130.900, 525.242 130, 526.221 130 C 527.199 130, 528 129.550, 528 129 C 528 128.450, 528.801 128, 529.779 128 C 530.758 128, 532.207 127.100, 533 126 C 533.793 124.900, 535.242 124, 536.221 124 C 537.199 124, 538 123.550, 538 123 C 538 122.450, 538.735 122, 539.633 122 C 540.531 122, 542.147 120.988, 543.224 119.750 C 545.061 117.640, 545.162 116.191, 544.841 96.428 C 544.548 78.331, 544.263 75.119, 542.821 73.678 C 541.898 72.755, 540.436 72, 539.571 72 C 538.707 72, 538 71.605, 538 71.121 C 538 70.638, 536.650 69.683, 535 69 C 533.350 68.317, 532 67.362, 532 66.879 C 532 66.395, 531.100 66, 530 66 C 528.900 66, 528 65.550, 528 65 C 528 64.450, 527.306 64, 526.458 64 C 525.610 64, 523.950 63.100, 522.770 62 C 521.589 60.900, 520.033 60, 519.311 60 C 518.590 60, 518 59.607, 518 59.126 C 518 58.646, 515.058 56.847, 511.461 55.129 C 507.865 53.412, 503.955 51.105, 502.773 50.003 C 501.590 48.901, 499.789 48, 498.770 48 C 497.750 48, 495.950 47.100, 494.770 46 C 493.589 44.900, 492.033 44, 491.311 44 C 490.590 44, 490 43.550, 490 43 C 490 42.450, 489.306 42, 488.458 42 C 487.610 42, 485.950 41.100, 484.770 40 C 483.589 38.900, 482.033 38, 481.311 38 C 480.590 38, 480 37.550, 480 37 C 480 36.450, 479.306 36, 478.458 36 C 477.610 36, 475.950 35.100, 474.770 34 C 473.589 32.900, 472.033 32, 471.311 32 C 470.590 32, 470 31.550, 470 31 C 470 30.450, 469.170 30, 468.155 30 C 467.140 30, 465.495 29.100, 464.500 28 C 463.505 26.900, 461.800 26, 460.712 26 C 459.625 26, 458.002 25.212, 457.107 24.250 C 455.103 22.096, 451.467 20, 449.734 20 C 449.023 20, 447.793 19.100, 447 18 C 446.023 16.645, 444.411 16, 442 16 C 439.589 16, 437.977 16.645, 437 18\",\n    stroke: \"none\",\n    fill: \"#e6152a\",\n    fillRule: \"evenodd\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIdsLogo);\nexport default __webpack_public_path__ + \"static/media/IdsLogo.119bf5ff4a53272009aa894bda90db42.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState } from \"react\";\nimport { Alert } from \"@mui/material\";\nimport {\n  Typography,\n  Grid,\n  makeStyles,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Card,\n  CardHeader,\n  CardActionArea,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Badge,\n  Fab,\n} from \"@material-ui/core\";\nimport AppsIcon from \"@material-ui/icons/Apps\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport DatBimApi from \"./DatBimApi/DatBimApi\";\nimport DropBox from \"./DropBox/DropBox\";\nimport DropboxChooser from \"react-dropbox-chooser\";\nimport OpenDthxLogo from \"./img/OpenDthxLogo.png\";\nimport SearchBar from \"../../../../Components/SearchBar\";\nimport Tracim from \"./Tracim/Tracim\";\nimport TracimLogo from \"./Tracim/img/TracimLogo.svg\"\nimport IdsLogo from \"./img/IdsLogo.svg\"\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  application: {\n    height: \"17em\",\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    padding: \"5px\",\n    borderRadius: \"0px\",\n  },\n  root: {\n    maxWidth: 345,\n    margin: \"10px\",\n    cursor: \"pointer\",\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\", // 16:9\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n  button: {\n    color: \"black\",\n    // \"&:hover\": {\n    //   color: \"white\",\n    //   backgroundColor: \"black\",\n    //   cursor: \"pointer\",\n    // },\n  },\n}));\n\n\nconst ID5899e0aca600741755433911 = React.lazy(() => import(\"ID5899e0aca600741755433911/App\"));\n\n\n\nconst applications = [\n  {\n    name: \"Open dthX\",\n    img: OpenDthxLogo,\n    type: \"data\",\n    description: \"Base de données permettant l'enrichissement de la maquette\",\n  },\n  // {\n  //   name: \"DropBox\",\n  //   img: DropBoxLogo,\n  //   type: \"storage\",\n  //   description: \"Espace permettant le partage et le stockage de fichier\",\n  // },\n  // {\n  //   name: 'Google Drive',\n  //   img: GoogleDriveLogo,\n  //   type: 'storage',\n  //   tags: ['Coming Soon'],\n  //   description: 'Espace permettant le partage et le stockage de fichier'\n  // },\n  {\n    name: \"Tracim\",\n    img: TracimLogo,\n    type: \"storage\",\n    description: \"Espace permettant le partage et le stockage de fichier\",\n  },\n  {\n    name: \"IDS\",\n    img: IdsLogo,\n    type: \"control\",\n    description: \"Solution opensource mise en place par Building Smart International permettant le contrôle des maquettes\",\n  },\n];\n\nconst { REACT_APP_DROPBOX_APP_KEY } = process.env;\n\nconst Marketplace = ({\n  bimData,\n  setBimData,\n  viewer,\n  modelID,\n  handleShowMarketplace,\n  eids,\n  setEids,\n  onDrop,\n  addElementsNewProperties,\n  specificApplication,\n  apiConnectors,\n  setApiConnectors,\n}) => {\n  const [selectedApp, setSelectedApp] = useState(\"home\");\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [filteredData, setFilteredData] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  useEffect(() => {\n    console.log(\"apiConnectors\", apiConnectors);\n    setFilteredData(applications);\n    if (specificApplication) {\n      setSelectedApp(specificApplication);\n    } else {\n      setSelectedApp(\"home\");\n    }\n  }, []);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleSearchData = (input) => {\n    const dataList = [...applications];\n    if (dataList && dataList.length > 0) {\n      const newFilteredData = dataList.filter((data) => {\n        const searchResult = `${data.name} ${data.type} ${data.description}`\n          .toLowerCase()\n          .includes(input.toLowerCase());\n        return searchResult;\n      });\n      setSearchInput(input);\n      setFilteredData(newFilteredData);\n    }\n  };\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowMarketplace}\n            >\n              <AppsIcon />\n            </Fab>\n          </Avatar>\n        }\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleShowMarketplace}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              className={classes.button}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              {/* <ListItem\n                button\n                onClick={handleShowElement}\n              >\n                <ListItemIcon>\n                  <VisibilityIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Visibility\" />\n              </ListItem> */}\n              <ListItem button onClick={handleShowMarketplace}>\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n        title={`Place de marché`}\n        subheader={`Liste des applications BIM`}\n      />\n      <CardContent className={classes.cardContent}>\n        {selectedApp === \"home\" && (\n          <Grid container spacing={3}>\n            {filteredData?.length >= 0 && (\n              <>\n                <Grid item xs={12}>\n                  <SearchBar\n                    input={searchInput}\n                    onChange={handleSearchData}\n                    placeholder=\"Key words\"\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <Typography>{`Number of results: ${filteredData.length}`}</Typography>\n                </Grid>\n              </>\n            )}\n            {filteredData?.map((application) => (\n              <Grid item xs={4}>\n                <Card className={classes.application}>\n                  <CardActionArea\n                    onClick={() => {\n                      // if (application.name === 'Dropbox') {\n                      //   viewer.openDropboxWindow();\n                      // } else {\n                      setSelectedApp(application.name);\n                      // }\n                    }}\n                  >\n                    <CardHeader\n                      avatar={\n                        <Avatar\n                          aria-label=\"recipe\"\n                          className={classes.avatar}\n                          src={application.img}\n                          alt={application.name}\n                          title={application.name}\n                        />\n                      }\n                      title={application.name}\n                      subheader={\n                        <Badge color=\"success\" pill>\n                          {application.type}\n                        </Badge>\n                      }\n                    />\n                    <CardContent>\n                      <Typography\n                        variant=\"body2\"\n                        color=\"textSecondary\"\n                        component=\"p\"\n                      >\n                        {application.description}\n                      </Typography>\n                    </CardContent>\n                  </CardActionArea>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        )}\n        {selectedApp === \"Open dthX\" && (\n          <DatBimApi\n            bimData={bimData}\n            setBimData={setBimData}\n            viewer={viewer}\n            modelID={modelID}\n            eids={eids}\n            setEids={setEids}\n            addElementsNewProperties={addElementsNewProperties}\n            handleShowMarketplace={handleShowMarketplace}\n          />\n        )}\n        {selectedApp === \"DropBox\" && (\n          <DropBox viewer={viewer} onDrop={onDrop} />\n        )}\n        {selectedApp === \"Tracim\" && (\n          <Tracim viewer={viewer} onDrop={onDrop} />\n        )}\n        {selectedApp === \"IDS\" && (\n          <React.Suspense fallback={<>{`chargement...`}</>}>\n            <ID5899e0aca600741755433911 viewer={viewer} />\n          </React.Suspense>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Marketplace;\n","import React, { useEffect, useState, memo } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  // List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  ButtonGroup,\n  CircularProgress,\n  Divider\n} from \"@mui/material\";\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { useDemoData } from '@mui/x-data-grid-generator';\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport DownloadIcon from '@mui/icons-material/Download';\nimport SearchBar from '../../../../Components/SearchBar';\nimport { IFCSLAB, IFCMEMBER, IFCSTRUCTURALCURVEMEMBER } from \"web-ifc\";\nimport CommentIcon from '@mui/icons-material/Comment';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport LibraryAddIcon from '@mui/icons-material/LibraryAdd';\nimport MutltiSelectionIcon from '@mui/icons-material/ControlPointDuplicate';\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\nimport IfcIcons from '../../Utils/ifc-full-icons.json';\nimport flatten from 'tree-flatten';\nimport { FixedSizeList as List } from \"react-window\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  },\n  buttonGroup: {\n    backgroundColor: 'white',\n    marginTop: '1em'\n  }\n}));\n\n\nconst SearchData = ({\n  bimData,\n  setBimData,\n  viewer,\n  handleShowMarketplace,\n  handleShowProperties,\n  handleGetJsonData,\n  eids,\n  setEids\n}) => {\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [checked, setChecked] = React.useState([0]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [selectedElements, setSelectedElements] = useState([]);\n  const [validation, setValidation] = useState({\n    loading: false,\n    message: `${selectedElements.length} éléments`,\n  });\n  // const [ifcElementByType, setIfcElementByType] = useState([]);\n  // const [expressIDList, setExpressIDList] = useState([]);\n\n  useEffect(() => {\n    async function init() {\n      setValidation({\n        loading: true,\n        message: `Chargement de la sélection...`,\n      })\n      const selectedElements = await Promise.all(eids.map(async (eid) => {\n        const elementProperties = await viewer.IFC.getProperties(0, eid, false, false);\n        const type = await viewer.IFC.loader.ifcManager.getIfcType(0, eid);\n        return elementProperties;\n      }));\n\n      setSelectedElements(selectedElements);\n      setValidation({\n        loading: false,\n        message: `${selectedElements.length} éléments`\n      })\n    }\n    init();\n  }, [eids]);\n\n  const handleElementsMultiSelection = async () => {\n    const found = await viewer.IFC.pickIfcItem(true, 1);\n    setEids([...eids, found.id]);\n  }\n\n  const handleElementSelection = async (element) => {\n    const currentIndex = checked.indexOf(element);\n    const newChecked = [...checked];\n    //await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n    if (currentIndex === -1) {\n      newChecked.push(currentIndex);\n    } else {\n      // await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  }\n\n  const handleRemoveAllElements = async () => {\n    setEids([]);\n    await viewer.IFC.unpickIfcItems();\n  }\n\n\n  const handleGetAllItemsOfType = async (element) => {\n    console.log('element', element);\n    const elementsByType = await viewer.getAllItemsOfType(0, element.type, false, false);\n    console.log('elementsByType', elementsByType)\n    setEids([...eids, ...elementsByType]);\n  }\n\n  const handleRemoveElement = async (element) => {\n    const newEids = eids.filter(eid => eid !== element.expressID);\n    await viewer.IFC.pickIfcItemsByID(0, newEids);\n    setEids(newEids);\n  }\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement('a')\n    a.download = fileName\n    a.href = window.URL.createObjectURL(blob)\n    const clickEvt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n    a.dispatchEvent(clickEvt)\n    a.remove()\n  }\n\n  const handleExportToCsv = async (e, eids) => {\n    e.preventDefault()\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = ['modelId', 'elementName', 'elementClass', 'globalId', 'expressId', 'psetName', 'propertyName', 'propertyValue'].join(',');\n    propertiesCsv.push(headers)\n\n    await Promise.all(eids.map(async eid => {\n      const ifcElement = await viewer.IFC.getProperties(0, eid, true, true);\n      const selectedModelID = await viewer.IFC.getModelID();\n      // const ifcLoader = new IFCLoader();\n      // const ifcClass = ifcClassType[];\n      console.log('ifcClass ', ifcElement)\n      await Promise.all(ifcElement.psets?.map(async pset => pset.HasProperties && await Promise.all(pset.HasProperties?.map(async (property) => {\n        const modelID = 0;\n        const elementName = `${ifcElement.Name?.value}`;\n        const elementClass = `NONE`;\n        const globalID = `${ifcElement.GlobalId.value}`;\n        const expressID = `${ifcElement.expressID}`;\n        const psetName = `${pset.Name.value}`;\n        const propertyName = `${property.Name?.value}`;\n        const propertyValue = `${property.NominalValue?.value}`;\n\n        propertiesCsv.push([modelID, elementName, elementClass, globalID, expressID, psetName, propertyName, propertyValue].join(','))\n      }))))\n    }));\n\n    downloadFile({\n      data: [...propertiesCsv].join('\\n'),\n      fileName: `selection.csv`,\n      fileType: 'text/csv',\n    })\n  }\n\n  function getAllItemsOfType(type, properties) {\n    return Object.values(properties).filter(item => item.type === type);\n  }\n\n  // function getRelElements(data, dataList) {\n  //   if (data.type.toLowerCase().includes(\"property\")) {\n  //     const pset = dataList.filter(item => item.type === 'IFCPROPERTYSET');\n  //     const allPsetsRels = propertyValues.filter(item => item.type === 'IFCRELDEFINESBYPROPERTIES');\n  //     const relatedPsetsRels = allPsetsRels.filter(item => item.RelatedObjects.includes(id));\n  //     const psets = relatedPsetsRels.map(item => properties[item.RelatingPropertyDefinition]);\n  //     for (let pset of psets) {\n  //       pset.HasProperty = pset.HasProperties.map(id => properties[id]);\n  //     }\n  //   }\n  // }\n\n  // const newHandleSearchData = async (input) => {\n  //   setValidation({\n  //     loading: true,\n  //     message: 'Chargement...'\n  //   });\n\n  //   const properties = bimData.models.data[0];\n  //   const relContained = getAllItemsOfType('IFCRELAGGREGATES', properties);\n  //   console.log('relContained', relContained)\n  //   const relSpatial = getAllItemsOfType('IFCRELCONTAINEDINSPATIALSTRUCTURE', properties);\n  //   console.log('relSpatial', relSpatial)\n\n  //   const relPset = getAllItemsOfType('IFCRELDEFINESBYPROPERTIES', properties);\n  //   const relMat = getAllItemsOfType('IFCRELASSOCIATESMATERIAL', properties);\n\n\n  //   console.log('propertiesValues', Object.values(properties))\n  //   const dataList = Object.values(properties)\n  //   // const dataList =  await Object.keys(data).forEach(index => {\n  //   //   maxExpressId = Math.max(maxExpressId, allLines._data[index])\n  //   // });\n  //   // console.log('dataList', dataList)\n  //   const filteredEids = [];\n\n  //   const newFilteredData = await dataList.filter((data) => {\n  //     const searchResult = newSearchEngine(data, input);\n  //     if (searchResult) {\n  //       filteredEids.push(data.expressID);\n  //     }\n  //     return searchResult;\n  //   });\n  //   console.log('filteredEids', filteredEids)\n  //   setEids(filteredEids);\n  //   await viewer.IFC.pickIfcItemsByID(0, filteredEids);\n  //   setValidation({\n  //     loading: false,\n  //     message: `éléments`\n  //   });\n  // }\n\n  // const newSearchEngine = (data, input) => {\n  //   const keyWords = [];\n  //   keyWords.push(`${data.expressID} ${DecodeIFCString(data.Name)} ${data.type} ${DecodeIFCString(data.Description)} ${data.GlobalId} ${DecodeIFCString(data.NominalValue)} ${data.Unit}`);\n\n  //   const searchResult = keyWords.some(keyWord => keyWord.toLowerCase()\n  //     .includes(input.toLowerCase()));\n\n  //   return searchResult;\n  // }\n\n  const handleSearchData = async (input) => {\n    setValidation({\n      loading: true,\n      message: 'Chargement...'\n    });\n    console.log('inputs', input)\n    let dataList = bimData.search.data[0];\n    console.log('dataList', dataList)\n    if (!dataList || dataList.length === 0) {\n      const data = await handleGetJsonData(viewer, flatten(bimData.spatialStructures.list[0], 'children'), setValidation);\n      setBimData({\n        ...bimData,\n        search: {\n          ...bimData.search,\n          data: [...bimData.search.data, data]\n        }\n      });\n      dataList = [...data];\n    }\n    const filteredEids = [];\n\n    if (dataList && dataList.length > 0) {\n      const newFilteredData = await dataList.filter((data) => {\n        const searchResult = searchEngine(data, input);\n        if (searchResult) {\n          filteredEids.push(data.expressID);\n        }\n        return searchResult;\n      });\n      setSearchInput(input);\n      setFilteredData(newFilteredData);\n      setEids(filteredEids);\n      console.log('newFilteredData', newFilteredData)\n      setSelectedElements(newFilteredData);\n      await viewer.IFC.pickIfcItemsByID(0, filteredEids);\n    }\n    setValidation({\n      loading: false,\n      message: `${filteredEids.length} éléments`\n    });\n  };\n\n  function DecodeIFCString(ifcString) {\n    const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/giu;\n    let resultString = ifcString;\n    let match = ifcUnicodeRegEx.exec(ifcString);\n    while (match) {\n      const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n      resultString = resultString.replace(match[0], unicodeChar);\n      match = ifcUnicodeRegEx.exec(ifcString);\n    }\n    return resultString;\n  }\n\n  const searchEngine = (data, input) => {\n    const keyWords = [];\n    keyWords.push(`${data.Name?.value} ${data.type} ${data.Description} ${data.GlobalId?.value} ${data.ObjectType?.value} ${data.expressID}`);\n    // for (let pset of data.psets) {\n    //   keyWords.push(`${pset.Name?.value}`);\n    //   if (pset.HasProperties && pset.HasProperties.length > 0) {\n    //     for (let property of pset.HasProperties) {\n    //       const label = DecodeIFCString(property.Name.value);\n    //       const value = property.NominalValue\n    //         ? DecodeIFCString(property.NominalValue.value)\n    //         : \"\";\n\n    //       const description =\n    //         property.Description && property.Description !== \"\"\n    //           ? DecodeIFCString(property.Description.value)\n    //           : null;\n    //       keyWords.push(`${label} ${value} ${description}`);\n    //     }\n    //   }\n    // }\n\n    // for (let mat of data.mats) {\n    //   keyWords.push(`${mat.ForLayerSet?.Description} ${mat.ForLayerSet?.LayerSetName?.value}`);\n    //   if (mat.ForLayerSet?.MaterialLayers && mat.ForLayerSet?.MaterialLayers.length > 0) {\n    //     for (let material of mat.ForLayerSet.MaterialLayers) {\n    //       const name = DecodeIFCString(material.Material.Name.value);\n    //       // const thickness = DecodeIFCString(material.Material.Name.value);\n    //       keyWords.push(`${name}`);\n    //     }\n    //   }\n    // }\n\n    const searchResult = keyWords.some(keyWord => keyWord.toLowerCase()\n      .includes(input.toLowerCase()));\n\n    return searchResult;\n  }\n\n\n  const handleChange = (input) => {\n    setSearchInput(input);\n  }\n\n  const handleResetSearch = async () => {\n    setSearchInput(\"\");\n    setEids([]);\n    setSelectedElements([]);\n    await viewer.IFC.pickIfcItemsByID(0, []);\n  };\n\n  const Row = ({ index, key, style }) => (\n    // <div key={key} style={style} className=\"post\">\n    //   <p>{`${selectedElements[index].Name ? selectedElements[index].Name.value : 'NO NAME'} / ${selectedElements[index].expressID}`}</p>\n    // </div>\n    <ListItem\n      key={key}\n      secondaryAction={\n        <>\n          {/* <IconButton\n    edge=\"end\"\n    aria-label=\"comments\"\n    onClick={() => handleGetAllItemsOfType(element)}\n  >\n    <LibraryAddIcon />\n  </IconButton> */}\n          <IconButton\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={(e) => {\n              handleShowProperties(selectedElements[index].expressID);\n              e.stopPropagation();\n            }}\n          >\n            <DescriptionIcon />\n          </IconButton>\n          <IconButton\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={(e) => handleExportToCsv(e, [selectedElements[index].expressID])}\n          >\n            <DownloadIcon />\n          </IconButton>\n          <IconButton\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleRemoveElement(selectedElements[index])}\n          >\n            <CloseIcon />\n          </IconButton>\n        </>\n      }\n      disablePadding\n      style={style}\n    >\n      <ListItemButton\n        role={undefined}\n        dense\n        onClick={() => handleElementSelection(selectedElements[index])}\n      >\n        {/* <Chip label={`${String(element.type)}`} /> */}\n        <ListItemText\n          id={`checkbox-list-label-${index}`}\n          primary={`${selectedElements[index].Name ? selectedElements[index].Name.value : 'NO NAME'} / ${selectedElements[index].expressID}`}\n        // secondary={secondary ? 'Secondary text' : null}\n        />\n      </ListItemButton>\n    </ListItem>\n  )\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12}>\n        <SearchBar\n          input={searchInput}\n          style={{ marginBottom: \"1em\" }}\n          onChange={handleChange}\n          placeholder=\"Mot clé\"\n          onClickOne={() => handleSearchData(searchInput)}\n          onClickTwo={handleResetSearch}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Typography gutterBottom variant=\"title2\" component=\"div\">\n          Remarque: La première recherche par mot clès peut être longue car elle génère les données pour la recherche.\n        </Typography>\n      </Grid>\n      <Grid item xs={6} style={{ textAlign: 'left' }}>\n        <ButtonGroup\n          // color=\"secondary\" aria-label=\"medium secondary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <CheckBoxIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={handleRemoveAllElements}\n          >\n            <DeleteIcon />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={6} style={{ textAlign: 'right' }}>\n        <ButtonGroup\n          // variant=\"contained\"\n          // aria-label=\"outlined primary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <MutltiSelectionIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n            onClick={(e) => handleExportToCsv(e, eids)}\n          >\n            <DownloadIcon />\n          </Button>\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleShowMarketplace('Open dthX')}\n          >\n            {/* <img\n              src={OpenDthxLogo}\n            /> */}\n            <Avatar\n              aria-label=\"recipe\"\n              className={classes.avatar}\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={12}>\n        {validation.loading ?\n          <>\n            <Grid item xs={12} style={{ textAlign: 'center' }}>\n              <CircularProgress color=\"inherit\" />\n            </Grid>\n            <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n              <Typography gutterBottom variant=\"h5\" component=\"div\">{`${validation.message}`}    </Typography>\n            </Grid>\n          </>\n          :\n          <>\n            <Grid item xs={12} >\n              <Typography gutterBottom variant=\"title\" component=\"div\">{`${validation.message}`}    </Typography>\n            </Grid>\n            <Grid item xs={12}>\n              <List\n                // sx={{ width: \"100%\" }}\n                width={\"100%\"}\n                height={700}\n                itemCount={selectedElements.length}\n                itemSize={30}\n              >\n                {Row}\n              </List>\n            </Grid>\n          </>\n        }\n\n      </Grid>\n    </Grid>\n    // <div style={{ height: 400, width: '100%' }}>\n    //   <DataGrid {...data} components={{ Toolbar: GridToolbar }} />\n    // </div>\n  );\n};\n\nexport default memo(SearchData);\n","import React, { useRef, useEffect, useState } from 'react';\nimport ArrowDropDown from '@mui/icons-material/ArrowDropDown';\nimport ArrowRight from '@mui/icons-material/ArrowRight';\nimport {\n  Typography,\n  Button,\n  TreeItem,\n  Grid,\n  Checkbox,\n  IconButton,\n  Chip\n} from \"@mui/material\";\nimport DownloadIcon from '@mui/icons-material/Download';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { FixedSizeTree as Tree } from 'react-vtree';\n\nconst TreeComponent = ({\n  spatialStructures,\n  spatialStructure,\n  handleShowProperties,\n  toggleRow,\n  vtree\n}) => {\n  const [refVisible, setRefVisible] = useState(false)\n  let treeInstance = useRef();\n\n  useEffect(() => {\n    // if (refVisible) {\n    setTimeout(() => {\n      treeInstance.current?.recomputeTree(vtree);\n    }, 1)\n    // }\n  }, [refVisible, vtree]);\n\n  const Node = ({ data: { isLeaf, type, id, nestingLevel, name }, isOpen, style, setOpen, exportNodeToCsv }) => (\n    <div\n      style={{\n        ...style,\n        alignItems: 'center',\n        display: 'flex',\n        marginLeft: nestingLevel * 20 + (isLeaf ? 48 : 0),\n      }}\n    >\n      {!isLeaf && (\n        <span onClick={() => setOpen(!isOpen)}>\n          {isOpen ? <ArrowDropDown /> : <ArrowRight />}\n        </span>\n      )}\n      {/* <input type=\"checkbox\" name=\"scales\" defaultChecked={vtree[id]} onClick={() => toggleRow(id)} /> */}\n      <Checkbox\n        type=\"checkbox\" name=\"scales\" defaultChecked={vtree[id]} onClick={() => toggleRow(id)}\n      />\n      <Chip label={`${type}`} />\n      <Typography\n        component=\"div\"\n      >\n        {`/${name.toLowerCase()}/${id}`}\n      </Typography>\n      <Grid item xs={2} sx={{ textAlign: 'right' }}>\n        <IconButton\n          edge=\"end\"\n          aria-label=\"comments\"\n          onClick={(e) => {\n            handleShowProperties(parseInt(id));\n            // e.stopPropagation();\n          }}\n        >\n          <DescriptionIcon />\n        </IconButton>\n      </Grid>\n      {/* <Button\n        edge=\"end\"\n        aria-label=\"comments\"\n        // style={{ textAlign: 'right', position: 'absolute', right: - nestingLevel * 30 - (isLeaf ? 48 : 0) }}\n        // className={classes.button}\n        onClick={(e) => exportNodeToCsv(e)}\n      >\n        <DownloadIcon />\n      </Button> */}\n    </div>\n  );\n\n  const getNodeData = (node, nestingLevel, structure) => ({\n    data: {\n      id: node.expressID.toString(), // mandatory\n      isLeaf: node.children.length === 0,\n      isOpenByDefault: false, // mandatory\n      type: node.type,\n      name: node.Name ? node.Name.value : \"\",\n      nestingLevel,\n    },\n    nestingLevel,\n    node,\n  });\n\n  function* treeWalker() {\n    // Here we send root nodes to the component.\n    for (let i = 0; i < spatialStructures.length; i++) {\n      yield getNodeData(spatialStructures[i], 0);\n    }\n\n    while (true) {\n      // Here we receive an object we created via getNodeData function\n      // and yielded before. All we need here is to describe its children\n      // in the same way we described the root nodes.\n      const parentMeta = yield;\n\n      for (let i = 0; i < parentMeta.node.children.length; i++) {\n        yield getNodeData(\n          parentMeta.node.children[i],\n          parentMeta.nestingLevel + 1,\n        );\n      }\n    }\n  }\n\n  return (\n    <AutoSizer>\n      {({ height, width }) => (\n        <Tree\n          // key={spatialStructure.expressID}\n          ref={el => { treeInstance.current = el; setRefVisible(!!el); }}\n          itemCount={1000}\n          itemSize={30}\n          treeWalker={treeWalker}\n          height={height}\n          width={width}\n        >\n          {Node}\n        </Tree>\n      )}\n    </AutoSizer>\n  )\n}\n\nexport default TreeComponent;","function reducer(state, action) {\n    switch (action.type) {\n        case 'LOAD_DATA': {\n            const { originalStructureTree, hashMapTree, vtree, selected } = action.payload;\n            return { ...state, spatialStructures: originalStructureTree, hashMapTree: hashMapTree, vtree: vtree, selected: selected, loading: false };\n        }\n        case 'SET_EXPANDED':\n            return { ...state, expanded: action.payload, loading: false, loadingCursor: false };\n        case 'SELECT_CHILDREN':\n            const { selected, vtree } = action.payload;\n            return { ...state, selected: selected, vtree: vtree, expanded: null, loading: false };\n        case 'RESET_TREE':\n            return { ...state, selected: [], vtree: {}, expanded: null, loading: false };\n        case 'LOADING':\n            return { ...state, loading: true };\n        case 'LOADING_CURSOR':\n            return { ...state, loadingCursor: true };\n        default:\n            throw new Error();\n    }\n}\n\nexport default reducer;","const hashMapSpatialStructures = (spatialStructures, hash, parentID = 0) => spatialStructures.reduce((acc, structure) => {\n  acc[structure.expressID] = structure;\n  acc[structure.expressID].parentsIds = acc[parentID] && acc[parentID].parentsIds ? [...acc[parentID].parentsIds, structure.expressID] : [structure.expressID];\n  acc[structure.expressID].childrenIds = getChildNodes([structure.expressID], acc[structure.expressID])\n  if (structure.children) {\n    acc = hashMapSpatialStructures(structure.children, acc, structure.expressID);\n    acc[structure.expressID].parentID = parentID;\n  }\n  return acc;\n}, hash)\n\nfunction getChildNodes(nodeID, spatialStructures) {\n  let childNodes = [nodeID[0]];\n\n  //GET Object\n  const elem = spatialStructures;\n  function traverseChildren(spatialStructures) {\n    if (spatialStructures.children && spatialStructures.children.length > 0) {\n      spatialStructures.children.forEach((child) => {\n        childNodes.push(child.expressID);\n        traverseChildren(child);\n      });\n    }\n  }\n\n  traverseChildren(elem);\n  return childNodes;\n};\n\nfunction addExpandedNodes(tree) {\n  const hashMapTree = hashMapSpatialStructures(tree, {});\n  return { originalStructureTree: tree, hashMapTree };\n};\n\nfunction recomputeToVtree(selectedItems) {\n  const computeSelectedItems = selectedItems.reduce((acc, val) => {\n    acc[val] = {\n      open: true\n    };\n    return acc;\n  }, {});\n  return computeSelectedItems;\n}\n\nfunction manageNodeSelection(oldSelectedItems, selectedItems, childrenIds, nodeId) {\n  let selectedTree = selectedItems;\n  if (oldSelectedItems.length > 0) {\n    if (oldSelectedItems.includes(parseInt(nodeId))) {\n      const indexOfExistingItem = oldSelectedItems.indexOf(parseInt(nodeId));\n      const newSelectedItems = oldSelectedItems\n        .filter((_, i) => i !== indexOfExistingItem)\n        .filter((selectedItem) => {\n          return !childrenIds.includes(selectedItem);\n        });\n      selectedTree = newSelectedItems;\n    } else {\n      selectedTree = [...new Set(oldSelectedItems.concat([...selectedItems, parseInt(nodeId)]))]\n    }\n  }\n  return selectedTree;\n}\n\nasync function highlightOnTreeView(selected, viewer) {\n  const mapSelected = selected.map((item) => parseInt(item, 10));\n  await viewer.IFC.pickIfcItemsByID(0, mapSelected);\n}\n\nexport const loadTree = (dispatch) => (tree, eids) => {\n  const { originalStructureTree, hashMapTree } = addExpandedNodes(tree);\n  let selectedItems = eids;\n  if (eids.length === 1) {\n    const selectedIFCObject = hashMapTree[eids[0]];\n    const { childrenIds, parentsIds } = selectedIFCObject ?? { childrenIds: [], parentsIds: [] };\n    selectedItems = [...eids, ...childrenIds, ...parentsIds]\n  }\n\n  const vtree = recomputeToVtree(selectedItems);\n  dispatch({\n    type: 'LOAD_DATA',\n    payload: {\n      originalStructureTree: originalStructureTree,\n      hashMapTree: hashMapTree,\n      vtree: vtree,\n      selected: selectedItems\n    },\n  });\n}\n\nexport const toggleNode = (dispatch) => async (selected, hashMapTree, nodeId, viewer) => {\n\n  const { childrenIds, parentsIds } = hashMapTree[nodeId] ?? { childrenIds: [], parentsIds: [] };\n  let familyTreeIds = [...parentsIds, ...childrenIds];\n  let oldFamilyTreeIds = selected;\n  const selectedItemsUpdated = manageNodeSelection(oldFamilyTreeIds, familyTreeIds, childrenIds, nodeId)\n\n  const computeToTree = selectedItemsUpdated.map((item) => item.toString())\n  const newVtree = recomputeToVtree(computeToTree);\n\n  await highlightOnTreeView(computeToTree, viewer)\n\n  dispatch({\n    type: 'SELECT_CHILDREN',\n    payload: {\n      selected: selectedItemsUpdated,\n      vtree: newVtree\n    },\n  });\n}\n\nexport const deselectAllNodes = (dispatch) => async (viewer) => {\n  await viewer.IFC.unpickIfcItems();\n  dispatch({\n    type: 'RESET_TREE'\n  });\n}","import React, { useEffect, useState, useReducer, useRef, useCallback } from \"react\";\nimport { IFCLoader } from \"web-ifc-three/IFCLoader\";\nimport { makeStyles, Icon } from \"@material-ui/core\";\nimport {\n  Avatar,\n  Grid,\n  Button,\n  ButtonGroup,\n  CircularProgress\n} from \"@mui/material\";\n\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\nimport TreeComponent from \"./Components/Tree\";\nimport reducer from './reducer';\nimport { deselectAllNodes, toggleNode, loadTree } from './actions';\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  }\n}));\n\nconst ProjectTree = ({\n  tree,\n  viewer,\n  handleShowMarketplace,\n  handleShowProperties,\n  eids,\n  setEids\n}) => {\n  const [{ spatialStructures, loading, selected, hashMapTree, vtree }, dispatch] = useReducer(reducer, { loading: true, loadingCursor: false, selected: [], expanded: [], hashMapTree: {}, vtree: {} });\n  const refSelectedItems = useRef(selected);\n  const classes = useStyles();\n\n  useEffect(() => {\n    refSelectedItems.current = selected\n  }, [selected])\n\n  useEffect(() => {\n    return () => {\n      const selectedItemsIds = refSelectedItems.current.map((selectedItems) => parseInt(selectedItems));\n      setEids(selectedItemsIds);\n    };\n  }, [])\n\n  useEffect(() => {\n    loadTree(dispatch)(tree, eids);\n  }, [eids]);\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement('a')\n    a.download = fileName\n    a.href = window.URL.createObjectURL(blob)\n    const clickEvt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n    a.dispatchEvent(clickEvt)\n    a.remove()\n  }\n\n  const handleExportToCsv = async (e, eids) => {\n    e.preventDefault()\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = ['modelId', 'elementName', 'elementClass', 'globalId', 'expressId', 'psetName', 'propertyName', 'propertyValue'].join(',');\n    propertiesCsv.push(headers)\n\n    await Promise.all(eids.map(async eid => {\n      const ifcElement = await viewer.IFC.getProperties(0, eid, true, true);\n      const selectedModelID = await viewer.IFC.getModelID();\n      const ifcLoader = new IFCLoader();\n      // const ifcClass = ifcClassType[];\n      const ifcClass = await viewer.IFC.loader.ifcManager.getIfcType(0, eid);\n\n      console.log('ifcClass', await viewer.IFC.loader.ifcManager.getIfcType(0, eid))\n      await Promise.all(ifcElement.psets?.map(async pset => pset.HasProperties && await Promise.all(pset.HasProperties?.map(async (property) => {\n        const modelID = 0;\n        const elementName = `${ifcElement.Name?.value}`;\n        const elementClass = ifcClass ? ifcClass : `NONE`;\n        const globalID = `${ifcElement.GlobalId.value}`;\n        const expressID = `${ifcElement.expressID}`;\n        const psetName = `${pset.Name.value}`;\n        const propertyName = `${property.Name?.value}`;\n        const propertyValue = `${property.NominalValue?.value}`;\n\n        propertiesCsv.push([modelID, elementName, elementClass, globalID, expressID, psetName, propertyName, propertyValue].join(','))\n      }))))\n    }));\n\n    downloadFile({\n      data: [...propertiesCsv].join('\\n'),\n      fileName: `selection.csv`,\n      fileType: 'text/csv',\n    })\n  }\n\n  function toggleRow(nodeId) {\n    toggleNode(dispatch)(selected, hashMapTree, nodeId, viewer);\n  }\n\n  function handleRemoveAllElements() {\n    deselectAllNodes(dispatch)(viewer);\n  }\n\n  return (\n    <Grid container>\n      <Grid xs={6} style={{ textAlign: 'left' }}>\n        <ButtonGroup\n          className={classes.buttonGroup}\n        >\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleRemoveAllElements()}\n          >\n            <DeleteIcon />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid xs={6} style={{ textAlign: 'right' }}>\n        <ButtonGroup\n          // variant=\"contained\"\n          // aria-label=\"outlined primary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <MutltiSelectionIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n            onClick={(e) => handleExportToCsv(e, eids)}\n          >\n            <DownloadIcon />\n          </Button>\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleShowMarketplace('Open dthX')}\n          >\n            {/* <img\n              src={OpenDthxLogo}\n            /> */}\n            <Avatar\n              aria-label=\"recipe\"\n              className={classes.avatar}\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      {(loading) ?\n        <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n        :\n        <div style={{ display: 'flex', width: \"100%\" }}>\n\n          {\n            spatialStructures &&\n            spatialStructures.length &&\n            spatialStructures.map((spatialStructure) => (\n              <div style={{ flex: '1 1 auto', height: '300px' }} key={spatialStructure.expressID}>\n                <TreeComponent\n                  spatialStructures={spatialStructures}\n                  spatialStructure={spatialStructure}\n                  handleShowProperties={handleShowProperties}\n                  toggleRow={toggleRow}\n                  vtree={vtree}\n                />\n              </div>\n\n            ))\n          }\n        </div>\n      }\n    </Grid >\n  );\n};\n\nexport default ProjectTree;\n\n","export default [\n  \"IfcProduct\",\n  \"IfcAnnotation\",\n  \"IfcElement\",\n  \"IfcBuildingElement\",\n  \"IfcBeam\",\n  \"IfcBuildingElementComponent\",\n  \"IfcBuildingElementPart\",\n  \"IfcReinforcingElement\",\n  \"IfcReinforcingBar\",\n  \"IfcReinforcingMesh\",\n  \"IfcTendon\",\n  \"IfcTendonAnchor\",\n  \"IfcBuildingElementProxy\",\n  \"IfcColumn\",\n  \"IfcCovering\",\n  \"IfcCurtainWall\",\n  \"IfcDoor\",\n  \"IfcFooting\",\n  \"IfcMember\",\n  \"IfcPile\",\n  \"IfcPlate\",\n  \"IfcRailing\",\n  \"IfcRamp\",\n  \"IfcRampFlight\",\n  \"IfcRoof\",\n  \"IfcSlab\",\n  \"IfcStair\",\n  \"IfcStairFlight\",\n  \"IfcWall\",\n  \"IfcWallStandardCase\",\n  \"IfcWindow\",\n  \"IfcDistributionElement\",\n  \"IfcDistributionControlElement\",\n  \"IfcDistributionFlowElement\",\n  \"IfcDistributionChamberElement\",\n  \"IfcEnergyConversionDevice\",\n  \"IfcFlowController\",\n  \"IfcElectricDistributionPoint\",\n  \"IfcFlowFitting\",\n  \"IfcFlowMovingDevice\",\n  \"IfcFlowSegment\",\n  \"IfcFlowStorageDevice\",\n  \"IfcFlowTerminal\",\n  \"IfcFlowTreatmentDevice\",\n  \"IfcElectricalElement\",\n  \"IfcElementAssembly\",\n  \"IfcElementComponent\",\n  \"IfcDiscreteAccessory\",\n  \"IfcFastener\",\n  \"IfcMechanicalFastener\",\n  \"IfcEquipmentElement\",\n  \"IfcFeatureElement\",\n  \"IfcFeatureElementAddition\",\n  \"IfcProjectionElement\",\n  \"IfcFeatureElementSubtraction\",\n  \"IfcEdgeFeature\",\n  \"IfcChamferEdgeFeature\",\n  \"IfcRoundedEdgeFeature\",\n  \"IfcOpeningElement\",\n  \"IfcFurnishingElement\",\n  \"IfcTransportElement\",\n  \"IfcVirtualElement\",\n  \"IfcGrid\",\n  \"IfcPort\",\n  \"IfcDistributionPort\",\n  \"IfcProxy\",\n  \"IfcSpatialStructureElement\",\n  \"IfcBuilding\",\n  \"IfcBuildingStorey\",\n  \"IfcSite\",\n  \"IfcSpace\",\n  \"IfcStructuralActivity\",\n  \"IfcStructuralAction\",\n  \"IfcStructuralLinearAction\",\n  \"IfcStructuralLinearActionVarying\",\n  \"IfcStructuralPlanarAction\",\n  \"IfcStructuralPlanarActionVarying\",\n  \"IfcStructuralPointAction\",\n  \"IfcStructuralReaction\",\n  \"IfcStructuralPointReaction\",\n  \"IfcStructuralItem\",\n  \"IfcStructuralConnection\",\n  \"IfcStructuralCurveConnection\",\n  \"IfcStructuralPointConnection\",\n  \"IfcStructuralSurfaceConnection\",\n  \"IfcStructuralMember\",\n  \"IfcStructuralCurveMember\",\n  \"IfcStructuralCurveMemberVarying\",\n  \"IfcStructuralSurfaceMember\",\n  \"IfcStructuralSurfaceMemberVarying\",\n  \"IfcBeamStandardCase\",\n  \"IfcChimney\",\n  \"IfcColumnStandardCase\",\n  \"IfcDoorStandardCase\",\n  \"IfcMemberStandardCase\",\n  \"IfcPlateStandardCase\",\n  \"IfcShadingDevice\",\n  \"IfcSlabElementedCase\",\n  \"IfcSlabStandardCase\",\n  \"IfcWallElementedCase\",\n  \"IfcWindowStandardCase\",\n  \"IfcCivilElement\",\n  \"IfcActuator\",\n  \"IfcAlarm\",\n  \"IfcController\",\n  \"IfcFlowInstrument\",\n  \"IfcProtectiveDeviceTrippingUnit\",\n  \"IfcSensor\",\n  \"IfcUnitaryControlElement\",\n  \"IfcAirToAirHeatRecovery\",\n  \"IfcBoiler\",\n  \"IfcBurner\",\n  \"IfcChiller\",\n  \"IfcCoil\",\n  \"IfcCondenser\",\n  \"IfcCooledBeam\",\n  \"IfcCoolingTower\",\n  \"IfcElectricGenerator\",\n  \"IfcElectricMotor\",\n  \"IfcEngine\",\n  \"IfcEvaporativeCooler\",\n  \"IfcEvaporator\",\n  \"IfcHeatExchanger\",\n  \"IfcHumidifier\",\n  \"IfcMotorConnection\",\n  \"IfcSolarDevice\",\n  \"IfcTransformer\",\n  \"IfcTubeBundle\",\n  \"IfcUnitaryEquipment\",\n  \"IfcAirTerminalBox\",\n  \"IfcDamper\",\n  \"IfcElectricDistributionBoard\",\n  \"IfcElectricTimeControl\",\n  \"IfcFlowMeter\",\n  \"IfcProtectiveDevice\",\n  \"IfcSwitchingDevice\",\n  \"IfcValve\",\n  \"IfcCableCarrierFitting\",\n  \"IfcCableFitting\",\n  \"IfcDuctFitting\",\n  \"IfcJunctionBox\",\n  \"IfcPipeFitting\",\n  \"IfcCompressor\",\n  \"IfcFan\",\n  \"IfcPump\",\n  \"IfcCableCarrierSegment\",\n  \"IfcCableSegment\",\n  \"IfcDuctSegment\",\n  \"IfcPipeSegment\",\n  \"IfcElectricFlowStorageDevice\",\n  \"IfcTank\",\n  \"IfcAirTerminal\",\n  \"IfcAudioVisualAppliance\",\n  \"IfcCommunicationsAppliance\",\n  \"IfcElectricAppliance\",\n  \"IfcFireSuppressionTerminal\",\n  \"IfcLamp\",\n  \"IfcLightFixture\",\n  \"IfcMedicalDevice\",\n  \"IfcOutlet\",\n  \"IfcSanitaryTerminal\",\n  \"IfcSpaceHeater\",\n  \"IfcStackTerminal\",\n  \"IfcWasteTerminal\",\n  \"IfcDuctSilencer\",\n  \"IfcFilter\",\n  \"IfcInterceptor\",\n  \"IfcVibrationIsolator\",\n  \"IfcOpeningStandardCase\",\n  \"IfcVoidingFeature\",\n  \"IfcSurfaceFeature\",\n  \"IfcFurniture\",\n  \"IfcSystemFurnitureElement\",\n  \"IfcGeographicElement\",\n  \"IfcSpatialElement\",\n  \"IfcExternalSpatialStructureElement\",\n  \"IfcExternalSpatialElement\",\n  \"IfcSpatialZone\",\n  \"IfcStructuralCurveAction\",\n  \"IfcStructuralSurfaceAction\",\n  \"IfcStructuralCurveReaction\",\n  \"IfcStructuralSurfaceReaction\",\n  \"IfcContext\",\n  \"IfcProject\",\n  \"IfcProjectLibrary\"\n]","import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  ButtonGroup,\n  Divider,\n  Badge\n} from \"@mui/material\";\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { useDemoData } from '@mui/x-data-grid-generator';\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport SearchBar from '../../../../Components/SearchBar';\nimport { IFCSLAB, IFCMEMBER, IFCSTRUCTURALCURVEMEMBER } from \"web-ifc\";\nimport CommentIcon from '@mui/icons-material/Comment';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport LibraryAddIcon from '@mui/icons-material/LibraryAdd';\nimport MutltiSelectionIcon from '@mui/icons-material/ControlPointDuplicate';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\n\nimport ifcClasses from './utils/ifcClasses';\nimport IfcIcons from '../../Utils/ifc-full-icons.json';\nimport * as WebIFC from \"web-ifc\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  },\n  buttonGroup: {\n    backgroundColor: 'white',\n    marginTop: '1em'\n  }\n}));\n\n\nconst Settings = ({\n  viewer,\n  handleShowMarketplace,\n  handleShowProperties,\n  eids,\n  setEids\n}) => {\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [checked, setChecked] = React.useState([0]);\n  const [ifcModelsClasses, setIfcModelsClasses] = useState([]);\n  const [eidsHidden, setEidsHidden] = useState([]);\n\n  // useEffect(() => {\n  //   const models = viewer.context.items.ifcModels;\n  //   const ifcModel = models[0];\n  //   const allIDs = Array.from(\n  //     new Set(ifcModel.geometry.attributes.expressID.array)\n  //   );\n  //   const subset = getWholeSubset(viewer, ifcModel, allIDs);\n  //   replaceOriginalModelBySubset(viewer, ifcModel, subset);\n  //   setupEvents(viewer, allIDs);\n  // }, []);\n\n  useEffect(() => {\n    async function init() {\n      console.log('Settings')\n      // const ifcApi = new WebIFC.IfcAPI();\n      const newIfcModelsClasses = [];\n      for (let ifcClass of ifcClasses) {\n        if (WebIFC[`${ifcClass.toUpperCase()}`]) {\n          const classEids = await viewer.getAllItemsOfType(0, WebIFC[`${ifcClass.toUpperCase()}`], false, false);\n          if (classEids && classEids.length > 0) {\n            newIfcModelsClasses.push({\n              name: ifcClass,\n              icon: IfcIcons[`${ifcClass}`],\n              eids: [...classEids],\n              hide: false\n            })\n          }\n        }\n\n      }\n      setIfcModelsClasses(newIfcModelsClasses);\n\n    }\n    init();\n  }, [eids]);\n\n  const handleElementsMultiSelection = async () => {\n    const found = await viewer.IFC.pickIfcItem(true, 1);\n    setEids([...eids, found.id]);\n  }\n\n  const handleElementSelection = async (element) => {\n    const currentIndex = checked.indexOf(element);\n    const newChecked = [...checked];\n    //await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n    if (currentIndex === -1) {\n      newChecked.push(currentIndex);\n    } else {\n      // await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  }\n\n  const handleRemoveAllElements = async () => {\n    setEids([]);\n    await viewer.IFC.unpickIfcItems();\n  }\n\n\n  const handleGetAllItemsOfType = async (element) => {\n    console.log('element', element);\n    const elementsByType = await viewer.getAllItemsOfType(0, element.type, false, false);\n    console.log('elementsByType', elementsByType)\n    setEids([...eids, ...elementsByType]);\n  }\n\n  const handleRemoveElement = async (element) => {\n    const newEids = eids.filter(eid => eid !== element.expressID);\n    setEids(newEids);\n  }\n\n\n  const handleShowElement = async (ids) => {\n    setEids(ids);\n    await viewer.IFC.pickIfcItemsByID(0, ids, false, 0);\n  }\n\n\n  function handleRestoreElements(eids, index) {\n    const idsHidden = eidsHidden.reduce(function (acc, id) {\n      if (eids.indexOf(id) === -1) {\n        acc.push(id);\n      }\n      return acc;\n    }, []);\n    setEidsHidden(idsHidden)\n\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[0];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    )\n    const idsRestore = allIDs.reduce(function (acc, id) {\n      if (idsHidden.indexOf(id) === -1) {\n        acc.push(id);\n      }\n      return acc;\n    }, []);\n\n    viewer.IFC.loader.ifcManager.createSubset({\n      modelID: ifcModel.modelID,\n      ids: idsRestore,\n      applyBVH: true,\n      scene: ifcModel.parent,\n      removePrevious: true,\n      customID: 'full-model-subset',\n    });\n\n    const newIfcModelsClasses = [...ifcModelsClasses];\n    newIfcModelsClasses[index] = {\n      ...newIfcModelsClasses[index],\n      hide: false\n    }\n\n    setIfcModelsClasses(newIfcModelsClasses);\n  }\n\n  const handleHideElements = async (eids, index) => {\n    setEidsHidden([...eidsHidden, ...eids]);\n    viewer.IFC.loader.ifcManager.removeFromSubset(\n      0,\n      eids,\n      'full-model-subset',\n    );\n\n    const newIfcModelsClasses = [...ifcModelsClasses];\n    newIfcModelsClasses[index] = {\n      ...newIfcModelsClasses[index],\n      hide: true\n    }\n\n    setIfcModelsClasses(newIfcModelsClasses);\n  }\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement('a')\n    a.download = fileName\n    a.href = window.URL.createObjectURL(blob)\n    const clickEvt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n    a.dispatchEvent(clickEvt)\n    a.remove()\n  }\n\n  const handleExportToCsv = async (e, ifcClass) => {\n    e.preventDefault()\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = ['modelId', 'elementName', 'elementClass', 'globalId', 'expressId', 'psetName', 'propertyName', 'propertyValue'].join(',');\n    propertiesCsv.push(headers)\n\n    for (let eid of ifcClass.eids) {\n      const ifcElement = await viewer.IFC.getProperties(0, eid, true, true);\n      console.log('ifcElement', ifcElement)\n      if (ifcElement && ifcElement.psets && ifcElement.psets.length > 0) {\n        for (let pset of ifcElement.psets) {\n          console.log('pset', pset)\n          if (pset.HasProperties && pset.HasProperties.length > 0) {\n            for (let property of pset.HasProperties) {\n              console.log('property', property)\n              const modelID = 0;\n              const elementName = `${ifcElement.Name?.value}`;\n              const elementClass = `${ifcClass.name}`;\n              const globalID = `${ifcElement.GlobalId.value}`;\n              const expressID = `${ifcElement.expressID}`;\n              const psetName = `${pset.Name.value}`;\n              const propertyName = `${property.Name?.value}`;\n              const propertyValue = `${property.NominalValue?.value}`;\n\n              propertiesCsv.push([modelID, elementName, elementClass, globalID, expressID, psetName, propertyName, propertyValue].join(','))\n            }\n          }\n        }\n      }\n    }\n\n    downloadFile({\n      data: [...propertiesCsv].join('\\n'),\n      fileName: `${ifcClass ? ifcClass.name : \"Undefined\"}.csv`,\n      fileType: 'text/csv',\n    })\n  }\n  return (\n    <Grid container>\n      {/* <Grid item xs={12}>\n        <SearchBar style={{ marginBottom: \"1em\" }} />\n      </Grid> */}\n      <Grid item xs={6} style={{ textAlign: 'left' }}>\n        <ButtonGroup\n          // color=\"secondary\" aria-label=\"medium secondary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <CheckBoxIcon />\n          </Button>\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={handleRemoveAllElements}\n          >\n            <DeleteIcon />\n          </Button> */}\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={6} style={{ textAlign: 'right' }}>\n        <ButtonGroup\n          // variant=\"contained\"\n          // aria-label=\"outlined primary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <MutltiSelectionIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleShowMarketplace('Open dthX')}\n          >\n            {/* <img\n              src={OpenDthxLogo}\n            /> */}\n            <Avatar\n              aria-label=\"recipe\"\n              className={classes.avatar}\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={12}>\n        <List sx={{ width: \"100%\" }}>\n          {ifcModelsClasses.map((ifcClass, index) => (\n            <ListItem\n              key={index}\n              secondaryAction={\n                <>\n                  {/* { ifcClass.hide ?\n                    <IconButton\n                      edge=\"end\"\n                      aria-label=\"comments\"\n                      onClick={() => handleRestoreElements(ifcClass.eids, index)}\n                    >\n                      <VisibilityOffIcon />\n                    </IconButton>\n                    :\n                    <IconButton\n                      edge=\"end\"\n                      aria-label=\"comments\"\n                      onClick={() => handleHideElements(ifcClass.eids, index)}\n                    >\n                      <VisibilityIcon color=\"primary\" />\n                    </IconButton>\n                  } */}\n                  <IconButton\n                    edge=\"end\"\n                    aria-label=\"comments\"\n                    onClick={(e) => handleExportToCsv(e, ifcClass)}\n                  >\n                    <DownloadIcon />\n                  </IconButton>\n                </>\n              }\n              disablePadding\n            >\n              <ListItemButton\n                role={undefined}\n                dense\n                onClick={() => handleShowElement(ifcClass.eids)}\n              >\n                <ListItemIcon>\n                  {/* <Checkbox\n                    edge=\"start\"\n                    checked={checked.indexOf(element) !== -1}\n                    tabIndex={-1}\n                    disableRipple\n                    inputProps={{ 'aria-labelledby': `checkbox-list-label-${index}` }}\n                  /> */}\n                  <Badge badgeContent={`${ifcClass.eids.length}`} color=\"primary\">\n                    <i class='material-icons'>{`${ifcClass.icon}`}</i>\n                  </Badge>\n                </ListItemIcon>\n                <ListItemText\n                  id={`checkbox-list-label-${index}`}\n                  primary={`${ifcClass.name}`}\n                // secondary={secondary ? 'Secondary text' : null}\n                />\n              </ListItemButton>\n            </ListItem>\n          ))}\n        </List>\n      </Grid>\n    </Grid>\n    // <div style={{ height: 400, width: '100%' }}>\n    //   <DataGrid {...data} components={{ Toolbar: GridToolbar }} />\n    // </div>\n  );\n};\n\nexport default Settings;\n","import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  Fab,\n} from \"@mui/material\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport AccountTreeIcon from \"@material-ui/icons/AccountTree\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport { IFCSLAB, IFCMEMBER, IFCSTRUCTURALCURVEMEMBER } from \"web-ifc\";\nimport SearchData from \"../SearchData\";\nimport ProjectTree from \"../ProjectTree\";\nimport Settings from \"../Settings\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    // width: theme.spacing(7),\n    // height: theme.spacing(7),\n    // padding: '5px',\n    // borderRadius: '0px'\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n  MuiButtonBase: {\n    defaultProps: {\n      // The props to apply\n      disableRipple: true, // No more ripple, on the whole application 💣!\n    },\n  },\n\n}));\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nconst SpatialStructure = ({\n  state,\n  setState,\n  viewer,\n  handleShowSpatialStructure,\n  handleShowMarketplace,\n  handleShowProperties,\n  handleGetJsonData,\n  eids,\n  setEids,\n}) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [value, setValue] = useState(0);\n  const [ifcElementByType, setIfcElementByType] = useState([]);\n  const [expressIDList, setExpressIDList] = useState([]);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  // useEffect(() => {\n  //   async function init() {\n  //     console.log('Spatial Structure')\n  //     const modelID = await viewer.IFC.getModelID();\n  //     setExpressIDList(eids);\n  //     console.log(\"EIDS\", eids);\n  //   }\n  //   init();\n  // }, [eids]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <AccountTreeIcon />\n            </Fab>\n          </Avatar>\n        }\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleShowSpatialStructure}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem button onClick={handleShowSpatialStructure}>\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n        title={`Centre d'informations`}\n        subheader=\"Espace de recherche et mise à jour des données\"\n      />\n      <CardContent className={classes.cardContent}>\n        <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n          <Tabs\n            value={value}\n            onChange={handleChange}\n            aria-label=\"basic tabs example\"\n          >\n            <Tab label=\"Sélection\" {...a11yProps(0)} />\n            <Tab label=\"Structure spatiale\" {...a11yProps(1)} />\n            <Tab label=\"Classes\" {...a11yProps(2)} />\n          </Tabs>\n        </Box>\n        <TabPanel value={value} index={0}>\n          {/* <SearchBar /> */}\n          <SearchData\n            bimData={state}\n            setBimData={setState}\n            viewer={viewer}\n            handleShowMarketplace={handleShowMarketplace}\n            handleShowProperties={handleShowProperties}\n            handleGetJsonData={handleGetJsonData}\n            eids={eids}\n            setEids={setEids}\n          />\n        </TabPanel>\n        <TabPanel value={value} index={1}>\n          <ProjectTree\n            // state={state}\n            // setState={setState}\n            tree={state.spatialStructures.list}\n            viewer={viewer}\n            handleShowMarketplace={handleShowMarketplace}\n            handleShowProperties={handleShowProperties}\n            eids={eids}\n            setEids={setEids}\n          />\n        </TabPanel>\n        <TabPanel value={value} index={2}>\n          <Settings\n            viewer={viewer}\n            handleShowMarketplace={handleShowMarketplace}\n            handleShowProperties={handleShowProperties}\n            eids={eids}\n            setEids={setEids}\n          />\n        </TabPanel>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SpatialStructure;\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          <Typography>{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Typography,\n  makeStyles,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  CircularProgress,\n  Tooltip,\n  Paper\n} from \"@material-ui/core\";\nimport InfoIcon from \"@mui/icons-material/Info\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport * as WebIFC from \"web-ifc\";\nimport { Grid } from \"@mui/material\";\nimport {\n  Scene,\n  WebGLRenderer,\n  PerspectiveCamera,\n  BoxGeometry,\n  MeshLambertMaterial,\n  Mesh,\n  Color,\n  DoubleSide,\n  MathUtils,\n  EdgesGeometry,\n  LineBasicMaterial,\n  MeshBasicMaterial,\n  Vector2,\n  Box3,\n  Vector3\n} from \"three\";\nimport { IfcViewerAPI } from 'web-ifc-viewer';\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  mapContainer: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    overflow: 'auto',\n    flexDirection: 'column',\n    height: 400,\n  },\n  map: {\n    width: '100%',\n    height: '100%'\n  }\n}));\n\nconst Properties = ({\n  bimData,\n  setBimData,\n  viewer,\n  element,\n  selectedElementID,\n  setSelectedElementID,\n  setShowProperties,\n  handleShowMarketplace,\n  addElementsNewProperties,\n}) => {\n  const [ifcElement, setIfcElement] = useState(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  // const props = { width: { viewWidth }, height: { viewHeight } };\n  const props = {\n    width: viewWidth,\n    height: viewHeight\n  };\n\n  const classes = useStyles(props);\n\n  function DecodeIFCString(ifcString) {\n    const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/giu;\n    let resultString = ifcString;\n    let match = ifcUnicodeRegEx.exec(ifcString);\n    while (match) {\n      const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n      resultString = resultString.replace(match[0], unicodeChar);\n      match = ifcUnicodeRegEx.exec(ifcString);\n    }\n    return resultString;\n  }\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  useEffect(() => {\n    async function init() {\n      console.log(\"selectedElementID\", selectedElementID);\n      setIsLoading(true);\n      if (selectedElementID) {\n\n        // const models = viewer.context.items.ifcModels;\n        // const ifcModel = models[0];\n        // viewer.IFC.loader.ifcManager.createSubset({\n        //   modelID: ifcModel.modelID,\n        //   ids: [selectedElementID],\n        //   applyBVH: true,\n        //   scene: ifcModel.parent,\n        //   removePrevious: true,\n        //   customID: 'single-element-subset',\n        // });\n        // const elementMesh = await viewer.IFC.loader.ifcManager.getSubset(0, null, 'single-element-subset')\n        // console.log('elementMesh', elementMesh)\n        // if (elementMesh) {\n        //   const container = document.getElementById('element-viewer');\n        //   const elementViewer = new IfcViewerAPI({ container, backgroundColor: new Color(0xffffff) });\n        //   elementViewer.IFC.setWasmPath(\"../../files/\");\n        //   elementViewer.IFC.applyWebIfcConfig({\n        //     COORDINATE_TO_ORIGIN: true,\n        //     USE_FAST_BOOLS: false\n        //   });;\n        //   elementMesh.position.set(0, 0, 0);\n        //   const scene = elementViewer.IFC.context.scene.scene;\n        //   scene.add(elementMesh);\n        // }\n\n        const elementProperties = await viewer.IFC.getProperties(\n          0,\n          selectedElementID,\n          true,\n          true\n        );\n        console.log('elementProperties', elementProperties)\n        // console.log(\"viewer\", viewer);\n        // console.log(\n        //   \"ifcClass\",\n        //   viewer.IFC.loader.ifcManager.getIfcType(0, selectedElementID)\n        // );\n        const ifcClass = viewer.IFC.loader.ifcManager.getIfcType(\n          0,\n          selectedElementID\n        );\n        let psets = [];\n        if (elementProperties.psets.length > 0) {\n          for (let pset of elementProperties.psets) {\n            if (pset.HasProperties && pset.HasProperties.length > 0) {\n              const newPset = [];\n              for (let property of pset.HasProperties) {\n                const label = DecodeIFCString(property.Name.value);\n                const value = property.NominalValue\n                  ? DecodeIFCString(property.NominalValue.value)\n                  : \"\";\n\n                const description =\n                  property.Description && property.Description !== \"\"\n                    ? DecodeIFCString(property.Description.value)\n                    : null;\n                // const unit =\n                //   property.Unit == null\n                //     ? \"\"\n                //     : property.Unit.value === \"null\"\n                //       ? \"\"\n                //       : property.Unit.value;\n                const unit = property.Unit\n                  ? property.Unit.Prefix\n                    ? DecodeIFCString(property.Unit.Prefix.value) // unit defined by IFCSIUNIT\n                    : property.Unit.Name\n                      ? DecodeIFCString(property.Unit.Name.value) // unit defined by IFCCONTEXTDEPENDENTUNIT\n                      : property.Unit.value\n                        ? DecodeIFCString(property.Unit.value) // unit defined by 'text' (from opendthX connector)\n                        : \"\"\n                  : \"\";\n\n                // console.log(\"unit\", unit);\n                newPset.push({\n                  label,\n                  description,\n                  value,\n                  unit,\n                });\n              }\n              psets.push({\n                ...pset,\n                HasProperties: [...newPset],\n              });\n            } else if (pset.Quantities && pset.Quantities.length > 0) {\n              const newPset = [];\n              for (let property of pset.Quantities) {\n                const label = DecodeIFCString(property.Name.value);\n                const value = property.NominalValue\n                  ? DecodeIFCString(property.NominalValue.value)\n                  : null;\n                newPset.push({\n                  label,\n                  value,\n                });\n              }\n              psets.push({\n                ...pset,\n                HasProperties: [...newPset],\n              });\n            } else {\n              psets.push({\n                ...pset,\n                HasProperties: [],\n              });\n            }\n          }\n          for (let mat of elementProperties.mats) {\n\n          }\n          // psets = await Promise.all(elementProperties.psets.map(async (pset) => {\n          //   if (pset.HasProperties && pset.HasProperties.length > 0) {\n          //     const newPset = await Promise.all(pset.HasProperties.map(async (property) => {\n          //       console.log('property', property)\n          //       const label = DecodeIFCString(property.Name.value);\n          //       const value = property.NominalValue ? DecodeIFCString(property.NominalValue.value) : '';\n          //       const unit = (property.Unit == null) ? '' : (property.Unit.value === 'null' ? '' : property.Unit.value);\n          //       console.log('unit', unit)\n          //       return {\n          //         label,\n          //         value,\n          //         unit\n          //       }\n          //     }));\n\n          //     return {\n          //       ...pset,\n          //       HasProperties: [...newPset]\n          //     }\n          //   }\n          //   if (pset.Quantities && pset.Quantities.length > 0) {\n          //     const newPset = await Promise.all(pset.Quantities.map(async (property) => {\n          //       const label = DecodeIFCString(property.Name.value);\n          //       const value = property.NominalValue ? DecodeIFCString(property.NominalValue.value) : null;\n          //       return {\n          //         label,\n          //         value\n          //       }\n          //     }));\n\n          //     return {\n          //       ...pset,\n          //       HasProperties: [...newPset]\n          //     }\n          //   }\n          //   return {\n          //     ...pset,\n          //     HasProperties: []\n          //   }\n          // }));\n        }\n        const elem = {\n          ...elementProperties,\n          name: elementProperties.Name\n            ? elementProperties.Name.value\n            : \"NO NAME\",\n          type: ifcClass ? ifcClass : \"NO TYPE\",\n          modelID: 0,\n          psets,\n        };\n        // console.log(\"elem\", elem);\n        setIfcElement(elem);\n      }\n      setIsLoading(false);\n      // else {\n      //   if (element) {\n      //     console.log(\"elements\", element);\n      //     setIfcElement(element);\n      //   }\n      // }\n    }\n    init();\n  }, [selectedElementID]);\n\n  const handleShowElement = async () => {\n    const modelID = element.modelID;\n    const ids = [element.expressID];\n    console.log(\"viewer\", viewer);\n    // const mesh = await viewer.IFC.visibility.getMesh(modelID);\n    // console.log(\"mesh\", mesh);\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleAddProperties = async () => {\n    handleShowMarketplace(\"Open dthX\");\n    setShowProperties(false);\n  };\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement(\"a\");\n    a.download = fileName;\n    a.href = window.URL.createObjectURL(blob);\n    const clickEvt = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    a.dispatchEvent(clickEvt);\n    a.remove();\n  };\n\n  // const handleExportToJson = e => {\n  //   e.preventDefault()\n  //   downloadFile({\n  //     data: JSON.stringify(usersData.users),\n  //     fileName: `${ifcElement ? ifcElement.name : \"Undefined\"}.csv`,\n  //     fileType: 'text/json',\n  //   })\n  // }\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleExportToCsv = (e) => {\n    e.preventDefault();\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = [\n      \"modelId\",\n      \"elementName\",\n      \"elementClass\",\n      \"globalId\",\n      \"expressId\",\n      \"psetName\",\n      \"propertyName\",\n      \"propertyValue\",\n    ].join(\",\");\n    propertiesCsv.push(headers);\n    // Convert Properties data to a csv\n\n    // let propertiesCsv = ifcElement.psets?.map(pset => pset.HasProperties?.reduce((acc, property) => {\n    //   const { label, value } = property\n    //   acc.push([label, `${value} \\n`].join(','))\n    //   console.log(acc[acc.length - 1])\n    //   return acc\n    // }, []));\n\n    // console.log(\"ifcElement\", ifcElement);\n    ifcElement.psets?.forEach((pset) =>\n      pset.HasProperties?.forEach((property) => {\n        const modelID = `${ifcElement.modelID}`;\n        const elementName = `${ifcElement.name}`;\n        const elementClass = `${ifcElement.type}`;\n        const globalID = `${ifcElement.GlobalId.value}`;\n        const expressID = `${ifcElement.expressID}`;\n        const psetName = `${pset.Name.value}`;\n        const { label: propertyName, value: propertyValue } = property;\n        propertiesCsv.push(\n          [\n            modelID,\n            elementName,\n            elementClass,\n            globalID,\n            expressID,\n            psetName,\n            propertyName,\n            propertyValue,\n          ].join(\",\")\n        );\n      })\n    );\n    downloadFile({\n      data: [...propertiesCsv].join(\"\\n\"),\n      fileName: `${ifcElement ? ifcElement.name : \"Undefined\"}.csv`,\n      fileType: \"text/csv\",\n    });\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <DescriptionIcon />\n          </Avatar>\n        }\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                setShowProperties(false);\n                // setSelectedElementID(null); Empêche réouverture de la view après fermeture\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              {/* <ListItem\n                button\n                onClick={handleShowElement}\n              >\n                <ListItemIcon>\n                  <VisibilityIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Visibility\" />\n              </ListItem> */}\n              {ifcElement && (\n                <>\n                  <ListItem button onClick={handleExportToCsv}>\n                    <ListItemIcon>\n                      <DownloadIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Télécharger CSV\" />\n                  </ListItem>\n                  <ListItem button onClick={handleAddProperties}>\n                    <ListItemIcon>\n                      <AddIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Ajouter propriété\" />\n                  </ListItem>\n                </>\n              )}\n              <ListItem\n                button\n                onClick={() => {\n                  setShowProperties(false);\n                  // setSelectedElementID(null); Empêche réouverture de la view après fermeture\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n        title={`${ifcElement ? DecodeIFCString(ifcElement.name) : \"Undefined\"}`}\n        subheader={`${ifcElement ? ifcElement.type : \"Undefined\"} - ${selectedElementID}`}\n      />\n      <CardContent className={classes.cardContent}>\n        {/* <Paper className={classes.mapContainer}>\n          <div id=\"element-viewer\" style={{\n            // position: \"absolute\",\n            height: \"100%\",\n            width: \"100%\",\n            left: \"0\",\n            top: \"0\",\n          }}>\n          </div>\n        </Paper> */}\n        {isLoading ? (\n          <Grid container>\n            <Grid item md={12} style={{ textAlign: \"center\" }}>\n              <CircularProgress color=\"inherit\" />\n            </Grid>\n          </Grid>\n        ) : (\n\n          <>\n\n            {ifcElement && (\n              <>\n                <Accordion>\n                  <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                    aria-controls=\"panel1a-content\"\n                    id=\"panel1a-header\"\n                  >\n                    <Typography className={classes.heading}>\n                      Attributes\n                  </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    <TableContainer>\n                      <Table className={classes.table} aria-label=\"simple table\">\n                        <TableBody>\n                          <TableRow key={0}>\n                            <TableCell>{`GlobalId`}</TableCell>\n                            <TableCell>{`${ifcElement.GlobalId.value}`}</TableCell>\n                          </TableRow>\n                          <TableRow key={1}>\n                            <TableCell>{`Name`}</TableCell>\n                            <TableCell>{`${ifcElement.name}`}</TableCell>\n                          </TableRow>\n                          <TableRow key={2}>\n                            <TableCell>{`Type`}</TableCell>\n                            <TableCell>{`${ifcElement.type}`}</TableCell>\n                          </TableRow>\n                          {ifcElement.PredefinedType &&\n                            <TableRow key={2}>\n                              <TableCell>{`Predifined Type`}</TableCell>\n                              <TableCell>{`${ifcElement.PredefinedType.value}`}</TableCell>\n                            </TableRow>\n                          }\n                        </TableBody>\n                      </Table>\n                    </TableContainer>\n                  </AccordionDetails>\n                </Accordion>\n                {ifcElement.psets.length > 0 &&\n                  ifcElement.psets.map((pset, i) => (\n                    <Accordion key={i}>\n                      <AccordionSummary\n                        expandIcon={<ExpandMoreIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                      >\n                        <Typography\n                          className={classes.heading}\n                        >{`${DecodeIFCString(pset.Name.value)}`}</Typography>\n                      </AccordionSummary>\n                      <AccordionDetails>\n                        <TableContainer>\n                          <Table\n                            className={classes.table}\n                            aria-label=\"simple table\"\n                          >\n                            <TableBody>\n                              {pset.HasProperties &&\n                                pset.HasProperties.length > 0 &&\n                                pset.HasProperties.map((property, index) => (\n                                  <TableRow key={index}>\n                                    <TableCell>{`${property.label}`}</TableCell>\n                                    <TableCell>\n                                      {property.description &&\n                                        property.description !== \"\" && (\n                                          <Tooltip\n                                            title={`${property.description}`}\n                                            placement=\"top-start\"\n                                          >\n                                            <IconButton>\n                                              <InfoIcon />\n                                            </IconButton>\n                                          </Tooltip>\n                                        )}\n                                    </TableCell>\n                                    {RegExp(`^http`).test(property.value) ? (\n                                      <TableCell>\n                                        <a\n                                          href={`${property.value}`}\n                                          target=\"_blank\"\n                                          rel=\"noreferrer\"\n                                        >{`${property.value}`}</a>\n                                      </TableCell>\n                                    ) : (\n                                      <TableCell style={{maxWidth: \"200px\"}} >{`${property.value}`}</TableCell>\n                                    )}\n                                    <TableCell>{`${property.unit}`}</TableCell>\n                                  </TableRow>\n                                ))}\n                            </TableBody>\n                          </Table>\n                        </TableContainer>\n                      </AccordionDetails>\n                    </Accordion>\n                  ))}\n              </>\n            )}\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Properties;\n","import React, {\n  useEffect,\n  useState,\n  useRef,\n  useMemo,\n  useCallback,\n} from \"react\";\nimport { makeStyles, Fab, Button } from \"@material-ui/core\";\nimport { useDropzone } from \"react-dropzone\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableContainer,\n  TableRow,\n  List,\n  Paper,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  Grid,\n  LinearProgress,\n  Box,\n  Typography,\n} from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport FactCheckIcon from \"@mui/icons-material/FactCheck\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\n// import { FirstPersonControls } from 'three/examples/jsm/controls/FirstPersonControls';\nimport axios from \"axios\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n  button: {\n    color: \"white\",\n    backgroundColor: \"black\",\n    width: \"100%\",\n    marginTop: \"1em\",\n    marginBottom: \"1em\",\n  },\n  linearProgress: {\n    width: \"90%\",\n    margin: \"1em\",\n    left: 0,\n    right: 0,\n    //position: 'absolute',\n    // top: '25%',\n    // transform: 'translateY(-25%)'\n  },\n}));\n\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  height: \"150px\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 2,\n  width: \"100%\",\n  borderColor: \"#ddddd\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"#fafafa\",\n  color: \"#bdbdbd\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\",\n  cursor: \"pointer\",\n};\n\nconst Validation = ({\n  bimData,\n  setBimData,\n  showValidation,\n  setShowValidation,\n}) => {\n  const style = useMemo(\n    () => ({\n      ...baseStyle,\n    }),\n    []\n  );\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const [bimModel, setBimModel] = useState(null);\n  const [progress, setProgress] = useState(-1);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  useEffect(() => {\n    const init = async () => {\n      const models = await bimData.viewer.context.items.ifcModels;\n      if (models.length > 0) {\n        setBimModel(models[0]);\n      }\n    };\n    init();\n  }, [bimModel]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  useEffect(() => {\n    // if (progress === 100) {\n    //   window.parent.postMessage({ projectId: projectId }, `${process.env.REACT_APP_TRIDYME}`);\n    // }\n  }, [progress]);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  let timeoutIdentifier;\n\n  const handleModelValidation = async () => {\n    try {\n      setProgress(0);\n      const ifcData =\n        await bimData.viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n      const blobIfc = new Blob([ifcData], { type: \"text/plain\" });\n      const ifcFile = new File([blobIfc], \"ifcFile.png\");\n\n      const formData = new FormData();\n      formData.append(\"files\", ifcFile);\n\n      const analysis = await axios.post(\n        process.env.REACT_APP_API_URL,\n        formData,\n        {\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\"\n          }\n        }\n      );\n      const { projectId } = analysis.data;\n      console.log(\"projectId\", projectId);\n      function poll() {\n        axios\n          .get(`${process.env.REACT_APP_API_URL}/pp/${projectId}`, {\n            headers: {\n              \"Access-Control-Allow-Origin\": \"*\"\n            }\n          })\n          .then((r) => {\n            const progressLoading = r.data.progress;\n            if (progressLoading === 100) {\n              clearTimeout(timeoutIdentifier);\n              setProgress(progressLoading);\n              // axios.get(`${process.env.REACT_APP_API_URL}/v/${projectId}`).then((r) => {\n              //   window.MODEL_ID = projectId;\n              //   window.NUM_FILES = r.data.n_files;\n              //   window.SPINNER_CLASS = 'spinner';\n\n              //   //TEMP FIX\n              //   window.hasOwnProperty('launch3D') && window.launch3D();\n              //   if (!window.hasOwnProperty('launch3D')) {\n              //     document.location.reload();\n              //   }\n              // })\n              axios\n                .get(`${process.env.REACT_APP_API_URL}/log/${projectId}.json`)\n                .then((logs) => {\n                  console.log(\"logs\", logs.data);\n                  setLogs(logs.data);\n                });\n            } else {\n              console.log(\"progress\", progressLoading);\n              timeoutIdentifier = setTimeout(poll, 1000);\n              if (progressLoading > -1) {\n                setProgress(progressLoading);\n              }\n            }\n          });\n      }\n      await poll();\n    } catch (err) {\n      // return res.status(500).json({ error: err });\n    }\n  };\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    const formData = new FormData();\n    formData.append(\"files\", acceptedFiles[0]);\n    if (acceptedFiles.length > 0) {\n      if (acceptedFiles[0].size / 1024 / 1024 > 15) {\n        alert(\"Version limitée à 15 Mo\");\n      } else {\n        setProgress(0);\n        const analysis = await axios.post(\n          process.env.REACT_APP_API_URL,\n          formData,\n          {\n            headers: {\n              \"Access-Control-Allow-Origin\": \"*\"\n            }\n          }\n        );\n        const { projectId } = analysis.data;\n        console.log(\"projectId\", projectId);\n        function poll() {\n          axios\n            .get(`${process.env.REACT_APP_API_URL}/pp/${projectId}`, {\n              headers: {\n                \"Access-Control-Allow-Origin\": \"*\"\n              }\n            })\n            .then((r) => {\n              const progressLoading = r.data.progress;\n              if (progressLoading === 100) {\n                clearTimeout(timeoutIdentifier);\n                setProgress(progressLoading);\n\n                axios\n                  .get(`${process.env.REACT_APP_API_URL}/log/${projectId}.json`, {\n                    headers: {\n                      \"Access-Control-Allow-Origin\": \"*\"\n                    }\n                  })\n                  .then((logs) => {\n                    console.log(\"logs\", logs.data);\n                    setLogs(logs.data);\n                  });\n              } else {\n                console.log(\"progress\", progressLoading);\n                timeoutIdentifier = setTimeout(poll, 1000);\n                if (progressLoading > -1) {\n                  setProgress(progressLoading);\n                }\n              }\n            });\n        }\n        await poll();\n      }\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: \".ifc\",\n  });\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement(\"a\");\n    a.download = fileName;\n    a.href = window.URL.createObjectURL(blob);\n    const clickEvt = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    a.dispatchEvent(clickEvt);\n    a.remove();\n  };\n\n  const handleExportToCsv = (e) => {\n    e.preventDefault();\n    // Headers for each column\n    let logsCsv = [];\n    let headers = [\"Severity\", \"Message\", \"Instance\", \"Time\"].join(\",\");\n    logsCsv.push(headers);\n\n    logs?.forEach((log) => {\n      const { level, message, instance, time } = log;\n      logsCsv.push([level, message, instance, time].join(\",\"));\n    });\n\n    downloadFile({\n      data: [...logsCsv].join(\"\\n\"),\n      fileName: `logs.csv`,\n      fileType: \"text/csv\",\n    });\n  };\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <FactCheckIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Validation`}\n        subheader={`Système de validation d'un fichier IFC`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => setShowValidation(false)}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              {logs.length > 0 && (\n                <ListItem button onClick={handleExportToCsv}>\n                  <ListItemIcon>\n                    <DownloadIcon />\n                  </ListItemIcon>\n                  <ListItemText primary=\"Télécharger CSV\" />\n                </ListItem>\n              )}\n              <ListItem button onClick={() => setShowValidation(false)}>\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent className={classes.cardContent}>\n        <Grid item xs={12} align=\"center\" justify=\"center\" alignItems=\"center\">\n          <div {...getRootProps({ style })}>\n            <input {...getInputProps()} />\n            {isDragActive ? (\n              <p>\n                Importer votre fichier ici ou cliquez pour selectionner un\n                fichier\n              </p>\n            ) : (\n              <p>\n                Importer votre fichier ici ou cliquez pour selectionner un\n                fichier\n              </p>\n            )}\n          </div>\n        </Grid>\n\n        {progress >= 0 && progress < 100 ? (\n          <Grid\n            item\n            xs={12}\n            align=\"center\"\n            justify=\"center\"\n            alignItems=\"center\"\n          >\n            <LinearProgressWithLabel value={progress} />\n          </Grid>\n        ) : (\n          <>\n            {bimModel && (\n              <>\n                <Grid item xs={12}>\n                  <br />\n                  <Typography gutterBottom variant=\"title2\" component=\"div\">\n                    Pour lancer l'audit de la maquette déja chargée:\n                  </Typography>\n                </Grid>\n                <Grid item xs={12}>\n                  <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    onClick={handleModelValidation}\n                  >\n                    Audit\n                  </Button>\n                </Grid>\n              </>\n            )}\n          </>\n        )}\n        <Grid item xs={12}>\n          {logs.length > 0 && (\n            <TableContainer component={Paper}>\n              <Table className={classes.table} aria-label=\"simple table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Severity</TableCell>\n                    <TableCell align=\"left\">Message</TableCell>\n                    <TableCell align=\"left\">Instance</TableCell>\n                    <TableCell align=\"left\">time</TableCell>\n                  </TableRow>\n                </TableHead>\n                {logs.map((log, i) => (\n                  <TableRow\n                    key={i}\n                    sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                  >\n                    <TableCell\n                      style={{\n                        color: `${log.level === \"Error\" ? \"red\" : \"orange\"}`,\n                      }}\n                    >\n                      {log.level}\n                    </TableCell>\n                    <TableCell>{log.message}</TableCell>\n                    <TableCell>{log.instance}</TableCell>\n                    <TableCell>{log.time}</TableCell>\n                  </TableRow>\n                ))}\n              </Table>\n            </TableContainer>\n          )}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Validation;\n\nfunction LinearProgressWithLabel(props) {\n  const classes = useStyles();\n\n  return (\n    <>\n      <Box display=\"flex\" className={classes.root} alignItems=\"center\">\n        {props.value === 0 ? (\n          <div className={classes.linearProgress}>Vérification en cours...</div>\n        ) : (\n          <>\n            <Box width=\"100%\" mr={1}>\n              <LinearProgress\n                className={classes.linearProgress}\n                variant=\"determinate\"\n                {...props}\n              />\n            </Box>\n            <Box minWidth={35}>\n              <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\n                props.value\n              )}%`}</Typography>\n            </Box>\n          </>\n        )}\n      </Box>\n    </>\n  );\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab, Typography } from \"@material-ui/core\";\nimport {\n  Grid,\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  CircularProgress,\n} from \"@mui/material\";\nimport CropIcon from \"@mui/icons-material/Crop\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport ControlCameraIcon from \"@mui/icons-material/ControlCamera\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n}));\n\nconst Cuts = ({ viewer, showCuts, setShowCuts }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [cuts, setCuts] = useState([]);\n  const [allowCut, setAllowCut] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  // useEffect(() => {\n  //   console.log('viewer.clipper.planes', viewer.clipper.planes)\n  //   const getCuts = async () => {\n  //     setLoading(true);\n  //     viewer.clipper.active = true;\n  //     setCuts(viewer.clipper.planes);\n  //     setLoading(false);\n  //   };\n  //   getCuts();\n  // }, [cuts]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    viewer.clipper.active = true;\n    window.addEventListener(\"resize\", resizeListener);\n    window.addEventListener(\"dblclick\", addClippingPlane, false);\n    return () => {\n      viewer.clipper.active = false;\n      window.removeEventListener(\"resize\", resizeListener);\n      window.removeEventListener(\"dblclick\", addClippingPlane, false);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const addClippingPlane = async () => {\n    setLoading(true);\n    console.log(\"viewer\", viewer);\n    await viewer.clipper.createPlane();\n    console.log(\"viewer.clipper.planes\", viewer.clipper.planes);\n    console.log(\"viewer.plans.planLists\", viewer.plans.planLists);\n    setCuts(viewer.clipper.planes);\n    setLoading(false)\n  };\n\n  const handleAddClippingPlane = () => {\n    if (showCuts) {\n      viewer.clipper.active = true;\n      window.addEventListener(\"dblclick\", addClippingPlane, false);\n    }\n  };\n\n  const handleDeleteClippingPlane = async (cut, index) => {\n    if (showCuts) {\n      setLoading(true);\n      await viewer.clipper.deletePlane(cut);\n      setLoading(false);\n      console.log(\"viewer.clipper.planes\", viewer.clipper.planes);\n      window.removeEventListener(\"dblclick\", addClippingPlane, false);\n      // const newCuts = cuts.splice(index, 1);\n      // setCuts([...newCuts]);\n    }\n  };\n\n  const handleHideAllClippingPlane = async () => {\n    setLoading(true);\n    viewer.clipper.active = !viewer.clipper.active;\n    if (!viewer.clipper.active) {\n      await viewer.removeClippingPlane();\n    }\n    setLoading(false);\n  };\n\n  const handleRemoveAllClippingPlane = async () => {\n    setLoading(true);\n    viewer.clipper.active = false;\n    await viewer.clipper.deleteAllPlanes();\n    // if (viewer.clipper.planes.length > 0) {\n    //   viewer.clipper.planes.forEach(dimension => dimension.removeFromScene());\n    // }\n    viewer.clipper.planes = [];\n    setCuts([]);\n    setLoading(false);\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <CropIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Coupes`}\n        subheader={`Liste des coupes`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                viewer.clipper.active = false;\n                window.removeEventListener(\"dblclick\", addClippingPlane, false);\n                setShowCuts(false);\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem\n                button\n                onClick={() => {\n                  viewer.clipper.active = false;\n                  window.removeEventListener(\n                    \"dblclick\",\n                    addClippingPlane,\n                    false\n                  );\n                  setShowCuts(false);\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent>\n        <Grid container spacing={2}>\n          {/* <Grid item xs={6} style={{ textAlign: \"left\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleAddClippingPlane}\n              >\n                <AddIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid item xs={6} style={{ textAlign: \"right\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleHideAllClippingPlane}\n              >\n                <VisibilityIcon />\n              </Button>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleRemoveAllClippingPlane}\n              >\n                <DeleteIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid> */}\n          <Grid item xs={12}>\n            {/* <Typography variant=\"subtitle1\" component=\"h3\">\n              Liste de coupes:\n        </Typography> */}\n            <Typography gutterBottom variant=\"title2\" component=\"div\">\n              Double-cliquer sur une surface pour générer une coupe\n                  </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            {loading ? (\n              <CircularProgress color=\"inherit\" />\n            ) : (\n              <List sx={{ width: \"100%\" }}>\n                {viewer.clipper.planes.length > 0 &&\n                  viewer.clipper.planes.map((cut, index) => (\n                    <ListItem\n                      key={index}\n                      secondaryAction={\n                        <>\n                          <IconButton\n                            edge=\"end\"\n                            aria-label=\"comments\"\n                            onClick={() =>\n                              handleDeleteClippingPlane(cut, index)\n                            }\n                          >\n                            <CloseIcon />\n                          </IconButton>\n                        </>\n                      }\n                      disablePadding\n                    >\n                      <ListItemButton\n                        role={undefined}\n                        dense\n                      //  onClick={() => handleShowElement(ifcClass.eids)}\n                      >\n                        {/* <ListItemIcon>\n                    </ListItemIcon> */}\n                        <ListItemText\n                          id={`checkbox-list-label-${index}`}\n                          primary={`${cut.arrowBoundingBox.uuid}`}\n                        />\n                      </ListItemButton>\n                    </ListItem>\n                  ))}\n              </List>\n            )}\n          </Grid>\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Cuts;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab, Typography } from \"@material-ui/core\";\nimport {\n  Grid,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemText,\n  CircularProgress,\n  Button\n} from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport LayersClearIcon from \"@mui/icons-material/LayersClear\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport Drawing from \"dxf-writer\";\nimport {\n  IFCWINDOW,\n  IFCPLATE,\n  IFCMEMBER,\n  IFCWALL,\n  IFCWALLSTANDARDCASE,\n  IFCSLAB,\n  IFCFURNISHINGELEMENT,\n  IFCDOOR,\n  IFCSTAIR,\n  IFCSTAIRFLIGHT,\n  IFCRAILING\n} from 'web-ifc';\nimport { ClippingEdges } from 'web-ifc-viewer/dist/components/display/clipping-planes/clipping-edges';\nimport { Color, LineBasicMaterial, MeshBasicMaterial } from 'three';\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\nimport ViewInArIcon from '@mui/icons-material/ViewInAr';\n\nconst useStyles = makeStyles(() => ({\n  // list: {\n  //   width: \"100%\",\n  //   height: \"100%\",\n  //   maxHeight: \"100%\",\n  //   overflow: \"auto\",\n  // },\n  activePlan: {\n    color: \"#E6464D\",\n  },\n  button: {\n    color: \"white\",\n    backgroundColor: 'black',\n    width: '100%'\n  },\n}));\n\nconst DrawingList = ({\n  viewer,\n  setPlans\n}) => {\n  const [drawings, setDrawings] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [activeViewIndex, setActiveViewIndex] = useState();\n\n  const classes = useStyles();\n\n\n  const clippingMaterial = new LineMaterial();\n  const subsetMat = new MeshBasicMaterial();\n\n\n  const sectionedCategories = [\n    {\n      name: \"windows_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.BLUE,\n      value: [IFCWINDOW, IFCPLATE, IFCMEMBER],\n      stringValue: [\"IFCWINDOW\", \"IFCPLATE\", \"IFCMEMBER\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"walls_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCWALL, IFCWALLSTANDARDCASE],\n      stringValue: [\"IFCWALL\", \"IFCWALLSTANDARDCASE\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"floors_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCSLAB],\n      stringValue: [\"IFCSLAB\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"doors_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.YELLOW,\n      value: [IFCDOOR],\n      stringValue: [\"IFCDOOR\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"furniture_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCFURNISHINGELEMENT],\n      stringValue: [\"IFCFURNISHINGELEMENT\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"stairs_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCSTAIR, IFCSTAIRFLIGHT],\n      stringValue: [\"IFCSTAIR\", \"IFCSTAIRFLIGHT\"],\n      material: clippingMaterial\n    },\n  ];\n\n  const projectedCategories = [\n    {\n      name: \"furniture_projection\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.CYAN,\n      value: [IFCFURNISHINGELEMENT],\n      stringValue: [\"IFCFURNISHINGELEMENT\"],\n    },\n    {\n      name: \"general_projection\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.CYAN,\n      value: [IFCSLAB, IFCWINDOW, IFCDOOR, IFCSTAIRFLIGHT, IFCSTAIR, IFCRAILING, IFCMEMBER],\n      stringValue: [\"IFCSLAB\", \"IFCWINDOW\", \"IFCDOOR\", \"IFCSTAIRFLIGHT\", \"IFCSTAIR\", \"IFCRAILING\", \"IFCMEMBER\"],\n    },\n\n  ];\n\n\n\n  useEffect(() => {\n    let newPlans = [];\n    const getDrawings = async () => {\n      try {\n        setLoading(true);\n        // ClippingEdges.createDefaultIfcStyles = false;\n        // viewer.dxf.initializeJSDXF(Drawing);\n        // const plans = await generateAllFloorPlans1();\n\n        await viewer.plans.computeAllPlanViews(0);\n        let newPlans = Object.values(viewer.plans.planLists[0]);\n\n        setDrawings(newPlans);\n        setPlans(newPlans);\n        setLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getDrawings();\n  }, []);\n\n\n  async function generateAllFloorPlans() {\n    console.log('coordinates', await viewer.plans.getSiteCoords(0))\n    await createClippingLayers();\n    await viewer.plans.computeAllPlanViews(0);\n\n    const plans = Object.values(viewer.plans.planLists[0]);\n    const ifcProject = await viewer.IFC.getSpatialStructure(0);\n    const storeys = ifcProject.children[0].children[0].children;\n    for (let storey of storeys) {\n      for (let child of storey.children) {\n        if (child.children.length) {\n          storey.children.push(...child.children);\n        }\n      }\n    }\n\n    console.log('storeys', storeys);\n\n    console.log('plans', plans);\n\n    for (let plan of plans) {\n      // Create a new drawing (if it doesn't exist)\n      if (!viewer.dxf.drawings[plan.name]) viewer.dxf.newDrawing(plan.name);\n\n      const storey = await storeys.find(storey => storey.expressID === plan.expressID);\n\n      // Draw all projected layers\n      for (let category of projectedCategories) {\n\n        // Get the IDs of all the items to draw\n        const ids = await storey.children\n          .filter(child => category.stringValue.includes(child.type))\n          .map(child => child.expressID);\n\n        // If no items to draw in this layer in this floor plan, let's continue\n        if (!ids.length) {\n          continue;\n        }\n\n        // If there are items, extract its geometry\n        const subset = await viewer.IFC.loader.ifcManager.createSubset({\n          modelID: 0,\n          ids,\n          removePrevious: true,\n          customID: \"floor_plan_generation\",\n          material: subsetMat\n        });\n\n        // Get the projection of the items in this floor plan\n        const filteredPoints = [];\n        const edges = await viewer.edgesProjector.projectEdges(subset);\n        const positions = edges.geometry.attributes.position.array;\n\n\n        // Lines shorter than this won't be rendered\n        // https://stackoverflow.com/a/20916980/14627620\n\n        const tolerance = 0.01;\n        for (let i = 0; i < positions.length - 5; i += 6) {\n\n          const a = positions[i] - positions[i + 3];\n          // Z coords are multiplied by -1 to match DXF Y coordinate\n          const b = -positions[i + 2] + positions[i + 5];\n\n          const distance = Math.sqrt(a * a + b * b);\n\n          if (distance > tolerance) {\n            filteredPoints.push([positions[i], -positions[i + 2], positions[i + 3], -positions[i + 5]]);\n          }\n\n        }\n\n        // Draw the projection of the items\n        viewer.dxf.drawEdges(plan.name, filteredPoints, category.name, category.color, category.style);\n\n        // Clean up\n        edges.geometry.dispose();\n\n      }\n\n      // Draw all sectioned items\n      for (let category of sectionedCategories) {\n        viewer.dxf.drawNamedLayer(plan.name, plan, category.name, category.name, category.color, category.style);\n      }\n    }\n\n    return plans;\n  }\n\n  async function createClippingLayers() {\n    for (let category of sectionedCategories) {\n      await ClippingEdges.newStyle(category.name, category.value, category.material);\n    }\n  }\n\n  const handleShowPlane = async (drawing, index) => {\n    console.log('drawing', drawing);\n    // const current = drawings[index];\n    // console.log('current', current);\n\n    viewer.plans.goTo(0, `${drawing.expressID}`, false);\n  }\n\n\n  const handleDxfPlane = async (drawing, index) => {\n\n    const result = viewer.dxf.exportDXF(drawing.name);\n    const link = document.createElement('a');\n    link.download = `${drawing.name}.dxf`;\n    link.href = URL.createObjectURL(result);\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  }\n\n  const handleAddPlane = async () => {\n    await viewer.plans.computeAllPlanViews(0);\n    const planNames = Object.keys(viewer.plans.planLists[0]);\n    console.log(\"viewer.plans.planLists\", viewer.plans.planLists);\n    console.log(\"viewer.plans.planLists\", planNames);\n  };\n\n  const handleDeletePlane = async () => {\n    setActiveViewIndex();\n    await viewer.plans.exitPlanView();\n  };\n\n  const handleHideAllPlane = () => {\n    viewer.clipper.active = !viewer.clipper.active;\n    if (!viewer.clipper.active) {\n      viewer.removeClippingPlane();\n    }\n  };\n\n  const handleRemoveAllPlane = () => {\n    // viewer.clipper.deleteAllPlanes();\n    viewer.clipper.planes = [];\n    setDrawings([]);\n  };\n\n  return (\n    <Grid container>\n      {/* <Grid item xs={6} style={{ textAlign: 'left' }}>\n            <ButtonGroup\n              className={classes.buttonGroup}\n            >\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleAddPlane}\n              >\n                <AddIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid item xs={6} style={{ textAlign: 'right' }}>\n            <ButtonGroup\n              className={classes.buttonGroup}\n            >\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleHideAllPlane}\n              >\n                <VisibilityIcon />\n              </Button>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleRemoveAllPlane}\n              >\n                <DeleteIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid> */}\n      <Grid item xs={12}>\n        {loading ? (\n          <Grid item xs={12} style={{ textAlign: 'center' }}>\n            <CircularProgress color=\"inherit\" />\n          </Grid>\n        ) : (\n          <List className={classes.list} disablePadding>\n            <ListItem\n              disablePadding\n              secondaryAction={\n                <>\n                  {/* <Button\n                    className={classes.button}\n                    onClick={() => handleDeletePlane()}\n                  >\n                    {'3D'}\n                  </Button> */}\n                  <IconButton\n                    edge=\"end\"\n                    aria-label=\"comments\"\n                    className={classes.button}\n                    onClick={() => handleDeletePlane()}>\n                    <ViewInArIcon />\n                  </IconButton>\n                </>\n              }\n            >\n              <ListItemButton role={undefined} dense>\n                <ListItemText primary={<Typography gutterBottom variant=\"h6\" component=\"div\">\n                  {`Liste des vues des étages:`}\n                </Typography>} />\n              </ListItemButton>\n            </ListItem>\n            <hr />\n            {/*<Typography gutterBottom variant=\"h6\" component=\"div\">\n              {`Liste des vues des étages:`}\n            </Typography> */}\n            {drawings.length > 0 &&\n              drawings.map((drawing, index) => (\n                <ListItem\n                  key={index}\n                  disablePadding\n                  className={\n                    index === activeViewIndex ? classes.activePlan : \"\"\n                  }\n                  secondaryAction={\n                    <>\n                      {/* <IconButton\n                        edge=\"end\"\n                        aria-label=\"comments\"\n                        onClick={() => handleDxfPlane(drawing, index)}\n                      >\n                        <DownloadIcon />\n                      </IconButton> */}\n                      <IconButton\n                        // className={\n                        //   index === activeViewIndex ? classes.activePlan : \"\"\n                        // }\n                        style={{\n                          color: index === activeViewIndex ? \"#E6464D\" : \"\",\n                        }}\n                        edge=\"end\"\n                        aria-label=\"comments\"\n                        onClick={() => handleShowPlane(drawing)}\n                      >\n                        <VisibilityIcon />\n                      </IconButton>\n                      {/* <IconButton\n                      edge=\"end\"\n                      aria-label=\"comments\"\n                      onClick={() => handleDeletePlane(drawing, index)}\n                    >\n                      <CloseIcon />\n                    </IconButton> */}\n                    </>\n                  }\n                >\n                  <ListItemButton\n                    role={undefined}\n                    dense\n                  //  onClick={() => handleShowElement(ifcClass.eids)}\n                  >\n                    {/* <ListItemIcon>\n                    </ListItemIcon> */}\n                    <ListItemText\n                      id={`checkbox-list-label-${index}`}\n                      primary={`${drawing.name}`}\n                    />\n                  </ListItemButton>\n                </ListItem>\n              ))}\n          </List>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default DrawingList;\n\n\n//   const handleShowPlane = async (index) => {\n//     setActiveViewIndex(index);\n\n//     const current = drawings[index];\n//     console.log(\"current\", current);\n//     viewer.plans.goTo(0, current, true);\n//     //viewer.context.items.ifcModels.forEach(model => viewer.edges.toggle(`${model.modelID}`));\n\n//     // viewer.shadowDropper.shadows[0].root.visible = false;\n//     // viewer.filler.fills[0].visible = false;\n//   };\n\n\n//   const handleDeletePlane = () => {\n//     setActiveViewIndex();\n//     viewer.plans.exitPlanView(true);\n//   };\n\n//   const handleHideAllPlane = () => {\n//     viewer.clipper.active = !viewer.clipper.active;\n//     if (!viewer.clipper.active) {\n//       viewer.removeClippingPlane();\n//     }\n//   };\n\n//   const handleRemoveAllPlane = () => {\n//     // viewer.clipper.deleteAllPlanes();\n//     viewer.clipper.planes = [];\n//     setDrawings([]);\n//   };\n//   return (\n//     <Grid container>\n//       {/* <Grid item xs={6} style={{ textAlign: 'left' }}>\n//             <ButtonGroup\n//               className={classes.buttonGroup}\n//             >\n//               <Button\n//                 edge=\"end\"\n//                 aria-label=\"comments\"\n//                 onClick={handleAddPlane}\n//               >\n//                 <AddIcon />\n//               </Button>\n//             </ButtonGroup>\n//           </Grid>\n//           <Grid item xs={6} style={{ textAlign: 'right' }}>\n//             <ButtonGroup\n//               className={classes.buttonGroup}\n//             >\n//               <Button\n//                 edge=\"end\"\n//                 aria-label=\"comments\"\n//                 onClick={handleHideAllPlane}\n//               >\n//                 <VisibilityIcon />\n//               </Button>\n//               <Button\n//                 edge=\"end\"\n//                 aria-label=\"comments\"\n//                 onClick={handleRemoveAllPlane}\n//               >\n//                 <DeleteIcon />\n//               </Button>\n//             </ButtonGroup>\n//           </Grid> */}\n//       <Grid item xs={12}>\n//         {loading ? (\n//           <CircularProgress color=\"inherit\" />\n//         ) : (\n//           <List className={classes.list} disablePadding>\n//             <ListItem\n//               disablePadding\n//               secondaryAction={\n//                 <>\n//                   <IconButton edge=\"end\" aria-label=\"comments\">\n//                     <LayersClearIcon />\n//                   </IconButton>\n//                 </>\n//               }\n//               onClick={() => handleDeletePlane()}\n//             >\n//               <ListItemButton role={undefined} dense>\n//                 <ListItemText primary=\"Vue globale\" />\n//               </ListItemButton>\n//             </ListItem>\n\n//             {drawings.length > 0 &&\n//               drawings.map((drawing, index) => (\n//                 <ListItem\n//                   key={index}\n//                   disablePadding\n//                   className={\n//                     index === activeViewIndex ? classes.activePlan : \"\"\n//                   }\n//                   secondaryAction={\n//                     <>\n//                       {/* <IconButton\n//                       edge=\"end\"\n//                       aria-label=\"comments\"\n//                       onClick={() => handleDxfPlane(drawing, index)}\n//                     >\n//                       <DownloadIcon />\n//                     </IconButton> */}\n//                       <IconButton\n//                         // className={\n//                         //   index === activeViewIndex ? classes.activePlan : \"\"\n//                         // }\n//                         style={{\n//                           color: index === activeViewIndex ? \"#E6464D\" : \"\",\n//                         }}\n//                         edge=\"end\"\n//                         aria-label=\"comments\"\n//                       >\n//                         <VisibilityIcon />\n//                       </IconButton>\n//                       {/* <IconButton\n//                       edge=\"end\"\n//                       aria-label=\"comments\"\n//                       onClick={() => handleDeletePlane(drawing, index)}\n//                     >\n//                       <CloseIcon />\n//                     </IconButton> */}\n//                     </>\n//                   }\n//                   onClick={() => handleShowPlane(index)}\n//                 >\n//                   <ListItemButton\n//                     role={undefined}\n//                     dense\n//                     //  onClick={() => handleShowElement(ifcClass.eids)}\n//                   >\n//                     {/* <ListItemIcon>\n//                     </ListItemIcon> */}\n//                     <ListItemText\n//                       id={`checkbox-list-label-${index}`}\n//                       primary={`${drawing}`}\n//                       // onClick={() => handleShowPlane(index)}\n//                     />\n//                   </ListItemButton>\n//                 </ListItem>\n//               ))}\n//           </List>\n//         )}\n//       </Grid>\n//     </Grid>\n//   );\n// };\n\n// export default DrawingList;","import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  makeStyles,\n  Fab\n} from \"@material-ui/core\";\nimport {\n  Grid,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemText,\n  CircularProgress,\n  TextField\n} from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport Drawing from 'dxf-writer';\nimport { DxfParser } from 'dxf-parser';\nimport { Viewer } from 'three-dxf';\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: 'transparent',\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: '0px'\n  },\n  fab: {\n    backgroundColor: 'white'\n  }\n}));\n\n\nconst DxfViewer = ({\n  viewer\n}) => {\n  const classes = useStyles();\n\n  useEffect(() => {\n  }, []);\n\n  const handleUploadDxf = async (e) => {\n    const file = e.target.files[0];\n    let reader = new FileReader();\n    reader.readAsText(file);\n    console.log('dxf', e.target.files[0])\n    reader.onload = function () {\n      try {\n        const parser = new DxfParser();\n        const dxf = parser.parseSync(reader.result);\n        console.log('dxf', dxf)\n        let cadCanvas = new Viewer(dxf, document.getElementById('cad-view'), 500, 500);\n      } catch (err) {\n        return console.error(err.stack);\n      }\n    }\n    reader.onerror = function () {\n      console.log(reader.error);\n    };\n  }\n\n  return (\n    <Grid container>\n      <Grid item xs={12}>\n        <TextField\n          type=\"file\"\n          id=\"input\"\n          accept=\"dxf\"\n          onChange={handleUploadDxf}>Import DXF</TextField>\n      </Grid>\n      <Grid item xs={12}>\n        <div id=\"cad-view\">\n\n        </div>\n      </Grid>\n    </Grid>\n  )\n};\n\nexport default DxfViewer;","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab } from \"@material-ui/core\";\nimport {\n  Grid,\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  CircularProgress,\n  Tabs,\n  Tab,\n  Box,\n  Typography,\n} from \"@mui/material\";\nimport CropIcon from \"@mui/icons-material/Crop\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport MapIcon from \"@mui/icons-material/Map\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport ControlCameraIcon from \"@mui/icons-material/ControlCamera\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport Drawing from \"dxf-writer\";\n\nimport DrawingList from \"./Scenes/DrawingList\";\nimport DxfViewer from \"./Scenes/DxfViewer\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n}));\n\nconst a11yProps = (index) => {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n};\n\nconst Drawings = ({ viewer, showDrawings, setShowDrawings }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [value, setValue] = useState(0);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n  const [plans, setPlans] = useState([]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return async () => {\n      handleDeletePlane();\n      window.removeEventListener(\"resize\", resizeListener);\n\n      for (let ifcPlan of plans) {\n        await viewer.plans.clipper.deletePlane(ifcPlan.plane);\n      }\n    };\n  }, [plans]);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const handleDeletePlane = async () => {\n    await viewer.plans.exitPlanView();\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <MapIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Plans`}\n        subheader={`Liste des plans`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                viewer.clipper.active = false;\n                setShowDrawings(false);\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem\n                button\n                onClick={() => {\n                  viewer.clipper.active = false;\n                  setShowDrawings(false);\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent className={classes.cardContent}>\n        <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n          <Tabs\n            value={value}\n            onChange={handleChange}\n            aria-label=\"basic tabs example\"\n          >\n            <Tab label=\"Plans\" {...a11yProps(0)} />\n            {/* <Tab label=\"Visualiseur de DXF\" {...a11yProps(1)} /> */}\n          </Tabs>\n        </Box>\n        <TabPanel value={value} index={0}>\n          <DrawingList\n            viewer={viewer}\n            setPlans={setPlans}\n          />\n        </TabPanel>\n        {/* <TabPanel value={value} index={1}>\n          <DxfViewer viewer={viewer} />\n        </TabPanel> */}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Drawings;\n\nconst TabPanel = (props) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          <Typography>{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab } from \"@material-ui/core\";\nimport {\n  Grid,\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  CircularProgress,\n  Typography\n} from \"@mui/material\";\nimport CropIcon from \"@mui/icons-material/Crop\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport StraightenIcon from \"@mui/icons-material/Straighten\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport ControlCameraIcon from \"@mui/icons-material/ControlCamera\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\nimport { ConeGeometry, LineBasicMaterial, LineDashedMaterial, MeshBasicMaterial, Vector3 } from 'three';\n\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n}));\n\nconst Measures = ({ viewer, showMeasures, setShowMeasures }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [measures, setMeasures] = useState([]);\n  const [allowMeasure, setAllowMeasure] = useState(false);\n  const [visibleMeasures, setVisibleMeasures] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    console.log('dimensions', viewer.dimensions.dimensions);\n    setMeasures(viewer.dimensions.dimensions);\n\n    let dimensionsActive = true;\n    viewer.dimensions.active = dimensionsActive;\n    viewer.dimensions.previewActive = dimensionsActive;\n    // viewer.dimensions.setArrow(0.1, 0.03);\n    // const coneGeometry = new ConeGeometry(radius, height);\n    // coneGeometry.translate(0, -height / 2, 0);\n    // coneGeometry.rotateX(-Math.PI / 2);\n    // viewer.dimensions.endpoint = coneGeometry;\n\n    viewer.dimensions.lineMaterial = new LineDashedMaterial({\n      color: 0x000000,\n      linewidth: 2,\n      depthTest: false,\n      dashSize: 0.1,\n      gapSize: 0.1\n    });\n\n    window.addEventListener(\"resize\", resizeListener);\n    window.addEventListener(\"mousemove\", handlePrePickIfcItem, false);\n    window.addEventListener(\"dblclick\", addMeasure, false);\n    // window.addEventListener(\"mouseup\", viewer.dimensions.cancelDrawing, false);\n    window.addEventListener(\"keydown\", handleControlMeasures, false);\n\n\n    return () => {\n      let dimensionsActive = false;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n\n      window.removeEventListener(\"resize\", resizeListener);\n      window.removeEventListener(\"mousemove\", handlePrePickIfcItem, false);\n      window.removeEventListener(\"dblclick\", addMeasure, false);\n      // window.removeEventListener(\"mouseup\", viewer.dimensions.cancelDrawing, false);\n      window.removeEventListener(\"keydown\", handleControlMeasures, false);\n    };\n  }, []);\n\n  const handlePrePickIfcItem = async () => {\n    await viewer.IFC.selector.prePickIfcItem();\n  }\n\n  const handleControlMeasures = (e) => {\n    if (e.code === \"Escape\") {\n      viewer.dimensions.cancelDrawing();\n    }\n    if (\n      e.code === \"Delete\" ||\n      e.code === \"Backspace\" ||\n      e.code === \"keyD\"\n    ) {\n      setShowMeasures(false);\n      viewer.dimensions.deleteAll();\n    }\n  }\n\n\n\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  // useEffect(() => {\n  //   const getMeasures = async () => {\n  //     let dimensionsActive = true;\n  //     viewer.dimensions.active = dimensionsActive;\n  //     viewer.dimensions.previewActive = !dimensionsActive;\n  //     setVisibleMeasures(true);\n  //     setMeasures(viewer.dimensions.dimensions);\n  //   };\n  //   getMeasures();\n  // }, [measures]);\n\n  const addMeasure = async () => {\n    setLoading(true);\n    console.log('HELLoo')\n    let takeMeasure = !allowMeasure;\n    setAllowMeasure(takeMeasure);\n    if (takeMeasure) {\n      await viewer.dimensions.create();\n      setMeasures(viewer.dimensions.dimensions);\n    }\n    setLoading(false);\n  };\n\n  const customizePrePickItem = async () => {\n    const found = await viewer.IFC.selector.context.castRayIfc();\n    // This is more efficient than destroying and recreating the subset when the user hovers away\n    if (!found) {\n      viewer.IFC.selector.preselection.toggleVisibility(false);\n      return;\n    }\n    console.log('found', found)\n    await viewer.IFC.selector.preselection.pick(found);\n  }\n\n  const handleAddMeasure = async () => {\n    let dimensionsActive = false;\n    let takeMeasure = !allowMeasure;\n    setAllowMeasure(takeMeasure);\n    if (takeMeasure) {\n      dimensionsActive = true;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.dimensions.setArrow(0.1, 0.03);\n\n      viewer.dimensions.lineMaterial = new LineDashedMaterial({\n        color: 0x000000,\n        linewidth: 2,\n        depthTest: false,\n        dashSize: 0.1,\n        gapSize: 0.1\n      });\n      // viewer.dimensions.lineMaterial = new LineBasicMaterial({\n      //   color: 0x0000FF,\n      //   linewidth: 30,\n      //   linecap: 'round', //ignored by WebGLRenderer\n      //   linejoin: 'round' //ignored by WebGLRenderer\n      // });\n\n      // await viewer.IFC.unPrepickIfcItems();\n\n\n\n\n      // window.onmousemove = async () => dimensionsActive ? null : await viewer.IFC.prePickIfcItem();\n\n      window.onmousemove = async () => dimensionsActive ? null : await viewer.IFC.selector.prePickIfcItem();\n\n      window.onmousedown = addMeasure;\n      window.onmouseup = async () => dimensionsActive ? null : await viewer.dimensions.cancelDrawing();\n    } else {\n      dimensionsActive = false;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.IFC.unpickIfcItems();\n      window.removeEventListener(\"mousedown\", addMeasure, false);\n    }\n\n    window.onkeydown = (event) => {\n      if (event.code === \"Escape\") {\n        viewer.dimensions.cancelDrawing();\n        window.removeEventListener(\"mousedown\", addMeasure, false);\n      }\n      if (\n        event.code === \"Delete\" ||\n        event.code === \"Backspace\" ||\n        event.code === \"keyD\"\n      ) {\n        setShowMeasures(false);\n        viewer.dimensions.deleteAll();\n      }\n    };\n  };\n\n\n  const handleDeleteMeasure = async (measure, index) => {\n    setLoading(true);\n    // if (showMeasures) {\n    console.log('measure', measure);\n    console.log('dimensions', dimensions);\n    let dimensions = await viewer.dimensions.dimensions;\n    console.log('measure', measure);\n    console.log('dimensions', dimensions);\n    const selected = await dimensions.find(\n      (dimension) => dimension.textLabel.uuid === measure.textLabel.uuid\n    );\n    const measureIndex = await dimensions.findIndex(\n      (dimension) => dimension.textLabel.uuid === measure.textLabel.uuid\n    );\n    if (measureIndex > -1) {\n      const newMeasures = await dimensions.splice(measureIndex, 1);\n      await selected.removeFromScene();\n\n      // console.log('newMeasures', newMeasures);\n      setMeasures([...dimensions]);\n    }\n    // }\n    setLoading(false);\n  };\n\n  const handleMeasuresVisibility = () => {\n    let visilibity = !visibleMeasures;\n    setVisibleMeasures(visilibity);\n    viewer.dimensions.active = visilibity;\n  };\n\n  const handleRemoveAllMeasures = () => {\n    // viewer.clipper.deleteAllPlanes();\n    if (viewer.dimensions.dimensions.length > 0) {\n      viewer.dimensions.dimensions.forEach((dimension) =>\n        dimension.removeFromScene()\n      );\n    }\n    viewer.dimensions.dimensions = [];\n    setMeasures([]);\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <StraightenIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Outils de mesures`}\n        subheader={`Liste des mesures`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                let dimensionsActive = false;\n                viewer.dimensions.active = dimensionsActive;\n                viewer.dimensions.previewActive = dimensionsActive;\n                // window.removeEventListener('dblclick', addClippingPlane, false);\n                setShowMeasures(false);\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem\n                button\n                onClick={() => {\n                  let dimensionsActive = false;\n                  viewer.dimensions.active = dimensionsActive;\n                  viewer.dimensions.previewActive = dimensionsActive;\n                  // window.removeEventListener('dblclick', addClippingPlane, false);\n                  setShowMeasures(false);\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent>\n        <Grid container spacing={2}>\n          {/* <Grid item xs={6} style={{ textAlign: \"left\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                style={{\n                  backgroundColor: `${allowMeasure ? \"lightGray\" : \"transparent\"\n                    }`,\n                }}\n                onClick={handleAddMeasure}\n              >\n                <AddIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid item xs={6} style={{ textAlign: \"right\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleRemoveAllMeasures}\n              >\n                <DeleteIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid> */}\n          <Grid item xs={12}>\n            <Typography gutterBottom variant=\"title2\" component=\"div\">\n              Double-cliquer pour créer une mesure\n                  </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            {loading ? (\n              <CircularProgress color=\"inherit\" />\n            ) : (\n              <List sx={{ width: \"100%\" }}>\n                {viewer.dimensions.dimensions.length > 0 &&\n                  viewer.dimensions.dimensions.map((measure, index) => (\n                    <ListItem\n                      key={index}\n                      secondaryAction={\n                        <>\n                          <IconButton\n                            edge=\"end\"\n                            aria-label=\"comments\"\n                            onClick={() => handleDeleteMeasure(measure, index)}\n                          >\n                            <CloseIcon />\n                          </IconButton>\n                        </>\n                      }\n                      disablePadding\n                    >\n                      <ListItemButton\n                        role={undefined}\n                        dense\n                      //  onClick={() => handleShowElement(ifcClass.eids)}\n                      >\n                        {/* <ListItemIcon>\n                    </ListItemIcon> */}\n                        <ListItemText\n                          id={`checkbox-list-label-${index}`}\n                          primary={`Mesure-${measure.textLabel.uuid}`}\n                        />\n                      </ListItemButton>\n                    </ListItem>\n                  ))}\n              </List>\n            )}\n          </Grid>\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Measures;\n","import { useEffect, useCallback, useState } from \"react\";\nimport Avatar from '@mui/material/Avatar';\nimport Divider from '@mui/material/Divider';\nimport Paper from '@mui/material/Paper';\nimport MenuList from '@mui/material/MenuList';\nimport MenuItem from '@mui/material/MenuItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport Typography from '@mui/material/Typography';\nimport ContentCut from '@mui/icons-material/ContentCut';\nimport ContentCopy from '@mui/icons-material/ContentCopy';\nimport ContentPaste from '@mui/icons-material/ContentPaste';\nimport LibraryAddIcon from '@mui/icons-material/LibraryAdd';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport ViewInArIcon from '@mui/icons-material/ViewInAr';\nimport Cloud from '@mui/icons-material/Cloud';\nimport useContextMenu from \"./ContextMenu.hooks\";\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\nimport {\n  MeshLambertMaterial,\n  MeshBasicMaterial,\n  DoubleSide,\n  MeshPhysicalMaterial,\n  Mesh\n} from 'three';\n\nconst ContextMenu = ({\n  viewer,\n  showContextMenu,\n  meshMaterials,\n  setShowContextMenu,\n  setShowProperties,\n  setShowSpatialStructure,\n  handleShowMarketplace,\n  eids,\n  setEids,\n  subsets,\n  setSubsets\n}) => {\n  const [anchorPoint, setAnchorPoint] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    document.addEventListener(\"contextmenu\", handleContextMenu);\n    return () => {\n      document.removeEventListener(\"contextmenu\", handleContextMenu);\n    };\n  });\n\n  const handleContextMenu = (event) => {\n    console.log('eids', eids);\n    if (eids.length > 0) {\n      event.preventDefault();\n      setAnchorPoint({ x: event.pageX, y: event.pageY });\n      setShowContextMenu(true);\n    }\n  };\n\n  const handleShowProperties = async () => {\n    if (eids.length > 0) {\n      setShowProperties(true);\n      setShowContextMenu(false);\n    }\n  }\n\n  const handleGetAllItemsOfType = async () => {\n    if (eids.length > 0) {\n      const element = await viewer.IFC.getProperties(0, eids[0], false, false);\n      const elementsByType = await viewer.getAllItemsOfType(0, element.type, false, false);\n      const newEids = [...eids, ...elementsByType];\n      setEids(newEids);\n      await viewer.IFC.pickIfcItemsByID(0, newEids);\n      setShowContextMenu(false);\n    }\n  }\n\n  const handleAddProperties = async () => {\n    handleShowMarketplace('Open dthX');\n    setShowContextMenu(false);\n  }\n\n  const handleHideElement = async () => {\n    viewer.IFC.loader.ifcManager.removeFromSubset(\n      0,\n      eids,\n      'full-model-subset',\n    );\n  }\n\n\n  const handleIsolateElement = async () => {\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[0];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    )\n\n    const idsHidden = allIDs.reduce(function (acc, id) {\n      if (eids.indexOf(id) === -1) {\n        acc.push(id);\n      }\n      return acc;\n    }, []);\n\n    viewer.IFC.loader.ifcManager.removeFromSubset(\n      0,\n      idsHidden,\n      'full-model-subset',\n    );\n\n  }\n\n  const handleShowModel = async () => {\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[0];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    )\n\n    viewer.IFC.loader.ifcManager.createSubset({\n      modelID: ifcModel.modelID,\n      ids: allIDs,\n      applyBVH: true,\n      scene: ifcModel.parent,\n      removePrevious: true,\n      customID: 'full-model-subset',\n    });\n  }\n\n  return (\n    showContextMenu &&\n    <Paper sx={{ width: 250, maxWidth: '100%', top: anchorPoint.y, left: anchorPoint.x, position: 'absolute', opacity: '0.95' }}>\n      <MenuList>\n        <MenuItem\n          onClick={handleGetAllItemsOfType}\n        >\n          <ListItemIcon>\n            <LibraryAddIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Sélection par Classe</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleIsolateElement}\n        >\n          <ListItemIcon>\n            <VisibilityIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Isoler</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleHideElement}\n        >\n          <ListItemIcon>\n            <VisibilityOffIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Cacher</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleShowModel}\n        >\n          <ListItemIcon>\n            <ViewInArIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Rétablir Modèle</ListItemText>\n        </MenuItem>\n        {/* <MenuItem>\n          <ListItemIcon>\n            <ContentPaste fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Créer une tâche</ListItemText>\n        </MenuItem> */}\n        <Divider />\n        <MenuItem\n          onClick={handleShowProperties}\n        >\n          <ListItemIcon>\n            <DescriptionIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Propriétés</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleAddProperties}\n        >\n          <ListItemIcon>\n            <Avatar\n              aria-label=\"recipe\"\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </ListItemIcon>\n          <ListItemText>Ajout Propriétés</ListItemText>\n        </MenuItem>\n      </MenuList>\n    </Paper>\n  );\n\n};\n\nexport default ContextMenu;","import React, { useState } from 'react';\nimport { Rnd } from 'react-rnd';\nimport {\n  makeStyles\n} from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  draggableCard: {\n    position: 'absolute',\n    marginTop: '1em',\n    display: \"flex\",\n    left: '5em',\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    // border: \"solid 1px #ddd\",\n    backgroundColor: \"red\",\n    zIndex: 100\n  }\n}));\n\n\nconst style = {\n  // position: 'fixed',\n  // marginTop: '1em',\n  // display: \"flex\",\n  // left: '-5em',\n  // alignItems: \"center\",\n  // justifyContent: \"center\",\n  // border: \"solid 1px #ddd\",\n  // background: \"#f0f0f0\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  zIndex: 100\n};\n\nconst DraggableCard = ({\n  children,\n  disableDragging,\n  width,\n  height\n}) => {\n  const classes = useStyles();\n\n  const [state, setState] = useState({\n    width: width ? width : 400,\n    height: height ? height : 400,\n    x: 80,\n    y: 20\n  });\n\n  return (\n    <Rnd\n      style={style}\n      // className={classes.draggableCard}\n      size={{ width: state.width, height: state.height }}\n      position={{ x: state.x, y: state.y }}\n      onDragStop={(e, d) => {\n        setState({ x: d.x, y: d.y });\n      }}\n      onResizeStop={(e, direction, ref, delta, position) => {\n        setState({\n          width: ref.style.width,\n          height: ref.style.height,\n          ...position\n        });\n      }}\n      disableDragging={disableDragging}\n    >\n      {children}\n    </Rnd>\n  );\n};\n\nexport default DraggableCard;\n","export const geometryTypes = new Set([\n  \"IfcCartesianPoint\",\n  \"IfcArbitraryClosedProfileDef\",\n  \"IfcDirection\",\n  \"IfcAxis2Placement3D\",\n  \"IfcAxis2Placement2D\",\n  \"IfcLocalPlacement\",\n  \"IfcShapeRepresentation\",\n  \"IfcRectangleProfileDef\",\n  \"IfcPolyline\",\n  \"IfcPlane\",\n  \"IfcExtrudedAreaSolid\",\n  \"IfcSurfaceStyleRendering\",\n  \"IfcSurfaceStyle\",\n  \"IfcPresentationStyleAssignment\",\n  \"IfcStyledRepresentation\",\n  \"IfcCartesianTransformationOperator3D\",\n  \"IfcColourRgb\",\n  \"IfcCartesianTransformationOperator3DNonUniform\",\n  \"IfcStyledItem\",\n  \"IfcCurveBoundedPlane\",\n  \"IfcConnectionSurfaceGeometry\",\n  \"IfcProductDefinitionShape\",\n  \"IfcGeometricRepresentationContext\",\n  \"IfcGeometricRepresentationSubcontext\",\n  \"IfcPolyLoop\",\n  \"IfcFaceOuterBound\",\n  \"IfcFace\",\n  \"IfcCartesianTransformationOperator3DnonUniform\",\n  \"IfcFaceBound\",\n  \"IfcClosedShell\",\n  \"IfcFacetedBrep\",\n  \"IfcRepresentationMap\",\n  \"IfcMappedItem\",\n  \"IfcRelFillsElement\",\n  \"IfcArbitraryProfileDefWithVoids\",\n  \"IfcCompositeCurve\",\n  \"IfcCompositeCurveSegment\",\n  \"IfcCircle\",\n  \"IfcEllipse\",\n  \"IfcCircleHollowProfileDef\",\n  \"IfcRectangleHollowProfileDef\",\n  \"IfcLine\",\n  \"IfcIShapeProfileDef\",\n  \"IfcGeometricRepresentationContext\",\n  \"IfcGeometricRepresentationSubContext\",\n  \"IfcCurveStyle\",\n  \"IfcDraughtingPreDefinedCurveFont\",\n  \"IfcGeometricSet\",\n  \"IfcCircleProfileDef\",\n  \"IfcPolygonalBoundedHalfSpace\",\n  \"IfcFaceBasedSurfaceModel\",\n  \"IfcConnectedFaceSet\",\n  \"IfcTrimmedCurve\",\n  \"IfcOpenShell\",\n  \"IfcShellBasedSurfaceModel\",\n  \"IfcHalfSpaceSolid\",\n  \"IfcBooleanClippingResult\",\n  \"IfcGeometricCurveSet\",\n  \"IfcCurveStyleFont\",\n  \"IfcCurveStyleFontPattern\"\n]);","class TriBim {\n  constructor() {\n    // super(data);\n    // this.data = data;\n    this.hello = \"Hello TriBim\";\n  }\n\n  sayHello() {\n    console.log('Hello toi');\n  }\n}\n\nexport default TriBim;","import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport * as WebIFC from \"web-ifc\";\n// import * as WebIFCThree from 'web-ifc-three';\nimport { IfcViewerAPI } from \"web-ifc-viewer\";\nimport Dropzone from \"react-dropzone\";\nimport {\n  Router,\n  Switch,\n  Route,\n  useLocation\n} from 'react-router-dom';\nimport {\n  Backdrop,\n  makeStyles,\n  CircularProgress,\n  Fab,\n  Grid,\n  Paper,\n  LinearProgress,\n  Box,\n  Typography\n} from '@material-ui/core';\nimport Alert from '@mui/material/Alert';\nimport FolderOpenOutlinedIcon from '@material-ui/icons/FolderOpenOutlined';\nimport CropIcon from '@material-ui/icons/Crop';\nimport PhotoCameraIcon from '@material-ui/icons/PhotoCamera';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport StraightenIcon from '@material-ui/icons/Straighten';\nimport AppsIcon from '@material-ui/icons/Apps';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport MapIcon from '@mui/icons-material/Map';\nimport ControlCameraIcon from '@mui/icons-material/ControlCamera';\nimport ArrowCircleUpIcon from '@mui/icons-material/ArrowCircleUp';\nimport GrainIcon from '@material-ui/icons/Grain';\nimport StorageIcon from '@material-ui/icons/Storage';\nimport MutltiSelectionIcon from '@mui/icons-material/ControlPointDuplicate';\nimport FactCheckIcon from '@mui/icons-material/FactCheck';\nimport Models from './Components/Models/Models';\nimport BcfDialog from './Components/BcfDialog/BcfDialog';\nimport Marketplace from './Components/Marketplace/Marketplace';\nimport SpatialStructure from './Components/SpatialStructure/SpatialStructure';\nimport Properties from './Components/Properties/Properties';\nimport Camera from './Components/Camera/Camera';\nimport Validation from './Components/Validation';\nimport Cuts from './Components/Cuts';\nimport Drawings from './Components/Drawings/Drawings';\nimport Measures from './Components/Measures/Measures';\nimport ContextMenu from './Components/ContextMenu';\nimport DraggableCard from './Components/DraggableCard/DraggableCard';\nimport { OrbitControlsGizmo } from \"./Utils/OrbitControlsGizmo\";\nimport {\n  IFCPROJECT,\n  IFCSPACE,\n  IFCOPENINGELEMENT,\n  IFCWALLSTANDARDCASE,\n  IFCWALL,\n  IFCSTAIR,\n  IFCCOLUMN,\n  IFCSLAB,\n  IFCROOF,\n  IFCSTRUCTURALCURVEMEMBER,\n  IFCSTRUCTURALANALYSISMODEL,\n  IFCSTRUCTURALSURFACEMEMBER,\n  IFCFOOTING,\n  IFCFURNISHINGELEMENT,\n  IFCRELDEFINESBYPROPERTIES,\n  IFCPROPERTYSET,\n  IFCPROPERTYSINGLEVALUE,\n} from \"web-ifc\";\n// import { exportDXF, exportPDF } from './Utils/dxf';\nimport Drawing from \"dxf-writer\";\nimport { jsPDF } from \"jspdf\";\nimport {\n  BoxGeometry,\n  MeshLambertMaterial,\n  Mesh,\n  Color,\n  DoubleSide,\n  MathUtils,\n  EdgesGeometry,\n  LineBasicMaterial,\n  MeshBasicMaterial,\n  Vector2,\n} from \"three\";\nimport { TransformControls } from \"three/examples/jsm/controls/TransformControls\";\nimport { HorizontalBlurShader } from \"three/examples/jsm/shaders/HorizontalBlurShader.js\";\nimport { VerticalBlurShader } from \"three/examples/jsm/shaders/VerticalBlurShader.js\";\nimport BIMLibrePng from './Images/BIM_Libre_site_ADB_transparent.png'\nimport ANCTPng from './Images/ANCT_Logo-MC_transparent.png'\nimport AgriboisValeurPng from './Images/Logo_AgriboisValeur_transparent.png'\nimport { UseIfcRenderer } from \"./IfcRenderer.hooks\";\nimport ToolTipsElem from \"../../Components/ToolTipsElem/ToolTipsElem.js\";\nimport animationClippedVue from \"./Images/animation-vue-de-coupe.gif\";\nimport animationMeasureTool from \"./Images/animation-outil-de-mesure.gif\";\nimport { ClippingEdges } from 'web-ifc-viewer/dist/components/display/clipping-planes/clipping-edges';\nimport { geometryTypes } from \"./Utils/geometry-types\";\nimport flatten from 'tree-flatten';\nimport axios from \"axios\";\n\nimport TriBim from './Utils/TriBim';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100vw\",\n    height: \"100vh\",\n    spacing: 0,\n    justify: \"space-around\",\n    margin: 0,\n    padding: 0,\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n    \"& .MuiContainer-maxWidthLg\": {\n      maxWidth: \"100%\",\n    },\n  },\n  infoLeftPannel: {\n    // marginTop: '1em',\n    left: \"1em\",\n    position: \"absolute\",\n    zIndex: 100,\n  },\n  infoRightPannel: {\n    // marginTop: '1em',\n    right: \"1em\",\n    position: \"absolute\",\n    zIndex: 100,\n  },\n  fab: {\n    margin: \"0.5em\",\n    backgroundColor: \"white\",\n  },\n}));\n\nconst {\n  REACT_APP_COMPANY,\n  REACT_APP_THIRD_PARTY_API,\n  REACT_APP_IDS_API_URL\n} = process.env;\n\nconst IfcRenderer = () => {\n  const classes = useStyles();\n  const dropzoneRef = useRef(null);\n  const [viewer, setViewer] = useState(null);\n  const [ifcModels, setIfcModels] = useState([]);\n  const [modelID, setModelID] = useState(-1);\n  const [transformControls, setTransformControls] = useState(null);\n  const [spatialStructures, setSpatialStructures] = useState([]);\n  const [element, setElement] = useState(null);\n  const [showBcfDialog, setShowBcfDialog] = useState(false);\n  const [showModels, setShowModels] = useState(false);\n  const [showMeasure, setShowMeasure] = useState(true);\n  const [showMarketplace, setShowMarketplace] = useState(false);\n  const [showSpatialStructure, setShowSpatialStructure] = useState(false);\n  const [showProperties, setShowProperties] = useState(false);\n  const [showContextMenu, setShowContextMenu] = useState(false);\n  const [showCamera, setShowCamera] = useState(false);\n  const [showCuts, setShowCuts] = useState(false);\n  const [showDrawings, setShowDrawings] = useState(false);\n  const [showMeasures, setShowMeasures] = useState(false);\n  const [showValidation, setShowValidation] = useState(false);\n  const [selectedElementID, setSelectedElementID] = useState(null);\n  const [specificApplication, setSpecificApplication] = useState(false);\n  const [percentageLoading, setPercentageLoading] = useState(0);\n  const [apiWebIfc, setApiWebIfc] = useState();\n  const [selectedElementId, setSelectedElementId] = useState(null);\n  const [eids, setEids] = useState([]);\n  const [subsets, setSubsets] = useState([]);\n  const [apiConnectors, setApiConnectors] = useState({\n    AxeoBim: false\n  });\n\n  const [state, setState] = useState({\n    loading: false,\n    loadingMessage: 'Chargement...',\n    alertStatus: true,\n    alertMessage: 'Connecté',\n    bcfDialogOpen: false,\n    loaded: false,\n    loadingIfc: false,\n    openLeftView: false,\n    leftView: \"spatialStructure\",\n    viewer: '',\n    api: {},\n    models: {\n      value: 0,\n      list: [],\n      data: []\n    },\n    spatialStructures: {\n      value: {},\n      list: []\n    },\n    subsets: {\n      value: {},\n      list: []\n    },\n    search: {\n      value: '',\n      list: [],\n      data: []\n    },\n    jsonData: {\n      value: {},\n      list: []\n    }\n  });\n\n  const {\n    initIndexDB,\n    meshMaterials,\n    getModels,\n    addTransformControls,\n    getElementProperties,\n    addElementsNewProperties,\n    addGeometryToIfc,\n    editIfcModel,\n    handleCheckNetworkStatus,\n    handleGetJsonData,\n    handleModelValidation,\n    handleInitSubset\n  } = UseIfcRenderer({\n    eids,\n    setEids,\n    state,\n    setState\n  });\n\n  useEffect(() => {\n    async function init() {\n      const container = document.getElementById(\"viewer-container\");\n\n      const newViewer = new IfcViewerAPI({\n        container,\n        backgroundColor: new Color(0xffffff),\n      });\n\n      setState({\n        ...state,\n        loading: true,\n        viewer: newViewer\n      })\n      // newViewer.addAxes();\n      // newViewer.addGrid();\n      const ifcApi = new WebIFC.IfcAPI();\n      setApiWebIfc(ifcApi);\n\n      newViewer.IFC.setWasmPath(\"../../files/\");\n      newViewer.IFC.applyWebIfcConfig({\n        COORDINATE_TO_ORIGIN: true,\n        USE_FAST_BOOLS: false\n      });\n      newViewer.IFC.loader.ifcManager.useWebWorkers(\n        true,\n        \"../../files/IFCWorker.js\"\n      );\n\n      const db = await initIndexDB();\n      const allModels = await getModels(db);\n      console.log('allModels', allModels)\n\n      // const model = await newViewer.IFC.loadIfcUrl(allModels[0].file, false);\n\n\n      // const model = await newViewer.IFC.loadIfcUrl('../../files/Duplex.ifc');\n      // const newIfcModels = [...ifcModels, model];\n      // setIfcModels(newIfcModels);\n\n      // const models = newViewer.context.items.ifcModels;\n      // const pickableModels = newViewer.context.items.pickableIfcModels;\n\n      // const ifcModel = models[0];\n      // const scene = ifcModel.parent;\n      // const ids = Array.from(\n      //   new Set(ifcModel.geometry.attributes.expressID.array)\n      // )\n\n      // let subset = newViewer.IFC.loader.ifcManager.createSubset({\n      //   modelID: ifcModel.modelID,\n      //   ids: ids,\n      //   scene,\n      //   applyBH: true,\n      //   removePrevious: true,\n      //   customID: 'ALL MODEL'\n      // });\n\n      // let index = pickableModels.indexOf(ifcModel);\n      // if (index >= 0) pickableModels.splice(index);\n      // index = models.indexOf(ifcModel);\n      // if (index >= 0) models.splice(index)\n\n      // scene.remove(model);\n      // models.push(subset);\n\n      // console.log('model', model);\n\n      // // pickableModels.push(subset);\n      // model.position.set(10, 10, 10)\n      // subset.position.set(10, 10, 10)\n\n      //const newJsonData = await handleGetJsonData(newViewer, false);\n      // const newSpatialStructure = await newViewer.IFC.getSpatialStructure(\n      //   0,\n      //   false\n      // );\n      // const updateSpatialStructures = [\n      //   ...spatialStructures,\n      //   newSpatialStructure,\n      // ];\n\n      // setSpatialStructures(updateSpatialStructures);\n\n      // const data = await handleGetJsonData(newViewer, flatten(updateSpatialStructures[0], 'children'));\n      // console.log('data', data)\n      setState({\n        ...state,\n        loading: false,\n        // models: {\n        //   ...state.models,\n        //   data: [...data]\n        // },\n        // spatialStructures: {\n        //   value: { ...newSpatialStructure },\n        //   list: [...updateSpatialStructures]\n        // },\n      });\n\n      // newViewer.shadowDropper.darkness = 1.5;\n      // newViewer.clipper.active = true;\n      setViewer(newViewer);\n\n      await handleInitAxeoBim({\n        viewer: newViewer\n      });\n\n      await handleInitTracim({ viewer: newViewer });\n\n      handleCheckNetworkStatus();\n    }\n    init();\n  }, []);\n\n  const onDrop = async ({ files, viewer }) => {\n    if (files && viewer) {\n      setState({\n        ...state,\n        loading: true\n      });\n      // setViewer(null);\n      console.log('MODEL', files[0]);\n\n      viewer.IFC.loader.ifcManager.setOnProgress((event) => {\n        const percentage = Math.floor((event.loaded * 100) / event.total);\n        console.log(\"percentage\", percentage);\n        setPercentageLoading(percentage);\n        setState({\n          ...state,\n          loading: true,\n          loadingMessage: `Chargement de la géométrie: ${percentage} %`\n        });\n      });\n\n      viewer.IFC.loader.ifcManager.parser.setupOptionalCategories({\n        [IFCSPACE]: true,\n        [IFCOPENINGELEMENT]: false,\n        [IFCSTRUCTURALANALYSISMODEL]: true,\n        [IFCSTRUCTURALSURFACEMEMBER]: true,\n        [IFCSTRUCTURALCURVEMEMBER]: true,\n      });\n\n      let model;\n      try {\n        model = await viewer.IFC.loadIfc(files[0], true, ifcOnLoadError);\n        // console.log('data', properties)\n      } catch (error) {\n        console.log('error:', error)\n        return\n      }\n\n\n      // model.material.forEach((mat) => (mat.side = 2));\n      // console.log(\"modelID\", model.modelID);\n      setModelID(model.modelID);\n\n      // await createFill({ modelID: model.modelID, viewer });\n      // const lineMaterial = new LineBasicMaterial({ color: 0x555555 });\n      // const baseMaterial = new MeshBasicMaterial({ color: 0xffffff, side: 2 });\n      // viewer.edges.create(\n      //   `${model.modelID}`,\n      //   model.modelID,\n      //   lineMaterial,\n      //   baseMaterial\n      // );\n\n      const newIfcModels = [...ifcModels, model];\n      setIfcModels(newIfcModels);\n\n      await handleInitSubset(viewer, 0);\n      // const properties = await viewer.IFC.properties.serializeAllProperties(model);\n      // console.log('properties', properties)\n      const properties = await viewer.IFC.properties.serializeAllProperties(model, undefined, (current, total) => {\n        const progress = current / total;\n        const formatted = Math.trunc(progress * 100);\n        console.log(formatted + '%');\n        setPercentageLoading(formatted);\n        setState({\n          ...state,\n          loading: true,\n          loadingMessage: `Chargement des données: ${formatted} %`\n        });\n      });\n      const file = new File(properties, 'properties');\n      const data = JSON.parse(await file.text());\n      console.log('data', data);\n      // model.position.set(10, 10, 10)\n      // await viewer.shadowDropper.renderShadow(model.modelID);\n\n      setState({\n        ...state,\n        loading: true,\n        loadingMessage: `Chargement: génération de l'arborescence du projet`\n      });\n      const newSpatialStructure = await viewer.IFC.getSpatialStructure(\n        model.modelID,\n        true\n      );\n\n      setState({\n        ...state,\n        loading: true,\n        loadingMessage: `Chargement: fin de la génération de l'arborescence du projet`\n      });\n\n      console.log(\"newSpatialStructure\", newSpatialStructure);\n      const updateSpatialStructures = [\n        ...spatialStructures,\n        newSpatialStructure,\n      ];\n      setSpatialStructures(updateSpatialStructures);\n      console.log(\"updateSpatialStructure\", updateSpatialStructures);\n\n      // const data = await handleGetJsonData(viewer, flatten(updateSpatialStructures[0], 'children'));\n      const tribim = new TriBim();\n\n      setState({\n        ...state,\n        loading: false,\n        api: tribim,\n        viewer: viewer,\n        models: {\n          ...state.models,\n          list: [...state.models.list, model],\n          data: [...state.models.data, data]\n        },\n        spatialStructures: {\n          value: { ...newSpatialStructure },\n          list: [...updateSpatialStructures]\n        }\n      });\n    }\n  };\n\n  let fills = [];\n  async function createFill({ modelID, viewer }) {\n    const wallsStandard = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCWALLSTANDARDCASE,\n      false\n    );\n    const walls = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCWALL,\n      false\n    );\n    const stairs = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCSTAIR,\n      false\n    );\n    const columns = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCCOLUMN,\n      false\n    );\n    const roofs = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCROOF,\n      false\n    );\n    const slabs = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCSLAB,\n      false\n    );\n    const ids = [\n      ...walls,\n      ...wallsStandard,\n      ...columns,\n      ...stairs,\n      ...slabs,\n      ...roofs,\n    ];\n    const material = new MeshBasicMaterial({ color: 0x555555 });\n    material.polygonOffset = true;\n    material.polygonOffsetFactor = 10;\n    material.polygonOffsetUnits = 1;\n    fills.push(viewer.filler.create(`${modelID}`, modelID, ids, material));\n  }\n\n  const handleInitAxeoBim = async ({ viewer }) => {\n    // Accès à AxeoBIM\n    const query = new URLSearchParams(window.location.search);\n    // const decodeQuery = decodeURI(query);\n    const code = query.get('code');\n    const state = query.get('state');\n\n    if (code && state) {\n      setState({\n        state,\n        loading: true\n      });\n      const accessToken = sessionStorage.getItem(\"axeobim_access_token\");\n      const refreshToken = sessionStorage.getItem(\"axeobim_refresh_token\");\n      const {\n        idDocument,\n        idEnvironnement,\n        access_token,\n        refresh_token,\n        // lock_token,\n        file\n      } = await handleGetAxeoBimModel({ code, state, accessToken, refreshToken });\n      sessionStorage.setItem(\"axeobim_access_token\", access_token);\n      sessionStorage.setItem(\"axeobim_refresh_token\", refresh_token);\n      // sessionStorage.setItem(\"axeobim_lock_token\", lock_token);\n      sessionStorage.setItem(\"axeobim_id_document\", idDocument);\n      sessionStorage.setItem(\"axeobim_id_environnement\", idEnvironnement);\n      const ifcBlob = new Blob([file], { type: 'text/plain' });\n      console.log('ifcBlob', ifcBlob)\n      const model = new File([ifcBlob], 'ifcFile');\n      console.log('model', model)\n      onDrop({ files: [model], viewer });\n      setState({\n        ...state,\n        loading: false\n      });\n      setApiConnectors({\n        ...apiConnectors,\n        AxeoBim: true\n      });\n    }\n  }\n\n  const handleInitTracim = async ({ viewer }) => {\n    // Accès à Tracim\n    const query = new URLSearchParams(window.location.search);\n\n    const content_id = query.get('content_id');\n    const space_id = query.get('space_id');\n    const user_id = query.get('user_id');\n\n    console.log('handleInitTracim Content ID:', content_id);\n    console.log('handleInitTracim Space ID:', space_id);\n    console.log('handleInitTracim User ID:', user_id);\n\n    if (content_id && space_id && user_id) {\n      setState({\n        state,\n        loading: true\n      });\n\n      try {\n        const resGetModel = await axios({\n          method: \"post\",\n          url: `${REACT_APP_THIRD_PARTY_API}/tracim/getModel`,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          data: {\n            space_id,\n            content_id,\n            user_id\n          }\n        })\n\n        console.log('Response :', resGetModel.data);\n        const file = resGetModel.data;\n        const ifcBlob = new Blob([file], { type: 'text/plain' });\n        console.log('ifcBlob', ifcBlob)\n        const model = new File([ifcBlob], 'ifcFile');\n        console.log('model', model)\n        onDrop({ files: [model], viewer });\n        setState({\n          ...state,\n          loading: false\n        });\n\n      } catch (error) {\n        console.error('err', error);\n        setState({\n          ...state,\n          loading: false,\n          alertStatus: false,\n          alertMessage: \"model loading failed\"\n        })\n      }\n    }\n  }\n\n  const handleGetAxeoBimModel = async ({ code, state, accessToken, refreshToken }) => {\n    try {\n      console.log('code', code)\n      const resGetModel = await axios({\n        method: \"post\",\n        url: `${REACT_APP_THIRD_PARTY_API}/axeobim/getModel`,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          code,\n          state,\n          accessToken,\n          refreshToken\n        }\n      })\n\n      const lockToken = sessionStorage.getItem(\"axeobim_lock_token\");\n      if (resGetModel.data && !lockToken) {\n        const {\n          idDocument,\n          idEnvironnement,\n          access_token,\n          refresh_token,\n        } = resGetModel.data;\n        console.log('LOCK')\n        const resLockModel = await axios({\n          method: \"post\",\n          url: `${REACT_APP_THIRD_PARTY_API}/axeobim/lockModel`,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          data: {\n            idDocument,\n            idEnvironnement,\n            accessToken: access_token,\n            refreshToken: refresh_token\n          }\n        });\n        sessionStorage.setItem(\"axeobim_lock_token\", resLockModel.data.lock_token);\n      }\n\n      setState({\n        ...state,\n        alertStatus: true,\n        alertMessage: 'Connecté'\n      })\n\n      return resGetModel.data;\n      // const rawResponse = await fetch(files[0].link);\n      // sessionStorage.setItem(\"axeobim_access_token\", res.data.@);\n      // sessionStorage.setItem(\"axeobim_refresh_token\", res.data.refresh_token);\n      // sessionStorage.setItem(\"axeobim_token_type\", res.data.token_type);\n    } catch (err) {\n      console.log('err', err);\n      setState({\n        ...state,\n        loading: false,\n        alertStatus: false,\n        alertMessage: err.response.data.error\n      })\n    }\n  }\n\n  const handleUpdateAxeoBimModel = async () => {\n    try {\n      const accessToken = sessionStorage.getItem(\"axeobim_access_token\");\n      const refreshToken = sessionStorage.getItem(\"axeobim_refresh_token\");\n      const lockToken = sessionStorage.getItem(\"axeobim_lock_token\");\n      const idDocument = sessionStorage.getItem(\"axeobim_id_document\");\n      const idEnvironnement = sessionStorage.getItem(\"axeobim_id_environnement\");\n      const res = await axios({\n        method: \"put\",\n        url: `${REACT_APP_THIRD_PARTY_API}/axeobim/updateModel`,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          idDocument,\n          idEnvironnement,\n          accessToken,\n          refreshToken,\n          lockToken\n        }\n      })\n      console.log('res.data', res.data);\n    } catch (err) {\n      console.log('err', err)\n    }\n  }\n\n\n  const ifcOnLoadError = async (err) => {\n    alert(err.toString());\n  };\n\n  const select = (viewer, setModelID, modelID, expressID, pick = true) => {\n    if (pick) viewer.IFC.pickIfcItemsByID(modelID, expressID);\n    setModelID(modelID);\n  };\n\n  const handleClick = async (e) => {\n    if (showContextMenu) {\n      setShowContextMenu(false);\n    }\n\n    const found = await viewer.IFC.pickIfcItem(false, 1);\n\n    if (found == null || found == undefined) {\n      await viewer.IFC.unpickIfcItems();\n      if (eids.length > 0) {\n        setEids([]);\n      }\n\n      return;\n    }\n\n    setModelID(found.modelID);\n\n    if (e.shiftKey) {\n      const newEids = [...eids, found.id];\n      setEids(newEids);\n      select(viewer, setModelID, found.modelID, newEids, false);\n      await viewer.IFC.pickIfcItemsByID(0, newEids);\n    } else {\n      setEids([found.id]);\n      select(viewer, setModelID, found.modelID, [found.id], false);\n    }\n\n    setSelectedElementID(found.id);\n  };\n  const handleClickOpen = () => {\n    dropzoneRef.current.open();\n  };\n\n  const handleShowCuts = () => {\n    setShowCuts(!showCuts);\n  };\n\n  const handleShowDrawings = () => {\n    setShowDrawings(!showDrawings);\n  };\n\n  const handleShowMeasures = () => {\n    setShowMeasures(!showMeasures);\n  };\n\n  const handleShowModels = () => {\n    setShowModels(!showModels);\n  };\n\n  const handleCapture = () => {\n    const link = document.createElement(\"a\");\n    link.href = viewer.context.renderer.newScreenshot(\n      false,\n      undefined,\n      new Vector2(4000, 4000)\n    );\n    const date = new Date();\n    link.download = `capture-${date}.jpeg`;\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  };\n\n  const handleMeasure = () => {\n    setShowMeasure(!showMeasure);\n    let dimensionsActive = false;\n    console.log(\"showMeasure\", showMeasure);\n    if (showMeasure) {\n      dimensionsActive = true;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.IFC.unPrepickIfcItems();\n      window.onmousemove = dimensionsActive ? null : viewer.IFC.prePickIfcItem;\n\n      window.onmousedown = () => {\n        viewer.dimensions.create();\n      };\n    } else {\n      dimensionsActive = false;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.IFC.unpickIfcItems();\n    }\n\n    window.onkeydown = (event) => {\n      if (event.code === \"Escape\") {\n        viewer.dimensions.cancelDrawing();\n      }\n      if (\n        event.code === \"Delete\" ||\n        event.code === \"Backspace\" ||\n        event.code === \"keyD\"\n      ) {\n        setShowMeasure(false);\n        viewer.dimensions.deleteAll();\n      }\n    };\n  };\n\n  const handleShowMarketplace = (specificApp) => {\n    setSpecificApplication(specificApp);\n    setShowMarketplace(!showMarketplace);\n  };\n\n  const handleShowSpatialStructure = () => {\n    setShowSpatialStructure(!showSpatialStructure);\n  };\n\n  const handleShowProperties = (selectedElemID) => {\n    console.log(\"selectedElemID\", selectedElemID);\n    if (selectedElemID) {\n      setSelectedElementID(selectedElemID);\n    }\n    setShowProperties(true);\n  };\n\n  const handleDownloadIfc = async () => {\n    setState({\n      ...state,\n      loading: true,\n      loadingMessage: \"Génération de l'IFC...\"\n    });\n\n    const modelId = modelID ? modelID : 0;\n    // EXPORT FICHIER IFC\n    const ifcData = await viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n    console.log('ifcData', ifcData);\n    let ifcDataString = new TextDecoder().decode(ifcData);\n    // console.log('IFC STRING', ifcDataString);\n    let newIfcDataString = ifcDataString.replace(\n      \"FILE_NAME('no name', '', (''), (''), 'web-ifc-export');\",\n      \"FILE_NAME('0001','2011-09-07T12:40:02',(''),(''),'Autodesk Revit MEP 2011 - 1.0','20100326_1700 (Solibri IFC Optimizer)','');\"\n    );\n    console.log('newIfcDataString', newIfcDataString);\n    // console.log('IFC STRING', newIfcDataString);\n    var element = document.createElement(\"a\");\n    element.setAttribute(\n      \"href\",\n      \"data:text/plain;charset=utf-8,\" + encodeURIComponent(newIfcDataString)\n    );\n    element.setAttribute(\"download\", \"export.ifc\");\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n    setState({\n      ...state,\n      loading: false\n    });\n  };\n\n  const handleShowBcfDialog = () => {\n    setShowBcfDialog(!showBcfDialog);\n    // setState({\n    //   ...state,\n    //   bcfDialogOpen: true\n    // });\n  };\n\n  const handleCloseBcfDialog = () => {\n    setShowBcfDialog(false);\n    // setState({\n    //   ...state,\n    //   bcfDialogOpen: false\n    // });\n  };\n\n  const handleShowCamera = () => {\n    setShowCamera(!showCamera);\n  };\n\n  const handleShowValidation = () => {\n    setShowValidation(!showValidation);\n  };\n\n  const handleOpenViewpoint = (viewpoint) => {\n    viewer.currentViewpoint = viewpoint;\n  };\n\n  const handleRefreshPage = () => {\n    window.location.reload();\n  };\n\n  return (\n    <>\n      <Grid container>\n        <Grid item xs={2} className={classes.infoLeftPannel}>\n          {showMeasures && (\n            <DraggableCard>\n              <Measures\n                viewer={viewer}\n                showMeasures={showMeasures}\n                setShowMeasures={setShowMeasures}\n              />\n            </DraggableCard>\n          )}\n          {showModels && (\n            <DraggableCard>\n              <Models />\n            </DraggableCard>\n          )}\n          {showBcfDialog && (\n            <DraggableCard>\n              <BcfDialog\n                open={showBcfDialog}\n                onClose={handleCloseBcfDialog}\n                onOpenViewpoint={handleOpenViewpoint}\n              />\n            </DraggableCard>\n          )}\n          {showSpatialStructure && (\n            <DraggableCard width={700} height={600}>\n              <SpatialStructure\n                state={state}\n                setState={setState}\n                viewer={viewer}\n                handleShowSpatialStructure={handleShowSpatialStructure}\n                handleShowMarketplace={handleShowMarketplace}\n                handleShowProperties={handleShowProperties}\n                handleGetJsonData={handleGetJsonData}\n                eids={eids}\n                setEids={setEids}\n              />\n            </DraggableCard>\n          )}\n          {selectedElementID && showProperties && (\n            <DraggableCard>\n              <Properties\n                bimData={state}\n                setBimData={setState}\n                viewer={viewer}\n                element={element}\n                setShowProperties={setShowProperties}\n                selectedElementID={selectedElementID}\n                setSelectedElementID={setSelectedElementID}\n                handleShowMarketplace={handleShowMarketplace}\n                addElementsNewProperties={addElementsNewProperties}\n              />\n            </DraggableCard>\n          )}\n          {showMarketplace && (\n            <DraggableCard disableDragging={true} width={600} height={600}>\n              <Marketplace\n                bimData={state}\n                setBimData={setState}\n                viewer={viewer}\n                modelID={modelID}\n                handleShowMarketplace={handleShowMarketplace}\n                specificApplication={specificApplication}\n                setSpecificApplication={setSpecificApplication}\n                onDrop={onDrop}\n                eids={eids}\n                setEids={setEids}\n                addElementsNewProperties={addElementsNewProperties}\n                apiConnectors={apiConnectors}\n                setApiConnectors={setApiConnectors}\n              />\n            </DraggableCard>\n          )}\n          {showCamera && (\n            <DraggableCard>\n              <Camera\n                viewer={viewer}\n                showCamera={showCamera}\n                setShowCamera={setShowCamera}\n              />\n            </DraggableCard>\n          )}\n          {showCuts && (\n            <DraggableCard>\n              <Cuts\n                viewer={viewer}\n                showCuts={showCuts}\n                setShowCuts={setShowCuts}\n              />\n            </DraggableCard>\n          )}\n          {showDrawings && (\n            <DraggableCard>\n              <Drawings\n                viewer={viewer}\n                showDrawings={showDrawings}\n                setShowDrawings={setShowDrawings}\n              />\n            </DraggableCard>\n          )}\n          {showValidation && (\n            <DraggableCard >\n              <Validation\n                bimData={state}\n                setBimData={setState}\n                showValidation={showValidation}\n                setShowValidation={setShowValidation}\n              />\n            </DraggableCard>\n          )}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Importer IFC\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleClickOpen}\n            >\n              <FolderOpenOutlinedIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Arborescence du projet\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowSpatialStructure}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <AccountTreeIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title={\n                <p>\n                  Propriétés:\n                  <br />\n                  cliquez sur un objet de votre maquette, puis sur cet icône\n                  pour accéder à ses propriétés\n                </p>\n              }\n              placement=\"right\"\n              className={classes.fab}\n              onClick={() => handleShowProperties()}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <DescriptionIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Place de marché\"\n              placement=\"right\"\n              disabled={!state.alertStatus}\n              className={classes.fab}\n              onClick={() => handleShowMarketplace(\"home\")}\n            >\n              {/* <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowMarketplace}\n            > */}\n              <AppsIcon />\n              {/* </Fab> */}\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Système de validation de l'IFC\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowValidation}\n            >\n              <FactCheckIcon />\n            </ToolTipsElem>\n          </Grid>*/}\n          {/* <Grid item xs={12}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowModels}\n            >\n              <StorageIcon />\n            </Fab >\n          </Grid >\n          <Grid item xs={12}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowBcfDialog}\n            >\n              BCF\n            </Fab>\n          </Grid> */}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              // title={\n              //   <div>\n              //     <p>\n              //       Outil de coupe :\n              //       <br />\n              //       1. Cliquez sur cet icône\n              //       <br />\n              //       2. Double-cliquez sur une surface, puis faites glisser les\n              //       flèches\n              //     </p>\n              //     <img src={animationClippedVue} alt=\"animation\" />\n              //   </div>\n              // }\n              title=\"Coupes\"\n              placement=\"right\"\n              className={classes.fab}\n              // onClick={() => {\n              //   addGeometryToIfc({\n              //     viewer,\n              //     modelId: 0\n              //   })\n              // }}\n              onClick={handleShowCuts}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <CropIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Plans\"\n              // title={\n              //   <div>\n              //     <p>\n              //       Outil de coupe :\n              //       <br />\n              //       1. Cliquez sur cet icône\n              //       <br />\n              //       2. Double-cliquez sur une surface, puis faites glisser les\n              //       flèches\n              //     </p>\n              //     <img src={animationClippedVue} alt=\"animation\" />\n              //   </div>\n              // }\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowDrawings}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <MapIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Camera\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowCamera}\n            >\n              <ControlCameraIcon />\n            </ToolTipsElem>\n          </Grid> */}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Outils de mesure\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowMeasures}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <StraightenIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Capture d'écran\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleCapture}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <PhotoCameraIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Système de validation de l'IFC\"\n              placement=\"right\"\n              className={classes.fab}\n              disabled={!state.alertStatus}\n              onClick={handleShowValidation}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <FactCheckIcon />\n            </ToolTipsElem>\n          </Grid> */}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Reinitialise la page\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleRefreshPage}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <RefreshIcon />\n            </ToolTipsElem>\n          </Grid>\n\n\n        </Grid>\n        <Grid item xs={2} className={classes.infoRightPannel}>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Exporter IFC\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={handleDownloadIfc}\n            >\n              <GetAppIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Exporter IFC\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={handleUpdateAxeoBimModel}\n            >\n              <ArrowCircleUpIcon />\n            </ToolTipsElem>\n          </Grid> */}\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Modifications\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={handleModelValidation}\n            >\n              <StorageIcon />\n            </ToolTipsElem>\n          </Grid>  */}\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Exporter IFC\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={() => editIfcModel({\n                viewer,\n                modelId: 0,\n                expressIDs: [5498],\n                properties: [\n                  {\n                    property_name: 'Existing property',\n                    text_value: 'True',\n                    property_definition: 'deeeee',\n                    // unit: 'm',\n                    ifc_class: 'Pset_WallCommon',\n                    ifc_property_name: 'LoadBearing',\n                    ifc_factor_multiplicator: '',\n                    ifc_type: ''\n                  },\n                  {\n                    property_name: 'Existing Normalized Pset',\n                    text_value: 'value',\n                    property_definition: 'deeeee',\n                    // unit: 'm',\n                    ifc_class: 'Pset_WallCommon',\n                  },\n                  {\n                    property_name: 'New Normalized Pset',\n                    text_value: 'value',\n                    property_definition: 'deeeee',\n                    // unit: 'm',\n                    ifc_class: 'Pset_Stair'\n                  },\n                  {\n                    property_name: 'New property',\n                    text_value: 'value',\n                    property_definition: 'deeeee1',\n                    // unit: 'm',\n                    ifc_class: ''\n                  }\n                ]\n              })}\n            >\n              <ArrowCircleUpIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowStructuralAnalysis}\n            >\n              <GrainIcon />\n            </Fab >\n          </Grid > */}\n        </Grid>\n        <Grid item xs={10}>\n          <div\n            id=\"viewer-container\"\n            style={{\n              position: \"absolute\",\n              height: \"100%\",\n              width: \"100%\",\n              left: \"0\",\n              top: \"0\",\n            }}\n            onClick={handleClick}\n          />\n          <Dropzone ref={dropzoneRef} onDrop={files => onDrop({ files, viewer })}>\n            {({ getRootProps, getInputProps }) => (\n              <div {...getRootProps({ className: \"dropzone\" })}>\n                <input {...getInputProps()} accept=\".ifc\" />\n              </div>\n            )}\n          </Dropzone>\n        </Grid>\n      </Grid>\n      {state.alertStatus ?\n        <Alert severity=\"success\" sx={{ position: 'fixed', bottom: 0, left: 0, right: 0, width: '100%' }}\n          action={\n            <Grid container spacing={1}>\n              <Grid item xs={4} style={{ textAlign: 'right' }}>\n                <img src={ANCTPng} style={{ height: '2em', width: 'auto' }} />\n              </Grid>\n              <Grid item xs={4} style={{ textAlign: 'right' }}>\n                <img src={AgriboisValeurPng} style={{ height: '2em', width: 'auto' }} />\n              </Grid>\n              <Grid item xs={4} style={{ textAlign: 'right' }}>\n                <img src={BIMLibrePng} style={{ height: '2em', width: 'auto' }} />\n              </Grid>\n            </Grid>\n          }\n        >\n          {`${state.alertMessage}`}\n        </Alert >\n        :\n        <Alert severity=\"error\" sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }}>\n          {`${state.alertMessage}`}\n        </Alert>\n      }\n      <ContextMenu\n        viewer={viewer}\n        showContextMenu={showContextMenu}\n        meshMaterials={meshMaterials}\n        setShowContextMenu={setShowContextMenu}\n        setShowProperties={setShowProperties}\n        setShowSpatialStructure={setShowSpatialStructure}\n        handleShowMarketplace={handleShowMarketplace}\n        eids={eids}\n        setEids={setEids}\n        subsets={subsets}\n        setSubsets={setSubsets}\n      />\n      <Backdrop\n        style={{\n          zIndex: 200,\n          display: \"flex\",\n          alignItems: \"center\",\n          alignContent: \"center\",\n        }}\n        open={state.loading}\n      >\n        <Grid container spacing={2}>\n          <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n            <CircularProgress color=\"inherit\" style={{ color: 'white' }} />\n          </Grid>\n          <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n            <Typography gutterBottom variant=\"subtitle1\" component=\"div\" style={{ color: 'white' }}>\n              {`${state.loadingMessage}`}\n            </Typography>\n          </Grid>\n        </Grid>\n        {/* <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n        <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n          <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\n            {`${validation.message}`}\n          </Typography>\n        </Grid>\n        <CircularProgress color=\"inherit\" />\n        {`${percentageLoading} %`} */}\n      </Backdrop>\n    </>\n  );\n};\n\nexport default IfcRenderer;\n","import { useEffect, useState } from 'react';\nimport * as WebIFC from 'web-ifc';\nimport { IfcAPI } from \"web-ifc/web-ifc-api\";\nimport {\n  IFCBUILDINGSTOREY,\n  IFCPROJECT,\n  IFCSPACE,\n  IFCOPENINGELEMENT,\n  IFCWALLSTANDARDCASE,\n  IFCWALL,\n  IFCSTAIR,\n  IFCCOLUMN,\n  IFCSLAB,\n  IFCROOF,\n  IFCFOOTING,\n  IFCFURNISHINGELEMENT,\n  IFCOWNERHISTORY,\n  IFCRELDEFINESBYPROPERTIES,\n  IFCPROPERTYSET,\n  IFCPROPERTYSINGLEVALUE\n} from 'web-ifc';\nimport Dexie from \"dexie\";\nimport axios from \"axios\";\nimport {\n  BoxGeometry,\n  MeshLambertMaterial,\n  Mesh,\n  Color,\n  DoubleSide,\n  MathUtils,\n  EdgesGeometry,\n  LineBasicMaterial,\n  MeshBasicMaterial\n} from 'three';\nimport { TransformControls } from \"three/examples/jsm/controls/TransformControls\";\nimport { BuildModel } from './Utils/addColumns';\nimport { geometryTypes } from \"./Utils/geometry-types\";\n\nfunction UseIfcRenderer({\n  eids,\n  setEids,\n  state,\n  setState\n}) {\n  const [models, setModels] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const initIndexDB = async () => {\n    //set the database \n    const db = new Dexie(\"tribimDB\");\n    //create the database store\n    db.version(1).stores({\n      models: \"title, content, file\"\n    })\n    db.open().catch((err) => {\n      console.log(err.stack || err)\n    });\n\n    return db;\n  }\n\n\n  const meshMaterials = {\n    invisibleMaterial: new MeshLambertMaterial({\n      transparent: true,\n      opacity: 0,\n      color: 0x77aaff,\n      depthTest: false,\n      side: DoubleSide,\n    })\n  };\n\n  const getModels = async (db) => {\n    let allModels = await db.models.toArray();\n    console.log('allModels', allModels)\n    setModels(allModels);\n    return allModels;\n  }\n\n  const addTransformControls = (viewer) => {\n    const scene = viewer.IFC.context.scene.scene;\n    const renderer = viewer.IFC.context.renderer.renderer;\n    const camera = viewer.IFC.context.ifcCamera.activeCamera;\n    const orbitControls = viewer.IFC.context.ifcCamera.controls;\n    const item = new Mesh(\n      new BoxGeometry(1, 1, 1),\n      new MeshLambertMaterial({\n        color: 'red',\n        side: DoubleSide\n      })\n    );\n    scene.add(item);\n\n    const transformControls = new TransformControls(camera, renderer.domElement);\n    transformControls.addEventListener('change', function () {\n      renderer.render(scene, camera);\n    });\n    transformControls.addEventListener('dragging-changed', function (event) {\n      orbitControls.enabled = !event.value;\n    });\n\n    scene.add(transformControls);\n    transformControls.attach(item);\n\n    // if (event.code === \"KeyL\") {\n    //   transformControls.attach(item);\n    // }\n    // if (event.code === \"KeyP\") {\n    //   transformControls.detach(item);\n    // }\n    // if (event.code === 'KeyQ') {\n    //   transformControls.setSpace(transformControls.space === 'local' ? 'world' : 'local');\n    // }\n    // if (event.code === 'KeyShift') {\n    //   transformControls.setTranslationSnap(100);\n    //   transformControls.setRotationSnap(MathUtils.degToRad(15));\n    //   transformControls.setScaleSnap(0.25);\n    // }\n    // if (event.code === 'KeyT') {\n    //   transformControls.setMode('translate');\n    // }\n    // // if (event.code === 'KeyR') {\n    // //   transformControls.setMode('rotate');\n    // // }\n    // if (event.code === 'KeyS') {\n    //   transformControls.setMode('scale');\n    // }\n    // if (event.code === 'KeySpacebar') {\n    //   transformControls.enabled = !transformControls.enabled;\n    // }\n  }\n\n  const select = (viewer, setModelID, modelID, expressID, pick = true) => {\n    if (pick) viewer.IFC.pickIfcItemsByID(modelID, expressID);\n    setModelID(modelID);\n  }\n\n  const getElementProperties = async ({\n    viewer,\n    setModelID,\n    setElement\n  }) => {\n    const found = await viewer.IFC.pickIfcItem(true, 1);\n\n    if (found == null || found == undefined) {\n      await viewer.IFC.unpickIfcItems();\n      setEids([]);\n      return\n    };\n\n    setModelID(found.modelID);\n    setEids([found.id]);\n    console.log('eid', eids)\n    select(viewer, setModelID, found.modelID, found.id, false);\n    const elementProperties = await viewer.IFC.getProperties(found.modelID, found.id, true, true);\n    console.log(elementProperties);\n\n    const type = await viewer.IFC.loader.ifcManager.getIfcType(found.modelID, found.id);\n    console.log(type);\n\n    if (elementProperties.psets.length > 0) {\n      const psets = await Promise.all(elementProperties.psets.map(async (pset) => {\n        if (pset.HasProperties && pset.HasProperties.length > 0) {\n          const newPset = await Promise.all(pset.HasProperties.map(async (property) => {\n            const label = property.Name.value;\n            const value = property.NominalValue ? (property.NominalValue.value ? property.NominalValue.value : '') : '';\n            return {\n              label,\n              value\n            }\n          }));\n\n          return {\n            ...pset,\n            HasProperties: [...newPset]\n          }\n        }\n        if (pset.Quantities && pset.Quantities.length > 0) {\n          const newPset = await Promise.all(pset.Quantities.map(async (property) => {\n            const label = property.Name.value;\n            const value = property.NominalValue ? property.NominalValue.value : null;\n            return {\n              label,\n              value\n            }\n          }));\n\n          return {\n            ...pset,\n            HasProperties: [...newPset]\n          }\n        }\n        return {\n          ...pset,\n          HasProperties: []\n        }\n      }));\n      const elem = {\n        ...elementProperties,\n        type: type ? type : 'NO TYPE',\n        modelID: found.modelID,\n        psets\n      };\n\n      if (elem) {\n        setElement(elem);\n      }\n    }\n  }\n\n  function empty() {\n    return { type: 6 };\n  }\n  function str(v) {\n    return { type: 1, value: v };\n  }\n  function ref(v) {\n    return { type: 5, value: v }\n  }\n\n  function ifcLabel(v) {\n    return { type: 2, label: 'IFCLABEL', valueType: 1, value: v }\n  }\n\n  function ifcBoolean(v) {\n    return { type: 2, label: 'IFCBOOLEAN', valueType: 1, value: v }\n  }\n\n\n  function ifcText(v) {\n    return { type: 2, label: 'IFCTEXT', valueType: 1, value: v }\n  }\n\n  const handleGetJsonData = async (\n    viewer,\n    spatialStructure,\n    progress\n    // excludeGeometry\n  ) => {\n    // const data = {};\n    const data = [];\n    let count = 0\n    for (const item of spatialStructure) {\n      progress({\n        loading: true,\n        message: `Recherche: ${Math.round(count / spatialStructure.length * 100)} %`\n      });\n      count++;\n      const props = await viewer.IFC.getProperties(0, item.expressID, false, false);\n      // console.log('props', props)\n\n      data.push({\n        ...item,\n        ...props,\n        type: item.type\n      })\n    }\n    return data;\n  }\n\n\n  const addOrEditIfcPropertySingleValue = async ({\n    expressID,\n    type,\n    name,\n    description,\n    value,\n    unit,\n    property\n  }) => {\n    const getPropertyValue = (type, value) => {\n\n      if (value == null) {\n        return ifcText(`no value`);\n      } else {\n        switch (type) {\n          case 'IfcLabel':\n          case 'IfcText':\n            return ifcText(`${value}`);\n          case 'IfcBoolean':\n            return ifcBoolean(`${value}`);\n          default:\n            return ifcText(`${value}`);\n        }\n      }\n    }\n\n\n    let ifcPropertySingleValue = new WebIFC.IfcPropertySingleValue(\n      expressID,\n      type,\n      name ? str(`${name}`) : str(`no name`),\n      description ? str(`${description}`) : str(`${name}`),\n      // value ? ifcText(`${value}`) : ifcText(`no value`),\n      getPropertyValue(property.ifc_type, value),\n      unit ? str(`${unit}`) : empty(),\n      empty(),\n    );\n\n    let rawLineIfcPropertySingleValue = {\n      ID: ifcPropertySingleValue.expressID,\n      type: ifcPropertySingleValue.type,\n      arguments: ifcPropertySingleValue.ToTape()\n    };\n\n    return rawLineIfcPropertySingleValue;\n  }\n\n  const addOrEditIfcPropertySet = async ({\n    expressID,\n    type,\n    globalId,\n    ifcOwnerHistoryExpressID,\n    name,\n    description,\n    ifcPropertySingleValueExpressIDs\n  }) => {\n    let ifcPropertySet = new WebIFC.IfcPropertySet(\n      expressID,\n      type,\n      globalId ? globalId : empty(),\n      ifcOwnerHistoryExpressID ? ifcOwnerHistoryExpressID : empty(),\n      name ? name : empty(),\n      description ? description : empty(),\n      ifcPropertySingleValueExpressIDs\n    );\n\n    let rawLineIfcPropertySet = {\n      ID: ifcPropertySet.expressID,\n      type: ifcPropertySet.type,\n      arguments: ifcPropertySet.ToTape()\n    };\n\n    return rawLineIfcPropertySet;\n  }\n\n  const addOrEditIfcRelDefinesByProperties = async ({\n    expressID,\n    type,\n    globalId,\n    ifcOwnerHistoryExpressID,\n    name,\n    description,\n    elementsList,\n    ifcPropertySetExpressID\n  }) => {\n    let ifcRelDefinesByProperties = new WebIFC.IfcRelDefinesByProperties(\n      expressID,\n      type,\n      globalId ? globalId : empty(),\n      ifcOwnerHistoryExpressID ? ifcOwnerHistoryExpressID : empty(),\n      name ? name : empty(),\n      description ? description : empty(),\n      elementsList,\n      ifcPropertySetExpressID\n    );\n\n    let rawLineIfcRelDefinesByProperties = {\n      ID: ifcRelDefinesByProperties.expressID,\n      type: ifcRelDefinesByProperties.type,\n      arguments: ifcRelDefinesByProperties.ToTape()\n    };\n\n    return rawLineIfcRelDefinesByProperties;\n  }\n\n  // function DecodeIFCString(ifcString) {\n  //   const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/giu;\n  //   let resultString = ifcString;\n  //   let match = ifcUnicodeRegEx.exec(ifcString);\n  //   while (match) {\n  //     const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n  //     resultString = resultString.replace(match[0], unicodeChar);\n  //     match = ifcUnicodeRegEx.exec(ifcString);\n  //   }\n  //   return resultString;\n  // }\n\n\n  function DecodeIFCString(ifcString) {\n    const resultString = ifcString?.replace(/'/g, \"''\");\n    // const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/uig;\n    // let resultString = ifcString;\n    // let match = ifcUnicodeRegEx.exec(ifcString);\n    // while (match) {\n    //   const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n    //   resultString = resultString.replace(match[0], unicodeChar);\n    //   match = ifcUnicodeRegEx.exec(ifcString);\n    // }\n    return resultString;\n  }\n\n\n\n  const opendthxUpdateProperties = async ({\n    bimData,\n    setBimData,\n    viewer,\n    modelId,\n    expressIDs,\n    properties\n  }) => {\n    setState({\n      ...state,\n      loading: true,\n      loadingMessage: \"Début de l'enrichissement...\",\n      alertStatus: true,\n      alertMessage: \"Connecté\"\n    });\n    console.log('bimBata', bimData.models)\n\n    const model = bimData.models.list[modelId];\n    const database = bimData.models.data[modelId];\n    const manager = await viewer.IFC.loader.ifcManager;\n    const allLines = await manager.ifcAPI.GetAllLines(modelId);\n    let maxExpressId = 0;\n    await Object.keys(allLines._data).forEach(index => {\n      maxExpressId = Math.max(maxExpressId, allLines._data[index])\n    });\n\n    const elementsList = await expressIDs.map(expressID => {\n      return ref(expressID);\n    });\n\n    const ifcOwnerHistory = await manager.getAllItemsOfType(\n      modelId,\n      IFCOWNERHISTORY,\n      false\n    );\n    const eidIfcOwnerHistory = (ifcOwnerHistory && ifcOwnerHistory.length > 0) ? ifcOwnerHistory[0] : 1;\n    // const newPsetOpendthXEids = [];\n    // const newPsetIFCEids = [];\n    // const rawLineIfcRelDefinesByPropertiesList = [];\n    // let propertySingleValueExpressId = maxExpressId + 1;\n\n    let count = 0;\n    const PsetSearch = 'Pset_opendthx';\n\n    // SUPPRESSION DES ELEMENTS DE LA LISTE AYANT DEJA UN PSET OPENDTHX\n    const relPsetIDs = await manager.getAllItemsOfType(0, IFCRELDEFINESBYPROPERTIES, false);\n    console.log('relPsetIDs', relPsetIDs)\n    console.log('relPsetIDs.length', relPsetIDs.length)\n    const t0 = new Date();\n    for (let relPsetID of relPsetIDs) {\n      // setState({\n      //   ...state,\n      //   loading: true,\n      //   loadingMessage: `Enrichissement: ${Math.round(count / relPsetIDs.length * 100)} %`\n      // });\n      count++;\n      // console.log('relPsetID', relPsetID)\n      const relPset = database[parseInt(relPsetID)];\n      console.log('relPset', relPset)\n      // const relPset = await manager.getItemProperties(0, relPsetID);\n      const relPsetRelatingPropertyDefinition = relPset.RelatingPropertyDefinition;\n\n      if (database[parseInt(relPsetRelatingPropertyDefinition)].Name === PsetSearch) {\n        const relPsetRelatedObjects = [...relPset.RelatedObjects];\n        let checkExpressID = false;\n        for (let expressID of expressIDs) {\n          const relPsetRelatedObjectIndex = relPsetRelatedObjects.findIndex(relPsetRelatedObject => relPsetRelatedObject === expressID);\n          if (relPsetRelatedObjectIndex > -1) {\n            checkExpressID = true;\n            relPsetRelatedObjects.splice(relPsetRelatedObjectIndex, 1);\n          }\n        }\n        if (checkExpressID) {\n          const newRelPset = await manager.getItemProperties(0, relPsetID);\n          newRelPset.RelatedObjects = relPsetRelatedObjects.map((relPsetRelatedObject) => {\n            return ref(relPsetRelatedObject);\n          });\n          await manager.ifcAPI.WriteLine(0, newRelPset);\n        }\n      }\n    }\n    const t1 = new Date();\n    let difference = t1.getTime() - t0.getTime();\n    let psetID;\n    console.log(`time spent step 1: ${difference / 1000}s`)\n\n    if (properties.length > 0) {\n      console.log('maxExpressId', maxExpressId)\n      let ifcPropertySingleValueEid = maxExpressId + 1;\n      console.log('ifcPropertySingleValueEid', ifcPropertySingleValueEid)\n      const newPsetOpendthXEids = [];\n      for (let property of properties) {\n        const eid = ifcPropertySingleValueEid++;\n        const rawLineIfcPropertySingleValue = await addOrEditIfcPropertySingleValue({\n          expressID: eid,\n          type: IFCPROPERTYSINGLEVALUE,\n          name: DecodeIFCString(property.ifc_property_name),\n          description: DecodeIFCString(property.property_definition),\n          value: property.text_value,\n          unit: property.unit,\n          property\n        });\n        await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySingleValue);\n        newPsetOpendthXEids.push(ref(eid));\n      }\n      console.log('newPsetOpendthXEids', newPsetOpendthXEids)\n      if (newPsetOpendthXEids.length > 0) {\n        const ifcPropertySetEid = ifcPropertySingleValueEid + 1;\n        psetID = ifcPropertySetEid;\n        const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n          expressID: ifcPropertySetEid,\n          type: IFCPROPERTYSET,\n          globalId: str(Math.random().toString(16).substr(2, 8)),\n          ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n          name: str('Pset_opendthx'),\n          ifcPropertySingleValueExpressIDs: newPsetOpendthXEids\n        });\n        await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n        const ifcRelDefinesByPropertiesEid = ifcPropertySetEid + 1;\n        console.log('ifcPropertySetEid', ifcPropertySetEid)\n        console.log('ifcRelDefinesByPropertiesEid', ifcRelDefinesByPropertiesEid)\n        const rawLineIfcRelDefinesByProperties = await addOrEditIfcRelDefinesByProperties({\n          expressID: ifcRelDefinesByPropertiesEid,\n          type: IFCRELDEFINESBYPROPERTIES,\n          globalId: str(Math.random().toString(16).substr(2, 8)),\n          ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n          name: empty(),\n          description: empty(),\n          elementsList: elementsList,\n          ifcPropertySetExpressID: ref(ifcPropertySetEid)\n        });\n\n        // rawLineIfcRelDefinesByPropertiesList.push(rawLineIfcRelDefinesByProperties);\n        await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcRelDefinesByProperties);\n\n      }\n    }\n\n    const newProperties = await viewer.IFC.properties.serializeAllProperties(model, undefined, (current, total) => {\n      const progress = current / total;\n      const formatted = Math.trunc(progress * 100);\n      setState({\n        ...state,\n        loading: true,\n        loadingMessage: `Chargement des données: ${formatted} %`\n      });\n    });\n    const file = new File(newProperties, 'properties');\n    const data = JSON.parse(await file.text());\n\n    const t2 = new Date();\n    difference = t2.getTime() - t1.getTime();\n    console.log(`time spent step 2: ${difference / 1000}s`)\n\n    setState({\n      ...state,\n      models: {\n        ...state.models,\n        data: [data]\n      },\n      loading: false,\n      alertStatus: true,\n      alertMessage: \"Enrichissement réussi\"\n    });\n\n  }\n\n\n\n  const editIfcModel = async ({\n    viewer,\n    modelId,\n    expressIDs,\n    properties\n  }) => {\n    setState({\n      ...state,\n      loading: true,\n      loadingMessage: \"Début de l'enrichissement...\",\n      alertStatus: true,\n      alertMessage: \"Connecté\"\n    });\n    // try {\n    const manager = await viewer.IFC.loader.ifcManager;\n    const allLines = await manager.ifcAPI.GetAllLines(modelId);\n    let maxExpressId = 0;\n    await Object.keys(allLines._data).forEach(index => {\n      maxExpressId = Math.max(maxExpressId, allLines._data[index])\n    });\n\n    const elementsList = await expressIDs.map(expressID => {\n      return ref(expressID);\n    });\n\n    const ifcOwnerHistory = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelId,\n      IFCOWNERHISTORY,\n      false\n    );\n    const eidIfcOwnerHistory = (ifcOwnerHistory && ifcOwnerHistory.length > 0) ? ifcOwnerHistory[0] : 1;\n    const newPsetOpendthXEids = [];\n    const newPsetIFCEids = [];\n    const rawLineIfcRelDefinesByPropertiesList = [];\n    let propertySingleValueExpressId = maxExpressId + 1;\n\n    let count = 0;\n\n    // CREATION D'UNE BDD DE PROPERTIES ASSOCIE AU EXPRESSIDS\n    // for (let expressID of expressIDs) {\n    //   const psetList = {\n    //     'psetId': {\n    //       elemIds: \n    //     }\n    //   };\n\n    // }\n\n    if (properties.length > 0) {\n      // try {\n      for (let property of properties) {\n        setState({\n          ...state,\n          loading: true,\n          loadingMessage: `Enrichissement: ${Math.round(count / properties.length * 100)} %`\n        });\n        count++;\n        // Check if corresponding IfcPropertySet exists\n        let existingPsetList = [];\n        let existingPropertyList = [];\n\n        for (let expressID of expressIDs) {\n          const element = await viewer.IFC.getProperties(0, expressID, false, false);\n          await element.psets?.map(pset => {\n            pset.HasProperties?.forEach(prop => {\n              if (prop.Name?.value === property.ifc_property_name || prop.Name?.value === property.property_name) {\n                existingPropertyList.push(prop);\n              }\n            })\n          })\n\n          let existingPset = await element.psets?.find(pset => pset.Name?.value === property.ifc_class);\n\n          if (existingPset) {\n            existingPsetList.push(existingPset);\n          }\n        }\n\n        if (existingPropertyList.length > 0) {\n          const existingProperty = existingPropertyList[0];\n          const rawLineIfcPropertySingleValue = await addOrEditIfcPropertySingleValue({\n            expressID: existingProperty.expressID,\n            type: IFCPROPERTYSINGLEVALUE,\n            name: DecodeIFCString(existingProperty.Name.value),\n            description: DecodeIFCString(property.property_definition),\n            value: property.text_value,\n            unit: property.unit,\n            property\n          });\n\n          await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySingleValue);\n        } else {\n          propertySingleValueExpressId += 1;\n          // Add or Edit IfcPropertySingleValue\n          const ifcPropertySingleValueEid = propertySingleValueExpressId;\n          const rawLineIfcPropertySingleValue = await addOrEditIfcPropertySingleValue({\n            expressID: ifcPropertySingleValueEid,\n            type: IFCPROPERTYSINGLEVALUE,\n            name: DecodeIFCString(property.ifc_property_name),\n            description: DecodeIFCString(property.property_definition),\n            value: property.text_value,\n            unit: property.unit,\n            property\n          });\n\n          await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySingleValue);\n          if (existingPsetList.length > 0) {\n            const existingPset = existingPsetList[0];\n            const existingPsetPropertyEids = existingPset.HasProperties?.map(p => ref(p.expressID));\n            const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n              expressID: existingPset.expressID,\n              type: existingPset.type,\n              globalId: existingPset.GlobalId,\n              ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n              name: existingPset.Name,\n              description: existingPset.Description,\n              ifcPropertySingleValueExpressIDs: [...existingPsetPropertyEids, ref(ifcPropertySingleValueEid)]\n            })\n\n            await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n          } else if (property.ifc_class !== 'Pset_opendthx' && property.ifc_class !== '') {\n            propertySingleValueExpressId += 1;\n            const ifcPropertySetEid = propertySingleValueExpressId;\n            const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n              expressID: ifcPropertySetEid,\n              type: IFCPROPERTYSET,\n              globalId: str(Math.random().toString(16).substr(2, 8)),\n              ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n              name: str(property.ifc_class),\n              ifcPropertySingleValueExpressIDs: [ref(ifcPropertySingleValueEid)]\n            });\n\n            await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n\n            newPsetIFCEids.push(ref(ifcPropertySetEid));\n\n            propertySingleValueExpressId += 1;\n            const rawLineIfcRelDefinesByProperties = await addOrEditIfcRelDefinesByProperties({\n              expressID: propertySingleValueExpressId,\n              type: IFCRELDEFINESBYPROPERTIES,\n              globalId: str(Math.random().toString(16).substr(2, 8)),\n              ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n              name: empty(),\n              description: empty(),\n              elementsList: elementsList,\n              ifcPropertySetExpressID: ref(ifcPropertySetEid)\n            })\n            // rawLineIfcRelDefinesByPropertiesList.push(rawLineIfcRelDefinesByProperties);\n            await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcRelDefinesByProperties);\n\n          } else {\n            newPsetOpendthXEids.push(ref(ifcPropertySingleValueEid));\n          }\n        }\n\n      }\n      // } catch (e) {\n      //   setState({\n      //     ...state,\n      //     loading: false,\n      //     alertStatus: false,\n      //     alertMessage: \"Problème lors de l'enrichissement\"\n      //   });\n      // }\n    }\n\n\n    if (newPsetOpendthXEids.length > 0) {\n      propertySingleValueExpressId += 1;\n      const ifcPropertySetEid = propertySingleValueExpressId;\n      const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n        expressID: ifcPropertySetEid,\n        type: IFCPROPERTYSET,\n        globalId: str(Math.random().toString(16).substr(2, 8)),\n        ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n        name: str('Pset_opendthx'),\n        ifcPropertySingleValueExpressIDs: newPsetOpendthXEids\n      });\n\n      await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n\n      propertySingleValueExpressId += 1;\n      const rawLineIfcRelDefinesByProperties = await addOrEditIfcRelDefinesByProperties({\n        expressID: propertySingleValueExpressId,\n        type: IFCRELDEFINESBYPROPERTIES,\n        globalId: str(Math.random().toString(16).substr(2, 8)),\n        ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n        name: empty(),\n        description: empty(),\n        elementsList: elementsList,\n        ifcPropertySetExpressID: ref(ifcPropertySetEid)\n      });\n\n      // rawLineIfcRelDefinesByPropertiesList.push(rawLineIfcRelDefinesByProperties);\n      await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcRelDefinesByProperties);\n    }\n\n    setState({\n      ...state,\n      loading: false,\n      alertStatus: true,\n      alertMessage: \"Enrichissement réussi\"\n    });\n\n\n    // } catch (e) {\n    //   setState({\n    //     ...state,\n    //     loading: false,\n    //     alertStatus: false,\n    //     alertMessage: \"Problème lors de l'enrichissement\"\n    //   });\n    // }\n\n  }\n\n  const addElementsNewProperties = async ({\n    bimData,\n    setBimData,\n    viewer,\n    modelID,\n    expressIDs,\n    properties\n  }) => {\n    const modelId = modelID ? modelID : 0;\n    console.log('ADD PROPERTY')\n    if (expressIDs && expressIDs.length > 0) {\n      if (properties.length > 0) {\n        opendthxUpdateProperties({\n          bimData,\n          setBimData,\n          viewer,\n          modelId,\n          expressIDs,\n          properties\n        })\n      }\n    }\n  }\n\n  const handleCheckNetworkStatus = () => {\n    function changeStatus() {\n      console.log('navigator.onLine', navigator.onLine)\n      setState({\n        ...state,\n        alertStatus: navigator.onLine,\n        alertMessage: navigator.onLine ? 'Connecté' : 'Non connecté'\n      });\n    }\n    window.addEventListener(\"online\", changeStatus);\n    window.addEventListener(\"offline\", changeStatus);\n    return () => {\n      window.removeEventListener(\"online\", changeStatus);\n      window.removeEventListener(\"offline\", changeStatus);\n    };\n  }\n\n  const handleModelValidation = async () => {\n    try {\n      const ifcData = await state.viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n      const blobIfc = new Blob([ifcData], { type: 'text/plain' });\n      const ifcFile = new File([blobIfc], 'ifcFile.png');\n\n\n      const formData = new FormData();\n      formData.append('files', ifcFile);\n\n      axios.post(process.env.REACT_APP_API_URL, formData).then((value) => {\n        console.log('value.data', value.data)\n        return value.data;\n      })\n        .then(async ({ projectId }) => {\n          const logs = await axios.get(`${process.env.REACT_APP_API_URL}/log/${projectId}.json`)\n          console.log('logs', logs)\n        }).catch((error) => {\n          console.log('ERRORRR', error)\n        })\n\n      // res.status(200).send(response.data);\n    } catch (err) {\n      // return res.status(500).json({ error: err });\n    }\n  }\n\n  const handleInitSubset = async (viewer, modelID) => {\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[modelID];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    );\n    const subset = getWholeSubset(viewer, ifcModel, allIDs);\n    replaceOriginalModelBySubset(viewer, ifcModel, subset);\n  }\n\n  function getWholeSubset(viewer, ifcModel, allIDs) {\n    return viewer.IFC.loader.ifcManager.createSubset({\n      modelID: ifcModel.modelID,\n      ids: allIDs,\n      applyBVH: true,\n      scene: ifcModel.parent,\n      removePrevious: true,\n      customID: 'full-model-subset',\n    });\n  }\n\n  function replaceOriginalModelBySubset(viewer, ifcModel, subset) {\n    const items = viewer.context.items;\n\n    items.pickableIfcModels = items.pickableIfcModels.filter(model => model !== ifcModel);\n    items.ifcModels = items.ifcModels.filter(model => model !== ifcModel);\n    ifcModel.removeFromParent();\n\n    items.ifcModels.push(subset);\n    items.pickableIfcModels.push(subset);\n  }\n\n\n  return {\n    models,\n    meshMaterials,\n    initIndexDB,\n    getModels,\n    addTransformControls,\n    getElementProperties,\n    addElementsNewProperties,\n    editIfcModel,\n    handleCheckNetworkStatus,\n    handleGetJsonData,\n    handleModelValidation,\n    handleInitSubset\n  }\n};\n\nexport {\n  UseIfcRenderer\n};","import React, { useMemo } from 'react';\nimport Helmet from 'react-helmet';\nimport {\n  Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport './App.css';\nimport history from './history';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport AppContainerElem from './Components/AppContainerElem';\nimport IfcRenderer from './Views/IfcRenderer/IfcRenderer';\nimport {\n  ListItem,\n  ListItemAvatar,\n  Avatar,\n  ListItemText,\n  Typography\n} from '@material-ui/core';\n\nconst Menu = {\n  MenuNavBar: [\n    { text: \"\", link: \"\", href: \"\", icon: \"\" }\n  ],\n  MenuSideBarSup: [\n    { text: \"BIM Viewer\", link: \"/\", href: \"\", icon: \"dashboard\" },\n  ],\n  MenuSideBarInf: [\n    // { text: \"Documentation\", link: \"\", href: \"https://www.tridyme.com/fr/documentation/fr/developpers/tridyme-webapp-kit-serverless\", icon: \"chrome_reader_mode\" },\n    { text: \"GitHub\", link: \"\", href: \"https://github.com/alliance-batiment/BIM-CiQo\", icon: \"code\" }\n  ]\n};\n\nconst {\n  REACT_APP_FAVICON,\n  REACT_APP_LOGO,\n  REACT_APP_COMPANY\n} = process.env;\n\n\nconst App = () => {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const theme = useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: prefersDarkMode ? 'dark' : 'light',\n          primary: {\n            // light: will be calculated from palette.primary.main,\n            main: '#ffffff',\n            // dark: will be calculated from palette.primary.main,\n            // contrastText: will be calculated to contrast with palette.primary.main\n          },\n          secondary: {\n            //light: '#0066ff',\n            main: '#ff0000',\n            // dark: will be calculated from palette.secondary.main,\n            //contrastText: '#ffcc00',\n          },\n        },\n      }),\n    [prefersDarkMode],\n  );\n\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Helmet>\n        <title>{`${REACT_APP_COMPANY} | Applications`}</title>\n        <link rel=\"icon\" type=\"image/png\" href={`${REACT_APP_FAVICON}`} sizes=\"16x16\" />\n      </Helmet>\n      <Router history={history}>\n        <AppContainerElem\n          title={\n            <>\n              {/* {REACT_APP_COMPANY === 'VBMC' ? */}\n              <>\n                <img\n                  alt={`${REACT_APP_COMPANY}`}\n                  src={`${REACT_APP_LOGO}`}\n                  style={{ height: '2em', width: 'auto' }}\n                />\n              </>\n              {/* :\n                <ListItem>\n                  <ListItemAvatar>\n                    <Avatar\n                      alt={`${REACT_APP_COMPANY}`}\n                      src={`${REACT_APP_LOGO}`}\n                    />\n                  </ListItemAvatar>\n                  <ListItemText\n                  // style={{ fontSize: '2em' }}\n                  // primary={`TriBIM`}\n                  >\n                    <Typography\n                      style={{\n                        fontSize: '1.2em'\n                      }}\n                    >\n                      {`TriBIM`}\n                    </Typography>\n                  </ListItemText>\n                </ListItem>\n              } */}\n            </>\n          }\n          menu={Menu}\n        >\n          <Switch>\n            <Route exact path=\"/\" component={IfcRenderer} />\n            <Route exact path=\"/ifcrenderer\" component={IfcRenderer} />\n            <Route path=\"/link-from-tracim\" component={IfcRenderer} />\n          </Switch>\n        </AppContainerElem>\n      </Router>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 25671;\nmodule.exports = webpackEmptyContext;"],"names":["createBrowserHistory","title","classes","handleDrawerOpen","open","REACT_APP_VERSION","process","AppBar","position","className","clsx","appBar","appBarShift","Toolbar","style","backgroundColor","color","IconButton","onClick","edge","menuButton","hide","Menu","Typography","variant","noWrap","right","margin","target","href","drawerWidth","useStyles","makeStyles","theme","root","display","transition","transitions","create","easing","sharp","duration","leavingScreen","width","marginLeft","easeOut","enteringScreen","marginRight","spacing","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","padding","mixins","toolbar","justifyContent","content","flexGrow","contentShift","PersistentDrawerLeft","menu","children","useTheme","React","setOpen","CssBaseline","Drawer","anchor","paper","direction","ChevronLeft","ChevronRight","Divider","List","MenuSideBarSup","map","item","index","Link","to","link","textDecoration","ListItem","button","ListItemIcon","Icon","icon","ListItemText","primary","text","MenuSideBarInf","Container","maxWidth","container","media","height","BcfDialog","onClose","onOpenViewpoint","useState","file","setFile","topics","setTopics","fitleredTopics","setFitleredTopics","useEffect","filter","t","viewpoints","length","handleOpenViewpoint","viewpoint","onDrop","useCallback","acceptedFiles","reader","BcfReader","read","console","log","useDropzone","accept","getRootProps","getInputProps","isDragActive","Dialog","fullWidth","disableBackdropClick","DialogTitle","DialogContent","Box","border","borderColor","borderRadius","Grid","topic","i","TopicCard","DialogActions","Button","defaultViewpointUrl","Card","CardActionArea","CardMedia","image","markup","CardContent","gutterBottom","component","description","opacity","datBimTitle","textAlign","textTransform","createAccountLink","lostPasswordLink","handleSubmit","username","localStorage","getItem","email","setEmail","xs","noValidate","autoComplete","onSubmit","FormControl","TextField","id","label","name","value","onChange","event","type","rel","datBimCard","cursor","datBimCardTitle","loader","marginTop","openObjects","setBreadcrumbMap","handleNext","setActiveStep","portals","setPortals","portalsLoader","setPortalsLoader","getPortalList","axios","headers","sessionStorage","portalList","data","justify","CircularProgress","portal","lg","portal_id","portal_name","search","input","flex","iconButton","keyword","placeholder","onClickOne","onClickTwo","disabled","Paper","InputBase","inputProps","e","onKeyDown","key","preventDefault","ButtonGroup","Search","RotateLeft","selectedPortal","getobjectsSetsBySelectedClass","classListing","setClassListing","treeClassListLoader","setTreeClassListLoader","getTreeClassList","treeClassList","error","TreeView","defaultCollapseIcon","ExpandMore","defaultExpandIcon","defaultExpanded","sx","overflowY","renderTree","nodes","TreeItem","nodeId","Array","isArray","node","flexDirection","datBimCardActionArea","datBimCardContent","fontSize","fontWeight","datBimCardDesc","datBimCardImg","marginBottom","maxHeight","objectFit","noObjectSetsMessage","viewer","setSelectedObjectSet","setSelectedObjectSetName","eids","breadcrumbMap","objectsSetsList","setObjectsSetsList","objectsSetsListDefault","setObjectsSetsListDefault","objectsSetsListWithEIDS","setObjectsSetsListWithEIDS","searchInput","setSearchInput","objectsSetsListLoader","setObjectsSetsListLoader","getObjectsSetsList","getobjectsSetsBySelectedEids","getObjectsSets","objectsSets","classId","objectsSetsBySelectedClass","IFC","ifcManager","getIfcType","ifcClass","Promise","allSettled","treeClassListElement","class_reference_id","then","values","reduce","acc","status","push","getObjectsSetsByKeyWord","organizations","organizationProperty","method","url","organization_id","params","usedList","Breadcrumbs","separator","NavigateNext","slice","filtered","searchByObjectName","object_name","toLowerCase","includes","searchByOrganizationName","organization_name","searchBar","sm","object","object_id","src","img_ref","alt","CardActions","Chip","meta","Pagination","count","current_items","valuetext","isStaticProperty","property_type","property","propertyIndex","configureProperty","Input","text_value","format","Select","list_value","MenuItem","JSON","parse","TableContainer","Table","minWidth","TableBody","row","TableRow","cell","TableCell","scope","RadioGroup","FormControlLabel","control","Radio","marks","min_interval","max_interval","Slider","defaultValue","parseFloat","num_value","getAriaValueText","min","step","Math","pow","floor","log10","max","valueLabelDisplay","underline","borderBottom","datBimList","table","projectId","setLoader","objSelected","selectedObject","bimData","setBimData","modelID","addElementsNewProperties","setEids","handleShowMarketplace","setPropertyListDefault","properties","setProperties","allChecked","setAllChecked","useHistory","getPropertiesValues","dataProp","dataPropFilter","prop","property_visibility","dataWithCheckStatus","checked","temporaryFixProperties","data_type_name","newLink","replace","handleCheckedProperties","checkStatus","newPropertiesArr","inputValue","updatePorperty","newValues","toString","addElementsDatBimProperties","filteredProperties","updateProperties","response","expressIDs","TableHead","align","Checkbox","defaultChecked","property_name","property_definition","Tooltip","placement","Info","DefineTypeComponent","unit","datBIMColor","slider","isStaticSelector","selector_type","selector","selectorsRequest","setSelectorsRequest","getObjectsOfAdvancedSearch","value_min","value_max","selectedRangedValues","setSelectedRangedValues","setInputValue","selectorIndex","newSelectorRequest","checkExist","forEach","select","splice","props","onChangeCommitted","parseInt","selectors","selectorsLoader","resetSelectors","Accordion","AccordionSummary","expandIcon","AccordionDetails","selectedObjectSet","setSelectedObject","searchBarInput","setSearchBarInput","setSelectors","setSelectorsLoader","objectsLoader","setObjectsLoader","objectListing","setObjectListing","selectedObjectName","setSelectedObjectName","getSelectorsOfObjectSet","getObjectsOfSelectedObject","selectorsOfObjectSet","objectsOfAdvancedSearch","result","treeOfObjectSet","childRenderTree","renderedChildren","renderedChild","newCount","concat","getExpandedNodes","list","child","listing","tree","selectedObjectListing","zIndex","headerButton","navigationBar","bottom","modal","modalDatBim","palette","background","boxShadow","shadows","overflow","datBimFooterCard","datBimCardButton","accordionDetails","datBimIcon","useQontoStepIconStyles","active","circle","completed","QontoConnector","withStyles","alternativeLabel","top","left","line","borderTopWidth","StepConnector","s","activeStep","setSelectedPortal","selectedObjectSetName","message","validation","setValidation","init","steps","QontoStepIcon","Check","FormData","setItem","get","entry_mode","ip","lang","local_at","login","password","service","r","token","catch","handleDisconnect","prevActiveStep","KeyboardBackspace","PowerSettingsNew","Stepper","connector","Step","StepLabel","StepIconComponent","instructions","typeProperties","getStepContent","Alert","severity","img","DropBoxLogo","selectedApp","files","fetch","mode","rawResponse","ifcBlob","Blob","File","appKey","success","cancel","multiselect","extensions","CardHeader","avatar","Avatar","subheader","Badge","pill","arrow","Fab","size","REACT_APP_IDS_API_URL","openProperties","setSelectedApp","setLocked","lockProject","unlockProject","updateProject","apiInformation","setApiInformation","handleUpdateProject","state","api","ExportFileAsIFC","ifcData","ifcDataString","TextDecoder","decode","newIfcDataString","ifcFile","query","URLSearchParams","window","location","content_id","space_id","user_id","formData","append","res","UseTracim","locked","lockToken","secondaryAction","icons","FileUpload","disablePadding","heading","typography","pxToRem","fontWeightRegular","cardExpanded","innerWidth","innerHeight","card","cardContent","overflowX","outline","application","paddingTop","fab","ID5899e0aca600741755433911","applications","OpenDthxLogo","TracimLogo","IdsLogo","specificApplication","apiConnectors","setApiConnectors","anchorEl","setAnchorEl","filteredData","setFilteredData","expandedView","setExpandedView","viewWidth","setViewWidth","viewHeight","setViewHeight","resizeListener","addEventListener","removeEventListener","Boolean","undefined","Apps","action","FullscreenExit","Fullscreen","Clear","currentTarget","MoreVert","Popover","anchorOrigin","vertical","horizontal","transformOrigin","dataList","newFilteredData","fallback","cardInfo","treeViewLabel","textOverflow","wordWrap","warp","treeViewCheckbox","treeView","buttonGroup","SearchData","handleShowProperties","handleGetJsonData","setChecked","selectedElements","setSelectedElements","loading","all","eid","getProperties","elementProperties","handleElementSelection","element","currentIndex","indexOf","newChecked","handleRemoveAllElements","unpickIfcItems","handleRemoveElement","newEids","expressID","pickIfcItemsByID","downloadFile","fileName","fileType","blob","a","document","createElement","download","URL","createObjectURL","clickEvt","MouseEvent","view","bubbles","cancelable","dispatchEvent","remove","handleExportToCsv","propertiesCsv","join","ifcElement","getModelID","psets","pset","HasProperties","elementName","Name","elementClass","globalID","GlobalId","psetName","propertyName","propertyValue","NominalValue","handleSearchData","flatten","spatialStructures","filteredEids","searchResult","searchEngine","keyWords","Description","ObjectType","some","keyWord","handleResetSearch","Delete","Download","itemCount","itemSize","stopPropagation","Close","ListItemButton","role","dense","memo","treeWalker","spatialStructure","toggleRow","vtree","refVisible","setRefVisible","treeInstance","useRef","setTimeout","current","recomputeTree","Node","isLeaf","nestingLevel","isOpen","exportNodeToCsv","ArrowDropDown","ArrowRight","getNodeData","structure","isOpenByDefault","parentMeta","ref","el","payload","originalStructureTree","hashMapTree","selected","expanded","loadingCursor","Error","hashMapSpatialStructures","hash","parentID","parentsIds","childrenIds","getChildNodes","nodeID","childNodes","traverseChildren","addExpandedNodes","recomputeToVtree","selectedItems","val","manageNodeSelection","oldSelectedItems","selectedTree","indexOfExistingItem","_","selectedItem","Set","highlightOnTreeView","mapSelected","useReducer","reducer","dispatch","refSelectedItems","selectedItemsIds","selectedIFCObject","loadTree","IFCLoader","familyTreeIds","selectedItemsUpdated","computeToTree","newVtree","toggleNode","deselectAllNodes","Tree","ifcModelsClasses","setIfcModelsClasses","newIfcModelsClasses","ifcClasses","WebIFC","toUpperCase","getAllItemsOfType","classEids","IfcIcons","handleShowElement","ids","badgeContent","class","MuiButtonBase","defaultProps","disableRipple","a11yProps","setState","handleShowSpatialStructure","setValue","AccountTree","Tabs","newValue","Tab","TabPanel","other","hidden","p","mapContainer","selectedElementID","setShowProperties","setSelectedElementID","setIfcElement","isLoading","setIsLoading","DecodeIFCString","ifcString","ifcUnicodeRegEx","resultString","match","exec","unicodeChar","String","fromCharCode","newPset","Unit","Prefix","Quantities","mats","elem","handleAddProperties","Add","md","PredefinedType","RegExp","test","linearProgress","baseStyle","borderWidth","borderStyle","setShowValidation","showValidation","useMemo","logs","setLogs","bimModel","setBimModel","progress","setProgress","context","items","ifcModels","models","timeoutIdentifier","handleModelValidation","poll","progressLoading","clearTimeout","blobIfc","analysis","alert","FactCheck","logsCsv","level","instance","time","LinearProgressWithLabel","mr","LinearProgress","round","showCuts","setShowCuts","setCuts","setLoading","clipper","addClippingPlane","createPlane","planes","plans","planLists","handleDeleteClippingPlane","cut","deletePlane","arrowBoundingBox","uuid","activePlan","setPlans","drawings","setDrawings","activeViewIndex","setActiveViewIndex","clippingMaterial","LineMaterial","MeshBasicMaterial","Drawing","IFCWINDOW","IFCPLATE","IFCMEMBER","IFCWALL","IFCWALLSTANDARDCASE","IFCSLAB","IFCDOOR","IFCFURNISHINGELEMENT","IFCSTAIR","IFCSTAIRFLIGHT","IFCRAILING","getDrawings","computeAllPlanViews","newPlans","Object","handleShowPlane","drawing","goTo","handleDeletePlane","exitPlanView","ViewInAr","Visibility","setShowDrawings","showDrawings","ifcPlan","plane","Map","setShowMeasures","showMeasures","setMeasures","allowMeasure","setAllowMeasure","dimensions","previewActive","lineMaterial","LineDashedMaterial","linewidth","depthTest","dashSize","gapSize","handlePrePickIfcItem","addMeasure","handleControlMeasures","prePickIfcItem","code","cancelDrawing","deleteAll","takeMeasure","handleDeleteMeasure","measure","find","dimension","textLabel","findIndex","measureIndex","removeFromScene","showContextMenu","setShowContextMenu","meshMaterials","setShowSpatialStructure","subsets","setSubsets","x","y","anchorPoint","setAnchorPoint","handleContextMenu","pageX","pageY","handleGetAllItemsOfType","elementsByType","handleHideElement","removeFromSubset","handleIsolateElement","ifcModel","allIDs","from","geometry","attributes","array","idsHidden","handleShowModel","createSubset","applyBVH","scene","parent","removePrevious","customID","MenuList","LibraryAdd","VisibilityOff","draggableCard","disableDragging","Rnd","onDragStop","d","onResizeStop","delta","TriBim","this","hello","infoLeftPannel","infoRightPannel","REACT_APP_THIRD_PARTY_API","dropzoneRef","setViewer","setIfcModels","setModelID","setSpatialStructures","showBcfDialog","setShowBcfDialog","showModels","showMarketplace","setShowMarketplace","showSpatialStructure","showProperties","showCamera","setShowCamera","setSpecificApplication","setPercentageLoading","setApiWebIfc","AxeoBim","loadingMessage","alertStatus","alertMessage","bcfDialogOpen","loaded","loadingIfc","openLeftView","leftView","jsonData","setModels","initIndexDB","db","Dexie","version","stores","err","stack","invisibleMaterial","MeshLambertMaterial","transparent","side","DoubleSide","getModels","toArray","allModels","getElementProperties","setElement","pickIfcItem","found","str","v","ifcText","valueType","addOrEditIfcPropertySingleValue","getPropertyValue","ifcPropertySingleValue","ifc_type","rawLineIfcPropertySingleValue","ID","arguments","ToTape","addOrEditIfcPropertySet","globalId","ifcOwnerHistoryExpressID","ifcPropertySingleValueExpressIDs","ifcPropertySet","rawLineIfcPropertySet","addOrEditIfcRelDefinesByProperties","elementsList","ifcPropertySetExpressID","ifcRelDefinesByProperties","rawLineIfcRelDefinesByProperties","opendthxUpdateProperties","modelId","model","database","manager","ifcAPI","GetAllLines","allLines","maxExpressId","keys","_data","IFCOWNERHISTORY","ifcOwnerHistory","eidIfcOwnerHistory","PsetSearch","IFCRELDEFINESBYPROPERTIES","relPsetIDs","t0","Date","relPsetID","relPset","relPsetRelatingPropertyDefinition","RelatingPropertyDefinition","relPsetRelatedObjects","RelatedObjects","checkExpressID","relPsetRelatedObjectIndex","relPsetRelatedObject","getItemProperties","newRelPset","WriteLine","t1","difference","getTime","ifcPropertySingleValueEid","newPsetOpendthXEids","IFCPROPERTYSINGLEVALUE","ifc_property_name","WriteRawLineData","ifcPropertySetEid","IFCPROPERTYSET","random","substr","ifcRelDefinesByPropertiesEid","serializeAllProperties","total","formatted","trunc","newProperties","t2","editIfcModel","newPsetIFCEids","propertySingleValueExpressId","existingPsetList","existingPropertyList","ifc_class","existingPset","existingProperty","existingPsetPropertyEids","handleInitSubset","subset","getWholeSubset","replaceOriginalModelBySubset","pickableIfcModels","removeFromParent","addTransformControls","renderer","camera","ifcCamera","activeCamera","orbitControls","controls","Mesh","BoxGeometry","add","transformControls","TransformControls","domElement","render","enabled","attach","handleCheckNetworkStatus","changeStatus","navigator","onLine","UseIfcRenderer","addGeometryToIfc","getElementById","newViewer","IfcViewerAPI","Color","ifcApi","setWasmPath","applyWebIfcConfig","COORDINATE_TO_ORIGIN","USE_FAST_BOOLS","useWebWorkers","handleInitAxeoBim","handleInitTracim","setOnProgress","percentage","parser","setupOptionalCategories","IFCSPACE","IFCOPENINGELEMENT","IFCSTRUCTURALANALYSISMODEL","IFCSTRUCTURALSURFACEMEMBER","IFCSTRUCTURALCURVEMEMBER","loadIfc","ifcOnLoadError","newIfcModels","getSpatialStructure","newSpatialStructure","updateSpatialStructures","tribim","accessToken","refreshToken","handleGetAxeoBimModel","idDocument","idEnvironnement","access_token","refresh_token","resGetModel","resLockModel","lock_token","pick","handleClick","shiftKey","specificApp","selectedElemID","handleDownloadIfc","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","currentViewpoint","FolderOpenOutlined","Crop","Straighten","newScreenshot","Vector2","date","PhotoCamera","reload","Refresh","GetApp","ANCTPng","AgriboisValeurPng","BIMLibrePng","Backdrop","alignContent","MenuNavBar","REACT_APP_FAVICON","REACT_APP_LOGO","REACT_APP_COMPANY","prefersDarkMode","useMediaQuery","createMuiTheme","main","secondary","ThemeProvider","sizes","Router","history","Switch","Route","exact","path","IfcRenderer","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","origin","contentType","ready","unregister","checkValidServiceWorker","webpackEmptyContext","req","resolve","module","exports"],"sourceRoot":""}