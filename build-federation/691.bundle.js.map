{"version":3,"file":"691.bundle.js","mappings":"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AAS,aACT,WAAU,kBACV,WAAS,2BACT,WAAU,kBACV,WAAU,iBACV,UAAS,oBACT,WAAS,wBACT,WAAS,qBACT,WAAU,0BACV,WAAS,8BACT,WAAU,WACV,WAAU,eACV,yBACA,UAAQ,2BACR,WAAU,kCACV,WAAU,wBACV,WAAU,kCACV,WAAU,2BACV,WAAU,mCACV,kCACA,WAAU,gCACV,WAAS,oBACT,WAAU,gBACV,kCACA,UAAQ,iBACR,4BACA,wBACA,WAAS,0BACT,WAAU,+BACV,WAAU,6BACV,WAAU,kCACV,WAAU,WACV,WAAU,gCACV,UAAS,0BACT,WAAU,8BACV,WAAU,oBACV,WAAU,sBACV,WAAU,sBACV,WAAU,kBACV,WAAU,2BACV,WAAU,oBACV,UAAS,6BACT,oBACA,WAAU,sBACV,wBACA,WAAS,aACT,WAAU,iBACV,2BACA,WAAU,WACV,qBACA,0BACA,WAAU,2BACV,WAAS,mBACT,WAAU,uBACV,WAAU,mBACV,WAAU,2BACV,WAAU,2BACV,WAAU,2BACV,WAAU,kCACV,WAAS,kBACT,WAAU,oBACV,WAAU,iBACV,WAAU,oBACV,sBACA,0BACA,WAAU,cACV,WAAU,qBACV,WAAU,yBACV,sCACA,WAAU,0BACV,WAAU,8BACV,WAAU,yBACV,WAAU,oBACV,WAAU,oBACV,WAAU,YACV,WAAU,gBACV,WAAU,sBACV,mCACA,uCACA,WAAU,yBACV,WAAU,6BACV,WAAU,kBACV,WAAU,sBACV,WAAU,kBACV,WAAU,sBACV,WAAS,uBACT,WAAU,2BACV,WAAU,oBACV,kCACA,WAAU,0BACV,WAAU,0BACV,8CACA,WAAU,uCACV,WAAU,iDACV,WAAU,uCACV,WAAS,iDACT,WAAU,0BACV,WAAS,aACT,WAAU,iBACV,WAAU,aACV,WAAU,iBACV,WAAS,YACT,WAAU,4BACV,WAAS,sBACT,WAAU,0BACV,WAAS,kBACT,WAAS,sBACT,8BACA,uCACA,WAAU,iBACV,oBACA,WAAU,cACV,UAAS,eACT,WAAU,mBACV,WAAU,yBACV,UAAS,YACT,UAAS,wBACT,0BACA,WAAU,6BACV,2CACA,WAAS,qBACT,WAAU,6BACV,WAAS,oBACT,sCACA,WAAU,2BACV,WAAS,yBACT,WAAU,gBACV,WAAU,oBACV,WAAU,eACV,WAAU,mBACV,WAAU,WACV,gCACA,WAAS,6BACT,WAAU,wBACV,0CACA,WAAU,6BACV,WAAU,+BACV,wCACA,WAAU,gBACV,WAAS,mCACT,WAAU,uCACV,WAAU,kCACV,WAAS,sCACT,2CACA,WAAU,qCACV,WAAS,0BACT,WAAU,8BACV,WAAS,aACT,WAAU,0BACV,WAAU,aACV,yBACA,8BACA,WAAU,yBACV,WAAU,mCACV,WAAU,gBACV,8BACA,WAAS,kBACT,WAAU,sBACV,WAAU,yBACV,WAAU,+BACV,WAAU,cACV,WAAS,kBACT,yBACA,WAAS,cACT,WAAU,kBACV,WAAU,kBACV,WAAU,sBACV,WAAU,oBACV,WAAU,cACV,UAAS,0BACT,WAAS,iBACT,WAAU,qBACV,WAAU,WACV,WAAU,uBACV,WAAU,yBACV,WAAS,oBACT,WAAS,gBACT,WAAS,oBACT,WAAS,8BACT,WAAU,2BACV,WAAU,wBACV,WAAU,YACV,WAAU,gBACV,WAAU,oBACV,WAAU,wBACV,WAAU,uBACV,WAAU,iBACV,WAAS,wBACT,WAAU,0BACV,wBACA,WAAU,uBACV,WAAU,2BACV,WAAU,wBACV,WAAS,gCACT,WAAU,oCACV,UAAS,yBACT,WAAU,gCACV,WAAU,oCACV,WAAU,yBACV,WAAU,6BACV,WAAU,6BACV,WAAS,iCACT,WAAU,sBACV,WAAS,wBACT,WAAU,yBACV,+CACA,WAAU,uBACV,oBACA,WAAU,0BACV,WAAS,yBACT,WAAU,sBACV,yBACA,WAAU,cACV,0CACA,WAAU,mCACV,UAAS,iBACT,UAAS,qBACT,WAAU,iBACV,WAAS,qBACT,WAAU,kBACV,WAAU,sBACV,WAAU,UACV,yBACA,WAAU,cACV,WAAU,uBACV,qCACA,yCACA,WAAS,mCACT,WAAU,+BACV,WAAU,mCACV,iCACA,WAAU,2BACV,6BACA,WAAU,uBACV,WAAU,yBACV,uCACA,WAAU,aACV,WAAU,qBACV,WAAU,yBACV,WAAS,sBACT,WAAU,0BACV,WAAS,qBACT,2BACA,WAAU,uBACV,WAAU,aACV,WAAU,uBACV,WAAU,4BACV,WAAU,gCACV,WAAS,YACT,0BACA,WAAU,uBACV,WAAU,2BACV,UAAS,gBACT,WAAU,oBACV,WAAU,WACV,yBACA,WAAU,eACV,kCACA,WAAU,yBACV,WAAS,uBACT,WAAU,mCACV,WAAU,4BACV,WAAU,qCACV,WAAU,iCACV,WAAU,mCACV,WAAU,+BACV,iCACA,WAAU,8BACV,WAAU,UACV,WAAU,2BACV,WAAS,eACT,8BACA,WAAS,iBACT,2BACA,WAAU,0BACV,uBACA,WAAU,kBACV,WAAU,gCACV,WAAS,SACT,uBACA,wBACA,WAAS,kBACT,WAAU,oBACV,WAAS,4BACT,WAAU,+BACV,6BACA,UAAS,2BACT,kCACA,sBACA,WAAU,gBACV,WAAU,6BACV,WAAU,iCACV,WAAU,kCACV,WAAU,oBACV,WAAU,wBACV,WAAU,iBACV,WAAU,qBACV,UAAS,oBACT,WAAU,wBACV,WAAU,eACV,WAAS,mBACT,WAAU,sBACV,WAAU,0BACV,2BACA,WAAS,qBACT,iCACA,WAAU,2BACV,WAAU,kBACV,WAAU,sBACV,WAAU,yBACV,WAAU,6BACV,uBACA,WAAU,iBACV,UAAS,uBACT,WAAU,2BACV,WAAS,eACT,WAAU,mBACV,WAAU,uBACV,WAAU,2BACV,iCACA,WAAU,oCACV,WAAU,iCACV,WAAU,uCACV,WAAU,kBACV,WAAU,UACV,wBACA,UAAS,mBACT,WAAU,WACV,8BACA,WAAU,mBACV,WAAU,uBACV,WAAU,gBACV,WAAS,oBACT,WAAS,sBACT,WAAU,kBACV,WAAU,sBACV,WAAS,sBACT,oCACA,WAAS,mCACT,WAAU,uBACV,WAAS,+BACT,WAAU,iBACV,WAAU,qBACV,WAAU,uBACV,WAAU,eACV,WAAU,yBACV,WAAU,8BACV,WAAU,iBACV,WAAU,qBACV,gCACA,WAAU,mBACV,iCACA,WAAU,aACV,mBACA,WAAS,cACT,WAAU,wBACV,WAAU,sBACV,WAAU,2BACV,4BACA,WAAU,sBACV,WAAS,gCACT,WAAU,iBACV,kCACA,WAAU,4BACV,WAAU,4BACV,WAAU,2BACV,WAAS,qBACT,WAAU,UACV,WAAU,mBACV,UAAS,qBACT,WAAU,8BACV,WAAU,oBACV,WAAU,UACV,WAAS,uBACT,WAAS,mBACT,WAAU,gBACV,WAAU,cACV,WAAU,wCACV,UAAU,yBACV,WAAS,4BACT,UAAS,wBACT,WAAU,sCACV,UAAS,mBACT,WAAU,sBACV,WAAU,2BACV,WAAU,8BACV,WAAS,kBACT,WAAU,qBACV,kCACA,WAAS,6BACT,WAAU,qCACV,UAAS,gCACT,WAAU,wBACV,oCACA,WAAS,6BACT,WAAU,qBACV,UAAS,wBACT,WAAU,4BACV,WAAU,mBACV,WAAU,uBACV,WAAU,YACV,WAAU,wBACV,WAAU,gBACV,WAAS,YACT,WAAU,wBACV,WAAU,kBACV,WAAU,qBACV,UAAS,yBACT,WAAU,eACV,WAAU,YACV,gCACA,WAAU,qBACV,WAAU,eACV,WAAU,cACV,2BACA,WAAS,mBACT,WAAU,mBACV,WAAU,4BACV,WAAU,eACV,WAAU,oBACV,WAAU,yBACV,WAAU,kBACV,WAAU,8BACV,qCACA,WAAU,kBACV,kCACA,WAAS,YACT,WAAU,gBACV,WAAU,kBACV,WAAS,6BACT,WAAU,UACV,WAAU,YACV,WAAS,wBACT,WAAU,iCACV,WAAU,YACV,WAAU,YACV,qCACA,WAAU,6BACV,WAAU,sBACV,WAAU,4BACV,WAAS,UACT,WAAU,cACV,2BACA,UAAS,qBACT,WAAU,iBACV,WAAS,qBACT,4BACA,WAAU,eACV,UAAS,eACT,WAAU,kBACV,qBACA,WAAU,WACV,WAAU,uBACV,WAAU,eACV,WAAU,WACV,WAAS,kBACT,WAAU,oBACV,WAAU,cACV,WAAS,+BACT,WAAU,sBACV,WAAU,cACV,WAAU,UACV,WAAS,wBACT,WAAU,mBACV,gCACA,WAAS,yBACT,WAAS,oBACT,WAAU,0BACV,WAAS,2BACT,WAAS,wBACT,gCACA,WAAU,iCACV,WAAS,gCACT,WAAU,uBACV,WAAU,iCACV,WAAS,eACT,6BACA,WAAU,aACV,WAAU,aACV,sCACA,WAAS,2BACT,WAAS,gBACT,WAAU,uBACV,uBACA,8BACA,WAAU,kBACV,WAAU,kBACV,WAAU,uBACV,WAAU,cACV,mCACA,oCACA,WAAU,wBACV,8CACA,WAAU,6BACV,WAAU,yBACV,WAAU,uBACV,sCACA,WAAU,iBACV,WAAU,2BACV,UAAS,yBACT,WAAU,yBACV,kCACA,WAAU,sBACV,WAAU,gCACV,gCACA,WAAU,kCACV,gDACA,WAAU,0BACV,WAAU,WACV,mBACA,WAAU,cACV,WAAU,kBACV,WAAU,mBACV,UAAS,oBACT,WAAU,iBACV,WAAU,kBACV,WAAU,oBACV,8BACA,WAAU,aACV,WAAU,iBACV,WAAU,UACV,WAAU,gBACV,WAAU,oBACV,WAAU,cACV,WAAU,mCACV,+CACA,WAAU,+BACV,WAAS,yBACT,WAAU,wBACV,WAAU,+BACV,WAAU,uBACV,WAAU,eACV,WAAU,cACV,WAAS,uBACT,WAAU,gCACV,WAAU,uCACV,UAAS,oBACT,WAAU,wBACV,WAAS,wBACT,sCACA,WAAU,qBACV,WAAU,yBACV,UAAS,mBACT,WAAU,gBACV,WAAU,uBACV,WAAS,yBACT,WAAS,uBACT,WAAU,+BACV,WAAU,yBACV,WAAU,yBACV,oCACA,WAAU,mBACV,WAAU,2BACV,UAAS,iCACT,WAAU,6BACV,qCACA,WAAU,0BACV,WAAU,2BACV,2BACA,WAAS,yBACT,WAAU,6BACV,WAAU,8BACV,WAAU,sBACV,WAAS,mCACT,WAAU,iCACV,2CACA,WAAU,sCACV,WAAU,oCACV,qCACA,WAAU,qBACV,WAAU,iBACV,WAAS,mBACT,0BACA,WAAU,wBACV,WAAS,4BACT,oCACA,gCACA,WAAU,qBACV,sCACA,qCACA,WAAU,cACV,WAAU,kBACV,UAAS,wBACT,WAAU,qCACV,WAAU,iBACV,oCACA,WAAS,sBACT,WAAU,8BACV,WAAU,8BACV,WAAU,qBACV,UAAS,kBACT,mDACA,WAAU,oBACV,WAAU,2BACV,WAAU,wBACV,WAAU,uBACV,WAAU,cACV,WAAU,kCACV,WAAU,oCACV,WAAU,+BACV,WAAS,kBACT,WAAU,uBACV,WAAS,8BACT,WAAU,uBACV,WAAU,2BACV,WAAU,UACV,WAAS,cACT,WAAU,UACV,WAAU,gCACV,sBACA,WAAS,sBACT,WAAU,0BACV,WAAU,oBACV,WAAS,eACT,WAAU,uBACV,WAAS,oCACT,WAAS,oBACT,WAAS,8BACT,WAAU,oBACV,WAAU,YACV,WAAU,gBACV,WAAU,mBACV,WAAS,uBACT,2BACA,WAAU,gBACV,WAAU,yBACV,WAAU,4BACV,WAAU,oBACV,WAAU,4BACV,WAAU,UACV,WAAS,UACT,WAAU,uBACV,WAAU,sBACV,WAAU,cACV,WAAU,iCACV,WAAU,iBACV,WAAU,qBACV,UAAS,gBACT,WAAU,WACV,WAAU,iBACV,WAAU,qBACV,WAAU,eACV,WAAU,oBACV,kCACA,WAAS,6BACT,WAAU,iCACV,2BACA,WAAU,qBACV,sBACA,WAAU,sBACV,WAAU,mBACV,WAAU,uBACV,qBACA,WAAU,iBACV,WAAU,qBACV,yBACA,gCACA,WAAU,wBACV,WAAU,6BACV,WAAU,0BACV,WAAU,mCACV,WAAU,2BACV,WAAU,+BACV,UAAS,2BACT,WAAS,kCACT,WAAS,6BACT,WAAU,oBACV,WAAU,4BACV,WAAU,oBACV,kCACA,WAAS,iCACT,WAAU,yBACV,WAAU,+BACV,sCACA,WAAU,+BACV,WAAU,sCACV,WAAU,gDACV,WAAU,+BACV,WAAU,sCACV,WAAU,0BACV,WAAS,+BACT,UAAS,sBACT,WAAU,4BACV,WAAU,2BACV,yCACA,WAAU,6BACV,WAAU,wBACV,WAAU,2BACV,WAAU,6BACV,WAAS,iCACT,WAAS,6BACT,WAAS,oCACT,yCACA,WAAU,gBACV,WAAU,gBACV,WAAU,0BACV,mCACA,WAAU,6BACV,WAAU,aACV,WAAU,aACV,4BACH,0EC3yBK,WAAO,yCAEH,yBACF,oDACH,kBAED,WAAM,qCACI,4BACN,WAAM,2BACN,8CACM,8BACN,8BACA,0CACH,oBAED,WAAM,6BACF,4BACA,WAAM,gCACD,yBACD,uBACH,iDACD,2CACH,gCAEc,WACX,WAAM,2BACN,cACA,UAAI,UA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","sources":["webpack://ciqo/./node_modules/@material-ui/icons/AccountTree.js","webpack://ciqo/./node_modules/@material-ui/icons/Add.js","webpack://ciqo/./node_modules/@material-ui/icons/Apps.js","webpack://ciqo/./node_modules/@material-ui/icons/Check.js","webpack://ciqo/./node_modules/@material-ui/icons/ChevronLeft.js","webpack://ciqo/./node_modules/@material-ui/icons/ChevronRight.js","webpack://ciqo/./node_modules/@material-ui/icons/Clear.js","webpack://ciqo/./node_modules/@material-ui/icons/Crop.js","webpack://ciqo/./node_modules/@material-ui/icons/Description.js","webpack://ciqo/./node_modules/@material-ui/icons/ExpandMore.js","webpack://ciqo/./node_modules/@material-ui/icons/FolderOpenOutlined.js","webpack://ciqo/./node_modules/@material-ui/icons/GetApp.js","webpack://ciqo/./node_modules/@material-ui/icons/KeyboardBackspace.js","webpack://ciqo/./node_modules/@material-ui/icons/Menu.js","webpack://ciqo/./node_modules/@material-ui/icons/MoreVert.js","webpack://ciqo/./node_modules/@material-ui/icons/NavigateNext.js","webpack://ciqo/./node_modules/@material-ui/icons/PhotoCamera.js","webpack://ciqo/./node_modules/@material-ui/icons/PowerSettingsNew.js","webpack://ciqo/./node_modules/@material-ui/icons/RotateLeft.js","webpack://ciqo/./node_modules/@material-ui/icons/Search.js","webpack://ciqo/./node_modules/@material-ui/icons/Straighten.js","webpack://ciqo/./node_modules/@material-ui/icons/utils/createSvgIcon.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/internal/svg-icons/FirstPage.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/internal/svg-icons/LastPage.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/internal/svg-icons/NavigateBefore.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/internal/svg-icons/NavigateNext.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/PaginationItem/PaginationItem.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/Pagination/Pagination.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/Pagination/usePagination.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/TreeItem/TreeItem.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/TreeView/TreeView.js","webpack://ciqo/./node_modules/@material-ui/lab/esm/TreeView/TreeViewContext.js","webpack://ciqo/./node_modules/@mui/icons-material/ArrowDropDown.js","webpack://ciqo/./node_modules/@mui/icons-material/ArrowRight.js","webpack://ciqo/./node_modules/@mui/icons-material/Clear.js","webpack://ciqo/./node_modules/@mui/icons-material/Close.js","webpack://ciqo/./node_modules/@mui/icons-material/Crop.js","webpack://ciqo/./node_modules/@mui/icons-material/Delete.js","webpack://ciqo/./node_modules/@mui/icons-material/Description.js","webpack://ciqo/./node_modules/@mui/icons-material/Download.js","webpack://ciqo/./node_modules/@mui/icons-material/FactCheck.js","webpack://ciqo/./node_modules/@mui/icons-material/FileUpload.js","webpack://ciqo/./node_modules/@mui/icons-material/Fullscreen.js","webpack://ciqo/./node_modules/@mui/icons-material/FullscreenExit.js","webpack://ciqo/./node_modules/@mui/icons-material/Info.js","webpack://ciqo/./node_modules/@mui/icons-material/LibraryAdd.js","webpack://ciqo/./node_modules/@mui/icons-material/Map.js","webpack://ciqo/./node_modules/@mui/icons-material/MoreVert.js","webpack://ciqo/./node_modules/@mui/icons-material/Refresh.js","webpack://ciqo/./node_modules/@mui/icons-material/Straighten.js","webpack://ciqo/./node_modules/@mui/icons-material/ViewInAr.js","webpack://ciqo/./node_modules/@mui/icons-material/Visibility.js","webpack://ciqo/./node_modules/@mui/icons-material/VisibilityOff.js","webpack://ciqo/./node_modules/@mui/icons-material/utils/createSvgIcon.js","webpack://ciqo/./node_modules/moment/moment.js","webpack://ciqo/./node_modules/src/IFC/components/IFCModel.ts","webpack://ciqo/./node_modules/src/IFC/components/IFCParser.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/Serializer.ts","webpack://ciqo/./node_modules/src/IFC/components/subsets/ItemsMap.ts","webpack://ciqo/./node_modules/src/IFC/components/subsets/SubsetUtils.ts","webpack://ciqo/./node_modules/src/IFC/components/subsets/SubsetCreator.ts","webpack://ciqo/./node_modules/src/IFC/components/subsets/SubsetManager.ts","webpack://ciqo/./node_modules/src/IFC/BaseDefinitions.ts","webpack://ciqo/./node_modules/src/IFC/components/properties/BasePropertyManager.ts","webpack://ciqo/./node_modules/src/IFC/components/IFCElementsMap.ts","webpack://ciqo/./node_modules/src/IFC/components/properties/WebIfcPropertyManager.ts","webpack://ciqo/./node_modules/src/IFC/components/IfcTypesMap.ts","webpack://ciqo/./node_modules/src/IFC/components/properties/JSONPropertyManager.ts","webpack://ciqo/./node_modules/src/IFC/components/properties/PropertyManager.ts","webpack://ciqo/./node_modules/src/IFC/components/TypeManager.ts","webpack://ciqo/./node_modules/src/IFC/components/BvhManager.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/BaseDefinitions.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/Vector.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/IfcGeometry.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/FlatMesh.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/FlatMeshVector.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/Material.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/Geometry.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/serializer/Mesh.ts","webpack://ciqo/./node_modules/src/IFC/components/sequence/Data.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/handlers/PropertyHandler.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/handlers/WebIfcHandler.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/handlers/WorkerStateHandler.ts","webpack://ciqo/./node_modules/src/IFC/indexedDB/IndexedDatabase.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/handlers/ParserHandler.ts","webpack://ciqo/./node_modules/src/IFC/web-workers/IFCWorkerHandler.ts","webpack://ciqo/./node_modules/src/IFC/components/MemoryCleaner.ts","webpack://ciqo/./node_modules/src/IFC/components/IFCUtils.ts","webpack://ciqo/./node_modules/bim-fragment/geometry-utils.js","webpack://ciqo/./node_modules/three/src/math/Vector4.js","webpack://ciqo/./node_modules/three/src/math/MathUtils.js","webpack://ciqo/./node_modules/three/src/math/Quaternion.js","webpack://ciqo/./node_modules/three/src/math/Vector3.js","webpack://ciqo/./node_modules/three/src/math/Vector2.js","webpack://ciqo/./node_modules/three/src/math/Color.js","webpack://ciqo/./node_modules/three/src/constants.js","webpack://ciqo/./node_modules/three/src/core/BufferAttribute.js","webpack://ciqo/./node_modules/three/examples/jsm/exporters/GLTFExporter.js","webpack://ciqo/./node_modules/bim-fragment/fragment-mesh.js","webpack://ciqo/./node_modules/bim-fragment/blocks-map.js","webpack://ciqo/./node_modules/bim-fragment/blocks.js","webpack://ciqo/./node_modules/bim-fragment/bvh.js","webpack://ciqo/./node_modules/bim-fragment/fragment.js","webpack://ciqo/./node_modules/src/IFC/components/FragmentParser.ts","webpack://ciqo/./node_modules/src/IFC/components/IFCManager.ts","webpack://ciqo/./node_modules/src/IFCLoader.ts","webpack://ciqo/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://ciqo/./node_modules/@babel/runtime/helpers/interopRequireWildcard.js","webpack://ciqo/./node_modules/@babel/runtime/helpers/typeof.js","webpack://ciqo/./module-federation/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://ciqo/./module-federation/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z\"\n}), 'AccountTree');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z\"\n}), 'Apps');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"\n}), 'Check');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), 'ChevronLeft');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'ChevronRight');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z\"\n}), 'Crop');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"\n}), 'Description');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z\"\n}), 'FolderOpenOutlined');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n}), 'GetApp');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z\"\n}), 'KeyboardBackspace');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"\n}), 'Menu');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n}), 'MoreVert');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"3.2\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"\n})), 'PhotoCamera');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z\"\n}), 'PowerSettingsNew');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n}), 'RotateLeft');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n}), 'Search');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z\"\n}), 'Straighten');\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _utils.createSvgIcon;\n  }\n});\n\nvar _utils = require(\"@material-ui/core/utils\");","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z\"\n}), 'FirstPage');","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z\"\n}), 'LastPage');","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n}), 'NavigateBefore');","import * as React from 'react';\nimport { createSvgIcon } from '@material-ui/core/utils';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n}), 'NavigateNext');","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { alpha, useTheme, withStyles } from '@material-ui/core/styles';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport FirstPageIcon from '../internal/svg-icons/FirstPage';\nimport LastPageIcon from '../internal/svg-icons/LastPage';\nimport NavigateBeforeIcon from '../internal/svg-icons/NavigateBefore';\nimport NavigateNextIcon from '../internal/svg-icons/NavigateNext';\nimport { capitalize } from '@material-ui/core/utils';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.body2, {\n      borderRadius: 32 / 2,\n      textAlign: 'center',\n      boxSizing: 'border-box',\n      minWidth: 32,\n      height: 32,\n      padding: '0 6px',\n      margin: '0 3px',\n      color: theme.palette.text.primary\n    }),\n\n    /* Styles applied to the root element if `type=\"page\"`. */\n    page: {\n      transition: theme.transitions.create(['color', 'background-color'], {\n        duration: theme.transitions.duration.short\n      }),\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      },\n      '&$focusVisible': {\n        backgroundColor: theme.palette.action.focus\n      },\n      '&$selected': {\n        backgroundColor: theme.palette.action.selected,\n        '&:hover, &$focusVisible': {\n          backgroundColor: alpha(theme.palette.action.selected, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n          // Reset on touch devices, it doesn't add specificity\n          '@media (hover: none)': {\n            backgroundColor: theme.palette.action.selected\n          }\n        },\n        '&$disabled': {\n          opacity: 1,\n          color: theme.palette.action.disabled,\n          backgroundColor: theme.palette.action.selected\n        }\n      },\n      '&$disabled': {\n        opacity: theme.palette.action.disabledOpacity\n      }\n    },\n\n    /* Styles applied applied to the root element if `size=\"small\"`. */\n    sizeSmall: {\n      minWidth: 26,\n      height: 26,\n      borderRadius: 26 / 2,\n      margin: '0 1px',\n      padding: '0 4px',\n      '& $icon': {\n        fontSize: theme.typography.pxToRem(18)\n      }\n    },\n\n    /* Styles applied applied to the root element if `size=\"large\"`. */\n    sizeLarge: {\n      minWidth: 40,\n      height: 40,\n      borderRadius: 40 / 2,\n      padding: '0 10px',\n      fontSize: theme.typography.pxToRem(15),\n      '& $icon': {\n        fontSize: theme.typography.pxToRem(22)\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"text\"` and `color=\"primary\"`. */\n    textPrimary: {\n      '&$selected': {\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        '&:hover, &$focusVisible': {\n          backgroundColor: theme.palette.primary.dark,\n          // Reset on touch devices, it doesn't add specificity\n          '@media (hover: none)': {\n            backgroundColor: theme.palette.primary.main\n          }\n        },\n        '&$disabled': {\n          color: theme.palette.action.disabled\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"text\"` and `color=\"secondary\"`. */\n    textSecondary: {\n      '&$selected': {\n        color: theme.palette.secondary.contrastText,\n        backgroundColor: theme.palette.secondary.main,\n        '&:hover, &$focusVisible': {\n          backgroundColor: theme.palette.secondary.dark,\n          // Reset on touch devices, it doesn't add specificity\n          '@media (hover: none)': {\n            backgroundColor: theme.palette.secondary.main\n          }\n        },\n        '&$disabled': {\n          color: theme.palette.action.disabled\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `outlined=\"true\"`. */\n    outlined: {\n      border: \"1px solid \".concat(theme.palette.type === 'light' ? 'rgba(0, 0, 0, 0.23)' : 'rgba(255, 255, 255, 0.23)'),\n      '&$selected': {\n        '&$disabled': {\n          border: \"1px solid \".concat(theme.palette.action.disabledBackground)\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"primary\"`. */\n    outlinedPrimary: {\n      '&$selected': {\n        color: theme.palette.primary.main,\n        border: \"1px solid \".concat(alpha(theme.palette.primary.main, 0.5)),\n        backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.activatedOpacity),\n        '&:hover, &$focusVisible': {\n          backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.activatedOpacity + theme.palette.action.hoverOpacity),\n          // Reset on touch devices, it doesn't add specificity\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        },\n        '&$disabled': {\n          color: theme.palette.action.disabled\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"secondary\"`. */\n    outlinedSecondary: {\n      '&$selected': {\n        color: theme.palette.secondary.main,\n        border: \"1px solid \".concat(alpha(theme.palette.secondary.main, 0.5)),\n        backgroundColor: alpha(theme.palette.secondary.main, theme.palette.action.activatedOpacity),\n        '&:hover, &$focusVisible': {\n          backgroundColor: alpha(theme.palette.secondary.main, theme.palette.action.activatedOpacity + theme.palette.action.hoverOpacity),\n          // Reset on touch devices, it doesn't add specificity\n          '@media (hover: none)': {\n            backgroundColor: 'transparent'\n          }\n        },\n        '&$disabled': {\n          color: theme.palette.action.disabled\n        }\n      }\n    },\n\n    /* Styles applied to the root element if `rounded=\"true\"`. */\n    rounded: {\n      borderRadius: theme.shape.borderRadius\n    },\n\n    /* Styles applied to the root element if `type=\"start-ellipsis\"` or `type=\"end-ellipsis\"`. */\n    ellipsis: {\n      height: 'auto',\n      '&$disabled': {\n        opacity: theme.palette.action.disabledOpacity\n      }\n    },\n\n    /* Pseudo-class applied to the root element if keyboard focused. */\n    focusVisible: {},\n\n    /* Pseudo-class applied to the root element if `disabled={true}`. */\n    disabled: {},\n\n    /* Pseudo-class applied to the root element if `selected={true}`. */\n    selected: {},\n\n    /* Styles applied to the icon element. */\n    icon: {\n      fontSize: theme.typography.pxToRem(20),\n      margin: '0 -8px'\n    }\n  };\n};\nvar PaginationItem = /*#__PURE__*/React.forwardRef(function PaginationItem(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'standard' : _props$color,\n      component = props.component,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      page = props.page,\n      _props$selected = props.selected,\n      selected = _props$selected === void 0 ? false : _props$selected,\n      _props$shape = props.shape,\n      shape = _props$shape === void 0 ? 'round' : _props$shape,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'page' : _props$type,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'text' : _props$variant,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"color\", \"component\", \"disabled\", \"page\", \"selected\", \"shape\", \"size\", \"type\", \"variant\"]);\n\n  var theme = useTheme();\n  var normalizedIcons = theme.direction === 'rtl' ? {\n    previous: NavigateNextIcon,\n    next: NavigateBeforeIcon,\n    last: FirstPageIcon,\n    first: LastPageIcon\n  } : {\n    previous: NavigateBeforeIcon,\n    next: NavigateNextIcon,\n    first: FirstPageIcon,\n    last: LastPageIcon\n  };\n  var Icon = normalizedIcons[type];\n  return type === 'start-ellipsis' || type === 'end-ellipsis' ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: clsx(classes.root, classes.ellipsis, disabled && classes.disabled, size !== 'medium' && classes[\"size\".concat(capitalize(size))])\n  }, \"\\u2026\") : /*#__PURE__*/React.createElement(ButtonBase, _extends({\n    ref: ref,\n    component: component,\n    disabled: disabled,\n    focusVisibleClassName: classes.focusVisible,\n    className: clsx(classes.root, classes.page, classes[variant], classes[shape], className, color !== 'standard' && classes[\"\".concat(variant).concat(capitalize(color))], disabled && classes.disabled, selected && classes.selected, size !== 'medium' && classes[\"size\".concat(capitalize(size))])\n  }, other), type === 'page' && page, Icon ? /*#__PURE__*/React.createElement(Icon, {\n    className: classes.icon\n  }) : null);\n});\nprocess.env.NODE_ENV !== \"production\" ? PaginationItem.propTypes = {\n  /**\n   * @ignore\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The active color.\n   */\n  color: PropTypes.oneOf(['standard', 'primary', 'secondary']),\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, the item will be disabled.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * The current page number.\n   */\n  page: PropTypes.number,\n\n  /**\n   * If `true` the pagination item is selected.\n   */\n  selected: PropTypes.bool,\n\n  /**\n   * The shape of the pagination item.\n   */\n  shape: PropTypes.oneOf(['round', 'rounded']),\n\n  /**\n   * The size of the pagination item.\n   */\n  size: PropTypes.oneOf(['small', 'medium', 'large']),\n\n  /**\n   * The type of pagination item.\n   */\n  type: PropTypes.oneOf(['page', 'first', 'last', 'next', 'previous', 'start-ellipsis', 'end-ellipsis']),\n\n  /**\n   * The pagination item variant.\n   */\n  variant: PropTypes.oneOf(['text', 'outlined'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiPaginationItem'\n})(PaginationItem);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { withStyles } from '@material-ui/core/styles';\nimport usePagination from './usePagination';\nimport PaginationItem from '../PaginationItem';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {},\n\n  /* Styles applied to the ul element. */\n  ul: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    padding: 0,\n    margin: 0,\n    listStyle: 'none'\n  }\n};\n\nfunction defaultGetAriaLabel(type, page, selected) {\n  if (type === 'page') {\n    return \"\".concat(selected ? '' : 'Go to ', \"page \").concat(page);\n  }\n\n  return \"Go to \".concat(type, \" page\");\n}\n\nvar Pagination = /*#__PURE__*/React.forwardRef(function Pagination(props, ref) {\n  var boundaryCount = props.boundaryCount,\n      classes = props.classes,\n      className = props.className,\n      _props$color = props.color,\n      color = _props$color === void 0 ? 'standard' : _props$color,\n      count = props.count,\n      defaultPage = props.defaultPage,\n      disabled = props.disabled,\n      _props$getItemAriaLab = props.getItemAriaLabel,\n      getItemAriaLabel = _props$getItemAriaLab === void 0 ? defaultGetAriaLabel : _props$getItemAriaLab,\n      hideNextButton = props.hideNextButton,\n      hidePrevButton = props.hidePrevButton,\n      onChange = props.onChange,\n      page = props.page,\n      _props$renderItem = props.renderItem,\n      renderItem = _props$renderItem === void 0 ? function (item) {\n    return /*#__PURE__*/React.createElement(PaginationItem, item);\n  } : _props$renderItem,\n      _props$shape = props.shape,\n      shape = _props$shape === void 0 ? 'round' : _props$shape,\n      showFirstButton = props.showFirstButton,\n      showLastButton = props.showLastButton,\n      siblingCount = props.siblingCount,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'medium' : _props$size,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'text' : _props$variant,\n      other = _objectWithoutProperties(props, [\"boundaryCount\", \"classes\", \"className\", \"color\", \"count\", \"defaultPage\", \"disabled\", \"getItemAriaLabel\", \"hideNextButton\", \"hidePrevButton\", \"onChange\", \"page\", \"renderItem\", \"shape\", \"showFirstButton\", \"showLastButton\", \"siblingCount\", \"size\", \"variant\"]);\n\n  var _usePagination = usePagination(_extends({}, props, {\n    componentName: 'Pagination'\n  })),\n      items = _usePagination.items;\n\n  return /*#__PURE__*/React.createElement(\"nav\", _extends({\n    \"aria-label\": \"pagination navigation\",\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), /*#__PURE__*/React.createElement(\"ul\", {\n    className: classes.ul\n  }, items.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: index\n    }, renderItem(_extends({}, item, {\n      color: color,\n      'aria-label': getItemAriaLabel(item.type, item.page, item.selected),\n      shape: shape,\n      size: size,\n      variant: variant\n    })));\n  })));\n}); // @default tags synced with default values from usePagination\n\nprocess.env.NODE_ENV !== \"production\" ? Pagination.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * Number of always visible pages at the beginning and end.\n   * @default 1\n   */\n  boundaryCount: PropTypes.number,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The active color.\n   */\n  color: PropTypes.oneOf(['primary', 'secondary', 'standard']),\n\n  /**\n   * The total number of pages.\n   * @default 1\n   */\n  count: PropTypes.number,\n\n  /**\n   * The page selected by default when the component is uncontrolled.\n   * @default 1\n   */\n  defaultPage: PropTypes.number,\n\n  /**\n   * If `true`, the pagination component will be disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Accepts a function which returns a string value that provides a user-friendly name for the current page.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   *\n   * @param {string} type The link or button type to format ('page' | 'first' | 'last' | 'next' | 'previous'). Defaults to 'page'.\n   * @param {number} page The page number to format.\n   * @param {bool} selected If true, the current page is selected.\n   * @returns {string}\n   */\n  getItemAriaLabel: PropTypes.func,\n\n  /**\n   * If `true`, hide the next-page button.\n   * @default false\n   */\n  hideNextButton: PropTypes.bool,\n\n  /**\n   * If `true`, hide the previous-page button.\n   * @default false\n   */\n  hidePrevButton: PropTypes.bool,\n\n  /**\n   * Callback fired when the page is changed.\n   *\n   * @param {object} event The event source of the callback.\n   * @param {number} page The page selected.\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * The current page.\n   */\n  page: PropTypes.number,\n\n  /**\n   * Render the item.\n   *\n   * @param {PaginationRenderItemParams} params The props to spread on a PaginationItem.\n   * @returns {ReactNode}\n   */\n  renderItem: PropTypes.func,\n\n  /**\n   * The shape of the pagination items.\n   */\n  shape: PropTypes.oneOf(['round', 'rounded']),\n\n  /**\n   * If `true`, show the first-page button.\n   * @default false\n   */\n  showFirstButton: PropTypes.bool,\n\n  /**\n   * If `true`, show the last-page button.\n   * @default false\n   */\n  showLastButton: PropTypes.bool,\n\n  /**\n   * Number of always visible pages before and after the current page.\n   * @default 1\n   */\n  siblingCount: PropTypes.number,\n\n  /**\n   * The size of the pagination component.\n   */\n  size: PropTypes.oneOf(['large', 'medium', 'small']),\n\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf(['outlined', 'text'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiPagination'\n})(Pagination);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { useControlled } from '@material-ui/core/utils';\nexport default function usePagination() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  // keep default values in sync with @default tags in Pagination.propTypes\n  var _props$boundaryCount = props.boundaryCount,\n      boundaryCount = _props$boundaryCount === void 0 ? 1 : _props$boundaryCount,\n      _props$componentName = props.componentName,\n      componentName = _props$componentName === void 0 ? 'usePagination' : _props$componentName,\n      _props$count = props.count,\n      count = _props$count === void 0 ? 1 : _props$count,\n      _props$defaultPage = props.defaultPage,\n      defaultPage = _props$defaultPage === void 0 ? 1 : _props$defaultPage,\n      _props$disabled = props.disabled,\n      disabled = _props$disabled === void 0 ? false : _props$disabled,\n      _props$hideNextButton = props.hideNextButton,\n      hideNextButton = _props$hideNextButton === void 0 ? false : _props$hideNextButton,\n      _props$hidePrevButton = props.hidePrevButton,\n      hidePrevButton = _props$hidePrevButton === void 0 ? false : _props$hidePrevButton,\n      handleChange = props.onChange,\n      pageProp = props.page,\n      _props$showFirstButto = props.showFirstButton,\n      showFirstButton = _props$showFirstButto === void 0 ? false : _props$showFirstButto,\n      _props$showLastButton = props.showLastButton,\n      showLastButton = _props$showLastButton === void 0 ? false : _props$showLastButton,\n      _props$siblingCount = props.siblingCount,\n      siblingCount = _props$siblingCount === void 0 ? 1 : _props$siblingCount,\n      other = _objectWithoutProperties(props, [\"boundaryCount\", \"componentName\", \"count\", \"defaultPage\", \"disabled\", \"hideNextButton\", \"hidePrevButton\", \"onChange\", \"page\", \"showFirstButton\", \"showLastButton\", \"siblingCount\"]);\n\n  var _useControlled = useControlled({\n    controlled: pageProp,\n    default: defaultPage,\n    name: componentName,\n    state: 'page'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      page = _useControlled2[0],\n      setPageState = _useControlled2[1];\n\n  var handleClick = function handleClick(event, value) {\n    if (!pageProp) {\n      setPageState(value);\n    }\n\n    if (handleChange) {\n      handleChange(event, value);\n    }\n  }; // https://dev.to/namirsab/comment/2050\n\n\n  var range = function range(start, end) {\n    var length = end - start + 1;\n    return Array.from({\n      length: length\n    }, function (_, i) {\n      return start + i;\n    });\n  };\n\n  var startPages = range(1, Math.min(boundaryCount, count));\n  var endPages = range(Math.max(count - boundaryCount + 1, boundaryCount + 1), count);\n  var siblingsStart = Math.max(Math.min( // Natural start\n  page - siblingCount, // Lower boundary when page is high\n  count - boundaryCount - siblingCount * 2 - 1), // Greater than startPages\n  boundaryCount + 2);\n  var siblingsEnd = Math.min(Math.max( // Natural end\n  page + siblingCount, // Upper boundary when page is low\n  boundaryCount + siblingCount * 2 + 2), // Less than endPages\n  endPages[0] - 2); // Basic list of items to render\n  // e.g. itemList = ['first', 'previous', 1, 'ellipsis', 4, 5, 6, 'ellipsis', 10, 'next', 'last']\n\n  var itemList = [].concat(_toConsumableArray(showFirstButton ? ['first'] : []), _toConsumableArray(hidePrevButton ? [] : ['previous']), _toConsumableArray(startPages), _toConsumableArray(siblingsStart > boundaryCount + 2 ? ['start-ellipsis'] : boundaryCount + 1 < count - boundaryCount ? [boundaryCount + 1] : []), _toConsumableArray(range(siblingsStart, siblingsEnd)), _toConsumableArray(siblingsEnd < count - boundaryCount - 1 ? ['end-ellipsis'] : count - boundaryCount > boundaryCount ? [count - boundaryCount] : []), _toConsumableArray(endPages), _toConsumableArray(hideNextButton ? [] : ['next']), _toConsumableArray(showLastButton ? ['last'] : [])); // Map the button type to its page number\n\n  var buttonPage = function buttonPage(type) {\n    switch (type) {\n      case 'first':\n        return 1;\n\n      case 'previous':\n        return page - 1;\n\n      case 'next':\n        return page + 1;\n\n      case 'last':\n        return count;\n\n      default:\n        return null;\n    }\n  }; // Convert the basic item list to PaginationItem props objects\n\n\n  var items = itemList.map(function (item) {\n    return typeof item === 'number' ? {\n      onClick: function onClick(event) {\n        handleClick(event, item);\n      },\n      type: 'page',\n      page: item,\n      selected: item === page,\n      disabled: disabled,\n      'aria-current': item === page ? 'true' : undefined\n    } : {\n      onClick: function onClick(event) {\n        handleClick(event, buttonPage(item));\n      },\n      type: item,\n      page: buttonPage(item),\n      selected: false,\n      disabled: disabled || item.indexOf('ellipsis') === -1 && (item === 'next' || item === 'last' ? page >= count : page <= 1)\n    };\n  });\n  return _extends({\n    items: items\n  }, other);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n\n/* eslint-disable jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions  */\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport { alpha, withStyles, useTheme } from '@material-ui/core/styles';\nimport { useForkRef } from '@material-ui/core/utils';\nimport TreeViewContext from '../TreeView/TreeViewContext';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      listStyle: 'none',\n      margin: 0,\n      padding: 0,\n      outline: 0,\n      WebkitTapHighlightColor: 'transparent',\n      '&:focus > $content $label': {\n        backgroundColor: theme.palette.action.hover\n      },\n      '&$selected > $content $label': {\n        backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n      },\n      '&$selected > $content $label:hover, &$selected:focus > $content $label': {\n        backgroundColor: alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    },\n\n    /* Pseudo-class applied to the root element when expanded. */\n    expanded: {},\n\n    /* Pseudo-class applied to the root element when selected. */\n    selected: {},\n\n    /* Styles applied to the `role=\"group\"` element. */\n    group: {\n      margin: 0,\n      padding: 0,\n      marginLeft: 17\n    },\n\n    /* Styles applied to the tree node content. */\n    content: {\n      width: '100%',\n      display: 'flex',\n      alignItems: 'center',\n      cursor: 'pointer'\n    },\n\n    /* Styles applied to the tree node icon and collapse/expand icon. */\n    iconContainer: {\n      marginRight: 4,\n      width: 15,\n      display: 'flex',\n      flexShrink: 0,\n      justifyContent: 'center',\n      '& svg': {\n        fontSize: 18\n      }\n    },\n\n    /* Styles applied to the label element. */\n    label: {\n      width: '100%',\n      paddingLeft: 4,\n      position: 'relative',\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover,\n        // Reset on touch devices, it doesn't add specificity\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    }\n  };\n};\n\nvar isPrintableCharacter = function isPrintableCharacter(str) {\n  return str && str.length === 1 && str.match(/\\S/);\n};\n\nvar TreeItem = /*#__PURE__*/React.forwardRef(function TreeItem(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      collapseIcon = props.collapseIcon,\n      endIcon = props.endIcon,\n      expandIcon = props.expandIcon,\n      iconProp = props.icon,\n      label = props.label,\n      nodeId = props.nodeId,\n      onClick = props.onClick,\n      onLabelClick = props.onLabelClick,\n      onIconClick = props.onIconClick,\n      onFocus = props.onFocus,\n      onKeyDown = props.onKeyDown,\n      onMouseDown = props.onMouseDown,\n      _props$TransitionComp = props.TransitionComponent,\n      TransitionComponent = _props$TransitionComp === void 0 ? Collapse : _props$TransitionComp,\n      TransitionProps = props.TransitionProps,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"collapseIcon\", \"endIcon\", \"expandIcon\", \"icon\", \"label\", \"nodeId\", \"onClick\", \"onLabelClick\", \"onIconClick\", \"onFocus\", \"onKeyDown\", \"onMouseDown\", \"TransitionComponent\", \"TransitionProps\"]);\n\n  var _React$useContext = React.useContext(TreeViewContext),\n      contextIcons = _React$useContext.icons,\n      focus = _React$useContext.focus,\n      focusFirstNode = _React$useContext.focusFirstNode,\n      focusLastNode = _React$useContext.focusLastNode,\n      focusNextNode = _React$useContext.focusNextNode,\n      focusPreviousNode = _React$useContext.focusPreviousNode,\n      focusByFirstCharacter = _React$useContext.focusByFirstCharacter,\n      selectNode = _React$useContext.selectNode,\n      selectRange = _React$useContext.selectRange,\n      selectNextNode = _React$useContext.selectNextNode,\n      selectPreviousNode = _React$useContext.selectPreviousNode,\n      rangeSelectToFirst = _React$useContext.rangeSelectToFirst,\n      rangeSelectToLast = _React$useContext.rangeSelectToLast,\n      selectAllNodes = _React$useContext.selectAllNodes,\n      expandAllSiblings = _React$useContext.expandAllSiblings,\n      toggleExpansion = _React$useContext.toggleExpansion,\n      isExpanded = _React$useContext.isExpanded,\n      isFocused = _React$useContext.isFocused,\n      isSelected = _React$useContext.isSelected,\n      isTabbable = _React$useContext.isTabbable,\n      multiSelect = _React$useContext.multiSelect,\n      getParent = _React$useContext.getParent,\n      mapFirstChar = _React$useContext.mapFirstChar,\n      addNodeToNodeMap = _React$useContext.addNodeToNodeMap,\n      removeNodeFromNodeMap = _React$useContext.removeNodeFromNodeMap;\n\n  var nodeRef = React.useRef(null);\n  var contentRef = React.useRef(null);\n  var handleRef = useForkRef(nodeRef, ref);\n  var icon = iconProp;\n  var expandable = Boolean(Array.isArray(children) ? children.length : children);\n  var expanded = isExpanded ? isExpanded(nodeId) : false;\n  var focused = isFocused ? isFocused(nodeId) : false;\n  var tabbable = isTabbable ? isTabbable(nodeId) : false;\n  var selected = isSelected ? isSelected(nodeId) : false;\n  var icons = contextIcons || {};\n  var theme = useTheme();\n\n  if (!icon) {\n    if (expandable) {\n      if (!expanded) {\n        icon = expandIcon || icons.defaultExpandIcon;\n      } else {\n        icon = collapseIcon || icons.defaultCollapseIcon;\n      }\n\n      if (!icon) {\n        icon = icons.defaultParentIcon;\n      }\n    } else {\n      icon = endIcon || icons.defaultEndIcon;\n    }\n  }\n\n  var handleClick = function handleClick(event) {\n    if (!focused) {\n      focus(nodeId);\n    }\n\n    var multiple = multiSelect && (event.shiftKey || event.ctrlKey || event.metaKey); // If already expanded and trying to toggle selection don't close\n\n    if (expandable && !event.defaultPrevented && !(multiple && isExpanded(nodeId))) {\n      toggleExpansion(event, nodeId);\n    }\n\n    if (multiple) {\n      if (event.shiftKey) {\n        selectRange(event, {\n          end: nodeId\n        });\n      } else {\n        selectNode(event, nodeId, true);\n      }\n    } else {\n      selectNode(event, nodeId);\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  var handleMouseDown = function handleMouseDown(event) {\n    if (event.shiftKey || event.ctrlKey || event.metaKey) {\n      event.preventDefault();\n    }\n\n    if (onMouseDown) {\n      onMouseDown(event);\n    }\n  };\n\n  var handleNextArrow = function handleNextArrow(event) {\n    if (expandable) {\n      if (expanded) {\n        focusNextNode(nodeId);\n      } else {\n        toggleExpansion(event);\n      }\n    }\n\n    return true;\n  };\n\n  var handlePreviousArrow = function handlePreviousArrow(event) {\n    if (expanded) {\n      toggleExpansion(event, nodeId);\n      return true;\n    }\n\n    var parent = getParent(nodeId);\n\n    if (parent) {\n      focus(parent);\n      return true;\n    }\n\n    return false;\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    var flag = false;\n    var key = event.key;\n\n    if (event.altKey || event.currentTarget !== event.target) {\n      return;\n    }\n\n    var ctrlPressed = event.ctrlKey || event.metaKey;\n\n    switch (key) {\n      case ' ':\n        if (nodeRef.current === event.currentTarget) {\n          if (multiSelect && event.shiftKey) {\n            flag = selectRange(event, {\n              end: nodeId\n            });\n          } else if (multiSelect) {\n            flag = selectNode(event, nodeId, true);\n          } else {\n            flag = selectNode(event, nodeId);\n          }\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'Enter':\n        if (nodeRef.current === event.currentTarget && expandable) {\n          toggleExpansion(event);\n          flag = true;\n        }\n\n        event.stopPropagation();\n        break;\n\n      case 'ArrowDown':\n        if (multiSelect && event.shiftKey) {\n          selectNextNode(event, nodeId);\n        }\n\n        focusNextNode(nodeId);\n        flag = true;\n        break;\n\n      case 'ArrowUp':\n        if (multiSelect && event.shiftKey) {\n          selectPreviousNode(event, nodeId);\n        }\n\n        focusPreviousNode(nodeId);\n        flag = true;\n        break;\n\n      case 'ArrowRight':\n        if (theme.direction === 'rtl') {\n          flag = handlePreviousArrow(event);\n        } else {\n          flag = handleNextArrow(event);\n        }\n\n        break;\n\n      case 'ArrowLeft':\n        if (theme.direction === 'rtl') {\n          flag = handleNextArrow(event);\n        } else {\n          flag = handlePreviousArrow(event);\n        }\n\n        break;\n\n      case 'Home':\n        if (multiSelect && ctrlPressed && event.shiftKey) {\n          rangeSelectToFirst(event, nodeId);\n        }\n\n        focusFirstNode();\n        flag = true;\n        break;\n\n      case 'End':\n        if (multiSelect && ctrlPressed && event.shiftKey) {\n          rangeSelectToLast(event, nodeId);\n        }\n\n        focusLastNode();\n        flag = true;\n        break;\n\n      default:\n        if (key === '*') {\n          expandAllSiblings(event, nodeId);\n          flag = true;\n        } else if (multiSelect && ctrlPressed && key.toLowerCase() === 'a') {\n          flag = selectAllNodes(event);\n        } else if (!ctrlPressed && !event.shiftKey && isPrintableCharacter(key)) {\n          focusByFirstCharacter(nodeId, key);\n          flag = true;\n        }\n\n    }\n\n    if (flag) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (!focused && event.currentTarget === event.target) {\n      focus(nodeId);\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  React.useEffect(function () {\n    if (addNodeToNodeMap) {\n      var childIds = [];\n      React.Children.forEach(children, function (child) {\n        if ( /*#__PURE__*/React.isValidElement(child) && child.props.nodeId) {\n          childIds.push(child.props.nodeId);\n        }\n      });\n      addNodeToNodeMap(nodeId, childIds);\n    }\n  }, [children, nodeId, addNodeToNodeMap]);\n  React.useEffect(function () {\n    if (removeNodeFromNodeMap) {\n      return function () {\n        removeNodeFromNodeMap(nodeId);\n      };\n    }\n\n    return undefined;\n  }, [nodeId, removeNodeFromNodeMap]);\n  React.useEffect(function () {\n    if (mapFirstChar && label) {\n      mapFirstChar(nodeId, contentRef.current.textContent.substring(0, 1).toLowerCase());\n    }\n  }, [mapFirstChar, nodeId, label]);\n  React.useEffect(function () {\n    if (focused) {\n      nodeRef.current.focus();\n    }\n  }, [focused]);\n  var ariaSelected;\n\n  if (multiSelect) {\n    ariaSelected = selected;\n  } else if (selected) {\n    // single-selection trees unset aria-selected\n    ariaSelected = true;\n  }\n\n  return /*#__PURE__*/React.createElement(\"li\", _extends({\n    className: clsx(classes.root, className, expanded && classes.expanded, selected && classes.selected),\n    role: \"treeitem\",\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    \"aria-expanded\": expandable ? expanded : null,\n    \"aria-selected\": ariaSelected,\n    ref: handleRef,\n    tabIndex: tabbable ? 0 : -1\n  }, other), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content,\n    onClick: handleClick,\n    onMouseDown: handleMouseDown,\n    ref: contentRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onIconClick,\n    className: classes.iconContainer\n  }, icon), /*#__PURE__*/React.createElement(Typography, {\n    onClick: onLabelClick,\n    component: \"div\",\n    className: classes.label\n  }, label)), children && /*#__PURE__*/React.createElement(TransitionComponent, _extends({\n    unmountOnExit: true,\n    className: classes.group,\n    in: expanded,\n    component: \"ul\",\n    role: \"group\"\n  }, TransitionProps), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? TreeItem.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The icon used to collapse the node.\n   */\n  collapseIcon: PropTypes.node,\n\n  /**\n   * The icon displayed next to a end node.\n   */\n  endIcon: PropTypes.node,\n\n  /**\n   * The icon used to expand the node.\n   */\n  expandIcon: PropTypes.node,\n\n  /**\n   * The icon to display next to the tree node's label.\n   */\n  icon: PropTypes.node,\n\n  /**\n   * The tree node label.\n   */\n  label: PropTypes.node,\n\n  /**\n   * The id of the node.\n   */\n  nodeId: PropTypes.string.isRequired,\n\n  /**\n   * @ignore\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * `onClick` handler for the icon container. Call `event.preventDefault()` to prevent `onNodeToggle` from being called.\n   */\n  onIconClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onKeyDown: PropTypes.func,\n\n  /**\n   * `onClick` handler for the label container. Call `event.preventDefault()` to prevent `onNodeToggle` from being called.\n   */\n  onLabelClick: PropTypes.func,\n\n  /**\n   * @ignore\n   */\n  onMouseDown: PropTypes.func,\n\n  /**\n   * The component used for the transition.\n   * [Follow this guide](/components/transitions/#transitioncomponent-prop) to learn more about the requirements for this component.\n   */\n  TransitionComponent: PropTypes.elementType,\n\n  /**\n   * Props applied to the [`Transition`](http://reactcommunity.org/react-transition-group/transition#Transition-props) element.\n   */\n  TransitionProps: PropTypes.object\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTreeItem'\n})(TreeItem);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useControlled } from '@material-ui/core/utils';\nimport TreeViewContext from './TreeViewContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    padding: 0,\n    margin: 0,\n    listStyle: 'none'\n  }\n};\n\nfunction arrayDiff(arr1, arr2) {\n  if (arr1.length !== arr2.length) return true;\n\n  for (var i = 0; i < arr1.length; i += 1) {\n    if (arr1[i] !== arr2[i]) return true;\n  }\n\n  return false;\n}\n\nvar findNextFirstChar = function findNextFirstChar(firstChars, startIndex, char) {\n  for (var i = startIndex; i < firstChars.length; i += 1) {\n    if (char === firstChars[i]) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar defaultExpandedDefault = [];\nvar defaultSelectedDefault = [];\nvar TreeView = /*#__PURE__*/React.forwardRef(function TreeView(props, ref) {\n  var children = props.children,\n      classes = props.classes,\n      className = props.className,\n      defaultCollapseIcon = props.defaultCollapseIcon,\n      defaultEndIcon = props.defaultEndIcon,\n      _props$defaultExpande = props.defaultExpanded,\n      defaultExpanded = _props$defaultExpande === void 0 ? defaultExpandedDefault : _props$defaultExpande,\n      defaultExpandIcon = props.defaultExpandIcon,\n      defaultParentIcon = props.defaultParentIcon,\n      _props$defaultSelecte = props.defaultSelected,\n      defaultSelected = _props$defaultSelecte === void 0 ? defaultSelectedDefault : _props$defaultSelecte,\n      _props$disableSelecti = props.disableSelection,\n      disableSelection = _props$disableSelecti === void 0 ? false : _props$disableSelecti,\n      _props$multiSelect = props.multiSelect,\n      multiSelect = _props$multiSelect === void 0 ? false : _props$multiSelect,\n      expandedProp = props.expanded,\n      onNodeSelect = props.onNodeSelect,\n      onNodeToggle = props.onNodeToggle,\n      selectedProp = props.selected,\n      other = _objectWithoutProperties(props, [\"children\", \"classes\", \"className\", \"defaultCollapseIcon\", \"defaultEndIcon\", \"defaultExpanded\", \"defaultExpandIcon\", \"defaultParentIcon\", \"defaultSelected\", \"disableSelection\", \"multiSelect\", \"expanded\", \"onNodeSelect\", \"onNodeToggle\", \"selected\"]);\n\n  var _React$useState = React.useState(null),\n      tabbable = _React$useState[0],\n      setTabbable = _React$useState[1];\n\n  var _React$useState2 = React.useState(null),\n      focusedNodeId = _React$useState2[0],\n      setFocusedNodeId = _React$useState2[1];\n\n  var nodeMap = React.useRef({});\n  var firstCharMap = React.useRef({});\n  var visibleNodes = React.useRef([]);\n\n  var _useControlled = useControlled({\n    controlled: expandedProp,\n    default: defaultExpanded,\n    name: 'TreeView',\n    state: 'expanded'\n  }),\n      _useControlled2 = _slicedToArray(_useControlled, 2),\n      expanded = _useControlled2[0],\n      setExpandedState = _useControlled2[1];\n\n  var _useControlled3 = useControlled({\n    controlled: selectedProp,\n    default: defaultSelected,\n    name: 'TreeView',\n    state: 'selected'\n  }),\n      _useControlled4 = _slicedToArray(_useControlled3, 2),\n      selected = _useControlled4[0],\n      setSelectedState = _useControlled4[1];\n  /*\n   * Status Helpers\n   */\n\n\n  var isExpanded = React.useCallback(function (id) {\n    return Array.isArray(expanded) ? expanded.indexOf(id) !== -1 : false;\n  }, [expanded]);\n  var isSelected = React.useCallback(function (id) {\n    return Array.isArray(selected) ? selected.indexOf(id) !== -1 : selected === id;\n  }, [selected]);\n\n  var isTabbable = function isTabbable(id) {\n    return tabbable === id;\n  };\n\n  var isFocused = function isFocused(id) {\n    return focusedNodeId === id;\n  };\n  /*\n   * Node Helpers\n   */\n\n\n  var getNextNode = function getNextNode(id) {\n    var nodeIndex = visibleNodes.current.indexOf(id);\n\n    if (nodeIndex !== -1 && nodeIndex + 1 < visibleNodes.current.length) {\n      return visibleNodes.current[nodeIndex + 1];\n    }\n\n    return null;\n  };\n\n  var getPreviousNode = function getPreviousNode(id) {\n    var nodeIndex = visibleNodes.current.indexOf(id);\n\n    if (nodeIndex !== -1 && nodeIndex - 1 >= 0) {\n      return visibleNodes.current[nodeIndex - 1];\n    }\n\n    return null;\n  };\n\n  var getLastNode = function getLastNode() {\n    return visibleNodes.current[visibleNodes.current.length - 1];\n  };\n\n  var getFirstNode = function getFirstNode() {\n    return visibleNodes.current[0];\n  };\n\n  var getParent = function getParent(id) {\n    return nodeMap.current[id].parent;\n  };\n\n  var getNodesInRange = function getNodesInRange(a, b) {\n    var aIndex = visibleNodes.current.indexOf(a);\n    var bIndex = visibleNodes.current.indexOf(b);\n    var start = Math.min(aIndex, bIndex);\n    var end = Math.max(aIndex, bIndex);\n    return visibleNodes.current.slice(start, end + 1);\n  };\n  /*\n   * Focus Helpers\n   */\n\n\n  var focus = function focus(id) {\n    if (id) {\n      setTabbable(id);\n      setFocusedNodeId(id);\n    }\n  };\n\n  var focusNextNode = function focusNextNode(id) {\n    return focus(getNextNode(id));\n  };\n\n  var focusPreviousNode = function focusPreviousNode(id) {\n    return focus(getPreviousNode(id));\n  };\n\n  var focusFirstNode = function focusFirstNode() {\n    return focus(getFirstNode());\n  };\n\n  var focusLastNode = function focusLastNode() {\n    return focus(getLastNode());\n  };\n\n  var focusByFirstCharacter = function focusByFirstCharacter(id, char) {\n    var start;\n    var index;\n    var lowercaseChar = char.toLowerCase();\n    var firstCharIds = [];\n    var firstChars = []; // This really only works since the ids are strings\n\n    Object.keys(firstCharMap.current).forEach(function (nodeId) {\n      var firstChar = firstCharMap.current[nodeId];\n      var map = nodeMap.current[nodeId];\n      var visible = map.parent ? isExpanded(map.parent) : true;\n\n      if (visible) {\n        firstCharIds.push(nodeId);\n        firstChars.push(firstChar);\n      }\n    }); // Get start index for search based on position of currentItem\n\n    start = firstCharIds.indexOf(id) + 1;\n\n    if (start === nodeMap.current.length) {\n      start = 0;\n    } // Check remaining slots in the menu\n\n\n    index = findNextFirstChar(firstChars, start, lowercaseChar); // If not found in remaining slots, check from beginning\n\n    if (index === -1) {\n      index = findNextFirstChar(firstChars, 0, lowercaseChar);\n    } // If match was found...\n\n\n    if (index > -1) {\n      focus(firstCharIds[index]);\n    }\n  };\n  /*\n   * Expansion Helpers\n   */\n\n\n  var toggleExpansion = function toggleExpansion(event) {\n    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : focusedNodeId;\n    var newExpanded;\n\n    if (expanded.indexOf(value) !== -1) {\n      newExpanded = expanded.filter(function (id) {\n        return id !== value;\n      });\n      setTabbable(function (oldTabbable) {\n        var map = nodeMap.current[oldTabbable];\n\n        if (oldTabbable && (map && map.parent ? map.parent.id : null) === value) {\n          return value;\n        }\n\n        return oldTabbable;\n      });\n    } else {\n      newExpanded = [value].concat(expanded);\n    }\n\n    if (onNodeToggle) {\n      onNodeToggle(event, newExpanded);\n    }\n\n    setExpandedState(newExpanded);\n  };\n\n  var expandAllSiblings = function expandAllSiblings(event, id) {\n    var map = nodeMap.current[id];\n    var parent = nodeMap.current[map.parent];\n    var diff;\n\n    if (parent) {\n      diff = parent.children.filter(function (child) {\n        return !isExpanded(child);\n      });\n    } else {\n      var topLevelNodes = nodeMap.current[-1].children;\n      diff = topLevelNodes.filter(function (node) {\n        return !isExpanded(node);\n      });\n    }\n\n    var newExpanded = expanded.concat(diff);\n\n    if (diff.length > 0) {\n      setExpandedState(newExpanded);\n\n      if (onNodeToggle) {\n        onNodeToggle(event, newExpanded);\n      }\n    }\n  };\n  /*\n   * Selection Helpers\n   */\n\n\n  var lastSelectedNode = React.useRef(null);\n  var lastSelectionWasRange = React.useRef(false);\n  var currentRangeSelection = React.useRef([]);\n\n  var handleRangeArrowSelect = function handleRangeArrowSelect(event, nodes) {\n    var base = selected;\n    var start = nodes.start,\n        next = nodes.next,\n        current = nodes.current;\n\n    if (!next || !current) {\n      return;\n    }\n\n    if (currentRangeSelection.current.indexOf(current) === -1) {\n      currentRangeSelection.current = [];\n    }\n\n    if (lastSelectionWasRange.current) {\n      if (currentRangeSelection.current.indexOf(next) !== -1) {\n        base = base.filter(function (id) {\n          return id === start || id !== current;\n        });\n        currentRangeSelection.current = currentRangeSelection.current.filter(function (id) {\n          return id === start || id !== current;\n        });\n      } else {\n        base.push(next);\n        currentRangeSelection.current.push(next);\n      }\n    } else {\n      base.push(next);\n      currentRangeSelection.current.push(current, next);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, base);\n    }\n\n    setSelectedState(base);\n  };\n\n  var handleRangeSelect = function handleRangeSelect(event, nodes) {\n    var base = selected;\n    var start = nodes.start,\n        end = nodes.end; // If last selection was a range selection ignore nodes that were selected.\n\n    if (lastSelectionWasRange.current) {\n      base = selected.filter(function (id) {\n        return currentRangeSelection.current.indexOf(id) === -1;\n      });\n    }\n\n    var range = getNodesInRange(start, end);\n    currentRangeSelection.current = range;\n    var newSelected = base.concat(range);\n    newSelected = newSelected.filter(function (id, i) {\n      return newSelected.indexOf(id) === i;\n    });\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleMultipleSelect = function handleMultipleSelect(event, value) {\n    var newSelected = [];\n\n    if (selected.indexOf(value) !== -1) {\n      newSelected = selected.filter(function (id) {\n        return id !== value;\n      });\n    } else {\n      newSelected = [value].concat(selected);\n    }\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var handleSingleSelect = function handleSingleSelect(event, value) {\n    var newSelected = multiSelect ? [value] : value;\n\n    if (onNodeSelect) {\n      onNodeSelect(event, newSelected);\n    }\n\n    setSelectedState(newSelected);\n  };\n\n  var selectNode = function selectNode(event, id) {\n    var multiple = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (id) {\n      if (multiple) {\n        handleMultipleSelect(event, id);\n      } else {\n        handleSingleSelect(event, id);\n      }\n\n      lastSelectedNode.current = id;\n      lastSelectionWasRange.current = false;\n      currentRangeSelection.current = [];\n      return true;\n    }\n\n    return false;\n  };\n\n  var selectRange = function selectRange(event, nodes) {\n    var stacked = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var _nodes$start = nodes.start,\n        start = _nodes$start === void 0 ? lastSelectedNode.current : _nodes$start,\n        end = nodes.end,\n        current = nodes.current;\n\n    if (stacked) {\n      handleRangeArrowSelect(event, {\n        start: start,\n        next: end,\n        current: current\n      });\n    } else {\n      handleRangeSelect(event, {\n        start: start,\n        end: end\n      });\n    }\n\n    lastSelectionWasRange.current = true;\n    return true;\n  };\n\n  var rangeSelectToFirst = function rangeSelectToFirst(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    return selectRange(event, {\n      start: start,\n      end: getFirstNode()\n    });\n  };\n\n  var rangeSelectToLast = function rangeSelectToLast(event, id) {\n    if (!lastSelectedNode.current) {\n      lastSelectedNode.current = id;\n    }\n\n    var start = lastSelectionWasRange.current ? lastSelectedNode.current : id;\n    return selectRange(event, {\n      start: start,\n      end: getLastNode()\n    });\n  };\n\n  var selectNextNode = function selectNextNode(event, id) {\n    return selectRange(event, {\n      end: getNextNode(id),\n      current: id\n    }, true);\n  };\n\n  var selectPreviousNode = function selectPreviousNode(event, id) {\n    return selectRange(event, {\n      end: getPreviousNode(id),\n      current: id\n    }, true);\n  };\n\n  var selectAllNodes = function selectAllNodes(event) {\n    return selectRange(event, {\n      start: getFirstNode(),\n      end: getLastNode()\n    });\n  };\n  /*\n   * Mapping Helpers\n   */\n\n\n  var addNodeToNodeMap = function addNodeToNodeMap(id, childrenIds) {\n    var currentMap = nodeMap.current[id];\n    nodeMap.current[id] = _extends({}, currentMap, {\n      children: childrenIds,\n      id: id\n    });\n    childrenIds.forEach(function (childId) {\n      var currentChildMap = nodeMap.current[childId];\n      nodeMap.current[childId] = _extends({}, currentChildMap, {\n        parent: id,\n        id: childId\n      });\n    });\n  };\n\n  var getNodesToRemove = React.useCallback(function (id) {\n    var map = nodeMap.current[id];\n    var nodes = [];\n\n    if (map) {\n      nodes.push(id);\n\n      if (map.children) {\n        nodes.concat(map.children);\n        map.children.forEach(function (node) {\n          nodes.concat(getNodesToRemove(node));\n        });\n      }\n    }\n\n    return nodes;\n  }, []);\n  var cleanUpFirstCharMap = React.useCallback(function (nodes) {\n    var newMap = _extends({}, firstCharMap.current);\n\n    nodes.forEach(function (node) {\n      if (newMap[node]) {\n        delete newMap[node];\n      }\n    });\n    firstCharMap.current = newMap;\n  }, []);\n  var removeNodeFromNodeMap = React.useCallback(function (id) {\n    var nodes = getNodesToRemove(id);\n    cleanUpFirstCharMap(nodes);\n\n    var newMap = _extends({}, nodeMap.current);\n\n    nodes.forEach(function (node) {\n      var map = newMap[node];\n\n      if (map) {\n        if (map.parent) {\n          var parentMap = newMap[map.parent];\n\n          if (parentMap && parentMap.children) {\n            var parentChildren = parentMap.children.filter(function (c) {\n              return c !== node;\n            });\n            newMap[map.parent] = _extends({}, parentMap, {\n              children: parentChildren\n            });\n          }\n        }\n\n        delete newMap[node];\n      }\n    });\n    nodeMap.current = newMap;\n    setFocusedNodeId(function (oldFocusedNodeId) {\n      if (oldFocusedNodeId === id) {\n        return null;\n      }\n\n      return oldFocusedNodeId;\n    });\n  }, [getNodesToRemove, cleanUpFirstCharMap]);\n\n  var mapFirstChar = function mapFirstChar(id, firstChar) {\n    firstCharMap.current[id] = firstChar;\n  };\n\n  var prevChildIds = React.useRef([]);\n\n  var _React$useState3 = React.useState(false),\n      childrenCalculated = _React$useState3[0],\n      setChildrenCalculated = _React$useState3[1];\n\n  React.useEffect(function () {\n    var childIds = [];\n    React.Children.forEach(children, function (child) {\n      if ( /*#__PURE__*/React.isValidElement(child) && child.props.nodeId) {\n        childIds.push(child.props.nodeId);\n      }\n    });\n\n    if (arrayDiff(prevChildIds.current, childIds)) {\n      nodeMap.current[-1] = {\n        parent: null,\n        children: childIds\n      };\n      childIds.forEach(function (id, index) {\n        if (index === 0) {\n          setTabbable(id);\n        }\n      });\n      visibleNodes.current = nodeMap.current[-1].children;\n      prevChildIds.current = childIds;\n      setChildrenCalculated(true);\n    }\n  }, [children]);\n  React.useEffect(function () {\n    var buildVisible = function buildVisible(nodes) {\n      var list = [];\n\n      for (var i = 0; i < nodes.length; i += 1) {\n        var item = nodes[i];\n        list.push(item);\n        var childs = nodeMap.current[item].children;\n\n        if (isExpanded(item) && childs) {\n          list = list.concat(buildVisible(childs));\n        }\n      }\n\n      return list;\n    };\n\n    if (childrenCalculated) {\n      visibleNodes.current = buildVisible(nodeMap.current[-1].children);\n    }\n  }, [expanded, childrenCalculated, isExpanded, children]);\n\n  var noopSelection = function noopSelection() {\n    return false;\n  };\n\n  return /*#__PURE__*/React.createElement(TreeViewContext.Provider, {\n    value: {\n      icons: {\n        defaultCollapseIcon: defaultCollapseIcon,\n        defaultExpandIcon: defaultExpandIcon,\n        defaultParentIcon: defaultParentIcon,\n        defaultEndIcon: defaultEndIcon\n      },\n      focus: focus,\n      focusFirstNode: focusFirstNode,\n      focusLastNode: focusLastNode,\n      focusNextNode: focusNextNode,\n      focusPreviousNode: focusPreviousNode,\n      focusByFirstCharacter: focusByFirstCharacter,\n      expandAllSiblings: expandAllSiblings,\n      toggleExpansion: toggleExpansion,\n      isExpanded: isExpanded,\n      isFocused: isFocused,\n      isSelected: isSelected,\n      selectNode: disableSelection ? noopSelection : selectNode,\n      selectRange: disableSelection ? noopSelection : selectRange,\n      selectNextNode: disableSelection ? noopSelection : selectNextNode,\n      selectPreviousNode: disableSelection ? noopSelection : selectPreviousNode,\n      rangeSelectToFirst: disableSelection ? noopSelection : rangeSelectToFirst,\n      rangeSelectToLast: disableSelection ? noopSelection : rangeSelectToLast,\n      selectAllNodes: disableSelection ? noopSelection : selectAllNodes,\n      isTabbable: isTabbable,\n      multiSelect: multiSelect,\n      getParent: getParent,\n      mapFirstChar: mapFirstChar,\n      addNodeToNodeMap: addNodeToNodeMap,\n      removeNodeFromNodeMap: removeNodeFromNodeMap\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", _extends({\n    role: \"tree\",\n    \"aria-multiselectable\": multiSelect,\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other), children));\n});\nprocess.env.NODE_ENV !== \"production\" ? TreeView.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The default icon used to collapse the node.\n   */\n  defaultCollapseIcon: PropTypes.node,\n\n  /**\n   * The default icon displayed next to a end node. This is applied to all\n   * tree nodes and can be overridden by the TreeItem `icon` prop.\n   */\n  defaultEndIcon: PropTypes.node,\n\n  /**\n   * Expanded node ids. (Uncontrolled)\n   */\n  defaultExpanded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * The default icon used to expand the node.\n   */\n  defaultExpandIcon: PropTypes.node,\n\n  /**\n   * The default icon displayed next to a parent node. This is applied to all\n   * parent nodes and can be overridden by the TreeItem `icon` prop.\n   */\n  defaultParentIcon: PropTypes.node,\n\n  /**\n   * Selected node ids. (Uncontrolled)\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\n   */\n  defaultSelected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]),\n\n  /**\n   * If `true` selection is disabled.\n   */\n  disableSelection: PropTypes.bool,\n\n  /**\n   * Expanded node ids. (Controlled)\n   */\n  expanded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * If true `ctrl` and `shift` will trigger multiselect.\n   */\n  multiSelect: PropTypes.bool,\n\n  /**\n   * Callback fired when tree items are selected/unselected.\n   *\n   * @param {object} event The event source of the callback\n   * @param {(array|string)} value of the selected nodes. When `multiSelect` is true\n   * this is an array of strings; when false (default) a string.\n   */\n  onNodeSelect: PropTypes.func,\n\n  /**\n   * Callback fired when tree items are expanded/collapsed.\n   *\n   * @param {object} event The event source of the callback.\n   * @param {array} nodeIds The ids of the expanded nodes.\n   */\n  onNodeToggle: PropTypes.func,\n\n  /**\n   * Selected node ids. (Controlled)\n   * When `multiSelect` is true this takes an array of strings; when false (default) a string.\n   */\n  selected: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiTreeView'\n})(TreeView);","import * as React from 'react';\n/**\n * @ignore - internal component.\n */\n\nvar TreeViewContext = React.createContext({});\n\nif (process.env.NODE_ENV !== 'production') {\n  TreeViewContext.displayName = 'TreeViewContext';\n}\n\nexport default TreeViewContext;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m7 10 5 5 5-5z\"\n}), 'ArrowDropDown');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m10 17 5-5-5-5v10z\"\n}), 'ArrowRight');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Clear');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z\"\n}), 'Crop');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"\n}), 'Description');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z\"\n}), 'Download');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  fillRule: \"evenodd\",\n  d: \"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z\"\n}), 'FactCheck');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z\"\n}), 'FileUpload');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n}), 'Fullscreen');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"\n}), 'FullscreenExit');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"\n}), 'Info');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z\"\n}), 'LibraryAdd');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z\"\n}), 'Map');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n}), 'MoreVert');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z\"\n}), 'Straighten');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"m18.25 7.6-5.5-3.18c-.46-.27-1.04-.27-1.5 0L5.75 7.6c-.46.27-.75.76-.75 1.3v6.35c0 .54.29 1.03.75 1.3l5.5 3.18c.46.27 1.04.27 1.5 0l5.5-3.18c.46-.27.75-.76.75-1.3V8.9c0-.54-.29-1.03-.75-1.3zM7 14.96v-4.62l4 2.32v4.61l-4-2.31zm5-4.03L8 8.61l4-2.31 4 2.31-4 2.32zm1 6.34v-4.61l4-2.32v4.62l-4 2.31zM7 2H3.5C2.67 2 2 2.67 2 3.5V7h2V4h3V2zm10 0h3.5c.83 0 1.5.67 1.5 1.5V7h-2V4h-3V2zM7 22H3.5c-.83 0-1.5-.67-1.5-1.5V17h2v3h3v2zm10 0h3.5c.83 0 1.5-.67 1.5-1.5V17h-2v3h-3v2z\"\n}), 'ViewInAr');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n}), 'Visibility');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z\"\n}), 'VisibilityOff');\n\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return _utils.createSvgIcon;\n  }\n});\n\nvar _utils = require(\"@mui/material/utils\");","//! moment.js\n//! version : 2.29.4\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\n    var hookCallback;\n\n    function hooks() {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback(callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return (\n            input instanceof Array ||\n            Object.prototype.toString.call(input) === '[object Array]'\n        );\n    }\n\n    function isObject(input) {\n        // IE8 will treat undefined and null as object if it wasn't for\n        // input != null\n        return (\n            input != null &&\n            Object.prototype.toString.call(input) === '[object Object]'\n        );\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function isObjectEmpty(obj) {\n        if (Object.getOwnPropertyNames) {\n            return Object.getOwnPropertyNames(obj).length === 0;\n        } else {\n            var k;\n            for (k in obj) {\n                if (hasOwnProp(obj, k)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    function isNumber(input) {\n        return (\n            typeof input === 'number' ||\n            Object.prototype.toString.call(input) === '[object Number]'\n        );\n    }\n\n    function isDate(input) {\n        return (\n            input instanceof Date ||\n            Object.prototype.toString.call(input) === '[object Date]'\n        );\n    }\n\n    function map(arr, fn) {\n        var res = [],\n            i,\n            arrLen = arr.length;\n        for (i = 0; i < arrLen; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function createUTC(input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty: false,\n            unusedTokens: [],\n            unusedInput: [],\n            overflow: -2,\n            charsLeftOver: 0,\n            nullInput: false,\n            invalidEra: null,\n            invalidMonth: null,\n            invalidFormat: false,\n            userInvalidated: false,\n            iso: false,\n            parsedDateParts: [],\n            era: null,\n            meridiem: null,\n            rfc2822: false,\n            weekdayMismatch: false,\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    var some;\n    if (Array.prototype.some) {\n        some = Array.prototype.some;\n    } else {\n        some = function (fun) {\n            var t = Object(this),\n                len = t.length >>> 0,\n                i;\n\n            for (i = 0; i < len; i++) {\n                if (i in t && fun.call(this, t[i], i, t)) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m),\n                parsedParts = some.call(flags.parsedDateParts, function (i) {\n                    return i != null;\n                }),\n                isNowValid =\n                    !isNaN(m._d.getTime()) &&\n                    flags.overflow < 0 &&\n                    !flags.empty &&\n                    !flags.invalidEra &&\n                    !flags.invalidMonth &&\n                    !flags.invalidWeekday &&\n                    !flags.weekdayMismatch &&\n                    !flags.nullInput &&\n                    !flags.invalidFormat &&\n                    !flags.userInvalidated &&\n                    (!flags.meridiem || (flags.meridiem && parsedParts));\n\n            if (m._strict) {\n                isNowValid =\n                    isNowValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n\n            if (Object.isFrozen == null || !Object.isFrozen(m)) {\n                m._isValid = isNowValid;\n            } else {\n                return isNowValid;\n            }\n        }\n        return m._isValid;\n    }\n\n    function createInvalid(flags) {\n        var m = createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        } else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = (hooks.momentProperties = []),\n        updateInProgress = false;\n\n    function copyConfig(to, from) {\n        var i,\n            prop,\n            val,\n            momentPropertiesLen = momentProperties.length;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentPropertiesLen > 0) {\n            for (i = 0; i < momentPropertiesLen; i++) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        if (!this.isValid()) {\n            this._d = new Date(NaN);\n        }\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment(obj) {\n        return (\n            obj instanceof Moment || (obj != null && obj._isAMomentObject != null)\n        );\n    }\n\n    function warn(msg) {\n        if (\n            hooks.suppressDeprecationWarnings === false &&\n            typeof console !== 'undefined' &&\n            console.warn\n        ) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (hooks.deprecationHandler != null) {\n                hooks.deprecationHandler(null, msg);\n            }\n            if (firstTime) {\n                var args = [],\n                    arg,\n                    i,\n                    key,\n                    argLen = arguments.length;\n                for (i = 0; i < argLen; i++) {\n                    arg = '';\n                    if (typeof arguments[i] === 'object') {\n                        arg += '\\n[' + i + '] ';\n                        for (key in arguments[0]) {\n                            if (hasOwnProp(arguments[0], key)) {\n                                arg += key + ': ' + arguments[0][key] + ', ';\n                            }\n                        }\n                        arg = arg.slice(0, -2); // Remove trailing comma and space\n                    } else {\n                        arg = arguments[i];\n                    }\n                    args.push(arg);\n                }\n                warn(\n                    msg +\n                        '\\nArguments: ' +\n                        Array.prototype.slice.call(args).join('') +\n                        '\\n' +\n                        new Error().stack\n                );\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(name, msg);\n        }\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    hooks.suppressDeprecationWarnings = false;\n    hooks.deprecationHandler = null;\n\n    function isFunction(input) {\n        return (\n            (typeof Function !== 'undefined' && input instanceof Function) ||\n            Object.prototype.toString.call(input) === '[object Function]'\n        );\n    }\n\n    function set(config) {\n        var prop, i;\n        for (i in config) {\n            if (hasOwnProp(config, i)) {\n                prop = config[i];\n                if (isFunction(prop)) {\n                    this[i] = prop;\n                } else {\n                    this['_' + i] = prop;\n                }\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        this._dayOfMonthOrdinalParseLenient = new RegExp(\n            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n                '|' +\n                /\\d{1,2}/.source\n        );\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig),\n            prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        for (prop in parentConfig) {\n            if (\n                hasOwnProp(parentConfig, prop) &&\n                !hasOwnProp(childConfig, prop) &&\n                isObject(parentConfig[prop])\n            ) {\n                // make sure changes to properties don't modify parent config\n                res[prop] = extend({}, res[prop]);\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    var keys;\n\n    if (Object.keys) {\n        keys = Object.keys;\n    } else {\n        keys = function (obj) {\n            var i,\n                res = [];\n            for (i in obj) {\n                if (hasOwnProp(obj, i)) {\n                    res.push(i);\n                }\n            }\n            return res;\n        };\n    }\n\n    var defaultCalendar = {\n        sameDay: '[Today at] LT',\n        nextDay: '[Tomorrow at] LT',\n        nextWeek: 'dddd [at] LT',\n        lastDay: '[Yesterday at] LT',\n        lastWeek: '[Last] dddd [at] LT',\n        sameElse: 'L',\n    };\n\n    function calendar(key, mom, now) {\n        var output = this._calendar[key] || this._calendar['sameElse'];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (\n            (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) +\n            absNumber\n        );\n    }\n\n    var formattingTokens =\n            /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,\n        localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g,\n        formatFunctions = {},\n        formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken(token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(\n                    func.apply(this, arguments),\n                    token\n                );\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens),\n            i,\n            length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '',\n                i;\n            for (i = 0; i < length; i++) {\n                output += isFunction(array[i])\n                    ? array[i].call(mom, format)\n                    : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] =\n            formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(\n                localFormattingTokens,\n                replaceLongDateFormatTokens\n            );\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var defaultLongDateFormat = {\n        LTS: 'h:mm:ss A',\n        LT: 'h:mm A',\n        L: 'MM/DD/YYYY',\n        LL: 'MMMM D, YYYY',\n        LLL: 'MMMM D, YYYY h:mm A',\n        LLLL: 'dddd, MMMM D, YYYY h:mm A',\n    };\n\n    function longDateFormat(key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper\n            .match(formattingTokens)\n            .map(function (tok) {\n                if (\n                    tok === 'MMMM' ||\n                    tok === 'MM' ||\n                    tok === 'DD' ||\n                    tok === 'dddd'\n                ) {\n                    return tok.slice(1);\n                }\n                return tok;\n            })\n            .join('');\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate() {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d',\n        defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\n    function ordinal(number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    var defaultRelativeTime = {\n        future: 'in %s',\n        past: '%s ago',\n        s: 'a few seconds',\n        ss: '%d seconds',\n        m: 'a minute',\n        mm: '%d minutes',\n        h: 'an hour',\n        hh: '%d hours',\n        d: 'a day',\n        dd: '%d days',\n        w: 'a week',\n        ww: '%d weeks',\n        M: 'a month',\n        MM: '%d months',\n        y: 'a year',\n        yy: '%d years',\n    };\n\n    function relativeTime(number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return isFunction(output)\n            ? output(number, withoutSuffix, string, isFuture)\n            : output.replace(/%d/i, number);\n    }\n\n    function pastFuture(diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias(unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string'\n            ? aliases[units] || aliases[units.toLowerCase()]\n            : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    var priorities = {};\n\n    function addUnitPriority(unit, priority) {\n        priorities[unit] = priority;\n    }\n\n    function getPrioritizedUnits(unitsObj) {\n        var units = [],\n            u;\n        for (u in unitsObj) {\n            if (hasOwnProp(unitsObj, u)) {\n                units.push({ unit: u, priority: priorities[u] });\n            }\n        }\n        units.sort(function (a, b) {\n            return a.priority - b.priority;\n        });\n        return units;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    function absFloor(number) {\n        if (number < 0) {\n            // -0 -> 0\n            return Math.ceil(number) || 0;\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    function makeGetSet(unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                set$1(this, unit, value);\n                hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get(this, unit);\n            }\n        };\n    }\n\n    function get(mom, unit) {\n        return mom.isValid()\n            ? mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]()\n            : NaN;\n    }\n\n    function set$1(mom, unit, value) {\n        if (mom.isValid() && !isNaN(value)) {\n            if (\n                unit === 'FullYear' &&\n                isLeapYear(mom.year()) &&\n                mom.month() === 1 &&\n                mom.date() === 29\n            ) {\n                value = toInt(value);\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](\n                    value,\n                    mom.month(),\n                    daysInMonth(value, mom.month())\n                );\n            } else {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function stringGet(units) {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units]();\n        }\n        return this;\n    }\n\n    function stringSet(units, value) {\n        if (typeof units === 'object') {\n            units = normalizeObjectUnits(units);\n            var prioritized = getPrioritizedUnits(units),\n                i,\n                prioritizedLen = prioritized.length;\n            for (i = 0; i < prioritizedLen; i++) {\n                this[prioritized[i].unit](units[prioritized[i].unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    var match1 = /\\d/, //       0 - 9\n        match2 = /\\d\\d/, //      00 - 99\n        match3 = /\\d{3}/, //     000 - 999\n        match4 = /\\d{4}/, //    0000 - 9999\n        match6 = /[+-]?\\d{6}/, // -999999 - 999999\n        match1to2 = /\\d\\d?/, //       0 - 99\n        match3to4 = /\\d\\d\\d\\d?/, //     999 - 9999\n        match5to6 = /\\d\\d\\d\\d\\d\\d?/, //   99999 - 999999\n        match1to3 = /\\d{1,3}/, //       0 - 999\n        match1to4 = /\\d{1,4}/, //       0 - 9999\n        match1to6 = /[+-]?\\d{1,6}/, // -999999 - 999999\n        matchUnsigned = /\\d+/, //       0 - inf\n        matchSigned = /[+-]?\\d+/, //    -inf - inf\n        matchOffset = /Z|[+-]\\d\\d:?\\d\\d/gi, // +00:00 -00:00 +0000 -0000 or Z\n        matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi, // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n        matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/, // 123456789 123456789.123\n        // any word (or two) characters or numbers including two/three word month in arabic.\n        // includes scottish gaelic two word and hyphenated months\n        matchWord =\n            /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i,\n        regexes;\n\n    regexes = {};\n\n    function addRegexToken(token, regex, strictRegex) {\n        regexes[token] = isFunction(regex)\n            ? regex\n            : function (isStrict, localeData) {\n                  return isStrict && strictRegex ? strictRegex : regex;\n              };\n    }\n\n    function getParseRegexForToken(token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(\n            s\n                .replace('\\\\', '')\n                .replace(\n                    /\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g,\n                    function (matched, p1, p2, p3, p4) {\n                        return p1 || p2 || p3 || p4;\n                    }\n                )\n        );\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken(token, callback) {\n        var i,\n            func = callback,\n            tokenLen;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (isNumber(callback)) {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        tokenLen = token.length;\n        for (i = 0; i < tokenLen; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken(token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0,\n        MONTH = 1,\n        DATE = 2,\n        HOUR = 3,\n        MINUTE = 4,\n        SECOND = 5,\n        MILLISECOND = 6,\n        WEEK = 7,\n        WEEKDAY = 8;\n\n    function mod(n, x) {\n        return ((n % x) + x) % x;\n    }\n\n    var indexOf;\n\n    if (Array.prototype.indexOf) {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function (o) {\n            // I know\n            var i;\n            for (i = 0; i < this.length; ++i) {\n                if (this[i] === o) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n\n    function daysInMonth(year, month) {\n        if (isNaN(year) || isNaN(month)) {\n            return NaN;\n        }\n        var modMonth = mod(month, 12);\n        year += (month - modMonth) / 12;\n        return modMonth === 1\n            ? isLeapYear(year)\n                ? 29\n                : 28\n            : 31 - ((modMonth % 7) % 2);\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PRIORITY\n\n    addUnitPriority('month', 8);\n\n    // PARSING\n\n    addRegexToken('M', match1to2);\n    addRegexToken('MM', match1to2, match2);\n    addRegexToken('MMM', function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var defaultLocaleMonths =\n            'January_February_March_April_May_June_July_August_September_October_November_December'.split(\n                '_'\n            ),\n        defaultLocaleMonthsShort =\n            'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),\n        MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/,\n        defaultMonthsShortRegex = matchWord,\n        defaultMonthsRegex = matchWord;\n\n    function localeMonths(m, format) {\n        if (!m) {\n            return isArray(this._months)\n                ? this._months\n                : this._months['standalone'];\n        }\n        return isArray(this._months)\n            ? this._months[m.month()]\n            : this._months[\n                  (this._months.isFormat || MONTHS_IN_FORMAT).test(format)\n                      ? 'format'\n                      : 'standalone'\n              ][m.month()];\n    }\n\n    function localeMonthsShort(m, format) {\n        if (!m) {\n            return isArray(this._monthsShort)\n                ? this._monthsShort\n                : this._monthsShort['standalone'];\n        }\n        return isArray(this._monthsShort)\n            ? this._monthsShort[m.month()]\n            : this._monthsShort[\n                  MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'\n              ][m.month()];\n    }\n\n    function handleStrictParse(monthName, format, strict) {\n        var i,\n            ii,\n            mom,\n            llc = monthName.toLocaleLowerCase();\n        if (!this._monthsParse) {\n            // this is not used\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n            for (i = 0; i < 12; ++i) {\n                mom = createUTC([2000, i]);\n                this._shortMonthsParse[i] = this.monthsShort(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeMonthsParse(monthName, format, strict) {\n        var i, mom, regex;\n\n        if (this._monthsParseExact) {\n            return handleStrictParse.call(this, monthName, format, strict);\n        }\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        // TODO: add sorting\n        // Sorting makes sure if one month (or abbr) is a prefix of another\n        // see sorting in computeMonthsParse\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp(\n                    '^' + this.months(mom, '').replace('.', '') + '$',\n                    'i'\n                );\n                this._shortMonthsParse[i] = new RegExp(\n                    '^' + this.monthsShort(mom, '').replace('.', '') + '$',\n                    'i'\n                );\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex =\n                    '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (\n                strict &&\n                format === 'MMMM' &&\n                this._longMonthsParse[i].test(monthName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'MMM' &&\n                this._shortMonthsParse[i].test(monthName)\n            ) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth(mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (!isNumber(value)) {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth(value) {\n        if (value != null) {\n            setMonth(this, value);\n            hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth() {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    function monthsShortRegex(isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsShortRegex')) {\n                this._monthsShortRegex = defaultMonthsShortRegex;\n            }\n            return this._monthsShortStrictRegex && isStrict\n                ? this._monthsShortStrictRegex\n                : this._monthsShortRegex;\n        }\n    }\n\n    function monthsRegex(isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                this._monthsRegex = defaultMonthsRegex;\n            }\n            return this._monthsStrictRegex && isStrict\n                ? this._monthsStrictRegex\n                : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse() {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [],\n            longPieces = [],\n            mixedPieces = [],\n            i,\n            mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n        }\n        for (i = 0; i < 24; i++) {\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp(\n            '^(' + longPieces.join('|') + ')',\n            'i'\n        );\n        this._monthsShortStrictRegex = new RegExp(\n            '^(' + shortPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? zeroFill(y, 4) : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY', 4], 0, 'year');\n    addFormatToken(0, ['YYYYY', 5], 0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PRIORITIES\n\n    addUnitPriority('year', 1);\n\n    // PARSING\n\n    addRegexToken('Y', matchSigned);\n    addRegexToken('YY', match1to2, match2);\n    addRegexToken('YYYY', match1to4, match4);\n    addRegexToken('YYYYY', match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] =\n            input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    // HOOKS\n\n    hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', true);\n\n    function getIsLeapYear() {\n        return isLeapYear(this.year());\n    }\n\n    function createDate(y, m, d, h, M, s, ms) {\n        // can't just apply() to create a date:\n        // https://stackoverflow.com/q/181348\n        var date;\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            date = new Date(y + 400, m, d, h, M, s, ms);\n            if (isFinite(date.getFullYear())) {\n                date.setFullYear(y);\n            }\n        } else {\n            date = new Date(y, m, d, h, M, s, ms);\n        }\n\n        return date;\n    }\n\n    function createUTCDate(y) {\n        var date, args;\n        // the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            args = Array.prototype.slice.call(arguments);\n            // preserve leap years using a full 400 year cycle, then reset\n            args[0] = y + 400;\n            date = new Date(Date.UTC.apply(null, args));\n            if (isFinite(date.getUTCFullYear())) {\n                date.setUTCFullYear(y);\n            }\n        } else {\n            date = new Date(Date.UTC.apply(null, arguments));\n        }\n\n        return date;\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear,\n            resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear,\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek,\n            resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear,\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PRIORITIES\n\n    addUnitPriority('week', 5);\n    addUnitPriority('isoWeek', 5);\n\n    // PARSING\n\n    addRegexToken('w', match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W', match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(\n        ['w', 'ww', 'W', 'WW'],\n        function (input, week, config, token) {\n            week[token.substr(0, 1)] = toInt(input);\n        }\n    );\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek(mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow: 0, // Sunday is the first day of the week.\n        doy: 6, // The week that contains Jan 6th is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek() {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear() {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek(input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek(input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PRIORITY\n    addUnitPriority('day', 11);\n    addUnitPriority('weekday', 11);\n    addUnitPriority('isoWeekday', 11);\n\n    // PARSING\n\n    addRegexToken('d', match1to2);\n    addRegexToken('e', match1to2);\n    addRegexToken('E', match1to2);\n    addRegexToken('dd', function (isStrict, locale) {\n        return locale.weekdaysMinRegex(isStrict);\n    });\n    addRegexToken('ddd', function (isStrict, locale) {\n        return locale.weekdaysShortRegex(isStrict);\n    });\n    addRegexToken('dddd', function (isStrict, locale) {\n        return locale.weekdaysRegex(isStrict);\n    });\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    function parseIsoWeekday(input, locale) {\n        if (typeof input === 'string') {\n            return locale.weekdaysParse(input) % 7 || 7;\n        }\n        return isNaN(input) ? null : input;\n    }\n\n    // LOCALES\n    function shiftWeekdays(ws, n) {\n        return ws.slice(n, 7).concat(ws.slice(0, n));\n    }\n\n    var defaultLocaleWeekdays =\n            'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),\n        defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),\n        defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),\n        defaultWeekdaysRegex = matchWord,\n        defaultWeekdaysShortRegex = matchWord,\n        defaultWeekdaysMinRegex = matchWord;\n\n    function localeWeekdays(m, format) {\n        var weekdays = isArray(this._weekdays)\n            ? this._weekdays\n            : this._weekdays[\n                  m && m !== true && this._weekdays.isFormat.test(format)\n                      ? 'format'\n                      : 'standalone'\n              ];\n        return m === true\n            ? shiftWeekdays(weekdays, this._week.dow)\n            : m\n            ? weekdays[m.day()]\n            : weekdays;\n    }\n\n    function localeWeekdaysShort(m) {\n        return m === true\n            ? shiftWeekdays(this._weekdaysShort, this._week.dow)\n            : m\n            ? this._weekdaysShort[m.day()]\n            : this._weekdaysShort;\n    }\n\n    function localeWeekdaysMin(m) {\n        return m === true\n            ? shiftWeekdays(this._weekdaysMin, this._week.dow)\n            : m\n            ? this._weekdaysMin[m.day()]\n            : this._weekdaysMin;\n    }\n\n    function handleStrictParse$1(weekdayName, format, strict) {\n        var i,\n            ii,\n            mom,\n            llc = weekdayName.toLocaleLowerCase();\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._minWeekdaysParse = [];\n\n            for (i = 0; i < 7; ++i) {\n                mom = createUTC([2000, 1]).day(i);\n                this._minWeekdaysParse[i] = this.weekdaysMin(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._shortWeekdaysParse[i] = this.weekdaysShort(\n                    mom,\n                    ''\n                ).toLocaleLowerCase();\n                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeWeekdaysParse(weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (this._weekdaysParseExact) {\n            return handleStrictParse$1.call(this, weekdayName, format, strict);\n        }\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = createUTC([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n                this._shortWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n                this._minWeekdaysParse[i] = new RegExp(\n                    '^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$',\n                    'i'\n                );\n            }\n            if (!this._weekdaysParse[i]) {\n                regex =\n                    '^' +\n                    this.weekdays(mom, '') +\n                    '|^' +\n                    this.weekdaysShort(mom, '') +\n                    '|^' +\n                    this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (\n                strict &&\n                format === 'dddd' &&\n                this._fullWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'ddd' &&\n                this._shortWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (\n                strict &&\n                format === 'dd' &&\n                this._minWeekdaysParse[i].test(weekdayName)\n            ) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek(input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n\n        if (input != null) {\n            var weekday = parseIsoWeekday(input, this.localeData());\n            return this.day(this.day() % 7 ? weekday : weekday - 7);\n        } else {\n            return this.day() || 7;\n        }\n    }\n\n    function weekdaysRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysStrictRegex;\n            } else {\n                return this._weekdaysRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                this._weekdaysRegex = defaultWeekdaysRegex;\n            }\n            return this._weekdaysStrictRegex && isStrict\n                ? this._weekdaysStrictRegex\n                : this._weekdaysRegex;\n        }\n    }\n\n    function weekdaysShortRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysShortStrictRegex;\n            } else {\n                return this._weekdaysShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n                this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n            }\n            return this._weekdaysShortStrictRegex && isStrict\n                ? this._weekdaysShortStrictRegex\n                : this._weekdaysShortRegex;\n        }\n    }\n\n    function weekdaysMinRegex(isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysMinStrictRegex;\n            } else {\n                return this._weekdaysMinRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n                this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n            }\n            return this._weekdaysMinStrictRegex && isStrict\n                ? this._weekdaysMinStrictRegex\n                : this._weekdaysMinRegex;\n        }\n    }\n\n    function computeWeekdaysParse() {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var minPieces = [],\n            shortPieces = [],\n            longPieces = [],\n            mixedPieces = [],\n            i,\n            mom,\n            minp,\n            shortp,\n            longp;\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, 1]).day(i);\n            minp = regexEscape(this.weekdaysMin(mom, ''));\n            shortp = regexEscape(this.weekdaysShort(mom, ''));\n            longp = regexEscape(this.weekdays(mom, ''));\n            minPieces.push(minp);\n            shortPieces.push(shortp);\n            longPieces.push(longp);\n            mixedPieces.push(minp);\n            mixedPieces.push(shortp);\n            mixedPieces.push(longp);\n        }\n        // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n        // will match the longer piece.\n        minPieces.sort(cmpLenRev);\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n\n        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._weekdaysShortRegex = this._weekdaysRegex;\n        this._weekdaysMinRegex = this._weekdaysRegex;\n\n        this._weekdaysStrictRegex = new RegExp(\n            '^(' + longPieces.join('|') + ')',\n            'i'\n        );\n        this._weekdaysShortStrictRegex = new RegExp(\n            '^(' + shortPieces.join('|') + ')',\n            'i'\n        );\n        this._weekdaysMinStrictRegex = new RegExp(\n            '^(' + minPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    function kFormat() {\n        return this.hours() || 24;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n    addFormatToken('k', ['kk', 2], 0, kFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return (\n            '' +\n            hFormat.apply(this) +\n            zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2)\n        );\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return (\n            '' +\n            this.hours() +\n            zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2)\n        );\n    });\n\n    function meridiem(token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(\n                this.hours(),\n                this.minutes(),\n                lowercase\n            );\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PRIORITY\n    addUnitPriority('hour', 13);\n\n    // PARSING\n\n    function matchMeridiem(isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a', matchMeridiem);\n    addRegexToken('A', matchMeridiem);\n    addRegexToken('H', match1to2);\n    addRegexToken('h', match1to2);\n    addRegexToken('k', match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n    addRegexToken('kk', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['k', 'kk'], function (input, array, config) {\n        var kInput = toInt(input);\n        array[HOUR] = kInput === 24 ? 0 : kInput;\n    });\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4,\n            pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4,\n            pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM(input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return (input + '').toLowerCase().charAt(0) === 'p';\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i,\n        // Setting the hour should keep the time, because the user explicitly\n        // specified which hour they want. So trying to maintain the same hour (in\n        // a new timezone) makes sense. Adding/subtracting hours does not follow\n        // this rule.\n        getSetHour = makeGetSet('Hours', true);\n\n    function localeMeridiem(hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n    var baseConfig = {\n        calendar: defaultCalendar,\n        longDateFormat: defaultLongDateFormat,\n        invalidDate: defaultInvalidDate,\n        ordinal: defaultOrdinal,\n        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n        relativeTime: defaultRelativeTime,\n\n        months: defaultLocaleMonths,\n        monthsShort: defaultLocaleMonthsShort,\n\n        week: defaultLocaleWeek,\n\n        weekdays: defaultLocaleWeekdays,\n        weekdaysMin: defaultLocaleWeekdaysMin,\n        weekdaysShort: defaultLocaleWeekdaysShort,\n\n        meridiemParse: defaultLocaleMeridiemParse,\n    };\n\n    // internal storage for locale config files\n    var locales = {},\n        localeFamilies = {},\n        globalLocale;\n\n    function commonPrefix(arr1, arr2) {\n        var i,\n            minl = Math.min(arr1.length, arr2.length);\n        for (i = 0; i < minl; i += 1) {\n            if (arr1[i] !== arr2[i]) {\n                return i;\n            }\n        }\n        return minl;\n    }\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0,\n            j,\n            next,\n            locale,\n            split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (\n                    next &&\n                    next.length >= j &&\n                    commonPrefix(split, next) >= j - 1\n                ) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return globalLocale;\n    }\n\n    function isLocaleNameSane(name) {\n        // Prevent names that look like filesystem paths, i.e contain '/' or '\\'\n        return name.match('^[^/\\\\\\\\]*$') != null;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null,\n            aliasedRequire;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (\n            locales[name] === undefined &&\n            typeof module !== 'undefined' &&\n            module &&\n            module.exports &&\n            isLocaleNameSane(name)\n        ) {\n            try {\n                oldLocale = globalLocale._abbr;\n                aliasedRequire = require;\n                aliasedRequire('./locale/' + name);\n                getSetGlobalLocale(oldLocale);\n            } catch (e) {\n                // mark as not found to avoid repeating expensive file require call causing high CPU\n                // when trying to find en-US, en_US, en-us for every format call\n                locales[name] = null; // null means not found\n            }\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function getSetGlobalLocale(key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = getLocale(key);\n            } else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            } else {\n                if (typeof console !== 'undefined' && console.warn) {\n                    //warn user if arguments are passed but the locale could not be set\n                    console.warn(\n                        'Locale ' + key + ' not found. Did you forget to load it?'\n                    );\n                }\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale(name, config) {\n        if (config !== null) {\n            var locale,\n                parentConfig = baseConfig;\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple(\n                    'defineLocaleOverride',\n                    'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale ' +\n                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.'\n                );\n                parentConfig = locales[name]._config;\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    parentConfig = locales[config.parentLocale]._config;\n                } else {\n                    locale = loadLocale(config.parentLocale);\n                    if (locale != null) {\n                        parentConfig = locale._config;\n                    } else {\n                        if (!localeFamilies[config.parentLocale]) {\n                            localeFamilies[config.parentLocale] = [];\n                        }\n                        localeFamilies[config.parentLocale].push({\n                            name: name,\n                            config: config,\n                        });\n                        return null;\n                    }\n                }\n            }\n            locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n            if (localeFamilies[name]) {\n                localeFamilies[name].forEach(function (x) {\n                    defineLocale(x.name, x.config);\n                });\n            }\n\n            // backwards compat for now: also set the locale\n            // make sure we set the locale AFTER all child locales have been\n            // created, so we won't end up with the child locale set.\n            getSetGlobalLocale(name);\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale,\n                tmpLocale,\n                parentConfig = baseConfig;\n\n            if (locales[name] != null && locales[name].parentLocale != null) {\n                // Update existing child locale in-place to avoid memory-leaks\n                locales[name].set(mergeConfigs(locales[name]._config, config));\n            } else {\n                // MERGE\n                tmpLocale = loadLocale(name);\n                if (tmpLocale != null) {\n                    parentConfig = tmpLocale._config;\n                }\n                config = mergeConfigs(parentConfig, config);\n                if (tmpLocale == null) {\n                    // updateLocale is called for creating a new locale\n                    // Set abbr so it will have a name (getters return\n                    // undefined otherwise).\n                    config.abbr = name;\n                }\n                locale = new Locale(config);\n                locale.parentLocale = locales[name];\n                locales[name] = locale;\n            }\n\n            // backwards compat for now: also set the locale\n            getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                    if (name === getSetGlobalLocale()) {\n                        getSetGlobalLocale(name);\n                    }\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function getLocale(key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function listLocales() {\n        return keys(locales);\n    }\n\n    function checkOverflow(m) {\n        var overflow,\n            a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH] < 0 || a[MONTH] > 11\n                    ? MONTH\n                    : a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH])\n                    ? DATE\n                    : a[HOUR] < 0 ||\n                      a[HOUR] > 24 ||\n                      (a[HOUR] === 24 &&\n                          (a[MINUTE] !== 0 ||\n                              a[SECOND] !== 0 ||\n                              a[MILLISECOND] !== 0))\n                    ? HOUR\n                    : a[MINUTE] < 0 || a[MINUTE] > 59\n                    ? MINUTE\n                    : a[SECOND] < 0 || a[SECOND] > 59\n                    ? SECOND\n                    : a[MILLISECOND] < 0 || a[MILLISECOND] > 999\n                    ? MILLISECOND\n                    : -1;\n\n            if (\n                getParsingFlags(m)._overflowDayOfYear &&\n                (overflow < YEAR || overflow > DATE)\n            ) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex =\n            /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n        basicIsoRegex =\n            /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d|))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([+-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/,\n        tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/,\n        isoDates = [\n            ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n            ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n            ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n            ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n            ['YYYY-DDD', /\\d{4}-\\d{3}/],\n            ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n            ['YYYYYYMMDD', /[+-]\\d{10}/],\n            ['YYYYMMDD', /\\d{8}/],\n            ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n            ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n            ['YYYYDDD', /\\d{7}/],\n            ['YYYYMM', /\\d{6}/, false],\n            ['YYYY', /\\d{4}/, false],\n        ],\n        // iso time formats and regexes\n        isoTimes = [\n            ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n            ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n            ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n            ['HH:mm', /\\d\\d:\\d\\d/],\n            ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n            ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n            ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n            ['HHmm', /\\d\\d\\d\\d/],\n            ['HH', /\\d\\d/],\n        ],\n        aspNetJsonRegex = /^\\/?Date\\((-?\\d+)/i,\n        // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n        rfc2822 =\n            /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/,\n        obsOffsets = {\n            UT: 0,\n            GMT: 0,\n            EDT: -4 * 60,\n            EST: -5 * 60,\n            CDT: -5 * 60,\n            CST: -6 * 60,\n            MDT: -6 * 60,\n            MST: -7 * 60,\n            PDT: -7 * 60,\n            PST: -8 * 60,\n        };\n\n    // date from iso format\n    function configFromISO(config) {\n        var i,\n            l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime,\n            dateFormat,\n            timeFormat,\n            tzFormat,\n            isoDatesLen = isoDates.length,\n            isoTimesLen = isoTimes.length;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n            for (i = 0, l = isoDatesLen; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimesLen; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    function extractFromRFC2822Strings(\n        yearStr,\n        monthStr,\n        dayStr,\n        hourStr,\n        minuteStr,\n        secondStr\n    ) {\n        var result = [\n            untruncateYear(yearStr),\n            defaultLocaleMonthsShort.indexOf(monthStr),\n            parseInt(dayStr, 10),\n            parseInt(hourStr, 10),\n            parseInt(minuteStr, 10),\n        ];\n\n        if (secondStr) {\n            result.push(parseInt(secondStr, 10));\n        }\n\n        return result;\n    }\n\n    function untruncateYear(yearStr) {\n        var year = parseInt(yearStr, 10);\n        if (year <= 49) {\n            return 2000 + year;\n        } else if (year <= 999) {\n            return 1900 + year;\n        }\n        return year;\n    }\n\n    function preprocessRFC2822(s) {\n        // Remove comments and folding whitespace and replace multiple-spaces with a single space\n        return s\n            .replace(/\\([^()]*\\)|[\\n\\t]/g, ' ')\n            .replace(/(\\s\\s+)/g, ' ')\n            .replace(/^\\s\\s*/, '')\n            .replace(/\\s\\s*$/, '');\n    }\n\n    function checkWeekday(weekdayStr, parsedInput, config) {\n        if (weekdayStr) {\n            // TODO: Replace the vanilla JS Date object with an independent day-of-week check.\n            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n                weekdayActual = new Date(\n                    parsedInput[0],\n                    parsedInput[1],\n                    parsedInput[2]\n                ).getDay();\n            if (weekdayProvided !== weekdayActual) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function calculateOffset(obsOffset, militaryOffset, numOffset) {\n        if (obsOffset) {\n            return obsOffsets[obsOffset];\n        } else if (militaryOffset) {\n            // the only allowed military tz is Z\n            return 0;\n        } else {\n            var hm = parseInt(numOffset, 10),\n                m = hm % 100,\n                h = (hm - m) / 100;\n            return h * 60 + m;\n        }\n    }\n\n    // date and time from ref 2822 format\n    function configFromRFC2822(config) {\n        var match = rfc2822.exec(preprocessRFC2822(config._i)),\n            parsedArray;\n        if (match) {\n            parsedArray = extractFromRFC2822Strings(\n                match[4],\n                match[3],\n                match[2],\n                match[5],\n                match[6],\n                match[7]\n            );\n            if (!checkWeekday(match[1], parsedArray, config)) {\n                return;\n            }\n\n            config._a = parsedArray;\n            config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n            config._d = createUTCDate.apply(null, config._a);\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n            getParsingFlags(config).rfc2822 = true;\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from 1) ASP.NET, 2) ISO, 3) RFC 2822 formats, or 4) optional fallback if parsing isn't strict\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        configFromRFC2822(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        if (config._strict) {\n            config._isValid = false;\n        } else {\n            // Final attempt, use Input Fallback\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    hooks.createFromInputFallback = deprecate(\n        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n            'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n            'discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(hooks.now());\n        if (config._useUTC) {\n            return [\n                nowValue.getUTCFullYear(),\n                nowValue.getUTCMonth(),\n                nowValue.getUTCDate(),\n            ];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray(config) {\n        var i,\n            date,\n            input = [],\n            currentDate,\n            expectedWeekday,\n            yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear != null) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (\n                config._dayOfYear > daysInYear(yearToUse) ||\n                config._dayOfYear === 0\n            ) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] =\n                config._a[i] == null ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (\n            config._a[HOUR] === 24 &&\n            config._a[MINUTE] === 0 &&\n            config._a[SECOND] === 0 &&\n            config._a[MILLISECOND] === 0\n        ) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(\n            null,\n            input\n        );\n        expectedWeekday = config._useUTC\n            ? config._d.getUTCDay()\n            : config._d.getDay();\n\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n\n        // check for mismatching day of week\n        if (\n            config._w &&\n            typeof config._w.d !== 'undefined' &&\n            config._w.d !== expectedWeekday\n        ) {\n            getParsingFlags(config).weekdayMismatch = true;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow, curWeek;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(\n                w.GG,\n                config._a[YEAR],\n                weekOfYear(createLocal(), 1, 4).year\n            );\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            curWeek = weekOfYear(createLocal(), dow, doy);\n\n            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n            // Default to current week.\n            week = defaults(w.w, curWeek.week);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from beginning of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to beginning of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // constant that refers to the ISO standard\n    hooks.ISO_8601 = function () {};\n\n    // constant that refers to the RFC 2822 form\n    hooks.RFC_2822 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n        if (config._f === hooks.RFC_2822) {\n            configFromRFC2822(config);\n            return;\n        }\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i,\n            parsedInput,\n            tokens,\n            token,\n            skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0,\n            era,\n            tokenLen;\n\n        tokens =\n            expandFormat(config._f, config._locale).match(formattingTokens) || [];\n        tokenLen = tokens.length;\n        for (i = 0; i < tokenLen; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) ||\n                [])[0];\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(\n                    string.indexOf(parsedInput) + parsedInput.length\n                );\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                } else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            } else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver =\n            stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (\n            config._a[HOUR] <= 12 &&\n            getParsingFlags(config).bigHour === true &&\n            config._a[HOUR] > 0\n        ) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n\n        getParsingFlags(config).parsedDateParts = config._a.slice(0);\n        getParsingFlags(config).meridiem = config._meridiem;\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(\n            config._locale,\n            config._a[HOUR],\n            config._meridiem\n        );\n\n        // handle era\n        era = getParsingFlags(config).era;\n        if (era !== null) {\n            config._a[YEAR] = config._locale.erasConvertYear(era, config._a[YEAR]);\n        }\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n    function meridiemFixWrap(locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n            scoreToBeat,\n            i,\n            currentScore,\n            validFormatFound,\n            bestFormatIsValid = false,\n            configfLen = config._f.length;\n\n        if (configfLen === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < configfLen; i++) {\n            currentScore = 0;\n            validFormatFound = false;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (isValid(tempConfig)) {\n                validFormatFound = true;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (!bestFormatIsValid) {\n                if (\n                    scoreToBeat == null ||\n                    currentScore < scoreToBeat ||\n                    validFormatFound\n                ) {\n                    scoreToBeat = currentScore;\n                    bestMoment = tempConfig;\n                    if (validFormatFound) {\n                        bestFormatIsValid = true;\n                    }\n                }\n            } else {\n                if (currentScore < scoreToBeat) {\n                    scoreToBeat = currentScore;\n                    bestMoment = tempConfig;\n                }\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i),\n            dayOrDate = i.day === undefined ? i.date : i.day;\n        config._a = map(\n            [i.year, i.month, dayOrDate, i.hour, i.minute, i.second, i.millisecond],\n            function (obj) {\n                return obj && parseInt(obj, 10);\n            }\n        );\n\n        configFromArray(config);\n    }\n\n    function createFromConfig(config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig(config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return createInvalid({ nullInput: true });\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isDate(input)) {\n            config._d = input;\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        } else {\n            configFromInput(config);\n        }\n\n        if (!isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (isUndefined(input)) {\n            config._d = new Date(hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(input.valueOf());\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (isObject(input)) {\n            configFromObject(config);\n        } else if (isNumber(input)) {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC(input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (format === true || format === false) {\n            strict = format;\n            format = undefined;\n        }\n\n        if (locale === true || locale === false) {\n            strict = locale;\n            locale = undefined;\n        }\n\n        if (\n            (isObject(input) && isObjectEmpty(input)) ||\n            (isArray(input) && input.length === 0)\n        ) {\n            input = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function createLocal(input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n            'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n            function () {\n                var other = createLocal.apply(null, arguments);\n                if (this.isValid() && other.isValid()) {\n                    return other < this ? this : other;\n                } else {\n                    return createInvalid();\n                }\n            }\n        ),\n        prototypeMax = deprecate(\n            'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n            function () {\n                var other = createLocal.apply(null, arguments);\n                if (this.isValid() && other.isValid()) {\n                    return other > this ? this : other;\n                } else {\n                    return createInvalid();\n                }\n            }\n        );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min() {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max() {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +new Date();\n    };\n\n    var ordering = [\n        'year',\n        'quarter',\n        'month',\n        'week',\n        'day',\n        'hour',\n        'minute',\n        'second',\n        'millisecond',\n    ];\n\n    function isDurationValid(m) {\n        var key,\n            unitHasDecimal = false,\n            i,\n            orderLen = ordering.length;\n        for (key in m) {\n            if (\n                hasOwnProp(m, key) &&\n                !(\n                    indexOf.call(ordering, key) !== -1 &&\n                    (m[key] == null || !isNaN(m[key]))\n                )\n            ) {\n                return false;\n            }\n        }\n\n        for (i = 0; i < orderLen; ++i) {\n            if (m[ordering[i]]) {\n                if (unitHasDecimal) {\n                    return false; // only allow non-integers for smallest unit\n                }\n                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                    unitHasDecimal = true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function isValid$1() {\n        return this._isValid;\n    }\n\n    function createInvalid$1() {\n        return createDuration(NaN);\n    }\n\n    function Duration(duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        this._isValid = isDurationValid(normalizedInput);\n\n        // representation for dateAddRemove\n        this._milliseconds =\n            +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days + weeks * 7;\n        // It is impossible to translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months + quarters * 3 + years * 12;\n\n        this._data = {};\n\n        this._locale = getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration(obj) {\n        return obj instanceof Duration;\n    }\n\n    function absRound(number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if (\n                (dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))\n            ) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    // FORMATTING\n\n    function offset(token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset(),\n                sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return (\n                sign +\n                zeroFill(~~(offset / 60), 2) +\n                separator +\n                zeroFill(~~offset % 60, 2)\n            );\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z', matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = (string || '').match(matcher),\n            chunk,\n            parts,\n            minutes;\n\n        if (matches === null) {\n            return null;\n        }\n\n        chunk = matches[matches.length - 1] || [];\n        parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return minutes === 0 ? 0 : parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff =\n                (isMoment(input) || isDate(input)\n                    ? input.valueOf()\n                    : createLocal(input).valueOf()) - res.valueOf();\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(res._d.valueOf() + diff);\n            hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return createLocal(input).local();\n        }\n    }\n\n    function getDateOffset(m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset());\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset(input, keepLocalTime, keepMinutes) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n                if (input === null) {\n                    return this;\n                }\n            } else if (Math.abs(input) < 16 && !keepMinutes) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    addSubtract(\n                        this,\n                        createDuration(input - offset, 'm'),\n                        1,\n                        false\n                    );\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone(input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC(keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal(keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset() {\n        if (this._tzm != null) {\n            this.utcOffset(this._tzm, false, true);\n        } else if (typeof this._i === 'string') {\n            var tZone = offsetFromString(matchOffset, this._i);\n            if (tZone != null) {\n                this.utcOffset(tZone);\n            } else {\n                this.utcOffset(0, true);\n            }\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset(input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime() {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted() {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {},\n            other;\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n            this._isDSTShifted =\n                this.isValid() && compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal() {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset() {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc() {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(-|\\+)?(?:(\\d*)[. ])?(\\d+):(\\d+)(?::(\\d+)(\\.\\d*)?)?$/,\n        // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n        // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n        // and further modified to allow for strings containing both week and day\n        isoRegex =\n            /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\n    function createDuration(input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms: input._milliseconds,\n                d: input._days,\n                M: input._months,\n            };\n        } else if (isNumber(input) || !isNaN(+input)) {\n            duration = {};\n            if (key) {\n                duration[key] = +input;\n            } else {\n                duration.milliseconds = +input;\n            }\n        } else if ((match = aspNetRegex.exec(input))) {\n            sign = match[1] === '-' ? -1 : 1;\n            duration = {\n                y: 0,\n                d: toInt(match[DATE]) * sign,\n                h: toInt(match[HOUR]) * sign,\n                m: toInt(match[MINUTE]) * sign,\n                s: toInt(match[SECOND]) * sign,\n                ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign, // the millisecond decimal point is included in the match\n            };\n        } else if ((match = isoRegex.exec(input))) {\n            sign = match[1] === '-' ? -1 : 1;\n            duration = {\n                y: parseIso(match[2], sign),\n                M: parseIso(match[3], sign),\n                w: parseIso(match[4], sign),\n                d: parseIso(match[5], sign),\n                h: parseIso(match[6], sign),\n                m: parseIso(match[7], sign),\n                s: parseIso(match[8], sign),\n            };\n        } else if (duration == null) {\n            // checks for null or undefined\n            duration = {};\n        } else if (\n            typeof duration === 'object' &&\n            ('from' in duration || 'to' in duration)\n        ) {\n            diffRes = momentsDifference(\n                createLocal(duration.from),\n                createLocal(duration.to)\n            );\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        if (isDuration(input) && hasOwnProp(input, '_isValid')) {\n            ret._isValid = input._isValid;\n        }\n\n        return ret;\n    }\n\n    createDuration.fn = Duration.prototype;\n    createDuration.invalid = createInvalid$1;\n\n    function parseIso(inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {};\n\n        res.months =\n            other.month() - base.month() + (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +base.clone().add(res.months, 'M');\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return { milliseconds: 0, months: 0 };\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(\n                    name,\n                    'moment().' +\n                        name +\n                        '(period, number) is deprecated. Please use moment().' +\n                        name +\n                        '(number, period). ' +\n                        'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.'\n                );\n                tmp = val;\n                val = period;\n                period = tmp;\n            }\n\n            dur = createDuration(val, period);\n            addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addSubtract(mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (months) {\n            setMonth(mom, get(mom, 'Month') + months * isAdding);\n        }\n        if (days) {\n            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n        }\n        if (milliseconds) {\n            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n        }\n        if (updateOffset) {\n            hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add = createAdder(1, 'add'),\n        subtract = createAdder(-1, 'subtract');\n\n    function isString(input) {\n        return typeof input === 'string' || input instanceof String;\n    }\n\n    // type MomentInput = Moment | Date | string | number | (number | string)[] | MomentInputObject | void; // null | undefined\n    function isMomentInput(input) {\n        return (\n            isMoment(input) ||\n            isDate(input) ||\n            isString(input) ||\n            isNumber(input) ||\n            isNumberOrStringArray(input) ||\n            isMomentInputObject(input) ||\n            input === null ||\n            input === undefined\n        );\n    }\n\n    function isMomentInputObject(input) {\n        var objectTest = isObject(input) && !isObjectEmpty(input),\n            propertyTest = false,\n            properties = [\n                'years',\n                'year',\n                'y',\n                'months',\n                'month',\n                'M',\n                'days',\n                'day',\n                'd',\n                'dates',\n                'date',\n                'D',\n                'hours',\n                'hour',\n                'h',\n                'minutes',\n                'minute',\n                'm',\n                'seconds',\n                'second',\n                's',\n                'milliseconds',\n                'millisecond',\n                'ms',\n            ],\n            i,\n            property,\n            propertyLen = properties.length;\n\n        for (i = 0; i < propertyLen; i += 1) {\n            property = properties[i];\n            propertyTest = propertyTest || hasOwnProp(input, property);\n        }\n\n        return objectTest && propertyTest;\n    }\n\n    function isNumberOrStringArray(input) {\n        var arrayTest = isArray(input),\n            dataTypeTest = false;\n        if (arrayTest) {\n            dataTypeTest =\n                input.filter(function (item) {\n                    return !isNumber(item) && isString(input);\n                }).length === 0;\n        }\n        return arrayTest && dataTypeTest;\n    }\n\n    function isCalendarSpec(input) {\n        var objectTest = isObject(input) && !isObjectEmpty(input),\n            propertyTest = false,\n            properties = [\n                'sameDay',\n                'nextDay',\n                'lastDay',\n                'nextWeek',\n                'lastWeek',\n                'sameElse',\n            ],\n            i,\n            property;\n\n        for (i = 0; i < properties.length; i += 1) {\n            property = properties[i];\n            propertyTest = propertyTest || hasOwnProp(input, property);\n        }\n\n        return objectTest && propertyTest;\n    }\n\n    function getCalendarFormat(myMoment, now) {\n        var diff = myMoment.diff(now, 'days', true);\n        return diff < -6\n            ? 'sameElse'\n            : diff < -1\n            ? 'lastWeek'\n            : diff < 0\n            ? 'lastDay'\n            : diff < 1\n            ? 'sameDay'\n            : diff < 2\n            ? 'nextDay'\n            : diff < 7\n            ? 'nextWeek'\n            : 'sameElse';\n    }\n\n    function calendar$1(time, formats) {\n        // Support for single parameter, formats only overload to the calendar function\n        if (arguments.length === 1) {\n            if (!arguments[0]) {\n                time = undefined;\n                formats = undefined;\n            } else if (isMomentInput(arguments[0])) {\n                time = arguments[0];\n                formats = undefined;\n            } else if (isCalendarSpec(arguments[0])) {\n                formats = arguments[0];\n                time = undefined;\n            }\n        }\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            format = hooks.calendarFormat(this, sod) || 'sameElse',\n            output =\n                formats &&\n                (isFunction(formats[format])\n                    ? formats[format].call(this, now)\n                    : formats[format]);\n\n        return this.format(\n            output || this.localeData().calendar(format, this, createLocal(now))\n        );\n    }\n\n    function clone() {\n        return new Moment(this);\n    }\n\n    function isAfter(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() > localInput.valueOf();\n        } else {\n            return localInput.valueOf() < this.clone().startOf(units).valueOf();\n        }\n    }\n\n    function isBefore(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() < localInput.valueOf();\n        } else {\n            return this.clone().endOf(units).valueOf() < localInput.valueOf();\n        }\n    }\n\n    function isBetween(from, to, units, inclusivity) {\n        var localFrom = isMoment(from) ? from : createLocal(from),\n            localTo = isMoment(to) ? to : createLocal(to);\n        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {\n            return false;\n        }\n        inclusivity = inclusivity || '()';\n        return (\n            (inclusivity[0] === '('\n                ? this.isAfter(localFrom, units)\n                : !this.isBefore(localFrom, units)) &&\n            (inclusivity[1] === ')'\n                ? this.isBefore(localTo, units)\n                : !this.isAfter(localTo, units))\n        );\n    }\n\n    function isSame(input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units) || 'millisecond';\n        if (units === 'millisecond') {\n            return this.valueOf() === localInput.valueOf();\n        } else {\n            inputMs = localInput.valueOf();\n            return (\n                this.clone().startOf(units).valueOf() <= inputMs &&\n                inputMs <= this.clone().endOf(units).valueOf()\n            );\n        }\n    }\n\n    function isSameOrAfter(input, units) {\n        return this.isSame(input, units) || this.isAfter(input, units);\n    }\n\n    function isSameOrBefore(input, units) {\n        return this.isSame(input, units) || this.isBefore(input, units);\n    }\n\n    function diff(input, units, asFloat) {\n        var that, zoneDelta, output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        switch (units) {\n            case 'year':\n                output = monthDiff(this, that) / 12;\n                break;\n            case 'month':\n                output = monthDiff(this, that);\n                break;\n            case 'quarter':\n                output = monthDiff(this, that) / 3;\n                break;\n            case 'second':\n                output = (this - that) / 1e3;\n                break; // 1000\n            case 'minute':\n                output = (this - that) / 6e4;\n                break; // 1000 * 60\n            case 'hour':\n                output = (this - that) / 36e5;\n                break; // 1000 * 60 * 60\n            case 'day':\n                output = (this - that - zoneDelta) / 864e5;\n                break; // 1000 * 60 * 60 * 24, negate dst\n            case 'week':\n                output = (this - that - zoneDelta) / 6048e5;\n                break; // 1000 * 60 * 60 * 24 * 7, negate dst\n            default:\n                output = this - that;\n        }\n\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff(a, b) {\n        if (a.date() < b.date()) {\n            // end-of-month calculations work correct when the start month has more\n            // days than the end month.\n            return -monthDiff(b, a);\n        }\n        // difference in months\n        var wholeMonthDiff = (b.year() - a.year()) * 12 + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2,\n            adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        //check for negative zero, return zero if negative zero\n        return -(wholeMonthDiff + adjust) || 0;\n    }\n\n    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\n    function toString() {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function toISOString(keepOffset) {\n        if (!this.isValid()) {\n            return null;\n        }\n        var utc = keepOffset !== true,\n            m = utc ? this.clone().utc() : this;\n        if (m.year() < 0 || m.year() > 9999) {\n            return formatMoment(\n                m,\n                utc\n                    ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'\n                    : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ'\n            );\n        }\n        if (isFunction(Date.prototype.toISOString)) {\n            // native implementation is ~50x faster, use it when we can\n            if (utc) {\n                return this.toDate().toISOString();\n            } else {\n                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000)\n                    .toISOString()\n                    .replace('Z', formatMoment(m, 'Z'));\n            }\n        }\n        return formatMoment(\n            m,\n            utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ'\n        );\n    }\n\n    /**\n     * Return a human readable representation of a moment that can\n     * also be evaluated to get a new moment which is the same\n     *\n     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n     */\n    function inspect() {\n        if (!this.isValid()) {\n            return 'moment.invalid(/* ' + this._i + ' */)';\n        }\n        var func = 'moment',\n            zone = '',\n            prefix,\n            year,\n            datetime,\n            suffix;\n        if (!this.isLocal()) {\n            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n            zone = 'Z';\n        }\n        prefix = '[' + func + '(\"]';\n        year = 0 <= this.year() && this.year() <= 9999 ? 'YYYY' : 'YYYYYY';\n        datetime = '-MM-DD[T]HH:mm:ss.SSS';\n        suffix = zone + '[\")]';\n\n        return this.format(prefix + year + datetime + suffix);\n    }\n\n    function format(inputString) {\n        if (!inputString) {\n            inputString = this.isUtc()\n                ? hooks.defaultFormatUtc\n                : hooks.defaultFormat;\n        }\n        var output = formatMoment(this, inputString);\n        return this.localeData().postformat(output);\n    }\n\n    function from(time, withoutSuffix) {\n        if (\n            this.isValid() &&\n            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n        ) {\n            return createDuration({ to: this, from: time })\n                .locale(this.locale())\n                .humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow(withoutSuffix) {\n        return this.from(createLocal(), withoutSuffix);\n    }\n\n    function to(time, withoutSuffix) {\n        if (\n            this.isValid() &&\n            ((isMoment(time) && time.isValid()) || createLocal(time).isValid())\n        ) {\n            return createDuration({ from: this, to: time })\n                .locale(this.locale())\n                .humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow(withoutSuffix) {\n        return this.to(createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale(key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData() {\n        return this._locale;\n    }\n\n    var MS_PER_SECOND = 1000,\n        MS_PER_MINUTE = 60 * MS_PER_SECOND,\n        MS_PER_HOUR = 60 * MS_PER_MINUTE,\n        MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;\n\n    // actual modulo - handles negative numbers (for dates before 1970):\n    function mod$1(dividend, divisor) {\n        return ((dividend % divisor) + divisor) % divisor;\n    }\n\n    function localStartOfDate(y, m, d) {\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return new Date(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return new Date(y, m, d).valueOf();\n        }\n    }\n\n    function utcStartOfDate(y, m, d) {\n        // Date.UTC remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0) {\n            // preserve leap years using a full 400 year cycle, then reset\n            return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;\n        } else {\n            return Date.UTC(y, m, d);\n        }\n    }\n\n    function startOf(units) {\n        var time, startOfDate;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year(), 0, 1);\n                break;\n            case 'quarter':\n                time = startOfDate(\n                    this.year(),\n                    this.month() - (this.month() % 3),\n                    1\n                );\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month(), 1);\n                break;\n            case 'week':\n                time = startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - this.weekday()\n                );\n                break;\n            case 'isoWeek':\n                time = startOfDate(\n                    this.year(),\n                    this.month(),\n                    this.date() - (this.isoWeekday() - 1)\n                );\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date());\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time -= mod$1(\n                    time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                    MS_PER_HOUR\n                );\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_MINUTE);\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time -= mod$1(time, MS_PER_SECOND);\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function endOf(units) {\n        var time, startOfDate;\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond' || !this.isValid()) {\n            return this;\n        }\n\n        startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;\n\n        switch (units) {\n            case 'year':\n                time = startOfDate(this.year() + 1, 0, 1) - 1;\n                break;\n            case 'quarter':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month() - (this.month() % 3) + 3,\n                        1\n                    ) - 1;\n                break;\n            case 'month':\n                time = startOfDate(this.year(), this.month() + 1, 1) - 1;\n                break;\n            case 'week':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month(),\n                        this.date() - this.weekday() + 7\n                    ) - 1;\n                break;\n            case 'isoWeek':\n                time =\n                    startOfDate(\n                        this.year(),\n                        this.month(),\n                        this.date() - (this.isoWeekday() - 1) + 7\n                    ) - 1;\n                break;\n            case 'day':\n            case 'date':\n                time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;\n                break;\n            case 'hour':\n                time = this._d.valueOf();\n                time +=\n                    MS_PER_HOUR -\n                    mod$1(\n                        time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE),\n                        MS_PER_HOUR\n                    ) -\n                    1;\n                break;\n            case 'minute':\n                time = this._d.valueOf();\n                time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;\n                break;\n            case 'second':\n                time = this._d.valueOf();\n                time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;\n                break;\n        }\n\n        this._d.setTime(time);\n        hooks.updateOffset(this, true);\n        return this;\n    }\n\n    function valueOf() {\n        return this._d.valueOf() - (this._offset || 0) * 60000;\n    }\n\n    function unix() {\n        return Math.floor(this.valueOf() / 1000);\n    }\n\n    function toDate() {\n        return new Date(this.valueOf());\n    }\n\n    function toArray() {\n        var m = this;\n        return [\n            m.year(),\n            m.month(),\n            m.date(),\n            m.hour(),\n            m.minute(),\n            m.second(),\n            m.millisecond(),\n        ];\n    }\n\n    function toObject() {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds(),\n        };\n    }\n\n    function toJSON() {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function isValid$2() {\n        return isValid(this);\n    }\n\n    function parsingFlags() {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt() {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict,\n        };\n    }\n\n    addFormatToken('N', 0, 0, 'eraAbbr');\n    addFormatToken('NN', 0, 0, 'eraAbbr');\n    addFormatToken('NNN', 0, 0, 'eraAbbr');\n    addFormatToken('NNNN', 0, 0, 'eraName');\n    addFormatToken('NNNNN', 0, 0, 'eraNarrow');\n\n    addFormatToken('y', ['y', 1], 'yo', 'eraYear');\n    addFormatToken('y', ['yy', 2], 0, 'eraYear');\n    addFormatToken('y', ['yyy', 3], 0, 'eraYear');\n    addFormatToken('y', ['yyyy', 4], 0, 'eraYear');\n\n    addRegexToken('N', matchEraAbbr);\n    addRegexToken('NN', matchEraAbbr);\n    addRegexToken('NNN', matchEraAbbr);\n    addRegexToken('NNNN', matchEraName);\n    addRegexToken('NNNNN', matchEraNarrow);\n\n    addParseToken(\n        ['N', 'NN', 'NNN', 'NNNN', 'NNNNN'],\n        function (input, array, config, token) {\n            var era = config._locale.erasParse(input, token, config._strict);\n            if (era) {\n                getParsingFlags(config).era = era;\n            } else {\n                getParsingFlags(config).invalidEra = input;\n            }\n        }\n    );\n\n    addRegexToken('y', matchUnsigned);\n    addRegexToken('yy', matchUnsigned);\n    addRegexToken('yyy', matchUnsigned);\n    addRegexToken('yyyy', matchUnsigned);\n    addRegexToken('yo', matchEraYearOrdinal);\n\n    addParseToken(['y', 'yy', 'yyy', 'yyyy'], YEAR);\n    addParseToken(['yo'], function (input, array, config, token) {\n        var match;\n        if (config._locale._eraYearOrdinalRegex) {\n            match = input.match(config._locale._eraYearOrdinalRegex);\n        }\n\n        if (config._locale.eraYearOrdinalParse) {\n            array[YEAR] = config._locale.eraYearOrdinalParse(input, match);\n        } else {\n            array[YEAR] = parseInt(input, 10);\n        }\n    });\n\n    function localeEras(m, format) {\n        var i,\n            l,\n            date,\n            eras = this._eras || getLocale('en')._eras;\n        for (i = 0, l = eras.length; i < l; ++i) {\n            switch (typeof eras[i].since) {\n                case 'string':\n                    // truncate time\n                    date = hooks(eras[i].since).startOf('day');\n                    eras[i].since = date.valueOf();\n                    break;\n            }\n\n            switch (typeof eras[i].until) {\n                case 'undefined':\n                    eras[i].until = +Infinity;\n                    break;\n                case 'string':\n                    // truncate time\n                    date = hooks(eras[i].until).startOf('day').valueOf();\n                    eras[i].until = date.valueOf();\n                    break;\n            }\n        }\n        return eras;\n    }\n\n    function localeErasParse(eraName, format, strict) {\n        var i,\n            l,\n            eras = this.eras(),\n            name,\n            abbr,\n            narrow;\n        eraName = eraName.toUpperCase();\n\n        for (i = 0, l = eras.length; i < l; ++i) {\n            name = eras[i].name.toUpperCase();\n            abbr = eras[i].abbr.toUpperCase();\n            narrow = eras[i].narrow.toUpperCase();\n\n            if (strict) {\n                switch (format) {\n                    case 'N':\n                    case 'NN':\n                    case 'NNN':\n                        if (abbr === eraName) {\n                            return eras[i];\n                        }\n                        break;\n\n                    case 'NNNN':\n                        if (name === eraName) {\n                            return eras[i];\n                        }\n                        break;\n\n                    case 'NNNNN':\n                        if (narrow === eraName) {\n                            return eras[i];\n                        }\n                        break;\n                }\n            } else if ([name, abbr, narrow].indexOf(eraName) >= 0) {\n                return eras[i];\n            }\n        }\n    }\n\n    function localeErasConvertYear(era, year) {\n        var dir = era.since <= era.until ? +1 : -1;\n        if (year === undefined) {\n            return hooks(era.since).year();\n        } else {\n            return hooks(era.since).year() + (year - era.offset) * dir;\n        }\n    }\n\n    function getEraName() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].name;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].name;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraNarrow() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].narrow;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].narrow;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraAbbr() {\n        var i,\n            l,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (eras[i].since <= val && val <= eras[i].until) {\n                return eras[i].abbr;\n            }\n            if (eras[i].until <= val && val <= eras[i].since) {\n                return eras[i].abbr;\n            }\n        }\n\n        return '';\n    }\n\n    function getEraYear() {\n        var i,\n            l,\n            dir,\n            val,\n            eras = this.localeData().eras();\n        for (i = 0, l = eras.length; i < l; ++i) {\n            dir = eras[i].since <= eras[i].until ? +1 : -1;\n\n            // truncate time\n            val = this.clone().startOf('day').valueOf();\n\n            if (\n                (eras[i].since <= val && val <= eras[i].until) ||\n                (eras[i].until <= val && val <= eras[i].since)\n            ) {\n                return (\n                    (this.year() - hooks(eras[i].since).year()) * dir +\n                    eras[i].offset\n                );\n            }\n        }\n\n        return this.year();\n    }\n\n    function erasNameRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasNameRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasNameRegex : this._erasRegex;\n    }\n\n    function erasAbbrRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasAbbrRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasAbbrRegex : this._erasRegex;\n    }\n\n    function erasNarrowRegex(isStrict) {\n        if (!hasOwnProp(this, '_erasNarrowRegex')) {\n            computeErasParse.call(this);\n        }\n        return isStrict ? this._erasNarrowRegex : this._erasRegex;\n    }\n\n    function matchEraAbbr(isStrict, locale) {\n        return locale.erasAbbrRegex(isStrict);\n    }\n\n    function matchEraName(isStrict, locale) {\n        return locale.erasNameRegex(isStrict);\n    }\n\n    function matchEraNarrow(isStrict, locale) {\n        return locale.erasNarrowRegex(isStrict);\n    }\n\n    function matchEraYearOrdinal(isStrict, locale) {\n        return locale._eraYearOrdinalRegex || matchUnsigned;\n    }\n\n    function computeErasParse() {\n        var abbrPieces = [],\n            namePieces = [],\n            narrowPieces = [],\n            mixedPieces = [],\n            i,\n            l,\n            eras = this.eras();\n\n        for (i = 0, l = eras.length; i < l; ++i) {\n            namePieces.push(regexEscape(eras[i].name));\n            abbrPieces.push(regexEscape(eras[i].abbr));\n            narrowPieces.push(regexEscape(eras[i].narrow));\n\n            mixedPieces.push(regexEscape(eras[i].name));\n            mixedPieces.push(regexEscape(eras[i].abbr));\n            mixedPieces.push(regexEscape(eras[i].narrow));\n        }\n\n        this._erasRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._erasNameRegex = new RegExp('^(' + namePieces.join('|') + ')', 'i');\n        this._erasAbbrRegex = new RegExp('^(' + abbrPieces.join('|') + ')', 'i');\n        this._erasNarrowRegex = new RegExp(\n            '^(' + narrowPieces.join('|') + ')',\n            'i'\n        );\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken(token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg', 'weekYear');\n    addWeekYearFormatToken('ggggg', 'weekYear');\n    addWeekYearFormatToken('GGGG', 'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PRIORITY\n\n    addUnitPriority('weekYear', 1);\n    addUnitPriority('isoWeekYear', 1);\n\n    // PARSING\n\n    addRegexToken('G', matchSigned);\n    addRegexToken('g', matchSigned);\n    addRegexToken('GG', match1to2, match2);\n    addRegexToken('gg', match1to2, match2);\n    addRegexToken('GGGG', match1to4, match4);\n    addRegexToken('gggg', match1to4, match4);\n    addRegexToken('GGGGG', match1to6, match6);\n    addRegexToken('ggggg', match1to6, match6);\n\n    addWeekParseToken(\n        ['gggg', 'ggggg', 'GGGG', 'GGGGG'],\n        function (input, week, config, token) {\n            week[token.substr(0, 2)] = toInt(input);\n        }\n    );\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear(input) {\n        return getSetWeekYearHelper.call(\n            this,\n            input,\n            this.week(),\n            this.weekday(),\n            this.localeData()._week.dow,\n            this.localeData()._week.doy\n        );\n    }\n\n    function getSetISOWeekYear(input) {\n        return getSetWeekYearHelper.call(\n            this,\n            input,\n            this.isoWeek(),\n            this.isoWeekday(),\n            1,\n            4\n        );\n    }\n\n    function getISOWeeksInYear() {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getISOWeeksInISOWeekYear() {\n        return weeksInYear(this.isoWeekYear(), 1, 4);\n    }\n\n    function getWeeksInYear() {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getWeeksInWeekYear() {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.weekYear(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PRIORITY\n\n    addUnitPriority('quarter', 7);\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter(input) {\n        return input == null\n            ? Math.ceil((this.month() + 1) / 3)\n            : this.month((input - 1) * 3 + (this.month() % 3));\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PRIORITY\n    addUnitPriority('date', 9);\n\n    // PARSING\n\n    addRegexToken('D', match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        return isStrict\n            ? locale._dayOfMonthOrdinalParse || locale._ordinalParse\n            : locale._dayOfMonthOrdinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0]);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PRIORITY\n    addUnitPriority('dayOfYear', 4);\n\n    // PARSING\n\n    addRegexToken('DDD', match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear(input) {\n        var dayOfYear =\n            Math.round(\n                (this.clone().startOf('day') - this.clone().startOf('year')) / 864e5\n            ) + 1;\n        return input == null ? dayOfYear : this.add(input - dayOfYear, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PRIORITY\n\n    addUnitPriority('minute', 14);\n\n    // PARSING\n\n    addRegexToken('m', match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PRIORITY\n\n    addUnitPriority('second', 15);\n\n    // PARSING\n\n    addRegexToken('s', match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PRIORITY\n\n    addUnitPriority('millisecond', 16);\n\n    // PARSING\n\n    addRegexToken('S', match1to3, match1);\n    addRegexToken('SS', match1to3, match2);\n    addRegexToken('SSS', match1to3, match3);\n\n    var token, getSetMillisecond;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n\n    getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z', 0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr() {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName() {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var proto = Moment.prototype;\n\n    proto.add = add;\n    proto.calendar = calendar$1;\n    proto.clone = clone;\n    proto.diff = diff;\n    proto.endOf = endOf;\n    proto.format = format;\n    proto.from = from;\n    proto.fromNow = fromNow;\n    proto.to = to;\n    proto.toNow = toNow;\n    proto.get = stringGet;\n    proto.invalidAt = invalidAt;\n    proto.isAfter = isAfter;\n    proto.isBefore = isBefore;\n    proto.isBetween = isBetween;\n    proto.isSame = isSame;\n    proto.isSameOrAfter = isSameOrAfter;\n    proto.isSameOrBefore = isSameOrBefore;\n    proto.isValid = isValid$2;\n    proto.lang = lang;\n    proto.locale = locale;\n    proto.localeData = localeData;\n    proto.max = prototypeMax;\n    proto.min = prototypeMin;\n    proto.parsingFlags = parsingFlags;\n    proto.set = stringSet;\n    proto.startOf = startOf;\n    proto.subtract = subtract;\n    proto.toArray = toArray;\n    proto.toObject = toObject;\n    proto.toDate = toDate;\n    proto.toISOString = toISOString;\n    proto.inspect = inspect;\n    if (typeof Symbol !== 'undefined' && Symbol.for != null) {\n        proto[Symbol.for('nodejs.util.inspect.custom')] = function () {\n            return 'Moment<' + this.format() + '>';\n        };\n    }\n    proto.toJSON = toJSON;\n    proto.toString = toString;\n    proto.unix = unix;\n    proto.valueOf = valueOf;\n    proto.creationData = creationData;\n    proto.eraName = getEraName;\n    proto.eraNarrow = getEraNarrow;\n    proto.eraAbbr = getEraAbbr;\n    proto.eraYear = getEraYear;\n    proto.year = getSetYear;\n    proto.isLeapYear = getIsLeapYear;\n    proto.weekYear = getSetWeekYear;\n    proto.isoWeekYear = getSetISOWeekYear;\n    proto.quarter = proto.quarters = getSetQuarter;\n    proto.month = getSetMonth;\n    proto.daysInMonth = getDaysInMonth;\n    proto.week = proto.weeks = getSetWeek;\n    proto.isoWeek = proto.isoWeeks = getSetISOWeek;\n    proto.weeksInYear = getWeeksInYear;\n    proto.weeksInWeekYear = getWeeksInWeekYear;\n    proto.isoWeeksInYear = getISOWeeksInYear;\n    proto.isoWeeksInISOWeekYear = getISOWeeksInISOWeekYear;\n    proto.date = getSetDayOfMonth;\n    proto.day = proto.days = getSetDayOfWeek;\n    proto.weekday = getSetLocaleDayOfWeek;\n    proto.isoWeekday = getSetISODayOfWeek;\n    proto.dayOfYear = getSetDayOfYear;\n    proto.hour = proto.hours = getSetHour;\n    proto.minute = proto.minutes = getSetMinute;\n    proto.second = proto.seconds = getSetSecond;\n    proto.millisecond = proto.milliseconds = getSetMillisecond;\n    proto.utcOffset = getSetOffset;\n    proto.utc = setOffsetToUTC;\n    proto.local = setOffsetToLocal;\n    proto.parseZone = setOffsetToParsedOffset;\n    proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    proto.isDST = isDaylightSavingTime;\n    proto.isLocal = isLocal;\n    proto.isUtcOffset = isUtcOffset;\n    proto.isUtc = isUtc;\n    proto.isUTC = isUtc;\n    proto.zoneAbbr = getZoneAbbr;\n    proto.zoneName = getZoneName;\n    proto.dates = deprecate(\n        'dates accessor is deprecated. Use date instead.',\n        getSetDayOfMonth\n    );\n    proto.months = deprecate(\n        'months accessor is deprecated. Use month instead',\n        getSetMonth\n    );\n    proto.years = deprecate(\n        'years accessor is deprecated. Use year instead',\n        getSetYear\n    );\n    proto.zone = deprecate(\n        'moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/',\n        getSetZone\n    );\n    proto.isDSTShifted = deprecate(\n        'isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information',\n        isDaylightSavingTimeShifted\n    );\n\n    function createUnix(input) {\n        return createLocal(input * 1000);\n    }\n\n    function createInZone() {\n        return createLocal.apply(null, arguments).parseZone();\n    }\n\n    function preParsePostFormat(string) {\n        return string;\n    }\n\n    var proto$1 = Locale.prototype;\n\n    proto$1.calendar = calendar;\n    proto$1.longDateFormat = longDateFormat;\n    proto$1.invalidDate = invalidDate;\n    proto$1.ordinal = ordinal;\n    proto$1.preparse = preParsePostFormat;\n    proto$1.postformat = preParsePostFormat;\n    proto$1.relativeTime = relativeTime;\n    proto$1.pastFuture = pastFuture;\n    proto$1.set = set;\n    proto$1.eras = localeEras;\n    proto$1.erasParse = localeErasParse;\n    proto$1.erasConvertYear = localeErasConvertYear;\n    proto$1.erasAbbrRegex = erasAbbrRegex;\n    proto$1.erasNameRegex = erasNameRegex;\n    proto$1.erasNarrowRegex = erasNarrowRegex;\n\n    proto$1.months = localeMonths;\n    proto$1.monthsShort = localeMonthsShort;\n    proto$1.monthsParse = localeMonthsParse;\n    proto$1.monthsRegex = monthsRegex;\n    proto$1.monthsShortRegex = monthsShortRegex;\n    proto$1.week = localeWeek;\n    proto$1.firstDayOfYear = localeFirstDayOfYear;\n    proto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n    proto$1.weekdays = localeWeekdays;\n    proto$1.weekdaysMin = localeWeekdaysMin;\n    proto$1.weekdaysShort = localeWeekdaysShort;\n    proto$1.weekdaysParse = localeWeekdaysParse;\n\n    proto$1.weekdaysRegex = weekdaysRegex;\n    proto$1.weekdaysShortRegex = weekdaysShortRegex;\n    proto$1.weekdaysMinRegex = weekdaysMinRegex;\n\n    proto$1.isPM = localeIsPM;\n    proto$1.meridiem = localeMeridiem;\n\n    function get$1(format, index, field, setter) {\n        var locale = getLocale(),\n            utc = createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function listMonthsImpl(format, index, field) {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return get$1(format, index, field, 'month');\n        }\n\n        var i,\n            out = [];\n        for (i = 0; i < 12; i++) {\n            out[i] = get$1(format, i, field, 'month');\n        }\n        return out;\n    }\n\n    // ()\n    // (5)\n    // (fmt, 5)\n    // (fmt)\n    // (true)\n    // (true, 5)\n    // (true, fmt, 5)\n    // (true, fmt)\n    function listWeekdaysImpl(localeSorted, format, index, field) {\n        if (typeof localeSorted === 'boolean') {\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        } else {\n            format = localeSorted;\n            index = format;\n            localeSorted = false;\n\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        }\n\n        var locale = getLocale(),\n            shift = localeSorted ? locale._week.dow : 0,\n            i,\n            out = [];\n\n        if (index != null) {\n            return get$1(format, (index + shift) % 7, field, 'day');\n        }\n\n        for (i = 0; i < 7; i++) {\n            out[i] = get$1(format, (i + shift) % 7, field, 'day');\n        }\n        return out;\n    }\n\n    function listMonths(format, index) {\n        return listMonthsImpl(format, index, 'months');\n    }\n\n    function listMonthsShort(format, index) {\n        return listMonthsImpl(format, index, 'monthsShort');\n    }\n\n    function listWeekdays(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n    }\n\n    function listWeekdaysShort(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n    }\n\n    function listWeekdaysMin(localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n    }\n\n    getSetGlobalLocale('en', {\n        eras: [\n            {\n                since: '0001-01-01',\n                until: +Infinity,\n                offset: 1,\n                name: 'Anno Domini',\n                narrow: 'AD',\n                abbr: 'AD',\n            },\n            {\n                since: '0000-12-31',\n                until: -Infinity,\n                offset: 1,\n                name: 'Before Christ',\n                narrow: 'BC',\n                abbr: 'BC',\n            },\n        ],\n        dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal: function (number) {\n            var b = number % 10,\n                output =\n                    toInt((number % 100) / 10) === 1\n                        ? 'th'\n                        : b === 1\n                        ? 'st'\n                        : b === 2\n                        ? 'nd'\n                        : b === 3\n                        ? 'rd'\n                        : 'th';\n            return number + output;\n        },\n    });\n\n    // Side effect imports\n\n    hooks.lang = deprecate(\n        'moment.lang is deprecated. Use moment.locale instead.',\n        getSetGlobalLocale\n    );\n    hooks.langData = deprecate(\n        'moment.langData is deprecated. Use moment.localeData instead.',\n        getLocale\n    );\n\n    var mathAbs = Math.abs;\n\n    function abs() {\n        var data = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days = mathAbs(this._days);\n        this._months = mathAbs(this._months);\n\n        data.milliseconds = mathAbs(data.milliseconds);\n        data.seconds = mathAbs(data.seconds);\n        data.minutes = mathAbs(data.minutes);\n        data.hours = mathAbs(data.hours);\n        data.months = mathAbs(data.months);\n        data.years = mathAbs(data.years);\n\n        return this;\n    }\n\n    function addSubtract$1(duration, input, value, direction) {\n        var other = createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days += direction * other._days;\n        duration._months += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function add$1(input, value) {\n        return addSubtract$1(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function subtract$1(input, value) {\n        return addSubtract$1(this, input, value, -1);\n    }\n\n    function absCeil(number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble() {\n        var milliseconds = this._milliseconds,\n            days = this._days,\n            months = this._months,\n            data = this._data,\n            seconds,\n            minutes,\n            hours,\n            years,\n            monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (\n            !(\n                (milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0)\n            )\n        ) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds = absFloor(milliseconds / 1000);\n        data.seconds = seconds % 60;\n\n        minutes = absFloor(seconds / 60);\n        data.minutes = minutes % 60;\n\n        hours = absFloor(minutes / 60);\n        data.hours = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days = days;\n        data.months = months;\n        data.years = years;\n\n        return this;\n    }\n\n    function daysToMonths(days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return (days * 4800) / 146097;\n    }\n\n    function monthsToDays(months) {\n        // the reverse of daysToMonths\n        return (months * 146097) / 4800;\n    }\n\n    function as(units) {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        var days,\n            months,\n            milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'quarter' || units === 'year') {\n            days = this._days + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            switch (units) {\n                case 'month':\n                    return months;\n                case 'quarter':\n                    return months / 3;\n                case 'year':\n                    return months / 12;\n            }\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week':\n                    return days / 7 + milliseconds / 6048e5;\n                case 'day':\n                    return days + milliseconds / 864e5;\n                case 'hour':\n                    return days * 24 + milliseconds / 36e5;\n                case 'minute':\n                    return days * 1440 + milliseconds / 6e4;\n                case 'second':\n                    return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond':\n                    return Math.floor(days * 864e5) + milliseconds;\n                default:\n                    throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function valueOf$1() {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs(alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms'),\n        asSeconds = makeAs('s'),\n        asMinutes = makeAs('m'),\n        asHours = makeAs('h'),\n        asDays = makeAs('d'),\n        asWeeks = makeAs('w'),\n        asMonths = makeAs('M'),\n        asQuarters = makeAs('Q'),\n        asYears = makeAs('y');\n\n    function clone$1() {\n        return createDuration(this);\n    }\n\n    function get$2(units) {\n        units = normalizeUnits(units);\n        return this.isValid() ? this[units + 's']() : NaN;\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this.isValid() ? this._data[name] : NaN;\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds'),\n        seconds = makeGetter('seconds'),\n        minutes = makeGetter('minutes'),\n        hours = makeGetter('hours'),\n        days = makeGetter('days'),\n        months = makeGetter('months'),\n        years = makeGetter('years');\n\n    function weeks() {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round,\n        thresholds = {\n            ss: 44, // a few seconds to seconds\n            s: 45, // seconds to minute\n            m: 45, // minutes to hour\n            h: 22, // hours to day\n            d: 26, // days to month/week\n            w: null, // weeks to month\n            M: 11, // months to year\n        };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime$1(posNegDuration, withoutSuffix, thresholds, locale) {\n        var duration = createDuration(posNegDuration).abs(),\n            seconds = round(duration.as('s')),\n            minutes = round(duration.as('m')),\n            hours = round(duration.as('h')),\n            days = round(duration.as('d')),\n            months = round(duration.as('M')),\n            weeks = round(duration.as('w')),\n            years = round(duration.as('y')),\n            a =\n                (seconds <= thresholds.ss && ['s', seconds]) ||\n                (seconds < thresholds.s && ['ss', seconds]) ||\n                (minutes <= 1 && ['m']) ||\n                (minutes < thresholds.m && ['mm', minutes]) ||\n                (hours <= 1 && ['h']) ||\n                (hours < thresholds.h && ['hh', hours]) ||\n                (days <= 1 && ['d']) ||\n                (days < thresholds.d && ['dd', days]);\n\n        if (thresholds.w != null) {\n            a =\n                a ||\n                (weeks <= 1 && ['w']) ||\n                (weeks < thresholds.w && ['ww', weeks]);\n        }\n        a = a ||\n            (months <= 1 && ['M']) ||\n            (months < thresholds.M && ['MM', months]) ||\n            (years <= 1 && ['y']) || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set the rounding function for relative time strings\n    function getSetRelativeTimeRounding(roundingFunction) {\n        if (roundingFunction === undefined) {\n            return round;\n        }\n        if (typeof roundingFunction === 'function') {\n            round = roundingFunction;\n            return true;\n        }\n        return false;\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function getSetRelativeTimeThreshold(threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        if (threshold === 's') {\n            thresholds.ss = limit - 1;\n        }\n        return true;\n    }\n\n    function humanize(argWithSuffix, argThresholds) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var withSuffix = false,\n            th = thresholds,\n            locale,\n            output;\n\n        if (typeof argWithSuffix === 'object') {\n            argThresholds = argWithSuffix;\n            argWithSuffix = false;\n        }\n        if (typeof argWithSuffix === 'boolean') {\n            withSuffix = argWithSuffix;\n        }\n        if (typeof argThresholds === 'object') {\n            th = Object.assign({}, thresholds, argThresholds);\n            if (argThresholds.s != null && argThresholds.ss == null) {\n                th.ss = argThresholds.s - 1;\n            }\n        }\n\n        locale = this.localeData();\n        output = relativeTime$1(this, !withSuffix, th, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var abs$1 = Math.abs;\n\n    function sign(x) {\n        return (x > 0) - (x < 0) || +x;\n    }\n\n    function toISOString$1() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var seconds = abs$1(this._milliseconds) / 1000,\n            days = abs$1(this._days),\n            months = abs$1(this._months),\n            minutes,\n            hours,\n            years,\n            s,\n            total = this.asSeconds(),\n            totalSign,\n            ymSign,\n            daysSign,\n            hmsSign;\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes = absFloor(seconds / 60);\n        hours = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n\n        totalSign = total < 0 ? '-' : '';\n        ymSign = sign(this._months) !== sign(total) ? '-' : '';\n        daysSign = sign(this._days) !== sign(total) ? '-' : '';\n        hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n        return (\n            totalSign +\n            'P' +\n            (years ? ymSign + years + 'Y' : '') +\n            (months ? ymSign + months + 'M' : '') +\n            (days ? daysSign + days + 'D' : '') +\n            (hours || minutes || seconds ? 'T' : '') +\n            (hours ? hmsSign + hours + 'H' : '') +\n            (minutes ? hmsSign + minutes + 'M' : '') +\n            (seconds ? hmsSign + s + 'S' : '')\n        );\n    }\n\n    var proto$2 = Duration.prototype;\n\n    proto$2.isValid = isValid$1;\n    proto$2.abs = abs;\n    proto$2.add = add$1;\n    proto$2.subtract = subtract$1;\n    proto$2.as = as;\n    proto$2.asMilliseconds = asMilliseconds;\n    proto$2.asSeconds = asSeconds;\n    proto$2.asMinutes = asMinutes;\n    proto$2.asHours = asHours;\n    proto$2.asDays = asDays;\n    proto$2.asWeeks = asWeeks;\n    proto$2.asMonths = asMonths;\n    proto$2.asQuarters = asQuarters;\n    proto$2.asYears = asYears;\n    proto$2.valueOf = valueOf$1;\n    proto$2._bubble = bubble;\n    proto$2.clone = clone$1;\n    proto$2.get = get$2;\n    proto$2.milliseconds = milliseconds;\n    proto$2.seconds = seconds;\n    proto$2.minutes = minutes;\n    proto$2.hours = hours;\n    proto$2.days = days;\n    proto$2.weeks = weeks;\n    proto$2.months = months;\n    proto$2.years = years;\n    proto$2.humanize = humanize;\n    proto$2.toISOString = toISOString$1;\n    proto$2.toString = toISOString$1;\n    proto$2.toJSON = toISOString$1;\n    proto$2.locale = locale;\n    proto$2.localeData = localeData;\n\n    proto$2.toIsoString = deprecate(\n        'toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)',\n        toISOString$1\n    );\n    proto$2.lang = lang;\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    //! moment.js\n\n    hooks.version = '2.29.4';\n\n    setHookCallback(createLocal);\n\n    hooks.fn = proto;\n    hooks.min = min;\n    hooks.max = max;\n    hooks.now = now;\n    hooks.utc = createUTC;\n    hooks.unix = createUnix;\n    hooks.months = listMonths;\n    hooks.isDate = isDate;\n    hooks.locale = getSetGlobalLocale;\n    hooks.invalid = createInvalid;\n    hooks.duration = createDuration;\n    hooks.isMoment = isMoment;\n    hooks.weekdays = listWeekdays;\n    hooks.parseZone = createInZone;\n    hooks.localeData = getLocale;\n    hooks.isDuration = isDuration;\n    hooks.monthsShort = listMonthsShort;\n    hooks.weekdaysMin = listWeekdaysMin;\n    hooks.defineLocale = defineLocale;\n    hooks.updateLocale = updateLocale;\n    hooks.locales = listLocales;\n    hooks.weekdaysShort = listWeekdaysShort;\n    hooks.normalizeUnits = normalizeUnits;\n    hooks.relativeTimeRounding = getSetRelativeTimeRounding;\n    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\n    hooks.calendarFormat = getCalendarFormat;\n    hooks.prototype = proto;\n\n    // currently HTML5 input type only supports 24-hour formats\n    hooks.HTML5_FMT = {\n        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm', // <input type=\"datetime-local\" />\n        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss', // <input type=\"datetime-local\" step=\"1\" />\n        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS', // <input type=\"datetime-local\" step=\"0.001\" />\n        DATE: 'YYYY-MM-DD', // <input type=\"date\" />\n        TIME: 'HH:mm', // <input type=\"time\" />\n        TIME_SECONDS: 'HH:mm:ss', // <input type=\"time\" step=\"1\" />\n        TIME_MS: 'HH:mm:ss.SSS', // <input type=\"time\" step=\"0.001\" />\n        WEEK: 'GGGG-[W]WW', // <input type=\"week\" />\n        MONTH: 'YYYY-MM', // <input type=\"month\" />\n    };\n\n    return hooks;\n\n})));\n","import { BufferGeometry, Material, Mesh, Object3D, Scene } from 'three';\r\nimport { IFCManager } from './IFCManager';\r\nimport { BaseSubsetConfig } from '../BaseDefinitions';\r\n\r\nconst nullIfcManagerErrorMessage = 'IfcManager is null!';\r\n\r\n/**\r\n * Represents an IFC model. This object is returned by the `IFCLoader` after loading an IFC.\r\n * @geometry `THREE.Buffergeometry`, see Three.js documentation.\r\n * @materials `THREE.Material[]`, see Three.js documentation.\r\n * @manager contains all the logic to work with IFC.\r\n */\r\nexport class IFCModel extends Mesh {\r\n\r\n    private static modelIdCounter = 0;\r\n\r\n    static dispose() {\r\n        IFCModel.modelIdCounter = 0;\r\n    }\r\n\r\n    modelID = IFCModel.modelIdCounter++;\r\n    ifcManager: IFCManager | null = null;\r\n\r\n    /**\r\n     * @deprecated `IfcModel` is already a mesh; you can place it in the scene directly.\r\n     */\r\n    mesh = this;\r\n\r\n    setIFCManager(manager: IFCManager) {\r\n        this.ifcManager = manager;\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.setWasmPath` instead.\r\n     *\r\n     * Sets the relative path of web-ifc.wasm file in the project.\r\n     * Beware: you **must** serve this file in your page; this means\r\n     * that you have to copy this files from *node_modules/web-ifc*\r\n     * to your deployment directory.\r\n     *\r\n     * If you don't use this methods,\r\n     * IFC.js assumes that you are serving it in the root directory.\r\n     *\r\n     * Example if web-ifc.wasm is in dist/wasmDir:\r\n     * `ifcLoader.setWasmPath(\"dist/wasmDir/\");`\r\n     *\r\n     * @path Relative path to web-ifc.wasm.\r\n     */\r\n    setWasmPath(path: string) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        this.ifcManager.setWasmPath(path);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.close` instead.\r\n     *\r\n     * Closes the specified model and deletes it from the [scene](https://threejs.org/docs/#api/en/scenes/Scene).\r\n     * @scene Scene where the model is (if it's located in a scene).\r\n     */\r\n    close(scene?: Scene) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        this.ifcManager.close(this.modelID, scene);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getExpressId` instead.\r\n     *\r\n     * Gets the **Express ID** to which the given face belongs.\r\n     * This ID uniquely identifies this entity within this IFC file.\r\n     * @geometry The geometry of the IFC model.\r\n     * @faceIndex The index of the face of a geometry.You can easily get this index using the [Raycaster](https://threejs.org/docs/#api/en/core/Raycaster).\r\n     */\r\n    getExpressId(geometry: BufferGeometry, faceIndex: number) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getExpressId(geometry, faceIndex);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getAllItemsOfType` instead.\r\n     *\r\n     * Returns all items of the specified type. You can import\r\n     * the types from *web-ifc*.\r\n     *\r\n     * Example to get all the standard walls of a project:\r\n     * ```js\r\n     * import { IFCWALLSTANDARDCASE } from 'web-ifc';\r\n     * const walls = ifcLoader.getAllItemsOfType(IFCWALLSTANDARDCASE);\r\n     * ```\r\n     * @type The type of IFC items to get.\r\n     * @verbose If false (default), this only gets IDs. If true, this also gets the native properties of all the fetched items.\r\n     */\r\n    getAllItemsOfType(type: number, verbose: boolean) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getAllItemsOfType(this.modelID, type, verbose);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getItemProperties` instead.\r\n     *\r\n     * Gets the native properties of the given element.\r\n     * @id Express ID of the element.\r\n     * @recursive Wether you want to get the information of the referenced elements recursively.\r\n     */\r\n    getItemProperties(id: number, recursive = false) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getItemProperties(this.modelID, id, recursive);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getPropertySets` instead.\r\n     *\r\n     * Gets the [property sets](https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/schema/ifckernel/lexical/ifcpropertyset.htm)\r\n     * assigned to the given element.\r\n     * @id Express ID of the element.\r\n     * @recursive If true, this gets the native properties of the referenced elements recursively.\r\n     */\r\n    getPropertySets(id: number, recursive = false) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getPropertySets(this.modelID, id, recursive);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getTypeProperties` instead.\r\n     *\r\n     * Gets the properties of the type assigned to the element.\r\n     * For example, if applied to a wall (IfcWall), this would get back the information\r\n     * contained in the IfcWallType assigned to it, if any.\r\n     * @id Express ID of the element.\r\n     * @recursive If true, this gets the native properties of the referenced elements recursively.\r\n     */\r\n    getTypeProperties(id: number, recursive = false) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getTypeProperties(this.modelID, id, recursive);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getIfcType` instead.\r\n     *\r\n     * Gets the ifc type of the specified item.\r\n     * @id Express ID of the element.\r\n     */\r\n    getIfcType(id: number) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getIfcType(this.modelID, id);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getSpatialStructure` instead.\r\n     *\r\n     * Gets the spatial structure of the project. The\r\n     * [spatial structure](https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/schema/ifcproductextension/lexical/ifcspatialstructureelement.htm)\r\n     * is the hierarchical structure that organizes every IFC project (all physical items\r\n     * are referenced to an element of the spatial structure). It is formed by\r\n     * one IfcProject that contains one or more IfcSites, that contain one or more\r\n     * IfcBuildings, that contain one or more IfcBuildingStoreys, that contain\r\n     * one or more IfcSpaces.\r\n     */\r\n    getSpatialStructure() {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getSpatialStructure(this.modelID);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.getSubset` instead.\r\n     *\r\n     * Gets the mesh of the subset with the specified [material](https://threejs.org/docs/#api/en/materials/Material).\r\n     * If no material is given, this returns the subset with the original materials.\r\n     * @material Material assigned to the subset, if any.\r\n     */\r\n    getSubset(material?: Material) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        return this.ifcManager.getSubset(this.modelID, material);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.removeSubset` instead.\r\n     *\r\n     * Removes the specified subset.\r\n     * @parent The parent where the subset is (can be any `THREE.Object3D`).\r\n     * @material Material assigned to the subset, if any.\r\n     */\r\n    removeSubset(material?: Material, customID?: string) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        this.ifcManager.removeSubset(this.modelID, material, customID);\r\n    }\r\n\r\n    /**\r\n     * @deprecated Use `IfcModel.ifcManager.createSubset` instead.\r\n     *\r\n     * Creates a new geometric subset.\r\n     * @config A configuration object with the following options:\r\n     * - **scene**: `THREE.Object3D` where the model is located.\r\n     * - **ids**: Express IDs of the items of the model that will conform the subset.\r\n     * - **removePrevious**: Wether to remove the previous subset of this model with this material.\r\n     * - **material**: (optional) Wether to apply a material to the subset\r\n     */\r\n    createSubset(config: BaseSubsetConfig) {\r\n        if (this.ifcManager === null) throw new Error(nullIfcManagerErrorMessage);\r\n        const modelConfig = { ...config, modelID: this.modelID };\r\n        return this.ifcManager.createSubset(modelConfig);\r\n    }\r\n}\r\n","//@ts-ignore\r\nimport {\r\n    PlacedGeometry,\r\n    Color as ifcColor,\r\n    IfcGeometry,\r\n    IFCSPACE,\r\n    FlatMesh,\r\n    IFCOPENINGELEMENT,\r\n    IFCPRODUCTDEFINITIONSHAPE\r\n} from 'web-ifc';\r\nimport { IfcState, IfcMesh } from '../BaseDefinitions';\r\nimport {\r\n    Color,\r\n    MeshLambertMaterial,\r\n    DoubleSide,\r\n    Matrix4,\r\n    BufferGeometry,\r\n    BufferAttribute,\r\n    Mesh\r\n} from 'three';\r\nimport { mergeBufferGeometries } from 'three/examples/jsm/utils/BufferGeometryUtils';\r\nimport { BvhManager } from './BvhManager';\r\nimport { IFCModel } from './IFCModel';\r\n\r\nexport interface ParserProgress {\r\n    loaded: number;\r\n    total: number;\r\n}\r\n\r\nexport interface OptionalCategories {\r\n    [category: number]: boolean\r\n}\r\n\r\nexport interface ParserAPI {\r\n    parse(buffer: any, coordinationMatrix?: number[]): Promise<IFCModel>;\r\n\r\n    getAndClearErrors(_modelId: number): void;\r\n\r\n    setupOptionalCategories(config: OptionalCategories): Promise<void>;\r\n\r\n    optionalCategories: OptionalCategories;\r\n}\r\n\r\nexport interface GeometriesByMaterial {\r\n    [materialID: string]: {\r\n        material: MeshLambertMaterial,\r\n        geometries: BufferGeometry[]\r\n    }\r\n}\r\n\r\n/**\r\n * Reads all the geometry of the IFC file and generates an optimized `THREE.Mesh`.\r\n */\r\nexport class IFCParser implements ParserAPI {\r\n    loadedModels = 0;\r\n\r\n    optionalCategories: OptionalCategories = {\r\n        [IFCSPACE]: true,\r\n        [IFCOPENINGELEMENT]: false\r\n    };\r\n\r\n    private geometriesByMaterials: GeometriesByMaterial = {};\r\n\r\n    private loadingState = {\r\n        total: 0,\r\n        current: 0,\r\n        step: 0.1\r\n    }\r\n\r\n    // Represents the index of the model in webIfcAPI\r\n    private currentWebIfcID = -1;\r\n    // When using JSON data for optimization, webIfcAPI is reinitialized every time a model is loaded\r\n    // This means that currentID is always 0, while currentModelID is the real index of stored models\r\n    private currentModelID = -1;\r\n\r\n    // BVH is optional because when using workers we have to apply it in the main thread,\r\n    // once the model has been serialized and reconstructed\r\n    constructor(private state: IfcState, private BVH?: BvhManager) {\r\n    }\r\n\r\n    async setupOptionalCategories(config: OptionalCategories) {\r\n        this.optionalCategories = config;\r\n    }\r\n\r\n    async parse(buffer: any, coordinationMatrix?: number[]) {\r\n        if (this.state.api.wasmModule === undefined) await this.state.api.Init();\r\n        await this.newIfcModel(buffer);\r\n        this.loadedModels++;\r\n        if (coordinationMatrix) {\r\n            await this.state.api.SetGeometryTransformation(this.currentWebIfcID, coordinationMatrix);\r\n        }\r\n        return this.loadAllGeometry(this.currentWebIfcID);\r\n    }\r\n\r\n    getAndClearErrors(_modelId: number) {\r\n        // return this.state.api.GetAndClearErrors(modelId);\r\n    }\r\n\r\n    private notifyProgress(loaded: number, total: number) {\r\n        if (this.state.onProgress) this.state.onProgress({ loaded, total });\r\n    }\r\n\r\n    private async newIfcModel(buffer: any) {\r\n        const data = new Uint8Array(buffer);\r\n        this.currentWebIfcID = await this.state.api.OpenModel(data, this.state.webIfcSettings);\r\n        this.currentModelID = this.state.useJSON ? this.loadedModels : this.currentWebIfcID;\r\n        this.state.models[this.currentModelID] = {\r\n            modelID: this.currentModelID,\r\n            mesh: {} as IfcMesh,\r\n            types: {},\r\n            jsonData: {}\r\n        };\r\n    }\r\n\r\n    private async loadAllGeometry(modelID: number) {\r\n        this.addOptionalCategories(modelID);\r\n        await this.initializeLoadingState(modelID);\r\n\r\n        this.state.api.StreamAllMeshes(modelID, (mesh: FlatMesh) => {\r\n            this.updateLoadingState();\r\n            // only during the lifetime of this function call, the geometry is available in memory\r\n            this.streamMesh(modelID, mesh);\r\n        });\r\n\r\n        this.notifyLoadingEnded();\r\n        const geometries: BufferGeometry[] = [];\r\n        const materials: MeshLambertMaterial[] = [];\r\n\r\n        Object.keys(this.geometriesByMaterials).forEach((key) => {\r\n            const geometriesByMaterial = this.geometriesByMaterials[key].geometries;\r\n            const merged = mergeBufferGeometries(geometriesByMaterial);\r\n            materials.push(this.geometriesByMaterials[key].material);\r\n            geometries.push(merged);\r\n        });\r\n\r\n        const combinedGeometry = mergeBufferGeometries(geometries, true);\r\n        this.cleanUpGeometryMemory(geometries);\r\n        if (this.BVH) this.BVH.applyThreeMeshBVH(combinedGeometry);\r\n        const model = new IFCModel(combinedGeometry, materials);\r\n        this.state.models[this.currentModelID].mesh = model;\r\n        return model;\r\n    }\r\n\r\n    private async initializeLoadingState(modelID: number) {\r\n        const shapes = await this.state.api.GetLineIDsWithType(modelID, IFCPRODUCTDEFINITIONSHAPE);\r\n        this.loadingState.total = shapes.size();\r\n        this.loadingState.current = 0;\r\n        this.loadingState.step = 0.1;\r\n    }\r\n\r\n    private notifyLoadingEnded() {\r\n        this.notifyProgress(this.loadingState.total, this.loadingState.total);\r\n    }\r\n\r\n    private updateLoadingState() {\r\n        const realCurrentItem = Math.min(this.loadingState.current++, this.loadingState.total);\r\n        if(realCurrentItem / this.loadingState.total >= this.loadingState.step) {\r\n            const currentProgress = Math.ceil(this.loadingState.total * this.loadingState.step);\r\n            this.notifyProgress(currentProgress, this.loadingState.total);\r\n            this.loadingState.step += 0.1;\r\n        }\r\n    }\r\n\r\n    // Some categories (like IfcSpace and IfcOpeningElement) need to be set explicitly\r\n    private addOptionalCategories(modelID: number) {\r\n\r\n        const optionalTypes: number[] = [];\r\n\r\n        for (let key in this.optionalCategories) {\r\n            if (this.optionalCategories.hasOwnProperty(key)) {\r\n                const category = parseInt(key);\r\n                if (this.optionalCategories[category]) optionalTypes.push(category);\r\n            }\r\n        }\r\n\r\n        this.state.api.StreamAllMeshesWithTypes(this.currentWebIfcID, optionalTypes, (mesh: FlatMesh) => {\r\n            this.streamMesh(modelID, mesh);\r\n        });\r\n    }\r\n\r\n    private streamMesh(modelID: number, mesh: FlatMesh) {\r\n        const placedGeometries = mesh.geometries;\r\n        const size = placedGeometries.size();\r\n\r\n        for (let i = 0; i < size; i++) {\r\n            const placedGeometry = placedGeometries.get(i);\r\n            let itemMesh = this.getPlacedGeometry(modelID, mesh.expressID, placedGeometry);\r\n            let geom = itemMesh.geometry.applyMatrix4(itemMesh.matrix);\r\n            this.storeGeometryByMaterial(placedGeometry.color, geom);\r\n        }\r\n    }\r\n\r\n    private getPlacedGeometry(modelID: number, expressID: number, placedGeometry: PlacedGeometry) {\r\n        const geometry = this.getBufferGeometry(modelID, expressID, placedGeometry);\r\n        const mesh = new Mesh(geometry);\r\n        mesh.matrix = this.getMeshMatrix(placedGeometry.flatTransformation);\r\n        mesh.matrixAutoUpdate = false;\r\n        return mesh;\r\n    }\r\n\r\n    private getBufferGeometry(modelID: number, expressID: number, placedGeometry: PlacedGeometry) {\r\n        const geometry = this.state.api.GetGeometry(modelID, placedGeometry.geometryExpressID) as IfcGeometry;\r\n        const verts = this.state.api.GetVertexArray(geometry.GetVertexData(), geometry.GetVertexDataSize()) as Float32Array;\r\n        const indices = this.state.api.GetIndexArray(geometry.GetIndexData(), geometry.GetIndexDataSize()) as Uint32Array;\r\n        const buffer = this.ifcGeometryToBuffer(expressID, verts, indices);\r\n        //@ts-ignore\r\n        geometry.delete();\r\n        return buffer;\r\n    }\r\n\r\n    private storeGeometryByMaterial(color: ifcColor, geometry: BufferGeometry) {\r\n        let colID = `${color.x}${color.y}${color.z}${color.w}`;\r\n        if (this.geometriesByMaterials[colID]) {\r\n            this.geometriesByMaterials[colID].geometries.push(geometry);\r\n            return;\r\n        }\r\n\r\n        const col = new Color(color.x, color.y, color.z);\r\n        const material = new MeshLambertMaterial({ color: col, side: DoubleSide });\r\n        material.transparent = color.w !== 1;\r\n        if (material.transparent) material.opacity = color.w;\r\n        this.geometriesByMaterials[colID] = { material, geometries: [geometry] };\r\n    }\r\n\r\n    private getMeshMatrix(matrix: Array<number>) {\r\n        const mat = new Matrix4();\r\n        mat.fromArray(matrix);\r\n        return mat;\r\n    }\r\n\r\n    private ifcGeometryToBuffer(expressID: number, vertexData: Float32Array, indexData: Uint32Array) {\r\n        const geometry = new BufferGeometry();\r\n\r\n        const posFloats = new Float32Array(vertexData.length / 2);\r\n        const normFloats = new Float32Array(vertexData.length / 2);\r\n        const idAttribute = new Uint32Array(vertexData.length / 6);\r\n\r\n        for (let i = 0; i < vertexData.length; i += 6) {\r\n            posFloats[i / 2] = vertexData[i];\r\n            posFloats[i / 2 + 1] = vertexData[i + 1];\r\n            posFloats[i / 2 + 2] = vertexData[i + 2];\r\n\r\n            normFloats[i / 2] = vertexData[i + 3];\r\n            normFloats[i / 2 + 1] = vertexData[i + 4];\r\n            normFloats[i / 2 + 2] = vertexData[i + 5];\r\n\r\n            idAttribute[i / 6] = expressID;\r\n        }\r\n\r\n        geometry.setAttribute(\r\n            'position',\r\n            new BufferAttribute(posFloats, 3));\r\n        geometry.setAttribute(\r\n            'normal',\r\n            new BufferAttribute(normFloats, 3));\r\n        geometry.setAttribute(\r\n            'expressID',\r\n            new BufferAttribute(idAttribute, 1));\r\n\r\n        geometry.setIndex(new BufferAttribute(indexData, 1));\r\n        return geometry;\r\n    }\r\n\r\n    // Three.js geometry has to be manually deallocated\r\n    private cleanUpGeometryMemory(geometries: BufferGeometry[]) {\r\n        geometries.forEach(geometry => geometry.dispose());\r\n\r\n        Object.keys(this.geometriesByMaterials).forEach((materialID) => {\r\n            const geometriesByMaterial = this.geometriesByMaterials[materialID];\r\n            geometriesByMaterial.geometries.forEach(geometry => geometry.dispose());\r\n            geometriesByMaterial.geometries = [];\r\n            // @ts-ignore\r\n            geometriesByMaterial.material = null;\r\n        });\r\n        this.geometriesByMaterials = {};\r\n    }\r\n}\r\n","import { Vector as WebIfcVector, IfcGeometry as WebIfcIfcGeometry, FlatMesh as WebIfcFlatMesh } from 'web-ifc';\r\nimport { SerializedFlatMesh, SerializedIfcGeometry, SerializedVector } from '../BaseDefinitions';\r\nimport { Vector } from './Vector';\r\nimport { IfcGeometry } from './IfcGeometry';\r\nimport { FlatMesh } from './FlatMesh';\r\nimport { FlatMeshVector } from './FlatMeshVector';\r\nimport { IFCModel } from '../../components/IFCModel';\r\nimport { MeshReconstructor, SerializedMesh } from './Mesh';\r\n\r\nexport class Serializer {\r\n\r\n    serializeVector<T>(vector: WebIfcVector<T>) {\r\n        const size = vector.size();\r\n        const serialized: SerializedVector = { size };\r\n        for (let i = 0; i < size; i++) {\r\n            serialized[i] = vector.get(i);\r\n        }\r\n        return serialized;\r\n    }\r\n\r\n    reconstructVector(vector: SerializedVector): Vector<any> {\r\n        return new Vector(vector);\r\n    }\r\n\r\n    serializeIfcGeometry(geometry: WebIfcIfcGeometry) {\r\n        const GetVertexData = geometry.GetVertexData();\r\n        const GetVertexDataSize = geometry.GetVertexDataSize();\r\n        const GetIndexData = geometry.GetIndexData();\r\n        const GetIndexDataSize = geometry.GetIndexDataSize();\r\n        return {\r\n            GetVertexData,\r\n            GetVertexDataSize,\r\n            GetIndexData,\r\n            GetIndexDataSize\r\n        } as SerializedIfcGeometry;\r\n    }\r\n\r\n    reconstructIfcGeometry(geometry: SerializedIfcGeometry) {\r\n        return new IfcGeometry(geometry);\r\n    }\r\n\r\n    serializeFlatMesh(flatMesh: WebIfcFlatMesh) {\r\n        return {\r\n            expressID: flatMesh.expressID,\r\n            geometries: this.serializeVector(flatMesh.geometries)\r\n        } as SerializedFlatMesh;\r\n    }\r\n\r\n    reconstructFlatMesh(flatMesh: SerializedFlatMesh) {\r\n        return new FlatMesh(this, flatMesh);\r\n    }\r\n\r\n    serializeFlatMeshVector(vector: WebIfcVector<WebIfcFlatMesh>) {\r\n        const size = vector.size();\r\n        const serialized: SerializedVector = { size };\r\n        for (let i = 0; i < size; i++) {\r\n            const flatMesh = vector.get(i);\r\n            serialized[i] = this.serializeFlatMesh(flatMesh);\r\n        }\r\n        return serialized;\r\n    }\r\n\r\n    reconstructFlatMeshVector(vector: SerializedVector): WebIfcVector<WebIfcFlatMesh> {\r\n        return new FlatMeshVector(this, vector);\r\n    }\r\n\r\n    serializeIfcModel(model: IFCModel) {\r\n        return new SerializedMesh(model);\r\n    }\r\n\r\n    reconstructIfcModel(model: SerializedMesh) {\r\n        return MeshReconstructor.new(model);\r\n    }\r\n}","import { IfcState } from '../../BaseDefinitions';\r\nimport { BufferAttribute, BufferGeometry, Material } from 'three';\r\n\r\n// The number array has the meaning: [start, end, start, end, start, end...]\r\nexport interface Indices {\r\n    [materialID: number]: number[]\r\n}\r\n\r\nexport interface IndexedGeometry extends BufferGeometry {\r\n    index: BufferAttribute;\r\n}\r\n\r\nexport interface Group {\r\n    start: number,\r\n    count: number,\r\n    materialIndex?: number\r\n}\r\n\r\nexport interface Items {\r\n    indexCache: Uint32Array,\r\n    map: Map<number, Indices>\r\n}\r\n\r\nexport interface IndicesMap {\r\n    [modelID: number]: {\r\n        indexCache: Uint32Array;\r\n        map: Map<number, Indices>;\r\n    }\r\n}\r\n\r\nexport class ItemsMap {\r\n\r\n    constructor(private state: IfcState) {\r\n    }\r\n\r\n    map: IndicesMap = {};\r\n\r\n    generateGeometryIndexMap(modelID: number) {\r\n        if (this.map[modelID]) return;\r\n        const geometry = this.getGeometry(modelID);\r\n        const items = this.newItemsMap(modelID, geometry);\r\n        for (const group of geometry.groups) {\r\n            this.fillItemsWithGroupInfo(group, geometry, items);\r\n        }\r\n    }\r\n\r\n    getSubsetID(modelID: number, material?: Material, customID = 'DEFAULT') {\r\n        const baseID = modelID;\r\n        const materialID = material ? material.uuid : 'DEFAULT';\r\n        return `${baseID} - ${materialID} - ${customID}`;\r\n    }\r\n\r\n    // Use this only for destroying the current IFCLoader instance\r\n    dispose() {\r\n        Object.values(this.map).forEach(model => {\r\n            (model.indexCache as any) = null;\r\n            (model.map as any) = null;\r\n        });\r\n\r\n        (this.map as any) = null;\r\n    }\r\n\r\n    private getGeometry(modelID: number) {\r\n        const geometry = this.state.models[modelID].mesh.geometry;\r\n        if (!geometry) throw new Error('Model without geometry.');\r\n        if (!geometry.index) throw new Error('Geometry must be indexed');\r\n        return geometry as IndexedGeometry;\r\n    }\r\n\r\n    private newItemsMap(modelID: number, geometry: IndexedGeometry) {\r\n        const startIndices = geometry.index.array as Uint32Array;\r\n        this.map[modelID] = {\r\n            indexCache: startIndices.slice(0, geometry.index.array.length),\r\n            map: new Map()\r\n        };\r\n        return this.map[modelID] as Items;\r\n    }\r\n\r\n    private fillItemsWithGroupInfo(group: Group, geometry: IndexedGeometry, items: Items) {\r\n        let prevExpressID = -1;\r\n\r\n        const materialIndex = group.materialIndex as number;\r\n        const materialStart = group.start;\r\n        const materialEnd = materialStart + group.count - 1;\r\n\r\n        let objectStart = -1;\r\n        let objectEnd = -1;\r\n\r\n        for (let i = materialStart; i <= materialEnd; i++) {\r\n            const index = geometry.index.array[i];\r\n            const expressID = geometry.attributes.expressID.array[index];\r\n\r\n            // First iteration\r\n            if (prevExpressID === -1) {\r\n                prevExpressID = expressID;\r\n                objectStart = i;\r\n            }\r\n\r\n            // It's the end of the material, which also means end of the object\r\n            const isEndOfMaterial = i === materialEnd;\r\n            if (isEndOfMaterial) {\r\n                const store = this.getMaterialStore(items.map, expressID, materialIndex);\r\n                store.push(objectStart, materialEnd);\r\n                break;\r\n            }\r\n\r\n            // Still going through the same object\r\n            if (prevExpressID === expressID) continue;\r\n\r\n            // New object starts; save previous object\r\n\r\n            // Store previous object\r\n            const store = this.getMaterialStore(items.map, prevExpressID, materialIndex);\r\n            objectEnd = i - 1;\r\n            store.push(objectStart, objectEnd);\r\n\r\n            // Get ready to process next object\r\n            prevExpressID = expressID;\r\n            objectStart = i;\r\n        }\r\n    }\r\n\r\n    private getMaterialStore(map: Map<number, Indices>, id: number, matIndex: number) {\r\n        // If this object wasn't store before, add it to the map\r\n        if (map.get(id) === undefined) {\r\n            map.set(id, {});\r\n        }\r\n        const storedIfcItem = map.get(id);\r\n        if (storedIfcItem === undefined) throw new Error('Geometry map generation error');\r\n\r\n        // If this material wasn't stored for this object before, add it to the object\r\n        if (storedIfcItem[matIndex] === undefined) {\r\n            storedIfcItem[matIndex] = [];\r\n        }\r\n        return storedIfcItem[matIndex];\r\n    }\r\n\r\n}","export class SubsetUtils {\r\n\r\n    // If flatten, all indices are in the same array; otherwise, indices are split in subarrays by material\r\n    static getAllIndicesOfGroup(modelID: number, ids: number[], materialIndex: number, items: any, flatten = true) {\r\n        const indicesByGroup: any = [];\r\n        for (const expressID of ids) {\r\n            const entry = items.map.get(expressID);\r\n            if (!entry) continue;\r\n            const value = entry[materialIndex];\r\n            if (!value) continue;\r\n            SubsetUtils.getIndexChunk(value, indicesByGroup, materialIndex, items, flatten);\r\n        }\r\n        return indicesByGroup;\r\n    }\r\n\r\n    private static getIndexChunk(value: number[], indicesByGroup: any, materialIndex: number, items: any, flatten: boolean) {\r\n        const pairs = value.length / 2;\r\n        for (let pair = 0; pair < pairs; pair++) {\r\n            const pairIndex = pair * 2;\r\n            const start = value[pairIndex];\r\n            const end = value[pairIndex + 1];\r\n            for (let j = start; j <= end; j++) {\r\n                if(flatten) indicesByGroup.push(items.indexCache[j]);\r\n                else {\r\n                    if (!indicesByGroup[materialIndex]) indicesByGroup[materialIndex] = [];\r\n                    indicesByGroup[materialIndex].push(items.indexCache[j]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import { BufferGeometry, Mesh } from 'three';\r\nimport { IfcState, SubsetConfig } from '../../BaseDefinitions';\r\nimport { IndexedGeometry, ItemsMap } from './ItemsMap';\r\nimport { Subset, Subsets } from './SubsetManager';\r\nimport { SubsetUtils } from './SubsetUtils';\r\nimport { BvhManager } from '../BvhManager';\r\n\r\nexport class SubsetCreator {\r\n\r\n    private tempIndex: number[] = [];\r\n\r\n    constructor(private state: IfcState, private items: ItemsMap, private subsets: Subsets, private BVH: BvhManager) {\r\n    }\r\n\r\n    createSubset(config: SubsetConfig, subsetID: string) {\r\n        if (!this.items.map[config.modelID]) this.items.generateGeometryIndexMap(config.modelID);\r\n        if (!this.subsets[subsetID]) this.initializeSubset(config, subsetID);\r\n        this.filterIndices(config, subsetID);\r\n        this.constructSubsetByMaterial(config, subsetID);\r\n        config.ids.forEach(id => this.subsets[subsetID].ids.add(id));\r\n        this.subsets[subsetID].mesh.geometry.setIndex(this.tempIndex);\r\n        this.tempIndex.length = 0;\r\n        const subset = this.subsets[subsetID].mesh;\r\n        if (config.applyBVH) this.BVH.applyThreeMeshBVH(subset.geometry);\r\n        if (config.scene) config.scene.add(subset);\r\n        return this.subsets[subsetID].mesh;\r\n    }\r\n\r\n    dispose() {\r\n        this.tempIndex = [];\r\n    }\r\n\r\n    private initializeSubset(config: SubsetConfig, subsetID: string) {\r\n        const model = this.state.models[config.modelID].mesh;\r\n        const subsetGeom = new BufferGeometry();\r\n        this.initializeSubsetAttributes(subsetGeom, model);\r\n        if (!config.material) this.initializeSubsetGroups(subsetGeom, model);\r\n        const mesh = new Mesh(subsetGeom, config.material || model.material) as Subset;\r\n        mesh.modelID = config.modelID;\r\n        const bvh = Boolean(config.applyBVH);\r\n        this.subsets[subsetID] = { ids: new Set<number>(), mesh, bvh };\r\n        model.add(mesh);\r\n    }\r\n\r\n    // The subset shares the same attributes as the original (no memory consumed)\r\n    private initializeSubsetAttributes(subsetGeom: BufferGeometry, model: Mesh) {\r\n        subsetGeom.setAttribute('position', model.geometry.attributes.position);\r\n        subsetGeom.setAttribute('normal', model.geometry.attributes.normal);\r\n        subsetGeom.setAttribute('expressID', model.geometry.attributes.expressID);\r\n        subsetGeom.setIndex([]);\r\n    }\r\n\r\n    // If the subset has original materials, initialize the groups for the subset\r\n    private initializeSubsetGroups(subsetGeom: BufferGeometry, model: Mesh) {\r\n        subsetGeom.groups = JSON.parse(JSON.stringify(model.geometry.groups));\r\n        this.resetGroups(subsetGeom);\r\n    }\r\n\r\n    // Remove previous indices or filter the given ones to avoid repeating items\r\n    private filterIndices(config: SubsetConfig, subsetID: string) {\r\n        const geometry = this.subsets[subsetID].mesh.geometry as IndexedGeometry;\r\n        if (config.removePrevious) {\r\n            geometry.setIndex([]);\r\n            this.resetGroups(geometry);\r\n            return;\r\n        }\r\n        const previousIndices = geometry.index.array;\r\n        const previousIDs = this.subsets[subsetID].ids;\r\n        config.ids = config.ids.filter(id => !previousIDs.has(id));\r\n        this.tempIndex = Array.from(previousIndices);\r\n    }\r\n\r\n    private constructSubsetByMaterial(config: SubsetConfig, subsetID: string) {\r\n        const model = this.state.models[config.modelID].mesh;\r\n        const newIndices = { count: 0 };\r\n        for (let i = 0; i < model.geometry.groups.length; i++) {\r\n            this.insertNewIndices(config, subsetID, i, newIndices);\r\n        }\r\n    }\r\n\r\n    // If this subset has original materials, insert indices in correct position and update groups\r\n    // Otherwise, just insert indices at any position\r\n    private insertNewIndices(config: SubsetConfig, subsetID: string, materialIndex: number, newIndices: any) {\r\n        const items = this.items.map[config.modelID];\r\n        const indicesOfOneMaterial = SubsetUtils.getAllIndicesOfGroup(config.modelID, config.ids, materialIndex, items) as number[];\r\n\r\n        if (!config.material) {\r\n            this.insertIndicesAtGroup(subsetID, indicesOfOneMaterial, materialIndex, newIndices);\r\n        } else {\r\n            indicesOfOneMaterial.forEach(index => this.tempIndex.push(index));\r\n        }\r\n    }\r\n\r\n    private insertIndicesAtGroup(subsetID: string, indicesByGroup: number[], index: number, newIndices: any) {\r\n        const currentGroup = this.getCurrentGroup(subsetID, index);\r\n        currentGroup.start += newIndices.count;\r\n        let newIndicesPosition = currentGroup.start + currentGroup.count;\r\n        newIndices.count += indicesByGroup.length;\r\n        if (indicesByGroup.length > 0) {\r\n            let position = newIndicesPosition;\r\n            const start = this.tempIndex.slice(0, position);\r\n            const end = this.tempIndex.slice(position);\r\n            this.tempIndex = Array.prototype.concat.apply([], [start, indicesByGroup, end]);\r\n            currentGroup.count += indicesByGroup.length;\r\n        }\r\n    }\r\n\r\n    private getCurrentGroup(subsetID: string, groupIndex: number) {\r\n        const geometry = this.subsets[subsetID].mesh.geometry as IndexedGeometry;\r\n        return geometry.groups[groupIndex];\r\n    }\r\n\r\n    private resetGroups(geometry: BufferGeometry) {\r\n        geometry.groups.forEach((group) => {\r\n            group.start = 0;\r\n            group.count = 0;\r\n        });\r\n    }\r\n}","import { Material, Mesh, Object3D } from 'three';\r\nimport { SubsetConfig, IfcState } from '../../BaseDefinitions';\r\nimport { BvhManager } from '../BvhManager';\r\nimport { ItemsMap } from './ItemsMap';\r\nimport { SubsetCreator } from './SubsetCreator';\r\n\r\nexport interface Subset extends Mesh {\r\n    modelID: number;\r\n}\r\n\r\nexport type Subsets = {\r\n    [subsetID: string]: { ids: Set<number>, mesh: Subset, bvh: boolean };\r\n};\r\n\r\n/**\r\n * Contains the logic to get, create and delete geometric subsets of an IFC model. For example,\r\n * this can extract all the items in a specific IfcBuildingStorey and create a new Mesh.\r\n */\r\nexport class SubsetManager {\r\n    readonly items: ItemsMap;\r\n    private readonly BVH: BvhManager;\r\n    private state: IfcState;\r\n    private subsets: Subsets = {};\r\n    private subsetCreator: SubsetCreator;\r\n\r\n    constructor(state: IfcState, BVH: BvhManager) {\r\n        this.state = state;\r\n        this.items = new ItemsMap(state);\r\n        this.BVH = BVH;\r\n        this.subsetCreator = new SubsetCreator(state, this.items, this.subsets, this.BVH);\r\n    }\r\n\r\n    getAllSubsets(){\r\n        return this.subsets\r\n    }\r\n\r\n    getSubset(modelID: number, material?: Material, customId?: string) {\r\n        const subsetID = this.getSubsetID(modelID, material, customId);\r\n        return this.subsets[subsetID].mesh;\r\n    }\r\n\r\n    removeSubset(modelID: number, material?: Material, customID?: string) {\r\n        const subsetID = this.getSubsetID(modelID, material, customID);\r\n        const subset = this.subsets[subsetID];\r\n        if (!subset) return;\r\n        if (subset.mesh.parent) subset.mesh.removeFromParent();\r\n        subset.mesh.geometry.attributes = {};\r\n        subset.mesh.geometry.index = null;\r\n        subset.mesh.geometry.dispose();\r\n        // @ts-ignore\r\n        subset.mesh.geometry = null;\r\n        delete this.subsets[subsetID];\r\n    }\r\n\r\n    createSubset(config: SubsetConfig) {\r\n        const subsetID = this.getSubsetID(config.modelID, config.material, config.customID);\r\n        return this.subsetCreator.createSubset(config, subsetID);\r\n    }\r\n\r\n    removeFromSubset(modelID: number, ids: number[], customID?: string, material?: Material) {\r\n        const subsetID = this.getSubsetID(modelID, material, customID);\r\n        if (!this.subsets[subsetID]) return;\r\n\r\n        const previousIDs = this.subsets[subsetID].ids;\r\n        ids.forEach((id) => {\r\n            if(previousIDs.has(id)) previousIDs.delete(id);\r\n        })\r\n\r\n        return this.createSubset({\r\n            modelID,\r\n            removePrevious: true,\r\n            material,\r\n            customID,\r\n            applyBVH: this.subsets[subsetID].bvh,\r\n            ids: Array.from(previousIDs),\r\n            scene: this.subsets[subsetID].mesh.parent as Object3D\r\n        });\r\n    }\r\n\r\n    clearSubset(modelID: number, customID?: string, material?: Material) {\r\n        const subsetID = this.getSubsetID(modelID, material, customID);\r\n        if (!this.subsets[subsetID]) return;\r\n        this.subsets[subsetID].ids.clear();\r\n        const subset = this.getSubset(modelID, material, customID);\r\n        subset.geometry.setIndex([]);\r\n    }\r\n\r\n    // Use this only for destroying the current IFCLoader instance\r\n    dispose() {\r\n        this.items.dispose();\r\n        this.subsetCreator.dispose();\r\n\r\n        Object.values(this.subsets).forEach(subset => {\r\n            (subset.ids as any) = null;\r\n            subset.mesh.removeFromParent();\r\n            const mats = subset.mesh.material;\r\n            if(Array.isArray(mats)) mats.forEach(mat => mat.dispose());\r\n            else mats.dispose();\r\n            subset.mesh.geometry.index = null;\r\n            subset.mesh.geometry.dispose();\r\n            const geom = subset.mesh.geometry as any;\r\n            if(geom.disposeBoundsTree) geom.disposeBoundsTree();\r\n            (subset.mesh as any) = null;\r\n        });\r\n        (this.subsets as any) = null;\r\n    }\r\n\r\n    private getSubsetID(modelID: number, material?: Material, customID = 'DEFAULT') {\r\n        const baseID = modelID;\r\n        const materialID = material ? material.uuid : 'DEFAULT';\r\n        return `${baseID} - ${materialID} - ${customID}`;\r\n    }\r\n}\r\n","import { BufferAttribute, BufferGeometry, Material, Matrix4, Mesh, Object3D } from 'three';\r\n// TODO: Remove ts ignore comments when @types/three gets updated\r\n// @ts-ignore\r\nimport { mergeBufferGeometries } from 'three/examples/jsm/utils/BufferGeometryUtils';\r\nimport {\r\n    FlatMesh,\r\n    IfcGeometry,\r\n    IFCRELAGGREGATES, IFCRELASSOCIATESMATERIAL,\r\n    IFCRELCONTAINEDINSPATIALSTRUCTURE,\r\n    IFCRELDEFINESBYPROPERTIES,\r\n    IFCRELDEFINESBYTYPE, LoaderError, LoaderSettings, RawLineData, Vector\r\n} from 'web-ifc';\r\nimport {ParserProgress} from \"./components/IFCParser\";\r\n\r\nexport const IdAttrName = 'expressID';\r\n\r\nexport type IdAttributeByMaterial = { [id: number]: number };\r\nexport type IdAttributesByMaterials = { [materialID: string]: IdAttributeByMaterial };\r\n\r\n//TODO: Rename \"scene\" to \"parent\" in the next major release\r\nexport interface BaseSubsetConfig {\r\n    scene?: Object3D;\r\n    ids: number[];\r\n    removePrevious: boolean;\r\n    material?: Material;\r\n    customID?: string;\r\n    applyBVH?: boolean;\r\n}\r\n\r\nexport interface SubsetConfig extends BaseSubsetConfig {\r\n    modelID: number;\r\n}\r\n\r\nexport const DEFAULT = 'default';\r\n\r\nexport type MapFaceindexID = { [key: number]: number };\r\n\r\nexport interface TypesMap {\r\n    [key: number]: number;\r\n}\r\n\r\n\r\nexport interface IfcModel {\r\n    modelID: number;\r\n    mesh: IfcMesh;\r\n    types: TypesMap;\r\n    jsonData: { [id: number]: JSONObject };\r\n}\r\n\r\nexport interface JSONObject {\r\n    expressID: number;\r\n    type: string;\r\n    [key: string]: any;\r\n}\r\n\r\nexport interface Worker {\r\n    active: boolean;\r\n    path: string;\r\n}\r\n\r\nexport interface IfcState {\r\n    models: { [modelID: number]: IfcModel };\r\n    api: WebIfcAPI;\r\n    useJSON: boolean;\r\n    worker: Worker;\r\n    webIfcSettings?: LoaderSettings;\r\n    onProgress?: (event: ParserProgress) => void;\r\n    coordinationMatrix?: Matrix4,\r\n    wasmPath?: string;\r\n}\r\n\r\nexport interface IfcMesh extends Mesh {\r\n    modelID: number;\r\n}\r\n\r\nexport interface Node {\r\n    expressID: number;\r\n    type: string;\r\n    children: Node[];\r\n}\r\n\r\nexport interface pName {\r\n    name: number;\r\n    relating: string;\r\n    related: string;\r\n    key: string;\r\n}\r\n\r\nexport const PropsNames = {\r\n    aggregates: {\r\n        name: IFCRELAGGREGATES,\r\n        relating: 'RelatingObject',\r\n        related: 'RelatedObjects',\r\n        key: 'children'\r\n    },\r\n    spatial: {\r\n        name: IFCRELCONTAINEDINSPATIALSTRUCTURE,\r\n        relating: 'RelatingStructure',\r\n        related: 'RelatedElements',\r\n        key: 'children'\r\n    },\r\n    psets: {\r\n        name: IFCRELDEFINESBYPROPERTIES,\r\n        relating: 'RelatingPropertyDefinition',\r\n        related: 'RelatedObjects',\r\n        key: 'hasPsets'\r\n    },\r\n    materials: {\r\n        name: IFCRELASSOCIATESMATERIAL,\r\n        relating: 'RelatingMaterial',\r\n        related: 'RelatedObjects',\r\n        key: 'hasMaterial'\r\n    },\r\n    type: {\r\n        name: IFCRELDEFINESBYTYPE,\r\n        relating: 'RelatingType',\r\n        related: 'RelatedObjects',\r\n        key: 'hasType'\r\n    }\r\n};\r\n\r\nexport interface WebIfcAPI {\r\n\r\n    wasmModule: any;\r\n\r\n    Init(): void | Promise<void>;\r\n\r\n    // To close the web worker\r\n    Close?: () => void;\r\n\r\n    /**\r\n     * Opens a model and returns a modelID number\r\n     * @data Buffer containing IFC data (bytes)\r\n     * @data Settings settings for loading the model\r\n     */\r\n    OpenModel(data: string | Uint8Array, settings?: LoaderSettings): number | Promise<number>;\r\n\r\n    /**\r\n     * Creates a new model and returns a modelID number\r\n     * @data Settings settings for generating data the model\r\n     */\r\n    CreateModel(settings?: LoaderSettings): number | Promise<number>;\r\n\r\n    ExportFileAsIFC(modelID: number): Uint8Array | Promise<Uint8Array>;\r\n\r\n    /**\r\n     * Opens a model and returns a modelID number\r\n     * @modelID Model handle retrieved by OpenModel, model must not be closed\r\n     * @data Buffer containing IFC data (bytes)\r\n     */\r\n    GetGeometry(modelID: number, geometryExpressID: number): IfcGeometry | Promise<IfcGeometry>;\r\n\r\n    GetLine(modelID: number, expressID: number, flatten?: boolean):  any | Promise<any>;\r\n\r\n    GetAndClearErrors(modelID: number): Vector<LoaderError> | Promise<Vector<LoaderError>>;\r\n\r\n    WriteLine(modelID: number, lineObject: any): void | Promise<void>;\r\n\r\n    FlattenLine(modelID: number, line: any): void | Promise<void>;\r\n\r\n    GetRawLineData(modelID: number, expressID: number): RawLineData | Promise<RawLineData>;\r\n\r\n    WriteRawLineData(modelID: number, data: RawLineData):  any | Promise<any>;\r\n\r\n    GetLineIDsWithType(modelID: number, type: number): Vector<number> | Promise<Vector<number>>;\r\n\r\n    GetAllLines(modelID: Number): Vector<number> | Promise<Vector<number>>;\r\n\r\n    SetGeometryTransformation(modelID: number, transformationMatrix: Array<number>): void | Promise<void>;\r\n\r\n    GetCoordinationMatrix(modelID: number): Array<number> | Promise<Array<number>>;\r\n\r\n    GetVertexArray(ptr: number, size: number): Float32Array | Promise<Float32Array>;\r\n\r\n    GetIndexArray(ptr: number, size: number): Uint32Array | Promise<Uint32Array>;\r\n\r\n    getSubArray(heap: any, startPtr: any, sizeBytes: any): any | Promise<any>;\r\n\r\n    /**\r\n     * Closes a model and frees all related memory\r\n     * @modelID Model handle retrieved by OpenModel, model must not be closed\r\n     */\r\n    CloseModel(modelID: number): void | Promise<void>;\r\n\r\n    StreamAllMeshes(modelID: number, meshCallback: (mesh: FlatMesh) => void): void | Promise<void>;\r\n\r\n    StreamAllMeshesWithTypes(modelID: number, types: Array<number>, meshCallback: (mesh: FlatMesh) => void): void | Promise<void>;\r\n\r\n    /**\r\n     * Checks if a specific model ID is open or closed\r\n     * @modelID Model handle retrieved by OpenModel\r\n     */\r\n    IsModelOpen(modelID: number): boolean | Promise<boolean>;\r\n\r\n    /**\r\n     * Load all geometry in a model\r\n     * @modelID Model handle retrieved by OpenModel\r\n     */\r\n    LoadAllGeometry(modelID: number): Vector<FlatMesh> | Promise<Vector<FlatMesh>>;\r\n\r\n    /**\r\n     * Load geometry for a single element\r\n     * @modelID Model handle retrieved by OpenModel\r\n     */\r\n    GetFlatMesh(modelID: number, expressID: number): FlatMesh | Promise<FlatMesh>;\r\n\r\n    SetWasmPath(path: string): void | Promise<void>;\r\n}\r\n","import { IfcState, pName, PropsNames, Node } from '../../BaseDefinitions';\r\n\r\nexport class BasePropertyManager {\r\n\r\n    constructor(protected state: IfcState) {\r\n    }\r\n\r\n    async getPropertySets(modelID: number, elementID: number, recursive = false) {\r\n        return await this.getProperty(modelID, elementID, recursive, PropsNames.psets);\r\n    }\r\n\r\n    async getTypeProperties(modelID: number, elementID: number, recursive = false) {\r\n        return await this.getProperty(modelID, elementID, recursive, PropsNames.type);\r\n    }\r\n\r\n    async getMaterialsProperties(modelID: number, elementID: number, recursive = false) {\r\n        return await this.getProperty(modelID, elementID, recursive, PropsNames.materials);\r\n    }\r\n\r\n    protected async getSpatialNode(modelID: number, node: Node, treeChunks: any, includeProperties?: boolean) {\r\n        await this.getChildren(modelID, node, treeChunks, PropsNames.aggregates, includeProperties);\r\n        await this.getChildren(modelID, node, treeChunks, PropsNames.spatial, includeProperties);\r\n    }\r\n\r\n    protected async getChildren(modelID: number, node: Node, treeChunks: any, propNames: pName, includeProperties?: boolean) {\r\n        const children = treeChunks[node.expressID];\r\n        if (children == undefined) return;\r\n        const prop = propNames.key as keyof Node;\r\n        const nodes: any[] = [];\r\n        for(let i = 0; i < children.length; i++){\r\n            const child = children[i];\r\n            let node = this.newNode(modelID, child);\r\n            if (includeProperties) {\r\n                const properties = await this.getItemProperties(modelID, node.expressID) as any;\r\n                node = { ...properties, ...node };\r\n            }\r\n            await this.getSpatialNode(modelID, node, treeChunks, includeProperties);\r\n            nodes.push(node);\r\n        }\r\n        (node[prop] as Node[]) = nodes;\r\n    }\r\n\r\n    protected newNode(modelID: number, id: number) {\r\n        const typeName = this.getNodeType(modelID, id);\r\n        return {\r\n            expressID: id,\r\n            type: typeName,\r\n            children: []\r\n        };\r\n    }\r\n\r\n    protected async getSpatialTreeChunks(modelID: number) {\r\n        const treeChunks: any = {};\r\n        await this.getChunks(modelID, treeChunks, PropsNames.aggregates);\r\n        await this.getChunks(modelID, treeChunks, PropsNames.spatial);\r\n        return treeChunks;\r\n    }\r\n\r\n    protected saveChunk(chunks: any, propNames: pName, rel: any) {\r\n        const relating = rel[propNames.relating].value;\r\n        const related = rel[propNames.related].map((r: any) => r.value);\r\n        if (chunks[relating] == undefined) {\r\n            chunks[relating] = related;\r\n        } else {\r\n            chunks[relating] = chunks[relating].concat(related);\r\n        }\r\n    }\r\n\r\n    protected getRelated(rel: any, propNames: pName, IDs: number[]) {\r\n        const element = rel[propNames.relating];\r\n        if(!element) {\r\n            return console.warn(`The object with ID ${rel.expressID} has a broken reference.`);\r\n        }\r\n        if (!Array.isArray(element)) IDs.push(element.value);\r\n        else element.forEach((ele) => IDs.push(ele.value));\r\n    }\r\n\r\n    protected static isRelated(id: number, rel: any, propNames: pName) {\r\n        const relatedItems = rel[propNames.related];\r\n        if (Array.isArray(relatedItems)) {\r\n            const values = relatedItems.map((item) => item.value);\r\n            return values.includes(id);\r\n        }\r\n        return relatedItems.value === id;\r\n    }\r\n\r\n    protected static newIfcProject(id: number) {\r\n        return {\r\n            expressID: id,\r\n            type: 'IFCPROJECT',\r\n            children: []\r\n        };\r\n    }\r\n\r\n    async getProperty(modelID: number, elementID: number, recursive = false, propName: pName): Promise<any> {\r\n    }\r\n\r\n    protected async getChunks(modelID: number, chunks: any, propNames: pName): Promise<void> {\r\n    }\r\n\r\n    protected async getItemProperties(modelID: number, expressID: number, recursive = false): Promise<any> {\r\n    }\r\n\r\n    protected getNodeType(modelID: number, id: number): any {\r\n    }\r\n}","export let IfcElements: {[key: number]: string} = {\r\n  103090709: 'IFCPROJECT',\r\n  4097777520: 'IFCSITE',\r\n  4031249490: 'IFCBUILDING',\r\n  3124254112: 'IFCBUILDINGSTOREY',\r\n  3856911033: 'IFCSPACE',\r\n  1674181508: 'IFCANNOTATION',\r\n  25142252: 'IFCCONTROLLER',\r\n  32344328: 'IFCBOILER',\r\n  76236018: 'IFCLAMP',\r\n  90941305: 'IFCPUMP',\r\n  177149247: 'IFCAIRTERMINALBOX',\r\n  182646315: 'IFCFLOWINSTRUMENT',\r\n  263784265: 'IFCFURNISHINGELEMENT',\r\n  264262732: 'IFCELECTRICGENERATOR',\r\n  277319702: 'IFCAUDIOVISUALAPPLIANCE',\r\n  310824031: 'IFCPIPEFITTING',\r\n  331165859: 'IFCSTAIR',\r\n  342316401: 'IFCDUCTFITTING',\r\n  377706215: 'IFCMECHANICALFASTENER',\r\n  395920057: 'IFCDOOR',\r\n  402227799: 'IFCELECTRICMOTOR',\r\n  413509423: 'IFCSYSTEMFURNITUREELEMENT',\r\n  484807127: 'IFCEVAPORATOR',\r\n  486154966: 'IFCWINDOWSTANDARDCASE',\r\n  629592764: 'IFCLIGHTFIXTURE',\r\n  630975310: 'IFCUNITARYCONTROLELEMENT',\r\n  635142910: 'IFCCABLECARRIERFITTING',\r\n  639361253: 'IFCCOIL',\r\n  647756555: 'IFCFASTENER',\r\n  707683696: 'IFCFLOWSTORAGEDEVICE',\r\n  738039164: 'IFCPROTECTIVEDEVICE',\r\n  753842376: 'IFCBEAM',\r\n  812556717: 'IFCTANK',\r\n  819412036: 'IFCFILTER',\r\n  843113511: 'IFCCOLUMN',\r\n  862014818: 'IFCELECTRICDISTRIBUTIONBOARD',\r\n  900683007: 'IFCFOOTING',\r\n  905975707: 'IFCCOLUMNSTANDARDCASE',\r\n  926996030: 'IFCVOIDINGFEATURE',\r\n  979691226: 'IFCREINFORCINGBAR',\r\n  987401354: 'IFCFLOWSEGMENT',\r\n  1003880860: 'IFCELECTRICTIMECONTROL',\r\n  1051757585: 'IFCCABLEFITTING',\r\n  1052013943: 'IFCDISTRIBUTIONCHAMBERELEMENT',\r\n  1062813311: 'IFCDISTRIBUTIONCONTROLELEMENT',\r\n  1073191201: 'IFCMEMBER',\r\n  1095909175: 'IFCBUILDINGELEMENTPROXY',\r\n  1156407060: 'IFCPLATESTANDARDCASE',\r\n  1162798199: 'IFCSWITCHINGDEVICE',\r\n  1329646415: 'IFCSHADINGDEVICE',\r\n  1335981549: 'IFCDISCRETEACCESSORY',\r\n  1360408905: 'IFCDUCTSILENCER',\r\n  1404847402: 'IFCSTACKTERMINAL',\r\n  1426591983: 'IFCFIRESUPPRESSIONTERMINAL',\r\n  1437502449: 'IFCMEDICALDEVICE',\r\n  1509553395: 'IFCFURNITURE',\r\n  1529196076: 'IFCSLAB',\r\n  1620046519: 'IFCTRANSPORTELEMENT',\r\n  1634111441: 'IFCAIRTERMINAL',\r\n  1658829314: 'IFCENERGYCONVERSIONDEVICE',\r\n  1677625105: 'IFCCIVILELEMENT',\r\n  1687234759: 'IFCPILE',\r\n  1904799276: 'IFCELECTRICAPPLIANCE',\r\n  1911478936: 'IFCMEMBERSTANDARDCASE',\r\n  1945004755: 'IFCDISTRIBUTIONELEMENT',\r\n  1973544240: 'IFCCOVERING',\r\n  1999602285: 'IFCSPACEHEATER',\r\n  2016517767: 'IFCROOF',\r\n  2056796094: 'IFCAIRTOAIRHEATRECOVERY',\r\n  2058353004: 'IFCFLOWCONTROLLER',\r\n  2068733104: 'IFCHUMIDIFIER',\r\n  2176052936: 'IFCJUNCTIONBOX',\r\n  2188021234: 'IFCFLOWMETER',\r\n  2223149337: 'IFCFLOWTERMINAL',\r\n  2262370178: 'IFCRAILING',\r\n  2272882330: 'IFCCONDENSER',\r\n  2295281155: 'IFCPROTECTIVEDEVICETRIPPINGUNIT',\r\n  2320036040: 'IFCREINFORCINGMESH',\r\n  2347447852: 'IFCTENDONANCHOR',\r\n  2391383451: 'IFCVIBRATIONISOLATOR',\r\n  2391406946: 'IFCWALL',\r\n  2474470126: 'IFCMOTORCONNECTION',\r\n  2769231204: 'IFCVIRTUALELEMENT',\r\n  2814081492: 'IFCENGINE',\r\n  2906023776: 'IFCBEAMSTANDARDCASE',\r\n  2938176219: 'IFCBURNER',\r\n  2979338954: 'IFCBUILDINGELEMENTPART',\r\n  3024970846: 'IFCRAMP',\r\n  3026737570: 'IFCTUBEBUNDLE',\r\n  3027962421: 'IFCSLABSTANDARDCASE',\r\n  3040386961: 'IFCDISTRIBUTIONFLOWELEMENT',\r\n  3053780830: 'IFCSANITARYTERMINAL',\r\n  3079942009: 'IFCOPENINGSTANDARDCASE',\r\n  3087945054: 'IFCALARM',\r\n  3101698114: 'IFCSURFACEFEATURE',\r\n  3127900445: 'IFCSLABELEMENTEDCASE',\r\n  3132237377: 'IFCFLOWMOVINGDEVICE',\r\n  3171933400: 'IFCPLATE',\r\n  3221913625: 'IFCCOMMUNICATIONSAPPLIANCE',\r\n  3242481149: 'IFCDOORSTANDARDCASE',\r\n  3283111854: 'IFCRAMPFLIGHT',\r\n  3296154744: 'IFCCHIMNEY',\r\n  3304561284: 'IFCWINDOW',\r\n  3310460725: 'IFCELECTRICFLOWSTORAGEDEVICE',\r\n  3319311131: 'IFCHEATEXCHANGER',\r\n  3415622556: 'IFCFAN',\r\n  3420628829: 'IFCSOLARDEVICE',\r\n  3493046030: 'IFCGEOGRAPHICELEMENT',\r\n  3495092785: 'IFCCURTAINWALL',\r\n  3508470533: 'IFCFLOWTREATMENTDEVICE',\r\n  3512223829: 'IFCWALLSTANDARDCASE',\r\n  3518393246: 'IFCDUCTSEGMENT',\r\n  3571504051: 'IFCCOMPRESSOR',\r\n  3588315303: 'IFCOPENINGELEMENT',\r\n  3612865200: 'IFCPIPESEGMENT',\r\n  3640358203: 'IFCCOOLINGTOWER',\r\n  3651124850: 'IFCPROJECTIONELEMENT',\r\n  3694346114: 'IFCOUTLET',\r\n  3747195512: 'IFCEVAPORATIVECOOLER',\r\n  3758799889: 'IFCCABLECARRIERSEGMENT',\r\n  3824725483: 'IFCTENDON',\r\n  3825984169: 'IFCTRANSFORMER',\r\n  3902619387: 'IFCCHILLER',\r\n  4074379575: 'IFCDAMPER',\r\n  4086658281: 'IFCSENSOR',\r\n  4123344466: 'IFCELEMENTASSEMBLY',\r\n  4136498852: 'IFCCOOLEDBEAM',\r\n  4156078855: 'IFCWALLELEMENTEDCASE',\r\n  4175244083: 'IFCINTERCEPTOR',\r\n  4207607924: 'IFCVALVE',\r\n  4217484030: 'IFCCABLESEGMENT',\r\n  4237592921: 'IFCWASTETERMINAL',\r\n  4252922144: 'IFCSTAIRFLIGHT',\r\n  4278956645: 'IFCFLOWFITTING',\r\n  4288193352: 'IFCACTUATOR',\r\n  4292641817: 'IFCUNITARYEQUIPMENT',\r\n  3009204131: 'IFCGRID'\r\n};","import { BasePropertyManager } from './BasePropertyManager';\r\nimport { IFCPROJECT } from 'web-ifc';\r\nimport { pName } from '../../BaseDefinitions';\r\nimport { PropertyAPI } from './BaseDefinitions';\r\nimport { IfcElements } from '../IFCElementsMap';\r\n\r\nexport class WebIfcPropertyManager extends BasePropertyManager  implements PropertyAPI {\r\n    async getItemProperties(modelID: number, id: number, recursive = false) {\r\n        return this.state.api.GetLine(modelID, id, recursive);\r\n    }\r\n\r\n    async getSpatialStructure(modelID: number, includeProperties?: boolean) {\r\n        const chunks = await this.getSpatialTreeChunks(modelID);\r\n        const allLines = await this.state.api.GetLineIDsWithType(modelID, IFCPROJECT);\r\n        const projectID = allLines.get(0);\r\n        const project = WebIfcPropertyManager.newIfcProject(projectID);\r\n        await this.getSpatialNode(modelID, project, chunks, includeProperties);\r\n        return project;\r\n    }\r\n\r\n    async getAllItemsOfType(modelID: number, type: number, verbose: boolean) {\r\n        let items: number[] = [];\r\n        const lines = await this.state.api.GetLineIDsWithType(modelID, type);\r\n        for (let i = 0; i < lines.size(); i++) items.push(lines.get(i));\r\n        if (!verbose) return items;\r\n        const result: any[] = [];\r\n        for (let i = 0; i < items.length; i++) {\r\n            result.push(await this.state.api.GetLine(modelID, items[i]));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    override async getProperty(modelID: number, elementID: number, recursive = false, propName: pName) {\r\n        const propSetIds = await this.getAllRelatedItemsOfType(modelID, elementID, propName);\r\n        const result: any[] = [];\r\n        for (let i = 0; i < propSetIds.length; i++) {\r\n            result.push(await this.state.api.GetLine(modelID, propSetIds[i], recursive));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected override getNodeType(modelID: number, id: number) {\r\n        const typeID = this.state.models[modelID].types[id];\r\n        return IfcElements[typeID];\r\n    }\r\n\r\n    protected override async getChunks(modelID: number, chunks: any, propNames: pName) {\r\n        const relation = await this.state.api.GetLineIDsWithType(modelID, propNames.name);\r\n        for (let i = 0; i < relation.size(); i++) {\r\n            const rel = await this.state.api.GetLine(modelID, relation.get(i), false);\r\n            this.saveChunk(chunks, propNames, rel);\r\n        }\r\n    }\r\n\r\n    private async getAllRelatedItemsOfType(modelID: number, id: number, propNames: pName) {\r\n        const lines = await this.state.api.GetLineIDsWithType(modelID, propNames.name);\r\n        const IDs: number[] = [];\r\n        for (let i = 0; i < lines.size(); i++) {\r\n            const rel = await this.state.api.GetLine(modelID, lines.get(i));\r\n            const isRelated = BasePropertyManager.isRelated(id, rel, propNames);\r\n            if (isRelated) this.getRelated(rel, propNames, IDs);\r\n        }\r\n        return IDs;\r\n    }\r\n}","export let IfcTypesMap:  {[key: number]: string} = {\r\n    3821786052: \"IFCACTIONREQUEST\",\r\n    2296667514: \"IFCACTOR\",\r\n    3630933823: \"IFCACTORROLE\",\r\n    4288193352: \"IFCACTUATOR\",\r\n    2874132201: \"IFCACTUATORTYPE\",\r\n    618182010: \"IFCADDRESS\",\r\n    1635779807: \"IFCADVANCEDBREP\",\r\n    2603310189: \"IFCADVANCEDBREPWITHVOIDS\",\r\n    3406155212: \"IFCADVANCEDFACE\",\r\n    1634111441: \"IFCAIRTERMINAL\",\r\n    177149247: \"IFCAIRTERMINALBOX\",\r\n    1411407467: \"IFCAIRTERMINALBOXTYPE\",\r\n    3352864051: \"IFCAIRTERMINALTYPE\",\r\n    2056796094: \"IFCAIRTOAIRHEATRECOVERY\",\r\n    1871374353: \"IFCAIRTOAIRHEATRECOVERYTYPE\",\r\n    3087945054: \"IFCALARM\",\r\n    3001207471: \"IFCALARMTYPE\",\r\n    325726236: \"IFCALIGNMENT\",\r\n    749761778: \"IFCALIGNMENT2DHORIZONTAL\",\r\n    3199563722: \"IFCALIGNMENT2DHORIZONTALSEGMENT\",\r\n    2483840362: \"IFCALIGNMENT2DSEGMENT\",\r\n    3379348081: \"IFCALIGNMENT2DVERSEGCIRCULARARC\",\r\n    3239324667: \"IFCALIGNMENT2DVERSEGLINE\",\r\n    4263986512: \"IFCALIGNMENT2DVERSEGPARABOLICARC\",\r\n    53199957: \"IFCALIGNMENT2DVERTICAL\",\r\n    2029264950: \"IFCALIGNMENT2DVERTICALSEGMENT\",\r\n    3512275521: \"IFCALIGNMENTCURVE\",\r\n    1674181508: \"IFCANNOTATION\",\r\n    669184980: \"IFCANNOTATIONFILLAREA\",\r\n    639542469: \"IFCAPPLICATION\",\r\n    411424972: \"IFCAPPLIEDVALUE\",\r\n    130549933: \"IFCAPPROVAL\",\r\n    3869604511: \"IFCAPPROVALRELATIONSHIP\",\r\n    3798115385: \"IFCARBITRARYCLOSEDPROFILEDEF\",\r\n    1310608509: \"IFCARBITRARYOPENPROFILEDEF\",\r\n    2705031697: \"IFCARBITRARYPROFILEDEFWITHVOIDS\",\r\n    3460190687: \"IFCASSET\",\r\n    3207858831: \"IFCASYMMETRICISHAPEPROFILEDEF\",\r\n    277319702: \"IFCAUDIOVISUALAPPLIANCE\",\r\n    1532957894: \"IFCAUDIOVISUALAPPLIANCETYPE\",\r\n    4261334040: \"IFCAXIS1PLACEMENT\",\r\n    3125803723: \"IFCAXIS2PLACEMENT2D\",\r\n    2740243338: \"IFCAXIS2PLACEMENT3D\",\r\n    1967976161: \"IFCBSPLINECURVE\",\r\n    2461110595: \"IFCBSPLINECURVEWITHKNOTS\",\r\n    2887950389: \"IFCBSPLINESURFACE\",\r\n    167062518: \"IFCBSPLINESURFACEWITHKNOTS\",\r\n    753842376: \"IFCBEAM\",\r\n    2906023776: \"IFCBEAMSTANDARDCASE\",\r\n    819618141: \"IFCBEAMTYPE\",\r\n    4196446775: \"IFCBEARING\",\r\n    3649138523: \"IFCBEARINGTYPE\",\r\n    616511568: \"IFCBLOBTEXTURE\",\r\n    1334484129: \"IFCBLOCK\",\r\n    32344328: \"IFCBOILER\",\r\n    231477066: \"IFCBOILERTYPE\",\r\n    3649129432: \"IFCBOOLEANCLIPPINGRESULT\",\r\n    2736907675: \"IFCBOOLEANRESULT\",\r\n    4037036970: \"IFCBOUNDARYCONDITION\",\r\n    1136057603: \"IFCBOUNDARYCURVE\",\r\n    1560379544: \"IFCBOUNDARYEDGECONDITION\",\r\n    3367102660: \"IFCBOUNDARYFACECONDITION\",\r\n    1387855156: \"IFCBOUNDARYNODECONDITION\",\r\n    2069777674: \"IFCBOUNDARYNODECONDITIONWARPING\",\r\n    1260505505: \"IFCBOUNDEDCURVE\",\r\n    4182860854: \"IFCBOUNDEDSURFACE\",\r\n    2581212453: \"IFCBOUNDINGBOX\",\r\n    2713105998: \"IFCBOXEDHALFSPACE\",\r\n    644574406: \"IFCBRIDGE\",\r\n    963979645: \"IFCBRIDGEPART\",\r\n    4031249490: \"IFCBUILDING\",\r\n    3299480353: \"IFCBUILDINGELEMENT\",\r\n    2979338954: \"IFCBUILDINGELEMENTPART\",\r\n    39481116: \"IFCBUILDINGELEMENTPARTTYPE\",\r\n    1095909175: \"IFCBUILDINGELEMENTPROXY\",\r\n    1909888760: \"IFCBUILDINGELEMENTPROXYTYPE\",\r\n    1950629157: \"IFCBUILDINGELEMENTTYPE\",\r\n    3124254112: \"IFCBUILDINGSTOREY\",\r\n    1177604601: \"IFCBUILDINGSYSTEM\",\r\n    2938176219: \"IFCBURNER\",\r\n    2188180465: \"IFCBURNERTYPE\",\r\n    2898889636: \"IFCCSHAPEPROFILEDEF\",\r\n    635142910: \"IFCCABLECARRIERFITTING\",\r\n    395041908: \"IFCCABLECARRIERFITTINGTYPE\",\r\n    3758799889: \"IFCCABLECARRIERSEGMENT\",\r\n    3293546465: \"IFCCABLECARRIERSEGMENTTYPE\",\r\n    1051757585: \"IFCCABLEFITTING\",\r\n    2674252688: \"IFCCABLEFITTINGTYPE\",\r\n    4217484030: \"IFCCABLESEGMENT\",\r\n    1285652485: \"IFCCABLESEGMENTTYPE\",\r\n    3999819293: \"IFCCAISSONFOUNDATION\",\r\n    3203706013: \"IFCCAISSONFOUNDATIONTYPE\",\r\n    1123145078: \"IFCCARTESIANPOINT\",\r\n    574549367: \"IFCCARTESIANPOINTLIST\",\r\n    1675464909: \"IFCCARTESIANPOINTLIST2D\",\r\n    2059837836: \"IFCCARTESIANPOINTLIST3D\",\r\n    59481748: \"IFCCARTESIANTRANSFORMATIONOPERATOR\",\r\n    3749851601: \"IFCCARTESIANTRANSFORMATIONOPERATOR2D\",\r\n    3486308946: \"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM\",\r\n    3331915920: \"IFCCARTESIANTRANSFORMATIONOPERATOR3D\",\r\n    1416205885: \"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM\",\r\n    3150382593: \"IFCCENTERLINEPROFILEDEF\",\r\n    3902619387: \"IFCCHILLER\",\r\n    2951183804: \"IFCCHILLERTYPE\",\r\n    3296154744: \"IFCCHIMNEY\",\r\n    2197970202: \"IFCCHIMNEYTYPE\",\r\n    2611217952: \"IFCCIRCLE\",\r\n    2937912522: \"IFCCIRCLEHOLLOWPROFILEDEF\",\r\n    1383045692: \"IFCCIRCLEPROFILEDEF\",\r\n    1062206242: \"IFCCIRCULARARCSEGMENT2D\",\r\n    1677625105: \"IFCCIVILELEMENT\",\r\n    3893394355: \"IFCCIVILELEMENTTYPE\",\r\n    747523909: \"IFCCLASSIFICATION\",\r\n    647927063: \"IFCCLASSIFICATIONREFERENCE\",\r\n    2205249479: \"IFCCLOSEDSHELL\",\r\n    639361253: \"IFCCOIL\",\r\n    2301859152: \"IFCCOILTYPE\",\r\n    776857604: \"IFCCOLOURRGB\",\r\n    3285139300: \"IFCCOLOURRGBLIST\",\r\n    3264961684: \"IFCCOLOURSPECIFICATION\",\r\n    843113511: \"IFCCOLUMN\",\r\n    905975707: \"IFCCOLUMNSTANDARDCASE\",\r\n    300633059: \"IFCCOLUMNTYPE\",\r\n    3221913625: \"IFCCOMMUNICATIONSAPPLIANCE\",\r\n    400855858: \"IFCCOMMUNICATIONSAPPLIANCETYPE\",\r\n    2542286263: \"IFCCOMPLEXPROPERTY\",\r\n    3875453745: \"IFCCOMPLEXPROPERTYTEMPLATE\",\r\n    3732776249: \"IFCCOMPOSITECURVE\",\r\n    15328376: \"IFCCOMPOSITECURVEONSURFACE\",\r\n    2485617015: \"IFCCOMPOSITECURVESEGMENT\",\r\n    1485152156: \"IFCCOMPOSITEPROFILEDEF\",\r\n    3571504051: \"IFCCOMPRESSOR\",\r\n    3850581409: \"IFCCOMPRESSORTYPE\",\r\n    2272882330: \"IFCCONDENSER\",\r\n    2816379211: \"IFCCONDENSERTYPE\",\r\n    2510884976: \"IFCCONIC\",\r\n    370225590: \"IFCCONNECTEDFACESET\",\r\n    1981873012: \"IFCCONNECTIONCURVEGEOMETRY\",\r\n    2859738748: \"IFCCONNECTIONGEOMETRY\",\r\n    45288368: \"IFCCONNECTIONPOINTECCENTRICITY\",\r\n    2614616156: \"IFCCONNECTIONPOINTGEOMETRY\",\r\n    2732653382: \"IFCCONNECTIONSURFACEGEOMETRY\",\r\n    775493141: \"IFCCONNECTIONVOLUMEGEOMETRY\",\r\n    1959218052: \"IFCCONSTRAINT\",\r\n    3898045240: \"IFCCONSTRUCTIONEQUIPMENTRESOURCE\",\r\n    2185764099: \"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE\",\r\n    1060000209: \"IFCCONSTRUCTIONMATERIALRESOURCE\",\r\n    4105962743: \"IFCCONSTRUCTIONMATERIALRESOURCETYPE\",\r\n    488727124: \"IFCCONSTRUCTIONPRODUCTRESOURCE\",\r\n    1525564444: \"IFCCONSTRUCTIONPRODUCTRESOURCETYPE\",\r\n    2559216714: \"IFCCONSTRUCTIONRESOURCE\",\r\n    2574617495: \"IFCCONSTRUCTIONRESOURCETYPE\",\r\n    3419103109: \"IFCCONTEXT\",\r\n    3050246964: \"IFCCONTEXTDEPENDENTUNIT\",\r\n    3293443760: \"IFCCONTROL\",\r\n    25142252: \"IFCCONTROLLER\",\r\n    578613899: \"IFCCONTROLLERTYPE\",\r\n    2889183280: \"IFCCONVERSIONBASEDUNIT\",\r\n    2713554722: \"IFCCONVERSIONBASEDUNITWITHOFFSET\",\r\n    4136498852: \"IFCCOOLEDBEAM\",\r\n    335055490: \"IFCCOOLEDBEAMTYPE\",\r\n    3640358203: \"IFCCOOLINGTOWER\",\r\n    2954562838: \"IFCCOOLINGTOWERTYPE\",\r\n    1785450214: \"IFCCOORDINATEOPERATION\",\r\n    1466758467: \"IFCCOORDINATEREFERENCESYSTEM\",\r\n    3895139033: \"IFCCOSTITEM\",\r\n    1419761937: \"IFCCOSTSCHEDULE\",\r\n    602808272: \"IFCCOSTVALUE\",\r\n    1973544240: \"IFCCOVERING\",\r\n    1916426348: \"IFCCOVERINGTYPE\",\r\n    3295246426: \"IFCCREWRESOURCE\",\r\n    1815067380: \"IFCCREWRESOURCETYPE\",\r\n    2506170314: \"IFCCSGPRIMITIVE3D\",\r\n    2147822146: \"IFCCSGSOLID\",\r\n    539742890: \"IFCCURRENCYRELATIONSHIP\",\r\n    3495092785: \"IFCCURTAINWALL\",\r\n    1457835157: \"IFCCURTAINWALLTYPE\",\r\n    2601014836: \"IFCCURVE\",\r\n    2827736869: \"IFCCURVEBOUNDEDPLANE\",\r\n    2629017746: \"IFCCURVEBOUNDEDSURFACE\",\r\n    1186437898: \"IFCCURVESEGMENT2D\",\r\n    3800577675: \"IFCCURVESTYLE\",\r\n    1105321065: \"IFCCURVESTYLEFONT\",\r\n    2367409068: \"IFCCURVESTYLEFONTANDSCALING\",\r\n    3510044353: \"IFCCURVESTYLEFONTPATTERN\",\r\n    1213902940: \"IFCCYLINDRICALSURFACE\",\r\n    4074379575: \"IFCDAMPER\",\r\n    3961806047: \"IFCDAMPERTYPE\",\r\n    3426335179: \"IFCDEEPFOUNDATION\",\r\n    1306400036: \"IFCDEEPFOUNDATIONTYPE\",\r\n    3632507154: \"IFCDERIVEDPROFILEDEF\",\r\n    1765591967: \"IFCDERIVEDUNIT\",\r\n    1045800335: \"IFCDERIVEDUNITELEMENT\",\r\n    2949456006: \"IFCDIMENSIONALEXPONENTS\",\r\n    32440307: \"IFCDIRECTION\",\r\n    1335981549: \"IFCDISCRETEACCESSORY\",\r\n    2635815018: \"IFCDISCRETEACCESSORYTYPE\",\r\n    1945343521: \"IFCDISTANCEEXPRESSION\",\r\n    1052013943: \"IFCDISTRIBUTIONCHAMBERELEMENT\",\r\n    1599208980: \"IFCDISTRIBUTIONCHAMBERELEMENTTYPE\",\r\n    562808652: \"IFCDISTRIBUTIONCIRCUIT\",\r\n    1062813311: \"IFCDISTRIBUTIONCONTROLELEMENT\",\r\n    2063403501: \"IFCDISTRIBUTIONCONTROLELEMENTTYPE\",\r\n    1945004755: \"IFCDISTRIBUTIONELEMENT\",\r\n    3256556792: \"IFCDISTRIBUTIONELEMENTTYPE\",\r\n    3040386961: \"IFCDISTRIBUTIONFLOWELEMENT\",\r\n    3849074793: \"IFCDISTRIBUTIONFLOWELEMENTTYPE\",\r\n    3041715199: \"IFCDISTRIBUTIONPORT\",\r\n    3205830791: \"IFCDISTRIBUTIONSYSTEM\",\r\n    1154170062: \"IFCDOCUMENTINFORMATION\",\r\n    770865208: \"IFCDOCUMENTINFORMATIONRELATIONSHIP\",\r\n    3732053477: \"IFCDOCUMENTREFERENCE\",\r\n    395920057: \"IFCDOOR\",\r\n    2963535650: \"IFCDOORLININGPROPERTIES\",\r\n    1714330368: \"IFCDOORPANELPROPERTIES\",\r\n    3242481149: \"IFCDOORSTANDARDCASE\",\r\n    526551008: \"IFCDOORSTYLE\",\r\n    2323601079: \"IFCDOORTYPE\",\r\n    445594917: \"IFCDRAUGHTINGPREDEFINEDCOLOUR\",\r\n    4006246654: \"IFCDRAUGHTINGPREDEFINEDCURVEFONT\",\r\n    342316401: \"IFCDUCTFITTING\",\r\n    869906466: \"IFCDUCTFITTINGTYPE\",\r\n    3518393246: \"IFCDUCTSEGMENT\",\r\n    3760055223: \"IFCDUCTSEGMENTTYPE\",\r\n    1360408905: \"IFCDUCTSILENCER\",\r\n    2030761528: \"IFCDUCTSILENCERTYPE\",\r\n    3900360178: \"IFCEDGE\",\r\n    476780140: \"IFCEDGECURVE\",\r\n    1472233963: \"IFCEDGELOOP\",\r\n    1904799276: \"IFCELECTRICAPPLIANCE\",\r\n    663422040: \"IFCELECTRICAPPLIANCETYPE\",\r\n    862014818: \"IFCELECTRICDISTRIBUTIONBOARD\",\r\n    2417008758: \"IFCELECTRICDISTRIBUTIONBOARDTYPE\",\r\n    3310460725: \"IFCELECTRICFLOWSTORAGEDEVICE\",\r\n    3277789161: \"IFCELECTRICFLOWSTORAGEDEVICETYPE\",\r\n    264262732: \"IFCELECTRICGENERATOR\",\r\n    1534661035: \"IFCELECTRICGENERATORTYPE\",\r\n    402227799: \"IFCELECTRICMOTOR\",\r\n    1217240411: \"IFCELECTRICMOTORTYPE\",\r\n    1003880860: \"IFCELECTRICTIMECONTROL\",\r\n    712377611: \"IFCELECTRICTIMECONTROLTYPE\",\r\n    1758889154: \"IFCELEMENT\",\r\n    4123344466: \"IFCELEMENTASSEMBLY\",\r\n    2397081782: \"IFCELEMENTASSEMBLYTYPE\",\r\n    1623761950: \"IFCELEMENTCOMPONENT\",\r\n    2590856083: \"IFCELEMENTCOMPONENTTYPE\",\r\n    1883228015: \"IFCELEMENTQUANTITY\",\r\n    339256511: \"IFCELEMENTTYPE\",\r\n    2777663545: \"IFCELEMENTARYSURFACE\",\r\n    1704287377: \"IFCELLIPSE\",\r\n    2835456948: \"IFCELLIPSEPROFILEDEF\",\r\n    1658829314: \"IFCENERGYCONVERSIONDEVICE\",\r\n    2107101300: \"IFCENERGYCONVERSIONDEVICETYPE\",\r\n    2814081492: \"IFCENGINE\",\r\n    132023988: \"IFCENGINETYPE\",\r\n    3747195512: \"IFCEVAPORATIVECOOLER\",\r\n    3174744832: \"IFCEVAPORATIVECOOLERTYPE\",\r\n    484807127: \"IFCEVAPORATOR\",\r\n    3390157468: \"IFCEVAPORATORTYPE\",\r\n    4148101412: \"IFCEVENT\",\r\n    211053100: \"IFCEVENTTIME\",\r\n    4024345920: \"IFCEVENTTYPE\",\r\n    297599258: \"IFCEXTENDEDPROPERTIES\",\r\n    4294318154: \"IFCEXTERNALINFORMATION\",\r\n    3200245327: \"IFCEXTERNALREFERENCE\",\r\n    1437805879: \"IFCEXTERNALREFERENCERELATIONSHIP\",\r\n    1209101575: \"IFCEXTERNALSPATIALELEMENT\",\r\n    2853485674: \"IFCEXTERNALSPATIALSTRUCTUREELEMENT\",\r\n    2242383968: \"IFCEXTERNALLYDEFINEDHATCHSTYLE\",\r\n    1040185647: \"IFCEXTERNALLYDEFINEDSURFACESTYLE\",\r\n    3548104201: \"IFCEXTERNALLYDEFINEDTEXTFONT\",\r\n    477187591: \"IFCEXTRUDEDAREASOLID\",\r\n    2804161546: \"IFCEXTRUDEDAREASOLIDTAPERED\",\r\n    2556980723: \"IFCFACE\",\r\n    2047409740: \"IFCFACEBASEDSURFACEMODEL\",\r\n    1809719519: \"IFCFACEBOUND\",\r\n    803316827: \"IFCFACEOUTERBOUND\",\r\n    3008276851: \"IFCFACESURFACE\",\r\n    807026263: \"IFCFACETEDBREP\",\r\n    3737207727: \"IFCFACETEDBREPWITHVOIDS\",\r\n    24185140: \"IFCFACILITY\",\r\n    1310830890: \"IFCFACILITYPART\",\r\n    4219587988: \"IFCFAILURECONNECTIONCONDITION\",\r\n    3415622556: \"IFCFAN\",\r\n    346874300: \"IFCFANTYPE\",\r\n    647756555: \"IFCFASTENER\",\r\n    2489546625: \"IFCFASTENERTYPE\",\r\n    2827207264: \"IFCFEATUREELEMENT\",\r\n    2143335405: \"IFCFEATUREELEMENTADDITION\",\r\n    1287392070: \"IFCFEATUREELEMENTSUBTRACTION\",\r\n    738692330: \"IFCFILLAREASTYLE\",\r\n    374418227: \"IFCFILLAREASTYLEHATCHING\",\r\n    315944413: \"IFCFILLAREASTYLETILES\",\r\n    819412036: \"IFCFILTER\",\r\n    1810631287: \"IFCFILTERTYPE\",\r\n    1426591983: \"IFCFIRESUPPRESSIONTERMINAL\",\r\n    4222183408: \"IFCFIRESUPPRESSIONTERMINALTYPE\",\r\n    2652556860: \"IFCFIXEDREFERENCESWEPTAREASOLID\",\r\n    2058353004: \"IFCFLOWCONTROLLER\",\r\n    3907093117: \"IFCFLOWCONTROLLERTYPE\",\r\n    4278956645: \"IFCFLOWFITTING\",\r\n    3198132628: \"IFCFLOWFITTINGTYPE\",\r\n    182646315: \"IFCFLOWINSTRUMENT\",\r\n    4037862832: \"IFCFLOWINSTRUMENTTYPE\",\r\n    2188021234: \"IFCFLOWMETER\",\r\n    3815607619: \"IFCFLOWMETERTYPE\",\r\n    3132237377: \"IFCFLOWMOVINGDEVICE\",\r\n    1482959167: \"IFCFLOWMOVINGDEVICETYPE\",\r\n    987401354: \"IFCFLOWSEGMENT\",\r\n    1834744321: \"IFCFLOWSEGMENTTYPE\",\r\n    707683696: \"IFCFLOWSTORAGEDEVICE\",\r\n    1339347760: \"IFCFLOWSTORAGEDEVICETYPE\",\r\n    2223149337: \"IFCFLOWTERMINAL\",\r\n    2297155007: \"IFCFLOWTERMINALTYPE\",\r\n    3508470533: \"IFCFLOWTREATMENTDEVICE\",\r\n    3009222698: \"IFCFLOWTREATMENTDEVICETYPE\",\r\n    900683007: \"IFCFOOTING\",\r\n    1893162501: \"IFCFOOTINGTYPE\",\r\n    263784265: \"IFCFURNISHINGELEMENT\",\r\n    4238390223: \"IFCFURNISHINGELEMENTTYPE\",\r\n    1509553395: \"IFCFURNITURE\",\r\n    1268542332: \"IFCFURNITURETYPE\",\r\n    3493046030: \"IFCGEOGRAPHICELEMENT\",\r\n    4095422895: \"IFCGEOGRAPHICELEMENTTYPE\",\r\n    987898635: \"IFCGEOMETRICCURVESET\",\r\n    3448662350: \"IFCGEOMETRICREPRESENTATIONCONTEXT\",\r\n    2453401579: \"IFCGEOMETRICREPRESENTATIONITEM\",\r\n    4142052618: \"IFCGEOMETRICREPRESENTATIONSUBCONTEXT\",\r\n    3590301190: \"IFCGEOMETRICSET\",\r\n    3009204131: \"IFCGRID\",\r\n    852622518: \"IFCGRIDAXIS\",\r\n    178086475: \"IFCGRIDPLACEMENT\",\r\n    2706460486: \"IFCGROUP\",\r\n    812098782: \"IFCHALFSPACESOLID\",\r\n    3319311131: \"IFCHEATEXCHANGER\",\r\n    1251058090: \"IFCHEATEXCHANGERTYPE\",\r\n    2068733104: \"IFCHUMIDIFIER\",\r\n    1806887404: \"IFCHUMIDIFIERTYPE\",\r\n    1484403080: \"IFCISHAPEPROFILEDEF\",\r\n    3905492369: \"IFCIMAGETEXTURE\",\r\n    3570813810: \"IFCINDEXEDCOLOURMAP\",\r\n    2571569899: \"IFCINDEXEDPOLYCURVE\",\r\n    178912537: \"IFCINDEXEDPOLYGONALFACE\",\r\n    2294589976: \"IFCINDEXEDPOLYGONALFACEWITHVOIDS\",\r\n    1437953363: \"IFCINDEXEDTEXTUREMAP\",\r\n    2133299955: \"IFCINDEXEDTRIANGLETEXTUREMAP\",\r\n    4175244083: \"IFCINTERCEPTOR\",\r\n    3946677679: \"IFCINTERCEPTORTYPE\",\r\n    3113134337: \"IFCINTERSECTIONCURVE\",\r\n    2391368822: \"IFCINVENTORY\",\r\n    3741457305: \"IFCIRREGULARTIMESERIES\",\r\n    3020489413: \"IFCIRREGULARTIMESERIESVALUE\",\r\n    2176052936: \"IFCJUNCTIONBOX\",\r\n    4288270099: \"IFCJUNCTIONBOXTYPE\",\r\n    572779678: \"IFCLSHAPEPROFILEDEF\",\r\n    3827777499: \"IFCLABORRESOURCE\",\r\n    428585644: \"IFCLABORRESOURCETYPE\",\r\n    1585845231: \"IFCLAGTIME\",\r\n    76236018: \"IFCLAMP\",\r\n    1051575348: \"IFCLAMPTYPE\",\r\n    2655187982: \"IFCLIBRARYINFORMATION\",\r\n    3452421091: \"IFCLIBRARYREFERENCE\",\r\n    4162380809: \"IFCLIGHTDISTRIBUTIONDATA\",\r\n    629592764: \"IFCLIGHTFIXTURE\",\r\n    1161773419: \"IFCLIGHTFIXTURETYPE\",\r\n    1566485204: \"IFCLIGHTINTENSITYDISTRIBUTION\",\r\n    1402838566: \"IFCLIGHTSOURCE\",\r\n    125510826: \"IFCLIGHTSOURCEAMBIENT\",\r\n    2604431987: \"IFCLIGHTSOURCEDIRECTIONAL\",\r\n    4266656042: \"IFCLIGHTSOURCEGONIOMETRIC\",\r\n    1520743889: \"IFCLIGHTSOURCEPOSITIONAL\",\r\n    3422422726: \"IFCLIGHTSOURCESPOT\",\r\n    1281925730: \"IFCLINE\",\r\n    3092502836: \"IFCLINESEGMENT2D\",\r\n    388784114: \"IFCLINEARPLACEMENT\",\r\n    1154579445: \"IFCLINEARPOSITIONINGELEMENT\",\r\n    2624227202: \"IFCLOCALPLACEMENT\",\r\n    1008929658: \"IFCLOOP\",\r\n    1425443689: \"IFCMANIFOLDSOLIDBREP\",\r\n    3057273783: \"IFCMAPCONVERSION\",\r\n    2347385850: \"IFCMAPPEDITEM\",\r\n    1838606355: \"IFCMATERIAL\",\r\n    1847130766: \"IFCMATERIALCLASSIFICATIONRELATIONSHIP\",\r\n    3708119000: \"IFCMATERIALCONSTITUENT\",\r\n    2852063980: \"IFCMATERIALCONSTITUENTSET\",\r\n    760658860: \"IFCMATERIALDEFINITION\",\r\n    2022407955: \"IFCMATERIALDEFINITIONREPRESENTATION\",\r\n    248100487: \"IFCMATERIALLAYER\",\r\n    3303938423: \"IFCMATERIALLAYERSET\",\r\n    1303795690: \"IFCMATERIALLAYERSETUSAGE\",\r\n    1847252529: \"IFCMATERIALLAYERWITHOFFSETS\",\r\n    2199411900: \"IFCMATERIALLIST\",\r\n    2235152071: \"IFCMATERIALPROFILE\",\r\n    164193824: \"IFCMATERIALPROFILESET\",\r\n    3079605661: \"IFCMATERIALPROFILESETUSAGE\",\r\n    3404854881: \"IFCMATERIALPROFILESETUSAGETAPERING\",\r\n    552965576: \"IFCMATERIALPROFILEWITHOFFSETS\",\r\n    3265635763: \"IFCMATERIALPROPERTIES\",\r\n    853536259: \"IFCMATERIALRELATIONSHIP\",\r\n    1507914824: \"IFCMATERIALUSAGEDEFINITION\",\r\n    2597039031: \"IFCMEASUREWITHUNIT\",\r\n    377706215: \"IFCMECHANICALFASTENER\",\r\n    2108223431: \"IFCMECHANICALFASTENERTYPE\",\r\n    1437502449: \"IFCMEDICALDEVICE\",\r\n    1114901282: \"IFCMEDICALDEVICETYPE\",\r\n    1073191201: \"IFCMEMBER\",\r\n    1911478936: \"IFCMEMBERSTANDARDCASE\",\r\n    3181161470: \"IFCMEMBERTYPE\",\r\n    3368373690: \"IFCMETRIC\",\r\n    2998442950: \"IFCMIRROREDPROFILEDEF\",\r\n    2706619895: \"IFCMONETARYUNIT\",\r\n    2474470126: \"IFCMOTORCONNECTION\",\r\n    977012517: \"IFCMOTORCONNECTIONTYPE\",\r\n    1918398963: \"IFCNAMEDUNIT\",\r\n    3888040117: \"IFCOBJECT\",\r\n    219451334: \"IFCOBJECTDEFINITION\",\r\n    3701648758: \"IFCOBJECTPLACEMENT\",\r\n    2251480897: \"IFCOBJECTIVE\",\r\n    4143007308: \"IFCOCCUPANT\",\r\n    590820931: \"IFCOFFSETCURVE\",\r\n    3388369263: \"IFCOFFSETCURVE2D\",\r\n    3505215534: \"IFCOFFSETCURVE3D\",\r\n    2485787929: \"IFCOFFSETCURVEBYDISTANCES\",\r\n    2665983363: \"IFCOPENSHELL\",\r\n    3588315303: \"IFCOPENINGELEMENT\",\r\n    3079942009: \"IFCOPENINGSTANDARDCASE\",\r\n    4251960020: \"IFCORGANIZATION\",\r\n    1411181986: \"IFCORGANIZATIONRELATIONSHIP\",\r\n    643959842: \"IFCORIENTATIONEXPRESSION\",\r\n    1029017970: \"IFCORIENTEDEDGE\",\r\n    144952367: \"IFCOUTERBOUNDARYCURVE\",\r\n    3694346114: \"IFCOUTLET\",\r\n    2837617999: \"IFCOUTLETTYPE\",\r\n    1207048766: \"IFCOWNERHISTORY\",\r\n    2529465313: \"IFCPARAMETERIZEDPROFILEDEF\",\r\n    2519244187: \"IFCPATH\",\r\n    1682466193: \"IFCPCURVE\",\r\n    2382730787: \"IFCPERFORMANCEHISTORY\",\r\n    3566463478: \"IFCPERMEABLECOVERINGPROPERTIES\",\r\n    3327091369: \"IFCPERMIT\",\r\n    2077209135: \"IFCPERSON\",\r\n    101040310: \"IFCPERSONANDORGANIZATION\",\r\n    3021840470: \"IFCPHYSICALCOMPLEXQUANTITY\",\r\n    2483315170: \"IFCPHYSICALQUANTITY\",\r\n    2226359599: \"IFCPHYSICALSIMPLEQUANTITY\",\r\n    1687234759: \"IFCPILE\",\r\n    1158309216: \"IFCPILETYPE\",\r\n    310824031: \"IFCPIPEFITTING\",\r\n    804291784: \"IFCPIPEFITTINGTYPE\",\r\n    3612865200: \"IFCPIPESEGMENT\",\r\n    4231323485: \"IFCPIPESEGMENTTYPE\",\r\n    597895409: \"IFCPIXELTEXTURE\",\r\n    2004835150: \"IFCPLACEMENT\",\r\n    603570806: \"IFCPLANARBOX\",\r\n    1663979128: \"IFCPLANAREXTENT\",\r\n    220341763: \"IFCPLANE\",\r\n    3171933400: \"IFCPLATE\",\r\n    1156407060: \"IFCPLATESTANDARDCASE\",\r\n    4017108033: \"IFCPLATETYPE\",\r\n    2067069095: \"IFCPOINT\",\r\n    4022376103: \"IFCPOINTONCURVE\",\r\n    1423911732: \"IFCPOINTONSURFACE\",\r\n    2924175390: \"IFCPOLYLOOP\",\r\n    2775532180: \"IFCPOLYGONALBOUNDEDHALFSPACE\",\r\n    2839578677: \"IFCPOLYGONALFACESET\",\r\n    3724593414: \"IFCPOLYLINE\",\r\n    3740093272: \"IFCPORT\",\r\n    1946335990: \"IFCPOSITIONINGELEMENT\",\r\n    3355820592: \"IFCPOSTALADDRESS\",\r\n    759155922: \"IFCPREDEFINEDCOLOUR\",\r\n    2559016684: \"IFCPREDEFINEDCURVEFONT\",\r\n    3727388367: \"IFCPREDEFINEDITEM\",\r\n    3778827333: \"IFCPREDEFINEDPROPERTIES\",\r\n    3967405729: \"IFCPREDEFINEDPROPERTYSET\",\r\n    1775413392: \"IFCPREDEFINEDTEXTFONT\",\r\n    677532197: \"IFCPRESENTATIONITEM\",\r\n    2022622350: \"IFCPRESENTATIONLAYERASSIGNMENT\",\r\n    1304840413: \"IFCPRESENTATIONLAYERWITHSTYLE\",\r\n    3119450353: \"IFCPRESENTATIONSTYLE\",\r\n    2417041796: \"IFCPRESENTATIONSTYLEASSIGNMENT\",\r\n    2744685151: \"IFCPROCEDURE\",\r\n    569719735: \"IFCPROCEDURETYPE\",\r\n    2945172077: \"IFCPROCESS\",\r\n    4208778838: \"IFCPRODUCT\",\r\n    673634403: \"IFCPRODUCTDEFINITIONSHAPE\",\r\n    2095639259: \"IFCPRODUCTREPRESENTATION\",\r\n    3958567839: \"IFCPROFILEDEF\",\r\n    2802850158: \"IFCPROFILEPROPERTIES\",\r\n    103090709: \"IFCPROJECT\",\r\n    653396225: \"IFCPROJECTLIBRARY\",\r\n    2904328755: \"IFCPROJECTORDER\",\r\n    3843373140: \"IFCPROJECTEDCRS\",\r\n    3651124850: \"IFCPROJECTIONELEMENT\",\r\n    2598011224: \"IFCPROPERTY\",\r\n    986844984: \"IFCPROPERTYABSTRACTION\",\r\n    871118103: \"IFCPROPERTYBOUNDEDVALUE\",\r\n    1680319473: \"IFCPROPERTYDEFINITION\",\r\n    148025276: \"IFCPROPERTYDEPENDENCYRELATIONSHIP\",\r\n    4166981789: \"IFCPROPERTYENUMERATEDVALUE\",\r\n    3710013099: \"IFCPROPERTYENUMERATION\",\r\n    2752243245: \"IFCPROPERTYLISTVALUE\",\r\n    941946838: \"IFCPROPERTYREFERENCEVALUE\",\r\n    1451395588: \"IFCPROPERTYSET\",\r\n    3357820518: \"IFCPROPERTYSETDEFINITION\",\r\n    492091185: \"IFCPROPERTYSETTEMPLATE\",\r\n    3650150729: \"IFCPROPERTYSINGLEVALUE\",\r\n    110355661: \"IFCPROPERTYTABLEVALUE\",\r\n    3521284610: \"IFCPROPERTYTEMPLATE\",\r\n    1482703590: \"IFCPROPERTYTEMPLATEDEFINITION\",\r\n    738039164: \"IFCPROTECTIVEDEVICE\",\r\n    2295281155: \"IFCPROTECTIVEDEVICETRIPPINGUNIT\",\r\n    655969474: \"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE\",\r\n    1842657554: \"IFCPROTECTIVEDEVICETYPE\",\r\n    3219374653: \"IFCPROXY\",\r\n    90941305: \"IFCPUMP\",\r\n    2250791053: \"IFCPUMPTYPE\",\r\n    2044713172: \"IFCQUANTITYAREA\",\r\n    2093928680: \"IFCQUANTITYCOUNT\",\r\n    931644368: \"IFCQUANTITYLENGTH\",\r\n    2090586900: \"IFCQUANTITYSET\",\r\n    3252649465: \"IFCQUANTITYTIME\",\r\n    2405470396: \"IFCQUANTITYVOLUME\",\r\n    825690147: \"IFCQUANTITYWEIGHT\",\r\n    2262370178: \"IFCRAILING\",\r\n    2893384427: \"IFCRAILINGTYPE\",\r\n    3024970846: \"IFCRAMP\",\r\n    3283111854: \"IFCRAMPFLIGHT\",\r\n    2324767716: \"IFCRAMPFLIGHTTYPE\",\r\n    1469900589: \"IFCRAMPTYPE\",\r\n    1232101972: \"IFCRATIONALBSPLINECURVEWITHKNOTS\",\r\n    683857671: \"IFCRATIONALBSPLINESURFACEWITHKNOTS\",\r\n    2770003689: \"IFCRECTANGLEHOLLOWPROFILEDEF\",\r\n    3615266464: \"IFCRECTANGLEPROFILEDEF\",\r\n    2798486643: \"IFCRECTANGULARPYRAMID\",\r\n    3454111270: \"IFCRECTANGULARTRIMMEDSURFACE\",\r\n    3915482550: \"IFCRECURRENCEPATTERN\",\r\n    2433181523: \"IFCREFERENCE\",\r\n    4021432810: \"IFCREFERENT\",\r\n    3413951693: \"IFCREGULARTIMESERIES\",\r\n    1580146022: \"IFCREINFORCEMENTBARPROPERTIES\",\r\n    3765753017: \"IFCREINFORCEMENTDEFINITIONPROPERTIES\",\r\n    979691226: \"IFCREINFORCINGBAR\",\r\n    2572171363: \"IFCREINFORCINGBARTYPE\",\r\n    3027567501: \"IFCREINFORCINGELEMENT\",\r\n    964333572: \"IFCREINFORCINGELEMENTTYPE\",\r\n    2320036040: \"IFCREINFORCINGMESH\",\r\n    2310774935: \"IFCREINFORCINGMESHTYPE\",\r\n    160246688: \"IFCRELAGGREGATES\",\r\n    3939117080: \"IFCRELASSIGNS\",\r\n    1683148259: \"IFCRELASSIGNSTOACTOR\",\r\n    2495723537: \"IFCRELASSIGNSTOCONTROL\",\r\n    1307041759: \"IFCRELASSIGNSTOGROUP\",\r\n    1027710054: \"IFCRELASSIGNSTOGROUPBYFACTOR\",\r\n    4278684876: \"IFCRELASSIGNSTOPROCESS\",\r\n    2857406711: \"IFCRELASSIGNSTOPRODUCT\",\r\n    205026976: \"IFCRELASSIGNSTORESOURCE\",\r\n    1865459582: \"IFCRELASSOCIATES\",\r\n    4095574036: \"IFCRELASSOCIATESAPPROVAL\",\r\n    919958153: \"IFCRELASSOCIATESCLASSIFICATION\",\r\n    2728634034: \"IFCRELASSOCIATESCONSTRAINT\",\r\n    982818633: \"IFCRELASSOCIATESDOCUMENT\",\r\n    3840914261: \"IFCRELASSOCIATESLIBRARY\",\r\n    2655215786: \"IFCRELASSOCIATESMATERIAL\",\r\n    826625072: \"IFCRELCONNECTS\",\r\n    1204542856: \"IFCRELCONNECTSELEMENTS\",\r\n    3945020480: \"IFCRELCONNECTSPATHELEMENTS\",\r\n    4201705270: \"IFCRELCONNECTSPORTTOELEMENT\",\r\n    3190031847: \"IFCRELCONNECTSPORTS\",\r\n    2127690289: \"IFCRELCONNECTSSTRUCTURALACTIVITY\",\r\n    1638771189: \"IFCRELCONNECTSSTRUCTURALMEMBER\",\r\n    504942748: \"IFCRELCONNECTSWITHECCENTRICITY\",\r\n    3678494232: \"IFCRELCONNECTSWITHREALIZINGELEMENTS\",\r\n    3242617779: \"IFCRELCONTAINEDINSPATIALSTRUCTURE\",\r\n    886880790: \"IFCRELCOVERSBLDGELEMENTS\",\r\n    2802773753: \"IFCRELCOVERSSPACES\",\r\n    2565941209: \"IFCRELDECLARES\",\r\n    2551354335: \"IFCRELDECOMPOSES\",\r\n    693640335: \"IFCRELDEFINES\",\r\n    1462361463: \"IFCRELDEFINESBYOBJECT\",\r\n    4186316022: \"IFCRELDEFINESBYPROPERTIES\",\r\n    307848117: \"IFCRELDEFINESBYTEMPLATE\",\r\n    781010003: \"IFCRELDEFINESBYTYPE\",\r\n    3940055652: \"IFCRELFILLSELEMENT\",\r\n    279856033: \"IFCRELFLOWCONTROLELEMENTS\",\r\n    427948657: \"IFCRELINTERFERESELEMENTS\",\r\n    3268803585: \"IFCRELNESTS\",\r\n    1441486842: \"IFCRELPOSITIONS\",\r\n    750771296: \"IFCRELPROJECTSELEMENT\",\r\n    1245217292: \"IFCRELREFERENCEDINSPATIALSTRUCTURE\",\r\n    4122056220: \"IFCRELSEQUENCE\",\r\n    366585022: \"IFCRELSERVICESBUILDINGS\",\r\n    3451746338: \"IFCRELSPACEBOUNDARY\",\r\n    3523091289: \"IFCRELSPACEBOUNDARY1STLEVEL\",\r\n    1521410863: \"IFCRELSPACEBOUNDARY2NDLEVEL\",\r\n    1401173127: \"IFCRELVOIDSELEMENT\",\r\n    478536968: \"IFCRELATIONSHIP\",\r\n    816062949: \"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT\",\r\n    1076942058: \"IFCREPRESENTATION\",\r\n    3377609919: \"IFCREPRESENTATIONCONTEXT\",\r\n    3008791417: \"IFCREPRESENTATIONITEM\",\r\n    1660063152: \"IFCREPRESENTATIONMAP\",\r\n    2914609552: \"IFCRESOURCE\",\r\n    2943643501: \"IFCRESOURCEAPPROVALRELATIONSHIP\",\r\n    1608871552: \"IFCRESOURCECONSTRAINTRELATIONSHIP\",\r\n    2439245199: \"IFCRESOURCELEVELRELATIONSHIP\",\r\n    1042787934: \"IFCRESOURCETIME\",\r\n    1856042241: \"IFCREVOLVEDAREASOLID\",\r\n    3243963512: \"IFCREVOLVEDAREASOLIDTAPERED\",\r\n    4158566097: \"IFCRIGHTCIRCULARCONE\",\r\n    3626867408: \"IFCRIGHTCIRCULARCYLINDER\",\r\n    2016517767: \"IFCROOF\",\r\n    2781568857: \"IFCROOFTYPE\",\r\n    2341007311: \"IFCROOT\",\r\n    2778083089: \"IFCROUNDEDRECTANGLEPROFILEDEF\",\r\n    448429030: \"IFCSIUNIT\",\r\n    3053780830: \"IFCSANITARYTERMINAL\",\r\n    1768891740: \"IFCSANITARYTERMINALTYPE\",\r\n    1054537805: \"IFCSCHEDULINGTIME\",\r\n    2157484638: \"IFCSEAMCURVE\",\r\n    2042790032: \"IFCSECTIONPROPERTIES\",\r\n    4165799628: \"IFCSECTIONREINFORCEMENTPROPERTIES\",\r\n    1862484736: \"IFCSECTIONEDSOLID\",\r\n    1290935644: \"IFCSECTIONEDSOLIDHORIZONTAL\",\r\n    1509187699: \"IFCSECTIONEDSPINE\",\r\n    4086658281: \"IFCSENSOR\",\r\n    1783015770: \"IFCSENSORTYPE\",\r\n    1329646415: \"IFCSHADINGDEVICE\",\r\n    4074543187: \"IFCSHADINGDEVICETYPE\",\r\n    867548509: \"IFCSHAPEASPECT\",\r\n    3982875396: \"IFCSHAPEMODEL\",\r\n    4240577450: \"IFCSHAPEREPRESENTATION\",\r\n    4124623270: \"IFCSHELLBASEDSURFACEMODEL\",\r\n    3692461612: \"IFCSIMPLEPROPERTY\",\r\n    3663146110: \"IFCSIMPLEPROPERTYTEMPLATE\",\r\n    4097777520: \"IFCSITE\",\r\n    1529196076: \"IFCSLAB\",\r\n    3127900445: \"IFCSLABELEMENTEDCASE\",\r\n    3027962421: \"IFCSLABSTANDARDCASE\",\r\n    2533589738: \"IFCSLABTYPE\",\r\n    2609359061: \"IFCSLIPPAGECONNECTIONCONDITION\",\r\n    3420628829: \"IFCSOLARDEVICE\",\r\n    1072016465: \"IFCSOLARDEVICETYPE\",\r\n    723233188: \"IFCSOLIDMODEL\",\r\n    3856911033: \"IFCSPACE\",\r\n    1999602285: \"IFCSPACEHEATER\",\r\n    1305183839: \"IFCSPACEHEATERTYPE\",\r\n    3812236995: \"IFCSPACETYPE\",\r\n    1412071761: \"IFCSPATIALELEMENT\",\r\n    710998568: \"IFCSPATIALELEMENTTYPE\",\r\n    2706606064: \"IFCSPATIALSTRUCTUREELEMENT\",\r\n    3893378262: \"IFCSPATIALSTRUCTUREELEMENTTYPE\",\r\n    463610769: \"IFCSPATIALZONE\",\r\n    2481509218: \"IFCSPATIALZONETYPE\",\r\n    451544542: \"IFCSPHERE\",\r\n    4015995234: \"IFCSPHERICALSURFACE\",\r\n    1404847402: \"IFCSTACKTERMINAL\",\r\n    3112655638: \"IFCSTACKTERMINALTYPE\",\r\n    331165859: \"IFCSTAIR\",\r\n    4252922144: \"IFCSTAIRFLIGHT\",\r\n    1039846685: \"IFCSTAIRFLIGHTTYPE\",\r\n    338393293: \"IFCSTAIRTYPE\",\r\n    682877961: \"IFCSTRUCTURALACTION\",\r\n    3544373492: \"IFCSTRUCTURALACTIVITY\",\r\n    2515109513: \"IFCSTRUCTURALANALYSISMODEL\",\r\n    1179482911: \"IFCSTRUCTURALCONNECTION\",\r\n    2273995522: \"IFCSTRUCTURALCONNECTIONCONDITION\",\r\n    1004757350: \"IFCSTRUCTURALCURVEACTION\",\r\n    4243806635: \"IFCSTRUCTURALCURVECONNECTION\",\r\n    214636428: \"IFCSTRUCTURALCURVEMEMBER\",\r\n    2445595289: \"IFCSTRUCTURALCURVEMEMBERVARYING\",\r\n    2757150158: \"IFCSTRUCTURALCURVEREACTION\",\r\n    3136571912: \"IFCSTRUCTURALITEM\",\r\n    1807405624: \"IFCSTRUCTURALLINEARACTION\",\r\n    2162789131: \"IFCSTRUCTURALLOAD\",\r\n    385403989: \"IFCSTRUCTURALLOADCASE\",\r\n    3478079324: \"IFCSTRUCTURALLOADCONFIGURATION\",\r\n    1252848954: \"IFCSTRUCTURALLOADGROUP\",\r\n    1595516126: \"IFCSTRUCTURALLOADLINEARFORCE\",\r\n    609421318: \"IFCSTRUCTURALLOADORRESULT\",\r\n    2668620305: \"IFCSTRUCTURALLOADPLANARFORCE\",\r\n    2473145415: \"IFCSTRUCTURALLOADSINGLEDISPLACEMENT\",\r\n    1973038258: \"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION\",\r\n    1597423693: \"IFCSTRUCTURALLOADSINGLEFORCE\",\r\n    1190533807: \"IFCSTRUCTURALLOADSINGLEFORCEWARPING\",\r\n    2525727697: \"IFCSTRUCTURALLOADSTATIC\",\r\n    3408363356: \"IFCSTRUCTURALLOADTEMPERATURE\",\r\n    530289379: \"IFCSTRUCTURALMEMBER\",\r\n    1621171031: \"IFCSTRUCTURALPLANARACTION\",\r\n    2082059205: \"IFCSTRUCTURALPOINTACTION\",\r\n    734778138: \"IFCSTRUCTURALPOINTCONNECTION\",\r\n    1235345126: \"IFCSTRUCTURALPOINTREACTION\",\r\n    3689010777: \"IFCSTRUCTURALREACTION\",\r\n    2986769608: \"IFCSTRUCTURALRESULTGROUP\",\r\n    3657597509: \"IFCSTRUCTURALSURFACEACTION\",\r\n    1975003073: \"IFCSTRUCTURALSURFACECONNECTION\",\r\n    3979015343: \"IFCSTRUCTURALSURFACEMEMBER\",\r\n    2218152070: \"IFCSTRUCTURALSURFACEMEMBERVARYING\",\r\n    603775116: \"IFCSTRUCTURALSURFACEREACTION\",\r\n    2830218821: \"IFCSTYLEMODEL\",\r\n    3958052878: \"IFCSTYLEDITEM\",\r\n    3049322572: \"IFCSTYLEDREPRESENTATION\",\r\n    148013059: \"IFCSUBCONTRACTRESOURCE\",\r\n    4095615324: \"IFCSUBCONTRACTRESOURCETYPE\",\r\n    2233826070: \"IFCSUBEDGE\",\r\n    2513912981: \"IFCSURFACE\",\r\n    699246055: \"IFCSURFACECURVE\",\r\n    2028607225: \"IFCSURFACECURVESWEPTAREASOLID\",\r\n    3101698114: \"IFCSURFACEFEATURE\",\r\n    2809605785: \"IFCSURFACEOFLINEAREXTRUSION\",\r\n    4124788165: \"IFCSURFACEOFREVOLUTION\",\r\n    2934153892: \"IFCSURFACEREINFORCEMENTAREA\",\r\n    1300840506: \"IFCSURFACESTYLE\",\r\n    3303107099: \"IFCSURFACESTYLELIGHTING\",\r\n    1607154358: \"IFCSURFACESTYLEREFRACTION\",\r\n    1878645084: \"IFCSURFACESTYLERENDERING\",\r\n    846575682: \"IFCSURFACESTYLESHADING\",\r\n    1351298697: \"IFCSURFACESTYLEWITHTEXTURES\",\r\n    626085974: \"IFCSURFACETEXTURE\",\r\n    2247615214: \"IFCSWEPTAREASOLID\",\r\n    1260650574: \"IFCSWEPTDISKSOLID\",\r\n    1096409881: \"IFCSWEPTDISKSOLIDPOLYGONAL\",\r\n    230924584: \"IFCSWEPTSURFACE\",\r\n    1162798199: \"IFCSWITCHINGDEVICE\",\r\n    2315554128: \"IFCSWITCHINGDEVICETYPE\",\r\n    2254336722: \"IFCSYSTEM\",\r\n    413509423: \"IFCSYSTEMFURNITUREELEMENT\",\r\n    1580310250: \"IFCSYSTEMFURNITUREELEMENTTYPE\",\r\n    3071757647: \"IFCTSHAPEPROFILEDEF\",\r\n    985171141: \"IFCTABLE\",\r\n    2043862942: \"IFCTABLECOLUMN\",\r\n    531007025: \"IFCTABLEROW\",\r\n    812556717: \"IFCTANK\",\r\n    5716631: \"IFCTANKTYPE\",\r\n    3473067441: \"IFCTASK\",\r\n    1549132990: \"IFCTASKTIME\",\r\n    2771591690: \"IFCTASKTIMERECURRING\",\r\n    3206491090: \"IFCTASKTYPE\",\r\n    912023232: \"IFCTELECOMADDRESS\",\r\n    3824725483: \"IFCTENDON\",\r\n    2347447852: \"IFCTENDONANCHOR\",\r\n    3081323446: \"IFCTENDONANCHORTYPE\",\r\n    3663046924: \"IFCTENDONCONDUIT\",\r\n    2281632017: \"IFCTENDONCONDUITTYPE\",\r\n    2415094496: \"IFCTENDONTYPE\",\r\n    2387106220: \"IFCTESSELLATEDFACESET\",\r\n    901063453: \"IFCTESSELLATEDITEM\",\r\n    4282788508: \"IFCTEXTLITERAL\",\r\n    3124975700: \"IFCTEXTLITERALWITHEXTENT\",\r\n    1447204868: \"IFCTEXTSTYLE\",\r\n    1983826977: \"IFCTEXTSTYLEFONTMODEL\",\r\n    2636378356: \"IFCTEXTSTYLEFORDEFINEDFONT\",\r\n    1640371178: \"IFCTEXTSTYLETEXTMODEL\",\r\n    280115917: \"IFCTEXTURECOORDINATE\",\r\n    1742049831: \"IFCTEXTURECOORDINATEGENERATOR\",\r\n    2552916305: \"IFCTEXTUREMAP\",\r\n    1210645708: \"IFCTEXTUREVERTEX\",\r\n    3611470254: \"IFCTEXTUREVERTEXLIST\",\r\n    1199560280: \"IFCTIMEPERIOD\",\r\n    3101149627: \"IFCTIMESERIES\",\r\n    581633288: \"IFCTIMESERIESVALUE\",\r\n    1377556343: \"IFCTOPOLOGICALREPRESENTATIONITEM\",\r\n    1735638870: \"IFCTOPOLOGYREPRESENTATION\",\r\n    1935646853: \"IFCTOROIDALSURFACE\",\r\n    3825984169: \"IFCTRANSFORMER\",\r\n    1692211062: \"IFCTRANSFORMERTYPE\",\r\n    2595432518: \"IFCTRANSITIONCURVESEGMENT2D\",\r\n    1620046519: \"IFCTRANSPORTELEMENT\",\r\n    2097647324: \"IFCTRANSPORTELEMENTTYPE\",\r\n    2715220739: \"IFCTRAPEZIUMPROFILEDEF\",\r\n    2916149573: \"IFCTRIANGULATEDFACESET\",\r\n    1229763772: \"IFCTRIANGULATEDIRREGULARNETWORK\",\r\n    3593883385: \"IFCTRIMMEDCURVE\",\r\n    3026737570: \"IFCTUBEBUNDLE\",\r\n    1600972822: \"IFCTUBEBUNDLETYPE\",\r\n    1628702193: \"IFCTYPEOBJECT\",\r\n    3736923433: \"IFCTYPEPROCESS\",\r\n    2347495698: \"IFCTYPEPRODUCT\",\r\n    3698973494: \"IFCTYPERESOURCE\",\r\n    427810014: \"IFCUSHAPEPROFILEDEF\",\r\n    180925521: \"IFCUNITASSIGNMENT\",\r\n    630975310: \"IFCUNITARYCONTROLELEMENT\",\r\n    3179687236: \"IFCUNITARYCONTROLELEMENTTYPE\",\r\n    4292641817: \"IFCUNITARYEQUIPMENT\",\r\n    1911125066: \"IFCUNITARYEQUIPMENTTYPE\",\r\n    4207607924: \"IFCVALVE\",\r\n    728799441: \"IFCVALVETYPE\",\r\n    1417489154: \"IFCVECTOR\",\r\n    2799835756: \"IFCVERTEX\",\r\n    2759199220: \"IFCVERTEXLOOP\",\r\n    1907098498: \"IFCVERTEXPOINT\",\r\n    1530820697: \"IFCVIBRATIONDAMPER\",\r\n    3956297820: \"IFCVIBRATIONDAMPERTYPE\",\r\n    2391383451: \"IFCVIBRATIONISOLATOR\",\r\n    3313531582: \"IFCVIBRATIONISOLATORTYPE\",\r\n    2769231204: \"IFCVIRTUALELEMENT\",\r\n    891718957: \"IFCVIRTUALGRIDINTERSECTION\",\r\n    926996030: \"IFCVOIDINGFEATURE\",\r\n    2391406946: \"IFCWALL\",\r\n    4156078855: \"IFCWALLELEMENTEDCASE\",\r\n    3512223829: \"IFCWALLSTANDARDCASE\",\r\n    1898987631: \"IFCWALLTYPE\",\r\n    4237592921: \"IFCWASTETERMINAL\",\r\n    1133259667: \"IFCWASTETERMINALTYPE\",\r\n    3304561284: \"IFCWINDOW\",\r\n    336235671: \"IFCWINDOWLININGPROPERTIES\",\r\n    512836454: \"IFCWINDOWPANELPROPERTIES\",\r\n    486154966: \"IFCWINDOWSTANDARDCASE\",\r\n    1299126871: \"IFCWINDOWSTYLE\",\r\n    4009809668: \"IFCWINDOWTYPE\",\r\n    4088093105: \"IFCWORKCALENDAR\",\r\n    1028945134: \"IFCWORKCONTROL\",\r\n    4218914973: \"IFCWORKPLAN\",\r\n    3342526732: \"IFCWORKSCHEDULE\",\r\n    1236880293: \"IFCWORKTIME\",\r\n    2543172580: \"IFCZSHAPEPROFILEDEF\",\r\n    1033361043: \"IFCZONE\",\r\n}","import { IfcTypesMap } from '../IfcTypesMap';\r\nimport { JSONObject, pName } from '../../BaseDefinitions';\r\nimport { BasePropertyManager } from './BasePropertyManager';\r\nimport { IFCPROJECT } from 'web-ifc';\r\nimport { PropertyAPI } from './BaseDefinitions';\r\n\r\nexport class JSONPropertyManager extends BasePropertyManager implements PropertyAPI {\r\n\r\n    async getItemProperties(modelID: number, id: number, recursive = false) {\r\n        return { ...this.state.models[modelID].jsonData[id] };\r\n    }\r\n\r\n    async getSpatialStructure(modelID: number, includeProperties?: boolean) {\r\n        const chunks = await this.getSpatialTreeChunks(modelID);\r\n        const projectsIDs = await this.getAllItemsOfType(modelID, IFCPROJECT, false);\r\n        const projectID = projectsIDs[0];\r\n        const project = JSONPropertyManager.newIfcProject(projectID);\r\n        await this.getSpatialNode(modelID, project, chunks, includeProperties);\r\n        return { ...project };\r\n    }\r\n\r\n    async getAllItemsOfType(modelID: number, type: number, verbose: boolean) {\r\n        const data = this.state.models[modelID].jsonData;\r\n        const typeName = IfcTypesMap[type];\r\n        if (!typeName) {\r\n            throw new Error(`Type not found: ${type}`);\r\n        }\r\n        return this.filterItemsByType(data, typeName, verbose);\r\n    }\r\n\r\n    override async getProperty(modelID: number, elementID: number, recursive = false, propName: pName) {\r\n        const resultIDs = await this.getAllRelatedItemsOfType(modelID, elementID, propName);\r\n        const result = this.getItemsByID(modelID, resultIDs);\r\n        if (recursive) {\r\n            result.forEach(result => this.getReferencesRecursively(modelID, result));\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected override getNodeType(modelID: number, id: number) {\r\n        return this.state.models[modelID].jsonData[id].type;\r\n    }\r\n\r\n    protected override async getChunks(modelID: number, chunks: any, propNames: pName) {\r\n        const relation = await this.getAllItemsOfType(modelID, propNames.name, true);\r\n        relation.forEach(rel => {\r\n            this.saveChunk(chunks, propNames, rel);\r\n        });\r\n    }\r\n\r\n    private filterItemsByType(data: { [id: number]: JSONObject }, typeName: string, verbose: boolean) {\r\n        const result: any[] = [];\r\n        Object.keys(data).forEach(key => {\r\n            const numKey = parseInt(key);\r\n            if (data[numKey].type.toUpperCase() === typeName) {\r\n                result.push(verbose ? { ...data[numKey] } : numKey);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    private async getAllRelatedItemsOfType(modelID: number, id: number, propNames: pName) {\r\n        const lines = await this.getAllItemsOfType(modelID, propNames.name, true);\r\n        const IDs: number[] = [];\r\n        lines.forEach(line => {\r\n            const isRelated = JSONPropertyManager.isRelated(id, line, propNames);\r\n            if (isRelated) this.getRelated(line, propNames, IDs);\r\n        });\r\n        return IDs;\r\n    }\r\n\r\n    private getItemsByID(modelID: number, ids: number[]) {\r\n        const data = this.state.models[modelID].jsonData;\r\n        const result: any[] = [];\r\n        ids.forEach(id => result.push({ ...data[id] }));\r\n        return result;\r\n    }\r\n\r\n    private getReferencesRecursively(modelID: number, jsonObject: any) {\r\n        if (jsonObject == undefined) return;\r\n        const keys = Object.keys(jsonObject);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            const key = keys[i];\r\n            this.getJSONItem(modelID, jsonObject, key);\r\n        }\r\n    }\r\n\r\n    private getJSONItem(modelID: number, jsonObject: any, key: string) {\r\n        if (Array.isArray(jsonObject[key])) {\r\n            return this.getMultipleJSONItems(modelID, jsonObject, key);\r\n        }\r\n        if (jsonObject[key] && jsonObject[key].type === 5) {\r\n            jsonObject[key] = this.getItemsByID(modelID, [jsonObject[key].value])[0];\r\n            this.getReferencesRecursively(modelID, jsonObject[key]);\r\n        }\r\n    }\r\n\r\n    private getMultipleJSONItems(modelID: number, jsonObject: any, key: string) {\r\n        jsonObject[key] = jsonObject[key].map((item: any) => {\r\n            if (item.type === 5) {\r\n                item = this.getItemsByID(modelID, [item.value])[0];\r\n                this.getReferencesRecursively(modelID, item);\r\n            }\r\n            return item;\r\n        });\r\n    }\r\n}","import {\r\n    IdAttrName\r\n} from '../../BaseDefinitions';\r\nimport { IfcState } from '../../BaseDefinitions';\r\nimport { BufferGeometry } from 'three';\r\nimport { WebIfcPropertyManager } from './WebIfcPropertyManager';\r\nimport { JSONPropertyManager } from './JSONPropertyManager';\r\nimport { PropertyManagerAPI, PropertyAPI } from './BaseDefinitions';\r\n\r\n/**\r\n * Contains the logic to get the properties of the items within an IFC model.\r\n */\r\nexport class PropertyManager implements PropertyManagerAPI {\r\n    private readonly webIfcProps: WebIfcPropertyManager;\r\n    private readonly jsonProps: JSONPropertyManager;\r\n    private currentProps: PropertyAPI;\r\n\r\n    constructor(private state: IfcState) {\r\n        this.webIfcProps = new WebIfcPropertyManager(state);\r\n        this.jsonProps = new JSONPropertyManager(state);\r\n        this.currentProps = this.webIfcProps;\r\n    }\r\n\r\n    getExpressId(geometry: BufferGeometry, faceIndex: number) {\r\n        if (!geometry.index) throw new Error('Geometry does not have index information.');\r\n        const geoIndex = geometry.index.array;\r\n        return geometry.attributes[IdAttrName].getX(geoIndex[3 * faceIndex]);\r\n    }\r\n\r\n    async getItemProperties(modelID: number, elementID: number, recursive = false) {\r\n        this.updateCurrentProps();\r\n        return this.currentProps.getItemProperties(modelID, elementID, recursive);\r\n    }\r\n\r\n    async getAllItemsOfType(modelID: number, type: number, verbose: boolean) {\r\n        this.updateCurrentProps();\r\n        return this.currentProps.getAllItemsOfType(modelID, type, verbose);\r\n    }\r\n\r\n    async getPropertySets(modelID: number, elementID: number, recursive = false) {\r\n        this.updateCurrentProps();\r\n        return this.currentProps.getPropertySets(modelID, elementID, recursive);\r\n    }\r\n\r\n    async getTypeProperties(modelID: number, elementID: number, recursive = false) {\r\n        this.updateCurrentProps();\r\n        return this.currentProps.getTypeProperties(modelID, elementID, recursive);\r\n    }\r\n\r\n    async getMaterialsProperties(modelID: number, elementID: number, recursive = false) {\r\n        this.updateCurrentProps();\r\n        return this.currentProps.getMaterialsProperties(modelID, elementID, recursive);\r\n    }\r\n\r\n    async getSpatialStructure(modelID: number, includeProperties?: boolean) {\r\n        this.updateCurrentProps();\r\n        if (!this.state.useJSON && includeProperties) {\r\n            console.warn('Including properties in getSpatialStructure with the JSON workflow disabled can lead to poor performance.');\r\n        }\r\n        return await this.currentProps.getSpatialStructure(modelID, includeProperties);\r\n    }\r\n\r\n    private updateCurrentProps() {\r\n        this.currentProps = this.state.useJSON ? this.jsonProps : this.webIfcProps;\r\n    }\r\n\r\n}\r\n","import { IfcState } from '../BaseDefinitions';\r\nimport { IfcElements } from './IFCElementsMap'\r\nimport { IFCWorkerHandler } from '../web-workers/IFCWorkerHandler';\r\n\r\n/**\r\n * Contains the logic to manage the type (e. g. IfcWall, IfcWindow, IfcDoor) of\r\n * all the items within an IFC file.\r\n */\r\nexport class TypeManager {\r\n\r\n    constructor(private state: IfcState) {\r\n        this.state = state;\r\n    }\r\n\r\n    async getAllTypes(worker?: IFCWorkerHandler){\r\n\t\tfor (let modelID in this.state.models) {\r\n\t\t\tif (this.state.models.hasOwnProperty(modelID)) {\r\n\t\t\t\tconst types = this.state.models[modelID].types;\r\n\t\t\t\tif (Object.keys(types).length == 0) {\r\n\t\t\t\t\tawait this.getAllTypesOfModel(parseInt(modelID), worker);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n\r\n    async getAllTypesOfModel(modelID: number, worker?: IFCWorkerHandler) {\r\n        const result = {};\r\n        const elements = Object.keys(IfcElements).map((e) => parseInt(e));\r\n        for(let i = 0; i < elements.length; i++) {\r\n            const element = elements[i];\r\n            const lines = await this.state.api.GetLineIDsWithType(modelID, element);\r\n            const size = lines.size();\r\n            //@ts-ignore\r\n            for (let i = 0; i < size; i++) result[lines.get(i)] = element;\r\n        }\r\n        if(this.state.worker.active && worker) {\r\n            // TODO: When using web workers, store the type information there and request it to the worker\r\n            // Otherwise the type data is stored in 2 different places at the same time\r\n            await worker.workerState.updateModelStateTypes(modelID, result);\r\n        }\r\n        this.state.models[modelID].types = result;\r\n    }\r\n}\r\n","import { BufferGeometry, Mesh } from 'three';\r\n\r\nexport class BvhManager {\r\n    private computeBoundsTree?: any;\r\n    private disposeBoundsTree?: any;\r\n    private acceleratedRaycast?: any;\r\n\r\n    initializeMeshBVH(computeBoundsTree: any, disposeBoundsTree: any, acceleratedRaycast: any) {\r\n        this.computeBoundsTree = computeBoundsTree;\r\n        this.disposeBoundsTree = disposeBoundsTree;\r\n        this.acceleratedRaycast = acceleratedRaycast;\r\n        this.setupThreeMeshBVH();\r\n    }\r\n\r\n    applyThreeMeshBVH(geometry: BufferGeometry) {\r\n        if (this.computeBoundsTree)\r\n            //@ts-ignore\r\n            geometry.computeBoundsTree();\r\n    }\r\n\r\n    private setupThreeMeshBVH() {\r\n        if (!this.computeBoundsTree || !this.disposeBoundsTree || !this.acceleratedRaycast) return;\r\n        //@ts-ignore\r\n        BufferGeometry.prototype.computeBoundsTree = this.computeBoundsTree;\r\n        //@ts-ignore\r\n        BufferGeometry.prototype.disposeBoundsTree = this.disposeBoundsTree;\r\n        Mesh.prototype.raycast = this.acceleratedRaycast;\r\n    }\r\n}","import { IfcState, WebIfcAPI } from '../BaseDefinitions';\r\n\r\nexport interface IfcWorkerAPI {\r\n    post: (data: any) => void;\r\n    initializeAPI: (api: WebIfcAPI) => void;\r\n    state?: IfcState;\r\n    postCallback: (data: any, result: any, serializer?: any) => void;\r\n}\r\n\r\nexport enum WorkerActions {\r\n    // Worker State Actions\r\n    updateStateUseJson = 'updateStateUseJson',\r\n    updateStateWebIfcSettings = 'updateStateWebIfcSettings',\r\n    updateModelStateTypes = 'updateModelStateTypes',\r\n    updateModelStateJsonData = 'updateModelStateJsonData',\r\n    loadJsonDataFromWorker = 'loadJsonDataFromWorker',\r\n    dispose = 'dispose',\r\n\r\n    // WebIFC Actions\r\n    Close = 'Close',\r\n    DisposeWebIfc = 'DisposeWebIfc',\r\n    Init = 'Init',\r\n    OpenModel = 'OpenModel',\r\n    CreateModel = 'CreateModel',\r\n    ExportFileAsIFC = 'ExportFileAsIFC',\r\n    GetGeometry = 'GetGeometry',\r\n    GetLine = 'GetLine',\r\n    GetAndClearErrors = 'GetAndClearErrors',\r\n    WriteLine = 'WriteLine',\r\n    FlattenLine = 'FlattenLine',\r\n    GetRawLineData = 'GetRawLineData',\r\n    WriteRawLineData = 'WriteRawLineData',\r\n    GetLineIDsWithType = 'GetLineIDsWithType',\r\n    GetAllLines = 'GetAllLines',\r\n    SetGeometryTransformation = 'SetGeometryTransformation',\r\n    GetCoordinationMatrix = 'GetCoordinationMatrix',\r\n    GetVertexArray = 'GetVertexArray',\r\n    GetIndexArray = 'GetIndexArray',\r\n    getSubArray = 'getSubArray',\r\n    CloseModel = 'CloseModel',\r\n    StreamAllMeshes = 'StreamAllMeshes',\r\n    StreamAllMeshesWithTypes = 'StreamAllMeshesWithTypes',\r\n    IsModelOpen = 'IsModelOpen',\r\n    LoadAllGeometry = 'LoadAllGeometry',\r\n    GetFlatMesh = 'GetFlatMesh',\r\n    SetWasmPath = 'SetWasmPath',\r\n\r\n    // Parser\r\n    parse = 'parse',\r\n    setupOptionalCategories = 'setupOptionalCategories',\r\n\r\n    // Properties\r\n    getExpressId = 'getExpressId',\r\n    initializeProperties = 'initializeProperties',\r\n    getAllItemsOfType = 'getAllItemsOfType',\r\n    getItemProperties = 'getItemProperties',\r\n    getMaterialsProperties = 'getMaterialsProperties',\r\n    getPropertySets = 'getPropertySets',\r\n    getSpatialStructure = 'getSpatialStructure',\r\n    getTypeProperties = 'getTypeProperties',    \r\n}\r\n\r\nexport enum WorkerAPIs {\r\n    workerState = 'workerState',\r\n    webIfc = 'webIfc',\r\n    properties = 'properties',\r\n    parser = 'parser',\r\n}\r\n\r\nexport interface IfcEventData {\r\n    worker: WorkerAPIs;\r\n    action: WorkerActions;\r\n    args: any;\r\n    id: number;\r\n    result: any;\r\n    onProgress: boolean;\r\n}\r\n\r\nexport interface RootWorker {\r\n    [WorkerAPIs.workerState]: WorkerStateAPI;\r\n    [WorkerAPIs.webIfc]: WebIfcWorkerAPI;\r\n    [WorkerAPIs.properties]: PropertyWorkerAPI;\r\n}\r\n\r\nexport interface BaseWorkerAPI {\r\n    API: WorkerAPIs;\r\n}\r\n\r\nexport type IfcWorkerEventHandler = (data: IfcEventData) => void;\r\n\r\nexport interface WorkerStateAPI extends BaseWorkerAPI {\r\n    [WorkerActions.updateStateUseJson]: IfcWorkerEventHandler;\r\n    [WorkerActions.updateStateWebIfcSettings]: IfcWorkerEventHandler;\r\n    [WorkerActions.updateModelStateTypes]: IfcWorkerEventHandler;\r\n    [WorkerActions.updateModelStateJsonData]: IfcWorkerEventHandler;\r\n    [WorkerActions.loadJsonDataFromWorker]: IfcWorkerEventHandler;\r\n    [WorkerActions.dispose]: IfcWorkerEventHandler;\r\n}\r\n\r\nexport interface PropertyWorkerAPI extends BaseWorkerAPI {\r\n    [WorkerActions.getAllItemsOfType]: IfcWorkerEventHandler;\r\n    [WorkerActions.getItemProperties]: IfcWorkerEventHandler;\r\n    [WorkerActions.getMaterialsProperties]: IfcWorkerEventHandler;\r\n    [WorkerActions.getPropertySets]: IfcWorkerEventHandler;\r\n    [WorkerActions.getSpatialStructure]: IfcWorkerEventHandler;\r\n    [WorkerActions.getTypeProperties]: IfcWorkerEventHandler;\r\n}\r\n\r\nexport interface ParserWorkerAPI extends BaseWorkerAPI {\r\n    [WorkerActions.parse]: IfcWorkerEventHandler;\r\n    [WorkerActions.setupOptionalCategories]: IfcWorkerEventHandler;\r\n}\r\n\r\nexport interface WebIfcWorkerAPI extends BaseWorkerAPI {\r\n    [WorkerActions.Init]: IfcWorkerEventHandler;\r\n    [WorkerActions.Close]: IfcWorkerEventHandler;\r\n    [WorkerActions.DisposeWebIfc]: IfcWorkerEventHandler;\r\n    [WorkerActions.OpenModel]: IfcWorkerEventHandler;\r\n    [WorkerActions.CreateModel]: IfcWorkerEventHandler;\r\n    [WorkerActions.ExportFileAsIFC]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetGeometry]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetLine]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetAndClearErrors]: IfcWorkerEventHandler;\r\n    [WorkerActions.WriteLine]: IfcWorkerEventHandler;\r\n    [WorkerActions.FlattenLine]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetRawLineData]: IfcWorkerEventHandler;\r\n    [WorkerActions.WriteRawLineData]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetLineIDsWithType]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetAllLines]: IfcWorkerEventHandler;\r\n    [WorkerActions.SetGeometryTransformation]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetCoordinationMatrix]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetVertexArray]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetIndexArray]: IfcWorkerEventHandler;\r\n    [WorkerActions.getSubArray]: IfcWorkerEventHandler;\r\n    [WorkerActions.CloseModel]: IfcWorkerEventHandler;\r\n    [WorkerActions.StreamAllMeshes]: IfcWorkerEventHandler;\r\n    [WorkerActions.StreamAllMeshesWithTypes]: IfcWorkerEventHandler;\r\n    [WorkerActions.IsModelOpen]: IfcWorkerEventHandler;\r\n    [WorkerActions.LoadAllGeometry]: IfcWorkerEventHandler;\r\n    [WorkerActions.GetFlatMesh]: IfcWorkerEventHandler;\r\n    [WorkerActions.SetWasmPath]: IfcWorkerEventHandler;\r\n}\r\n\r\nexport interface SerializedVector {\r\n    [key: number]: any;\r\n\r\n    size: number;\r\n}\r\n\r\nexport interface SerializedIfcGeometry {\r\n    GetVertexData: number;\r\n    GetVertexDataSize: number;\r\n    GetIndexData: number;\r\n    GetIndexDataSize: number;\r\n}\r\n\r\nexport interface SerializedFlatMesh {\r\n    geometries: SerializedVector;\r\n    expressID: number;\r\n}\r\n\r\nexport const ErrorStateNotAvailable = 'The state of the worker does not exist';\r\nexport const ErrorRootStateNotAvailable = 'The root worker does not have any state';\r\nexport const ErrorPropertiesNotAvailable = 'Error: Properties not available from web worker';\r\nexport const ErrorParserNotAvailable = 'Error: Parser not available from web worker';\r\nexport const ErrorBadJsonPath = 'Error: Model not available from web worker';\r\nexport const ErrorBadJson = 'Error: The given Json could not be read as a JS object';","import { SerializedVector } from '../BaseDefinitions';\r\nimport { Vector as WebIfcVector } from 'web-ifc';\r\n\r\nexport class Vector<T> implements WebIfcVector<T> {\r\n    private readonly _size: number;\r\n    private _data: { [key: number]: T } = {};\r\n\r\n    constructor(vector: SerializedVector) {\r\n        this._size = vector.size;\r\n        const keys = Object.keys(vector).filter((key) => key.indexOf('size') === -1).map(key => parseInt(key));\r\n        keys.forEach((key) => this._data[key] = vector[key]);\r\n    }\r\n\r\n    size() {\r\n        return this._size;\r\n    }\r\n\r\n    get(index: number) {\r\n        return this._data[index];\r\n    }\r\n}","import { SerializedIfcGeometry } from '../BaseDefinitions';\r\nimport { IfcGeometry as WebIfcIfcGeometry } from 'web-ifc';\r\n\r\nexport class IfcGeometry implements WebIfcIfcGeometry {\r\n    private readonly _GetVertexData: number;\r\n    private readonly _GetVertexDataSize: number;\r\n    private readonly _GetIndexData: number;\r\n    private readonly _GetIndexDataSize: number;\r\n\r\n    constructor(vector: SerializedIfcGeometry) {\r\n        this._GetVertexData = vector.GetVertexData;\r\n        this._GetVertexDataSize = vector.GetVertexDataSize;\r\n        this._GetIndexData = vector.GetIndexData;\r\n        this._GetIndexDataSize = vector.GetIndexDataSize;\r\n    }\r\n\r\n    GetVertexData() {\r\n        return this._GetVertexData;\r\n    }\r\n\r\n    GetVertexDataSize() {\r\n        return this._GetVertexDataSize;\r\n    }\r\n\r\n    GetIndexData() {\r\n        return this._GetIndexData;\r\n    }\r\n\r\n    GetIndexDataSize() {\r\n        return this._GetIndexDataSize;\r\n    }\r\n}","import { SerializedFlatMesh } from '../BaseDefinitions';\r\nimport { FlatMesh as WebIfcFlatMesh, PlacedGeometry } from 'web-ifc';\r\nimport { Vector } from './Vector';\r\nimport { Serializer } from './Serializer';\r\n\r\nexport class FlatMesh implements WebIfcFlatMesh {\r\n    geometries: Vector<PlacedGeometry>;\r\n    expressID: number;\r\n\r\n    constructor(serializer: Serializer, flatMesh: SerializedFlatMesh) {\r\n        this.expressID = flatMesh.expressID;\r\n        this.geometries = serializer.reconstructVector(flatMesh.geometries);\r\n    }\r\n}","import { SerializedVector } from '../BaseDefinitions';\r\nimport { FlatMesh as WebIfcFlatMesh, Vector as WebIfcVector } from 'web-ifc';\r\nimport { Serializer } from './Serializer';\r\n\r\nexport class FlatMeshVector implements WebIfcVector<WebIfcFlatMesh> {\r\n    private readonly _size: number;\r\n    private _data: { [key: number]: WebIfcFlatMesh } = {};\r\n\r\n    constructor(serializer: Serializer, vector: SerializedVector) {\r\n        this._size = vector.size;\r\n        const keys = Object.keys(vector).filter((key) => key.indexOf('size') === -1).map(key => parseInt(key));\r\n        keys.forEach(key => this._data[key] = serializer.reconstructFlatMesh(vector[key]));\r\n    }\r\n\r\n    size() {\r\n        return this._size;\r\n    }\r\n\r\n    get(index: number) {\r\n        return this._data[index];\r\n    }\r\n}","import {Color, DoubleSide, MeshLambertMaterial} from 'three';\r\n\r\nexport class SerializedMaterial {\r\n    color: number[];\r\n    opacity: number;\r\n    transparent: boolean;\r\n\r\n    constructor(material: MeshLambertMaterial) {\r\n        this.color = [material.color.r, material.color.g, material.color.b];\r\n        this.opacity = material.opacity;\r\n        this.transparent = material.transparent;\r\n    }\r\n}\r\n\r\nexport class MaterialReconstructor {\r\n    static new(material: SerializedMaterial) {\r\n        return new MeshLambertMaterial({\r\n            color: new Color(material.color[0], material.color[1], material.color[2]),\r\n            opacity: material.opacity,\r\n            transparent: material.transparent,\r\n            side: DoubleSide\r\n        })\r\n    }\r\n}","import { BufferAttribute, BufferGeometry } from 'three';\r\nimport { IFCModel } from '../../components/IFCModel';\r\n\r\nexport class SerializedGeometry {\r\n    position: ArrayLike<number>;\r\n    normal: ArrayLike<number>;\r\n    expressID: ArrayLike<number>;\r\n    index: ArrayLike<number>;\r\n    groups: { start: number, count: number, materialIndex?: number }[];\r\n\r\n    constructor(geometry: BufferGeometry) {\r\n        this.position = geometry.attributes.position?.array || [];\r\n        this.normal = geometry.attributes.normal?.array || [];\r\n        this.expressID = geometry.attributes.expressID?.array || [];\r\n        this.index = geometry.index?.array || [];\r\n        this.groups = geometry.groups;\r\n    }\r\n}\r\n\r\nexport class GeometryReconstructor {\r\n    static new(serialized: SerializedGeometry) {\r\n        const geom = new BufferGeometry();\r\n        GeometryReconstructor.set(geom, 'expressID', new Uint32Array(serialized.expressID), 1);\r\n        GeometryReconstructor.set(geom, 'position', new Float32Array(serialized.position), 3);\r\n        GeometryReconstructor.set(geom, 'normal', new Float32Array(serialized.normal), 3);\r\n        geom.setIndex(Array.from(serialized.index));\r\n        geom.groups = serialized.groups;\r\n        return geom;\r\n    }\r\n\r\n    private static set(geom: BufferGeometry, name: string, data: ArrayLike<number>, size: number) {\r\n        if(data.length > 0) {\r\n            geom.setAttribute(name, new BufferAttribute(data, size));\r\n        }\r\n    }\r\n}","import { IFCModel } from '../../components/IFCModel';\r\nimport { Material, MeshLambertMaterial } from 'three';\r\nimport { MaterialReconstructor, SerializedMaterial } from './Material';\r\nimport { GeometryReconstructor, SerializedGeometry } from './Geometry';\r\n\r\nexport class SerializedMesh {\r\n\r\n    modelID: number;\r\n    geometry: SerializedGeometry;\r\n    materials: SerializedMaterial [] = [];\r\n\r\n    constructor(model: IFCModel) {\r\n        this.modelID = model.modelID;\r\n        this.geometry = new SerializedGeometry(model.geometry);\r\n        if (Array.isArray(model.material)) {\r\n            model.material.forEach(mat => {\r\n                this.materials.push(new SerializedMaterial(mat as MeshLambertMaterial));\r\n            });\r\n        } else {\r\n            this.materials.push(new SerializedMaterial(model.material as MeshLambertMaterial));\r\n        }\r\n    }\r\n}\r\n\r\nexport class MeshReconstructor {\r\n\r\n    static new(serialized: SerializedMesh) {\r\n        const model = new IFCModel();\r\n        model.modelID = serialized.modelID;\r\n        model.geometry = GeometryReconstructor.new(serialized.geometry);\r\n        MeshReconstructor.getMaterials(serialized, model);\r\n        return model;\r\n    }\r\n\r\n    private static getMaterials(serialized: SerializedMesh, model: IFCModel) {\r\n        model.material = [];\r\n        const mats = model.material as Material[];\r\n        serialized.materials.forEach(mat => {\r\n            mats.push(MaterialReconstructor.new(mat));\r\n        });\r\n    }\r\n}","import { IfcState } from '../../BaseDefinitions';\r\nimport { IFCUtils } from '../IFCUtils'\r\n\r\nexport class Data {\r\n    isLoaded = false;\r\n    workPlans: {[key: number]: any} = {}\r\n    workSchedules: {[key: number]: any} = {}\r\n    workCalendars: {[key: number]: any} = {}\r\n    workTimes: {[key: number]: any} = {}\r\n    recurrencePatterns: {[key: number]: any} = {}\r\n    timePeriods: {[key: number]: any} = {}\r\n    tasks: {[key: number]: any} = {}\r\n    taskTimes: {[key: number]: any} = {}\r\n    lagTimes: {[key: number]: any} = {}\r\n    sequences: {[key: number]: any} = {}\r\n    utils: any;\r\n\r\n    constructor(public state: IfcState) {\r\n        this.utils = new IFCUtils(this.state);\r\n\r\n    }\r\n\r\n    //TO DO: Refactor to retrieve top-level task from a workschedule entity, and then load tasks.\r\n    // Currently only tasks are retrieved. \r\n    async load(modelID: number){\r\n        await this.loadTasks(modelID)\r\n        await this.loadWorkSchedules(modelID)\r\n        await this.loadWorkCalendars(modelID)\r\n        await this.loadWorkTimes(modelID)\r\n        await this.loadTimePeriods(modelID)\r\n        this.isLoaded = true\r\n\r\n    }\r\n\r\n\r\n    async loadWorkSchedules(modelID: number){\r\n        let workSchedules = await this.utils.byType(modelID, \"IfcWorkSchedule\")\r\n        for (let i = 0; i < workSchedules.length; i++){\r\n            let workSchedule = workSchedules[i]\r\n            this.workSchedules[workSchedule.expressID] = {   \r\n                \"Id\": workSchedule.expressID,\r\n                \"Name\": workSchedule.Name.value,\r\n                \"Description\": ((workSchedule.Description) ? workSchedule.Description.value : \"\"),\r\n                \"Creators\": [], \r\n                \"CreationDate\": ((workSchedule.CreationDate) ? workSchedule.CreationDate.value : \"\"),\r\n                \"StartTime\": ((workSchedule.StartTime) ? workSchedule.StartTime.value : \"\"),\r\n                \"FinishTime\": ((workSchedule.FinishTime) ? workSchedule.FinishTime.value : \"\"),\r\n                \"TotalFloat\": ((workSchedule.TotalFloat) ? workSchedule.TotalFloat.value : \"\"),\r\n                \"RelatedObjects\": [],\r\n            }\r\n        }\r\n        this.loadWorkScheduleRelatedObjects(modelID)\r\n    }\r\n\r\n\r\n    async loadWorkScheduleRelatedObjects(modelID: number){\r\n        let relsControls = await this.utils.byType(modelID, \"IfcRelAssignsToControl\");\r\n        for (let i = 0; i < relsControls.length; i++){\r\n            let relControls = relsControls[i];\r\n            let relatingControl = await this.utils.byId(modelID, relControls.RelatingControl.value);\r\n            let relatedObjects = relControls.RelatedObjects;\r\n            if (this.utils.isA(relatingControl, \"IfcWorkSchedule\")) {\r\n                for (var objectIndex = 0; objectIndex < relatedObjects.length; objectIndex++) {\r\n                    this.workSchedules[relatingControl.expressID][\"RelatedObjects\"].push(relatedObjects[objectIndex].value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async loadTasks(modelID: number){\r\n        let tasks = await this.utils.byType(modelID, \"IfcTask\")\r\n        for (let i = 0; i < tasks.length; i++){\r\n            let task = tasks[i]\r\n            this.tasks[task.expressID] = {   \r\n                \"Id\": task.expressID,\r\n                \"Name\": ((task.Name) ? task.Name.value : \"\"),\r\n                \"PredefinedType\": ((task.PredefinedType) ? task.PredefinedType.value : \"\"),\r\n                \"TaskTime\": ((task.TaskTime) ? await this.utils.byId(modelID, task.TaskTime.value) : \"\"), \r\n                \"Identification\": ((task.Identification) ? task.Identification.value : \"\"),\r\n                \"IsMilestone\": ((task.IsMilestone) ? task.IsMilestone.value : \"\"),\r\n                \"IsPredecessorTo\": [],\r\n                \"IsSucessorFrom\": [],\r\n                \"Inputs\": [],\r\n                \"Resources\": [],\r\n                \"Outputs\": [],\r\n                \"Controls\": [],\r\n                \"Nests\": [],\r\n                \"IsNestedBy\": [],\r\n                \"OperatesOn\":[],\r\n                \"HasAssignmentsWorkCalendars\": [],\r\n            }\r\n        }\r\n        await this.loadTaskSequence(modelID)\r\n        await this.loadTaskOutputs(modelID)\r\n        await this.loadTaskNesting(modelID)\r\n        await this.loadTaskOperations(modelID)\r\n        await this.loadAssignementsWorkCalendar(modelID)\r\n    }\r\n\r\n    async loadTaskSequence(modelID: number){\r\n        let relsSequence = await this.utils.idsByType(modelID, \"IfcRelSequence\")\r\n        for (let i = 0; i < relsSequence.size(); i++){\r\n            let relSequenceId = relsSequence.get(i)\r\n            if(relSequenceId !==0){\r\n                let relSequence = await this.utils.byId(modelID, relSequenceId)\r\n                let related_process = relSequence.RelatedProcess.value;\r\n                let relatingProcess = relSequence.RelatingProcess.value;\r\n                this.tasks[relatingProcess][\"IsPredecessorTo\"].push(relSequence.expressID)\r\n                this.tasks[related_process][\"IsSucessorFrom\"].push(relSequence.expressID)\r\n            }\r\n        }\r\n            \r\n    }\r\n\r\n    async loadTaskOutputs(modelID: number){\r\n        let rels_assigns_to_product = await this.utils.byType(modelID, \"IfcRelAssignsToProduct\");\r\n        for (let i = 0; i < rels_assigns_to_product.length; i++){\r\n            let relAssignsToProduct = rels_assigns_to_product[i]\r\n            let relatedObject = await this.utils.byId(modelID, relAssignsToProduct.RelatedObjects[0].value); \r\n            if (this.utils.isA(relatedObject, \"IfcTask\")) {\r\n                let relatingProduct = await this.utils.byId(modelID, relAssignsToProduct.RelatingProduct.value);\r\n                this.tasks[relatedObject.expressID][\"Outputs\"].push(relatingProduct.expressID);\r\n            }\r\n        }\r\n    }\r\n\r\n    async loadTaskNesting(modelID: number){\r\n        let rels_nests = await this.utils.byType(modelID, \"IfcRelNests\");\r\n        for (let i = 0; i < rels_nests.length; i++){\r\n            let relNests = rels_nests[i];\r\n            let relating_object = await this.utils.byId(modelID, relNests.RelatingObject.value);\r\n            if (this.utils.isA(relating_object, \"IfcTask\")) {\r\n                let relatedObjects = relNests.RelatedObjects;\r\n                for (var object_index = 0; object_index < relatedObjects.length; object_index++) {\r\n                    this.tasks[relating_object.expressID][\"IsNestedBy\"].push(relatedObjects[object_index].value);\r\n                    this.tasks[relatedObjects[object_index].value][\"Nests\"].push(relating_object.expressID);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async loadTaskOperations(modelID: number){\r\n        let relsAssignsToProcess = await this.utils.byType(modelID, \"IfcRelAssignsToProcess\");\r\n        for (let i = 0; i < relsAssignsToProcess.length; i++){\r\n            let relAssignToProcess = relsAssignsToProcess[i];\r\n            let relatingProcess = await this.utils.byId(modelID, relAssignToProcess.RelatingProcess.value);\r\n            if (this.utils.isA(relatingProcess, \"IfcTask\")) {\r\n                let relatedObjects = relAssignToProcess.RelatedObjects;\r\n                for (var object_index = 0; object_index < relatedObjects.length; object_index++) {\r\n                    this.tasks[relatingProcess.expressID][\"OperatesOn\"].push(relatedObjects[object_index].value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async loadAssignementsWorkCalendar(modelID: number){\r\n        let relsAssignsToControl = await this.utils.byType(modelID, \"IfcRelAssignsToControl\");\r\n        for (let i = 0; i < relsAssignsToControl.length; i++){\r\n            let relAssignsToControl = relsAssignsToControl[i];\r\n            let relatingControl = await this.utils.byId(modelID, relAssignsToControl.RelatingControl.value);\r\n            if (this.utils.isA(relatingControl, \"IfcWorkCalendar\")) {\r\n                let relatedObjects = relAssignsToControl.RelatedObjects;\r\n                for (var object_index = 0; object_index < relatedObjects.length; object_index++) {\r\n                    this.tasks[relatedObjects[object_index].value][\"HasAssignmentsWorkCalendars\"].push(relatingControl.expressID);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    async loadWorkCalendars(modelID: number){\r\n        let workCalendars = await this.utils.byType(modelID, \"IfcWorkCalendar\")\r\n        for (let i = 0; i < workCalendars.length; i++){\r\n            let workCalendar = workCalendars[i]\r\n            let workCalenderData = {   \r\n                \"Id\": workCalendar.expressID,\r\n                \"Name\": ((workCalendar.Name) ? workCalendar.Name.value : \"\"),\r\n                \"Description\": ((workCalendar.Description) ? workCalendar.Description.value : \"\"),\r\n                \"WorkingTimes\": ((workCalendar.WorkingTimes) ? workCalendar.WorkingTimes : []),\r\n                \"ExceptionTimes\": ((workCalendar.ExceptionTimes) ? workCalendar.ExceptionTimes : []),\r\n            }\r\n            this.workCalendars[workCalendar.expressID] = workCalenderData\r\n        }\r\n        // this.loadworkCalendarRelatedObjects(modelID)\r\n    }    \r\n\r\n    async loadWorkTimes(modelID: number){\r\n        let workTimes = await this.utils.byType(modelID, \"IfcWorkTime\")\r\n        for (let i = 0; i < workTimes.length; i++){\r\n            let workTime = workTimes[i]\r\n            let workTimeData = {   \r\n                \"Name\": ((workTime.Name) ? workTime.Name.value : \"\"),\r\n                \"RecurrencePattern\": ((workTime.RecurrencePattern) ? await this.utils.byId(modelID, workTime.RecurrencePattern.value) : \"\"), \r\n                \"Start\": ((workTime.Start) ? new Date(workTime.Start.value) : \"\"),\r\n                \"Finish\": ((workTime.Finish) ? new Date(workTime.Finish.value) : \"\"),\r\n            }\r\n            this.workTimes[workTime.expressID] = workTimeData\r\n        }\r\n    }\r\n\r\n    async loadTimePeriods(modelID: number){\r\n        let timePeriods = await this.utils.byType(modelID, \"IfcTimePeriod\")\r\n        for (let i = 0; i < timePeriods.length; i++){\r\n            let timePeriod = timePeriods[i]\r\n            let workTimeData = {   \r\n                \"StartTime\": ((timePeriod.StartTime) ? new Date(timePeriod.StartTime.value) : \"\"),\r\n                \"EndTime\": ((timePeriod.EndTime) ? new Date(timePeriod.EndTime.value) : \"\"),\r\n            }\r\n            this.timePeriods[timePeriod.expressID] = workTimeData\r\n        }\r\n    }    \r\n}\r\n","import { PropertyAPI, PropertyManagerAPI } from '../../components/properties/BaseDefinitions';\r\nimport { IFCWorkerHandler } from '../IFCWorkerHandler';\r\nimport { WorkerActions, WorkerAPIs } from '../BaseDefinitions';\r\nimport { BufferGeometry } from 'three';\r\nimport { IdAttrName } from '../../BaseDefinitions';\r\n\r\nexport class PropertyHandler implements PropertyManagerAPI {\r\n\r\n    API = WorkerAPIs.properties;\r\n\r\n    constructor(private handler: IFCWorkerHandler) {\r\n    }\r\n\r\n    getExpressId(geometry: BufferGeometry, faceIndex: number) {\r\n        if (!geometry.index) throw new Error('Geometry does not have index information.');\r\n        const geoIndex = geometry.index.array;\r\n        return geometry.attributes[IdAttrName].getX(geoIndex[3 * faceIndex]);\r\n    }\r\n\r\n    getAllItemsOfType(modelID: number, type: number, verbose: boolean): Promise<any[]> {\r\n        return this.handler.request(this.API, WorkerActions.getAllItemsOfType, { modelID, type, verbose });\r\n    }\r\n\r\n    getItemProperties(modelID: number, elementID: number, recursive: boolean): Promise<any> {\r\n        return this.handler.request(this.API, WorkerActions.getItemProperties, { modelID, elementID, recursive });\r\n    }\r\n\r\n    getMaterialsProperties(modelID: number, elementID: number, recursive: boolean): Promise<any[]> {\r\n        return this.handler.request(this.API, WorkerActions.getMaterialsProperties, { modelID, elementID, recursive });\r\n    }\r\n\r\n    getPropertySets(modelID: number, elementID: number, recursive: boolean): Promise<any[]> {\r\n        return this.handler.request(this.API, WorkerActions.getPropertySets, { modelID, elementID, recursive });\r\n    }\r\n\r\n    getTypeProperties(modelID: number, elementID: number, recursive: boolean): Promise<any[]> {\r\n        return this.handler.request(this.API, WorkerActions.getTypeProperties, { modelID, elementID, recursive });\r\n    }\r\n\r\n    getSpatialStructure(modelID: number, includeProperties?: boolean): Promise<any> {\r\n        return this.handler.request(this.API, WorkerActions.getSpatialStructure, { modelID, includeProperties });\r\n    }\r\n}","import { WebIfcAPI } from '../../BaseDefinitions';\r\nimport {\r\n    SerializedFlatMesh,\r\n    SerializedIfcGeometry,\r\n    SerializedVector,\r\n    WorkerActions,\r\n    WorkerAPIs\r\n} from '../BaseDefinitions';\r\nimport { FlatMesh, IfcGeometry, LoaderError, LoaderSettings, RawLineData, Vector } from 'web-ifc';\r\nimport { IFCWorkerHandler } from '../IFCWorkerHandler';\r\nimport { Serializer } from '../serializer/Serializer';\r\n\r\nexport class WebIfcHandler implements WebIfcAPI {\r\n\r\n    wasmModule: any;\r\n    API = WorkerAPIs.webIfc;\r\n\r\n    constructor(private handler: IFCWorkerHandler, private serializer: Serializer) {\r\n    }\r\n\r\n    async Init(): Promise<void> {\r\n        this.wasmModule = true;\r\n        return this.handler.request(this.API, WorkerActions.Init);\r\n    }\r\n\r\n    async OpenModel(data: string | Uint8Array, settings?: LoaderSettings): Promise<number> {\r\n        return this.handler.request(this.API, WorkerActions.OpenModel, { data, settings });\r\n    }\r\n\r\n    async CreateModel(settings?: LoaderSettings): Promise<number> {\r\n        return this.handler.request(this.API, WorkerActions.CreateModel, { settings });\r\n    }\r\n\r\n    async ExportFileAsIFC(modelID: number): Promise<Uint8Array> {\r\n        return this.handler.request(this.API, WorkerActions.ExportFileAsIFC, { modelID });\r\n    }\r\n\r\n    async GetGeometry(modelID: number, geometryExpressID: number): Promise<IfcGeometry> {\r\n        this.handler.serializeHandlers[this.handler.requestID] = (geom: SerializedIfcGeometry) => {\r\n            return this.serializer.reconstructIfcGeometry(geom);\r\n        }\r\n        return this.handler.request(this.API, WorkerActions.GetGeometry, { modelID, geometryExpressID });\r\n    }\r\n\r\n    async GetLine(modelID: number, expressID: number, flatten?: boolean): Promise<any> {\r\n        return this.handler.request(this.API, WorkerActions.GetLine, { modelID, expressID, flatten });\r\n    }\r\n\r\n    async GetAndClearErrors(modelID: number): Promise<Vector<LoaderError>> {\r\n        this.handler.serializeHandlers[this.handler.requestID] = (vector: SerializedVector) => {\r\n            return this.serializer.reconstructVector(vector);\r\n        }\r\n        return this.handler.request(this.API, WorkerActions.GetAndClearErrors, { modelID });\r\n    }\r\n\r\n    async WriteLine(modelID: number, lineObject: any): Promise<void> {\r\n        return this.handler.request(this.API, WorkerActions.WriteLine, { modelID, lineObject });\r\n    }\r\n\r\n    async FlattenLine(modelID: number, line: any): Promise<void> {\r\n        return this.handler.request(this.API, WorkerActions.FlattenLine, { modelID, line });\r\n    }\r\n\r\n    async GetRawLineData(modelID: number, expressID: number): Promise<RawLineData> {\r\n        return this.handler.request(this.API, WorkerActions.GetRawLineData, { modelID, expressID });\r\n    }\r\n\r\n    async WriteRawLineData(modelID: number, data: RawLineData): Promise<any> {\r\n        return this.handler.request(this.API, WorkerActions.WriteRawLineData, { modelID, data });\r\n    }\r\n\r\n    async GetLineIDsWithType(modelID: number, type: number): Promise<Vector<number>> {\r\n        this.handler.serializeHandlers[this.handler.requestID] = (vector: SerializedVector) => {\r\n            return this.serializer.reconstructVector(vector);\r\n        }\r\n        return this.handler.request(this.API, WorkerActions.GetLineIDsWithType, { modelID, type });\r\n    }\r\n\r\n    async GetAllLines(modelID: number): Promise<Vector<number>> {\r\n        this.handler.serializeHandlers[this.handler.requestID] = (vector: SerializedVector) => {\r\n            return this.serializer.reconstructVector(vector);\r\n        }\r\n        return this.handler.request(this.API, WorkerActions.GetAllLines, { modelID });\r\n    }\r\n\r\n    async SetGeometryTransformation(modelID: number, transformationMatrix: number[]): Promise<void> {\r\n        return this.handler.request(this.API, WorkerActions.SetGeometryTransformation, {\r\n            modelID,\r\n            transformationMatrix\r\n        });\r\n    }\r\n\r\n    async GetCoordinationMatrix(modelID: number): Promise<number[]> {\r\n        return this.handler.request(this.API, WorkerActions.GetCoordinationMatrix, { modelID });\r\n    }\r\n\r\n    async GetVertexArray(ptr: number, size: number): Promise<Float32Array> {\r\n        return this.handler.request(this.API, WorkerActions.GetVertexArray, { ptr, size });\r\n    }\r\n\r\n    async GetIndexArray(ptr: number, size: number): Promise<Uint32Array> {\r\n        return this.handler.request(this.API, WorkerActions.GetIndexArray, { ptr, size });\r\n    }\r\n\r\n    async getSubArray(heap: any, startPtr: any, sizeBytes: any): Promise<any> {\r\n        return this.handler.request(this.API, WorkerActions.getSubArray, { heap, startPtr, sizeBytes });\r\n    }\r\n\r\n    async CloseModel(modelID: number): Promise<void> {\r\n        return this.handler.request(this.API, WorkerActions.CloseModel, { modelID });\r\n    }\r\n\r\n    async StreamAllMeshes(modelID: number, meshCallback: (mesh: FlatMesh) => void): Promise<void> {\r\n        this.handler.callbackHandlers[this.handler.requestID] = {\r\n            action: meshCallback,\r\n            serializer: this.serializer.reconstructFlatMesh\r\n        };\r\n        return this.handler.request(this.API, WorkerActions.StreamAllMeshes, { modelID });\r\n    }\r\n\r\n    async StreamAllMeshesWithTypes(modelID: number, types: number[], meshCallback: (mesh: FlatMesh) => void): Promise<void> {\r\n        this.handler.callbackHandlers[this.handler.requestID] = {\r\n            action: meshCallback,\r\n            serializer: this.serializer.reconstructFlatMesh\r\n        };\r\n        return this.handler.request(this.API, WorkerActions.StreamAllMeshesWithTypes, { modelID, types });\r\n    }\r\n\r\n    async IsModelOpen(modelID: number): Promise<boolean> {\r\n        return this.handler.request(this.API, WorkerActions.IsModelOpen, { modelID });\r\n    }\r\n\r\n    async LoadAllGeometry(modelID: number): Promise<Vector<FlatMesh>> {\r\n        this.handler.serializeHandlers[this.handler.requestID] = (vector: SerializedVector) => {\r\n            return this.serializer.reconstructFlatMeshVector(vector);\r\n        }\r\n        return this.handler.request(this.API, WorkerActions.LoadAllGeometry, { modelID });\r\n    }\r\n\r\n    async GetFlatMesh(modelID: number, expressID: number): Promise<FlatMesh> {\r\n        this.handler.serializeHandlers[this.handler.requestID] = (flatMesh: SerializedFlatMesh) => {\r\n            return this.serializer.reconstructFlatMesh(flatMesh);\r\n        }\r\n        return this.handler.request(this.API, WorkerActions.GetFlatMesh, { modelID, expressID });\r\n    }\r\n\r\n    async SetWasmPath(path: string): Promise<void> {\r\n        return this.handler.request(this.API, WorkerActions.SetWasmPath, { path });\r\n    }\r\n}","import { WorkerActions, WorkerAPIs } from '../BaseDefinitions';\r\nimport { IFCWorkerHandler } from '../IFCWorkerHandler';\r\nimport { IfcState } from '../../BaseDefinitions';\r\n\r\nexport class WorkerStateHandler {\r\n    API = WorkerAPIs.workerState;\r\n    state: IfcState;\r\n\r\n    constructor(private handler: IFCWorkerHandler) {\r\n        this.state = this.handler.state;\r\n    }\r\n\r\n    async updateStateUseJson() {\r\n        const useJson = this.state.useJSON;\r\n        return this.handler.request(this.API, WorkerActions.updateStateUseJson, { useJson });\r\n    }\r\n\r\n    async updateStateWebIfcSettings() {\r\n        const webIfcSettings = this.state.webIfcSettings;\r\n        return this.handler.request(this.API, WorkerActions.updateStateWebIfcSettings, { webIfcSettings });\r\n    }\r\n\r\n    async updateModelStateTypes (modelID: number, types: any) {\r\n        return this.handler.request(this.API, WorkerActions.updateModelStateTypes, { modelID, types });\r\n    }\r\n\r\n    async updateModelStateJsonData(modelID: number, jsonData: any) {\r\n        return this.handler.request(this.API, WorkerActions.updateModelStateJsonData, { modelID, jsonData });\r\n    }\r\n\r\n    async loadJsonDataFromWorker(modelID: number, path: string) {\r\n        return this.handler.request(this.API, WorkerActions.loadJsonDataFromWorker, { modelID, path });\r\n    }\r\n}","export enum DBOperation {\r\n    transferIfcModel,\r\n    transferIndividualItems\r\n}\r\n\r\nexport class IndexedDatabase {\r\n    async save(item: any, id: DBOperation) {\r\n        const open = IndexedDatabase.openOrCreateDB(id);\r\n        this.createSchema(open, id)\r\n        return new Promise<any>((resolve, reject) => {\r\n            open.onsuccess = () => this.saveItem(item, open, id, resolve);\r\n        });\r\n    }\r\n\r\n    async load(id: number) {\r\n        const open = IndexedDatabase.openOrCreateDB(id);\r\n        return new Promise<any>((resolve, reject) => {\r\n            open.onsuccess = () => this.loadItem(open, id, resolve);\r\n        })\r\n    }\r\n\r\n    private createSchema(open: IDBOpenDBRequest, id: DBOperation) {\r\n        open.onupgradeneeded = function () {\r\n            const db = open.result;\r\n            db.createObjectStore(id.toString(), {keyPath: \"id\"});\r\n        };\r\n    }\r\n\r\n    private saveItem(item: any, open: IDBOpenDBRequest, id: DBOperation, resolve: (value: any) => void ) {\r\n        const {db, tx, store} = IndexedDatabase.getDBItems(open, id);\r\n        item.id = id;\r\n        store.put(item);\r\n        tx.oncomplete = () => IndexedDatabase.closeDB(db, tx, resolve);\r\n    }\r\n\r\n    private loadItem(open: IDBOpenDBRequest, id: DBOperation, resolve: (value: any) => void ) {\r\n        const {db, tx, store} = IndexedDatabase.getDBItems(open, id);\r\n        const item = store.get(id);\r\n        const callback = () => {\r\n            delete item.result.id;\r\n            resolve(item.result)\r\n        };\r\n        tx.oncomplete = () => IndexedDatabase.closeDB(db, tx, callback);\r\n    }\r\n\r\n    private static getDBItems(open: IDBOpenDBRequest, id: DBOperation) {\r\n        const db = open.result;\r\n        const tx = db.transaction(id.toString(), \"readwrite\");\r\n        const store = tx.objectStore(id.toString());\r\n        return {db, tx, store};\r\n    }\r\n\r\n    private static openOrCreateDB(id: DBOperation) {\r\n        return indexedDB.open(id.toString(), 1);\r\n    }\r\n\r\n    private static closeDB(db: IDBDatabase, tx: IDBTransaction, resolve: (value: any) => void) {\r\n        db.close();\r\n        resolve(\"success\");\r\n    }\r\n}","import {OptionalCategories, ParserAPI, ParserProgress } from '../../components/IFCParser';\r\nimport { WorkerActions, WorkerAPIs } from '../BaseDefinitions';\r\nimport { IFCWorkerHandler } from '../IFCWorkerHandler';\r\nimport { IFCModel } from '../../components/IFCModel';\r\nimport { Serializer } from '../serializer/Serializer';\r\nimport { ParserResult } from '../workers/ParserWorker';\r\nimport { BvhManager } from '../../components/BvhManager';\r\nimport { DBOperation, IndexedDatabase } from '../../indexedDB/IndexedDatabase';\r\nimport { IFCOPENINGELEMENT, IFCSPACE } from \"web-ifc\";\r\n\r\nexport class ParserHandler implements ParserAPI {\r\n\r\n    optionalCategories: OptionalCategories = {\r\n        [IFCSPACE]: true,\r\n        [IFCOPENINGELEMENT]: false\r\n    };\r\n\r\n    API = WorkerAPIs.parser;\r\n\r\n    constructor(private handler: IFCWorkerHandler,\r\n                private serializer: Serializer,\r\n                private BVH: BvhManager,\r\n                private IDB: IndexedDatabase) {\r\n    }\r\n\r\n    async setupOptionalCategories(config: OptionalCategories) {\r\n        this.optionalCategories = config;\r\n        return this.handler.request(this.API, WorkerActions.setupOptionalCategories, {config});\r\n    }\r\n\r\n    async parse(buffer: any, coordinationMatrix?: number[]): Promise<IFCModel> {\r\n        this.handler.onprogressHandlers[this.handler.requestID] = (progress: ParserProgress) => {\r\n            if (this.handler.state.onProgress) this.handler.state.onProgress(progress);\r\n        };\r\n        this.handler.serializeHandlers[this.handler.requestID] = async (result: ParserResult) => {\r\n            this.updateState(result.modelID);\r\n            // await this.getItems(result.modelID);\r\n            return this.getModel();\r\n        };\r\n        return this.handler.request(this.API, WorkerActions.parse, {buffer, coordinationMatrix});\r\n    }\r\n\r\n    getAndClearErrors(_modelId: number): void {\r\n    }\r\n\r\n    private updateState(modelID: number) {\r\n        this.handler.state.models[modelID] = {\r\n            modelID: modelID,\r\n            mesh: {} as any,\r\n            types: {},\r\n            jsonData: {}\r\n        };\r\n    }\r\n\r\n    // private async getItems(modelID: number) {\r\n    //     const items = await this.IDB.load(DBOperation.transferIndividualItems);\r\n    //     this.handler.state.models[modelID].items = this.serializer.reconstructGeometriesByMaterials(items);\r\n    // }\r\n\r\n    private async getModel() {\r\n        const serializedModel = await this.IDB.load(DBOperation.transferIfcModel);\r\n        const model = this.serializer.reconstructIfcModel(serializedModel);\r\n        this.BVH.applyThreeMeshBVH(model.geometry);\r\n        this.handler.state.models[model.modelID].mesh = model;\r\n        return model;\r\n    }\r\n}","import { IfcEventData, WorkerActions, WorkerAPIs } from './BaseDefinitions';\r\nimport { Serializer } from './serializer/Serializer';\r\nimport { PropertyHandler } from './handlers/PropertyHandler';\r\nimport { WebIfcHandler } from './handlers/WebIfcHandler';\r\nimport { IfcState } from '../BaseDefinitions';\r\nimport { WorkerStateHandler } from './handlers/WorkerStateHandler';\r\nimport { ParserHandler } from './handlers/ParserHandler';\r\nimport { BvhManager } from '../components/BvhManager';\r\nimport { IndexedDatabase } from '../indexedDB/IndexedDatabase';\r\n\r\nexport class IFCWorkerHandler {\r\n\r\n    requestID = 0;\r\n    rejectHandlers: any = {};\r\n    resolveHandlers: any = {};\r\n    serializeHandlers: any = {};\r\n    callbackHandlers: { [id: number]: { action: any, serializer: any } } = {};\r\n    onprogressHandlers: any = {};\r\n\r\n    readonly IDB: IndexedDatabase;\r\n    readonly workerState: WorkerStateHandler;\r\n    readonly webIfc: WebIfcHandler;\r\n    readonly properties: PropertyHandler;\r\n    readonly parser: ParserHandler;\r\n\r\n    private ifcWorker: Worker;\r\n    private readonly serializer = new Serializer();\r\n    private readonly workerPath: string;\r\n\r\n    constructor(public state: IfcState, private BVH: BvhManager) {\r\n        this.IDB = new IndexedDatabase();\r\n        this.workerPath = this.state.worker.path;\r\n        this.ifcWorker = new Worker(this.workerPath);\r\n        this.ifcWorker.onmessage = (data: any) => this.handleResponse(data);\r\n        this.properties = new PropertyHandler(this);\r\n        this.parser = new ParserHandler(this, this.serializer, this.BVH, this.IDB);\r\n        this.webIfc = new WebIfcHandler(this, this.serializer);\r\n        this.workerState = new WorkerStateHandler(this);\r\n    }\r\n\r\n    request(worker: WorkerAPIs, action: WorkerActions, args?: any) {\r\n        const data: IfcEventData = {worker, action, args, id: this.requestID, result: undefined, onProgress: false};\r\n\r\n        return new Promise<any>((resolve, reject) => {\r\n            this.resolveHandlers[this.requestID] = resolve;\r\n            this.rejectHandlers[this.requestID] = reject;\r\n            this.requestID++;\r\n            this.ifcWorker.postMessage(data);\r\n        });\r\n    }\r\n\r\n    async terminate() {\r\n        await this.request(WorkerAPIs.workerState, WorkerActions.dispose);\r\n        await this.request(WorkerAPIs.webIfc, WorkerActions.DisposeWebIfc);\r\n        this.ifcWorker.terminate();\r\n    }\r\n\r\n    async Close(): Promise<void> {\r\n        await this.request(WorkerAPIs.webIfc, WorkerActions.Close);\r\n    }\r\n\r\n    private handleResponse(event: MessageEvent) {\r\n        const data = event.data as IfcEventData;\r\n        if (data.onProgress) {\r\n            this.resolveOnProgress(data);\r\n            return;\r\n        }\r\n        this.callHandlers(data);\r\n        delete this.resolveHandlers[data.id];\r\n        delete this.rejectHandlers[data.id];\r\n        delete this.onprogressHandlers[data.id];\r\n    }\r\n\r\n    private callHandlers(data: IfcEventData) {\r\n        try {\r\n            this.resolveSerializations(data);\r\n            this.resolveCallbacks(data);\r\n            this.resolveHandlers[data.id](data.result);\r\n        } catch (error) {\r\n            this.rejectHandlers[data.id](error);\r\n        }\r\n    }\r\n\r\n    private resolveOnProgress(data: IfcEventData) {\r\n        if (this.onprogressHandlers[data.id]) {\r\n            data.result = this.onprogressHandlers[data.id](data.result);\r\n        }\r\n    }\r\n\r\n    private resolveSerializations(data: IfcEventData) {\r\n        if (this.serializeHandlers[data.id]) {\r\n            data.result = this.serializeHandlers[data.id](data.result);\r\n            delete this.serializeHandlers[data.id];\r\n        }\r\n    }\r\n\r\n    private resolveCallbacks(data: IfcEventData) {\r\n        if (this.callbackHandlers[data.id]) {\r\n            let callbackParameter = data.result;\r\n            if (this.callbackHandlers[data.id].serializer) {\r\n                callbackParameter = this.callbackHandlers[data.id].serializer(data.result);\r\n            }\r\n            this.callbackHandlers[data.id].action(callbackParameter);\r\n        }\r\n    }\r\n}","import { IfcState } from '../BaseDefinitions';\r\nimport { Material } from 'three';\r\n\r\nexport class MemoryCleaner {\r\n    constructor(private state: IfcState) {\r\n    }\r\n\r\n    async dispose() {\r\n\r\n        Object.keys(this.state.models).forEach(modelID => {\r\n            const model = this.state.models[parseInt(modelID, 10)];\r\n            model.mesh.removeFromParent();\r\n            const geom = model.mesh.geometry as any;\r\n            if (geom.disposeBoundsTree) geom.disposeBoundsTree();\r\n            geom.dispose();\r\n            if (!Array.isArray(model.mesh.material)) model.mesh.material.dispose();\r\n            else model.mesh.material.forEach(mat => mat.dispose());\r\n            (model.mesh as any) = null;\r\n            (model.types as any) = null;\r\n            (model.jsonData as any) = null;\r\n        });\r\n\r\n        (this.state.api as any) = null;\r\n        (this.state.models as any) = null;\r\n    }\r\n}","import { IfcState } from '../BaseDefinitions';\r\nimport { IfcTypesMap } from './IfcTypesMap'\r\n\r\nexport class IFCUtils {\r\n    \r\n    map: {[key: string]: number} = {};\r\n\r\n    constructor(public state: IfcState) {}\r\n\r\n    getMapping(){\r\n        this.map = this.reverseElementMapping(IfcTypesMap)\r\n    }\r\n\r\n    releaseMapping(){\r\n        this.map = {}\r\n    }\r\n\r\n    reverseElementMapping(obj: {}) {\r\n        let reverseElement = {};\r\n        Object.keys(obj).forEach(key => {\r\n            reverseElement[obj[key as any as keyof typeof obj]] = key as any as keyof typeof obj;\r\n        })\r\n        return reverseElement;\r\n    }\r\n\r\n    isA(entity: any, entity_class: string){\r\n        var test = false;\r\n        if (entity_class){\r\n            if (IfcTypesMap[entity.type] === entity_class.toUpperCase()){\r\n                test = true;\r\n            }\r\n            return test\r\n        }\r\n        else {\r\n            return IfcTypesMap[entity.type]\r\n        }\r\n    }\r\n\r\n    async byId (modelID: number, id: number) {\r\n        return this.state.api.GetLine(modelID, id);\r\n    }\r\n\r\n    async idsByType(modelID: number, entity_class: string){\r\n        this.getMapping()\r\n        let entities_ids = await this.state.api.GetLineIDsWithType(modelID, Number(this.map[entity_class.toUpperCase()]) );\r\n        this.releaseMapping()\r\n        return entities_ids\r\n    }\r\n\r\n    async byType(modelID:number, entity_class:string){\r\n        let entities_ids = await this.idsByType(modelID, entity_class) \r\n        if (entities_ids !== null){\r\n            this.getMapping()\r\n            let items: number[] = [];\r\n            for (let i = 0; i < entities_ids.size(); i++){\r\n                let entity = await this.byId(modelID, entities_ids.get(i))\r\n                items.push(entity);\r\n            } \r\n            this.releaseMapping()\r\n            return items;\r\n        }\r\n    }\r\n}\r\n","import { BufferAttribute, BufferGeometry } from 'three';\r\nimport { mergeBufferGeometries } from 'three/examples/jsm/utils/BufferGeometryUtils';\r\nexport class GeometryUtils {\r\n    static merge(geometriesByMaterial, splitByBlocks = false) {\r\n        const geometriesByMat = [];\r\n        const sizes = [];\r\n        for (const geometries of geometriesByMaterial) {\r\n            const merged = this.mergeGeomsOfSameMaterial(geometries, splitByBlocks);\r\n            geometriesByMat.push(merged);\r\n            sizes.push(merged.index.count);\r\n        }\r\n        const geometry = mergeBufferGeometries(geometriesByMat);\r\n        this.setupMaterialGroups(sizes, geometry);\r\n        this.cleanUp(geometriesByMat);\r\n        return geometry;\r\n    }\r\n    // When Three.js exports to glTF, it generates one separate mesh per material. All meshes\r\n    // share the same BufferAttributes and have different indices\r\n    static async mergeGltfMeshes(meshes) {\r\n        const geometry = new BufferGeometry();\r\n        const attributes = meshes[0].geometry.attributes;\r\n        this.getMeshesAttributes(geometry, attributes);\r\n        this.getMeshesIndices(geometry, meshes);\r\n        return geometry;\r\n    }\r\n    static getMeshesAttributes(geometry, attributes) {\r\n        // Three.js GLTFExporter exports custom BufferAttributes as underscore lowercase\r\n        // eslint-disable-next-line no-underscore-dangle\r\n        geometry.setAttribute('blockID', attributes._blockid);\r\n        geometry.setAttribute('position', attributes.position);\r\n        geometry.setAttribute('normal', attributes.normal);\r\n        geometry.groups = [];\r\n    }\r\n    static getMeshesIndices(geometry, meshes) {\r\n        const counter = { index: 0, material: 0 };\r\n        const indices = [];\r\n        for (const mesh of meshes) {\r\n            const index = mesh.geometry.index;\r\n            this.getIndicesOfMesh(index, indices);\r\n            this.getMeshGroup(geometry, counter, index);\r\n            this.cleanUpMesh(mesh);\r\n        }\r\n        geometry.setIndex(indices);\r\n    }\r\n    static getMeshGroup(geometry, counter, index) {\r\n        geometry.groups.push({\r\n            start: counter.index,\r\n            count: index.count,\r\n            materialIndex: counter.material++\r\n        });\r\n        counter.index += index.count;\r\n    }\r\n    static cleanUpMesh(mesh) {\r\n        mesh.geometry.setIndex([]);\r\n        mesh.geometry.attributes = {};\r\n        mesh.geometry.dispose();\r\n    }\r\n    static getIndicesOfMesh(index, indices) {\r\n        for (const number of index.array) {\r\n            indices.push(number);\r\n        }\r\n    }\r\n    static cleanUp(geometries) {\r\n        geometries.forEach((geometry) => geometry.dispose());\r\n        geometries.length = 0;\r\n    }\r\n    static setupMaterialGroups(sizes, geometry) {\r\n        let vertexCounter = 0;\r\n        let counter = 0;\r\n        for (const size of sizes) {\r\n            const group = { start: vertexCounter, count: size, materialIndex: counter++ };\r\n            geometry.groups.push(group);\r\n            vertexCounter += size;\r\n        }\r\n    }\r\n    static mergeGeomsOfSameMaterial(geometries, splitByBlocks) {\r\n        this.checkAllGeometriesAreIndexed(geometries);\r\n        if (splitByBlocks) {\r\n            this.splitByBlocks(geometries);\r\n        }\r\n        const merged = mergeBufferGeometries(geometries);\r\n        this.cleanUp(geometries);\r\n        return merged;\r\n    }\r\n    static splitByBlocks(geometries) {\r\n        let i = 0;\r\n        for (const geometry of geometries) {\r\n            const size = geometry.attributes.position.count;\r\n            const array = new Uint8Array(size).fill(i++);\r\n            geometry.setAttribute('blockID', new BufferAttribute(array, 1));\r\n        }\r\n    }\r\n    static checkAllGeometriesAreIndexed(geometries) {\r\n        for (const geometry of geometries) {\r\n            if (!geometry.index) {\r\n                throw new Error('All geometries must be indexed!');\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=geometry-utils.js.map","class Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\t\tyield this.w;\n\n\t}\n\n}\n\nVector4.prototype.isVector4 = true;\n\nexport { Vector4 };\n","const _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toUpperCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidian modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t// Park-Miller algorithm\n\n\t_seed = _seed * 16807 % 2147483647;\n\n\treturn ( _seed - 1 ) / 2147483646;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\n\n\n\nexport {\n\tDEG2RAD,\n\tRAD2DEG,\n\tgenerateUUID,\n\tclamp,\n\teuclideanModulo,\n\tmapLinear,\n\tinverseLerp,\n\tlerp,\n\tdamp,\n\tpingpong,\n\tsmoothstep,\n\tsmootherstep,\n\trandInt,\n\trandFloat,\n\trandFloatSpread,\n\tseededRandom,\n\tdegToRad,\n\tradToDeg,\n\tisPowerOfTwo,\n\tceilPowerOfTwo,\n\tfloorPowerOfTwo,\n\tsetQuaternionFromProperEuler,\n};\n","import * as MathUtils from './MathUtils.js';\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\tconsole.warn( 'THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead.' );\n\t\treturn qm.slerpQuaternions( qa, qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\tthis.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// Derived from http://planning.cs.uiuc.edu/node198.html\n\t\t// Note, this source uses w, x, y, z ordering,\n\t\t// so we swap the order below.\n\n\t\tconst u1 = Math.random();\n\t\tconst sqrt1u1 = Math.sqrt( 1 - u1 );\n\t\tconst sqrtu1 = Math.sqrt( u1 );\n\n\t\tconst u2 = 2 * Math.PI * Math.random();\n\n\t\tconst u3 = 2 * Math.PI * Math.random();\n\n\t\treturn this.set(\n\t\t\tsqrt1u1 * Math.cos( u2 ),\n\t\t\tsqrtu1 * Math.sin( u3 ),\n\t\t\tsqrtu1 * Math.cos( u3 ),\n\t\t\tsqrt1u1 * Math.sin( u2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nQuaternion.prototype.isQuaternion = true;\n\nexport { Quaternion };\n","import * as MathUtils from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// Derived from https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst u = ( Math.random() - 0.5 ) * 2;\n\t\tconst t = Math.random() * Math.PI * 2;\n\t\tconst f = Math.sqrt( 1 - u ** 2 );\n\n\t\tthis.x = f * Math.cos( t );\n\t\tthis.y = f * Math.sin( t );\n\t\tthis.z = u;\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nVector3.prototype.isVector3 = true;\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nexport { Vector3 };\n","class Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\n\t}\n\n}\n\nVector2.prototype.isVector2 = true;\n\nexport { Vector2 };\n","import * as MathUtils from './MathUtils.js';\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style.toLowerCase() ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopyGammaToLinear( color, gammaFactor = 2.0 ) {\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToGamma( color, gammaFactor = 2.0 ) {\n\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t}\n\n\tconvertGammaToLinear( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToGamma( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex() {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t}\n\n\tgetHexString() {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle() {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\n\nColor.prototype.isColor = true;\nColor.prototype.r = 1;\nColor.prototype.g = 1;\nColor.prototype.b = 1;\n\nexport { Color };\n","export const REVISION = '135';\nexport const MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport const TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport const CullFaceNone = 0;\nexport const CullFaceBack = 1;\nexport const CullFaceFront = 2;\nexport const CullFaceFrontBack = 3;\nexport const BasicShadowMap = 0;\nexport const PCFShadowMap = 1;\nexport const PCFSoftShadowMap = 2;\nexport const VSMShadowMap = 3;\nexport const FrontSide = 0;\nexport const BackSide = 1;\nexport const DoubleSide = 2;\nexport const FlatShading = 1;\nexport const SmoothShading = 2;\nexport const NoBlending = 0;\nexport const NormalBlending = 1;\nexport const AdditiveBlending = 2;\nexport const SubtractiveBlending = 3;\nexport const MultiplyBlending = 4;\nexport const CustomBlending = 5;\nexport const AddEquation = 100;\nexport const SubtractEquation = 101;\nexport const ReverseSubtractEquation = 102;\nexport const MinEquation = 103;\nexport const MaxEquation = 104;\nexport const ZeroFactor = 200;\nexport const OneFactor = 201;\nexport const SrcColorFactor = 202;\nexport const OneMinusSrcColorFactor = 203;\nexport const SrcAlphaFactor = 204;\nexport const OneMinusSrcAlphaFactor = 205;\nexport const DstAlphaFactor = 206;\nexport const OneMinusDstAlphaFactor = 207;\nexport const DstColorFactor = 208;\nexport const OneMinusDstColorFactor = 209;\nexport const SrcAlphaSaturateFactor = 210;\nexport const NeverDepth = 0;\nexport const AlwaysDepth = 1;\nexport const LessDepth = 2;\nexport const LessEqualDepth = 3;\nexport const EqualDepth = 4;\nexport const GreaterEqualDepth = 5;\nexport const GreaterDepth = 6;\nexport const NotEqualDepth = 7;\nexport const MultiplyOperation = 0;\nexport const MixOperation = 1;\nexport const AddOperation = 2;\nexport const NoToneMapping = 0;\nexport const LinearToneMapping = 1;\nexport const ReinhardToneMapping = 2;\nexport const CineonToneMapping = 3;\nexport const ACESFilmicToneMapping = 4;\nexport const CustomToneMapping = 5;\n\nexport const UVMapping = 300;\nexport const CubeReflectionMapping = 301;\nexport const CubeRefractionMapping = 302;\nexport const EquirectangularReflectionMapping = 303;\nexport const EquirectangularRefractionMapping = 304;\nexport const CubeUVReflectionMapping = 306;\nexport const CubeUVRefractionMapping = 307;\nexport const RepeatWrapping = 1000;\nexport const ClampToEdgeWrapping = 1001;\nexport const MirroredRepeatWrapping = 1002;\nexport const NearestFilter = 1003;\nexport const NearestMipmapNearestFilter = 1004;\nexport const NearestMipMapNearestFilter = 1004;\nexport const NearestMipmapLinearFilter = 1005;\nexport const NearestMipMapLinearFilter = 1005;\nexport const LinearFilter = 1006;\nexport const LinearMipmapNearestFilter = 1007;\nexport const LinearMipMapNearestFilter = 1007;\nexport const LinearMipmapLinearFilter = 1008;\nexport const LinearMipMapLinearFilter = 1008;\nexport const UnsignedByteType = 1009;\nexport const ByteType = 1010;\nexport const ShortType = 1011;\nexport const UnsignedShortType = 1012;\nexport const IntType = 1013;\nexport const UnsignedIntType = 1014;\nexport const FloatType = 1015;\nexport const HalfFloatType = 1016;\nexport const UnsignedShort4444Type = 1017;\nexport const UnsignedShort5551Type = 1018;\nexport const UnsignedShort565Type = 1019;\nexport const UnsignedInt248Type = 1020;\nexport const AlphaFormat = 1021;\nexport const RGBFormat = 1022;\nexport const RGBAFormat = 1023;\nexport const LuminanceFormat = 1024;\nexport const LuminanceAlphaFormat = 1025;\nexport const RGBEFormat = RGBAFormat;\nexport const DepthFormat = 1026;\nexport const DepthStencilFormat = 1027;\nexport const RedFormat = 1028;\nexport const RedIntegerFormat = 1029;\nexport const RGFormat = 1030;\nexport const RGIntegerFormat = 1031;\nexport const RGBIntegerFormat = 1032;\nexport const RGBAIntegerFormat = 1033;\n\nexport const RGB_S3TC_DXT1_Format = 33776;\nexport const RGBA_S3TC_DXT1_Format = 33777;\nexport const RGBA_S3TC_DXT3_Format = 33778;\nexport const RGBA_S3TC_DXT5_Format = 33779;\nexport const RGB_PVRTC_4BPPV1_Format = 35840;\nexport const RGB_PVRTC_2BPPV1_Format = 35841;\nexport const RGBA_PVRTC_4BPPV1_Format = 35842;\nexport const RGBA_PVRTC_2BPPV1_Format = 35843;\nexport const RGB_ETC1_Format = 36196;\nexport const RGB_ETC2_Format = 37492;\nexport const RGBA_ETC2_EAC_Format = 37496;\nexport const RGBA_ASTC_4x4_Format = 37808;\nexport const RGBA_ASTC_5x4_Format = 37809;\nexport const RGBA_ASTC_5x5_Format = 37810;\nexport const RGBA_ASTC_6x5_Format = 37811;\nexport const RGBA_ASTC_6x6_Format = 37812;\nexport const RGBA_ASTC_8x5_Format = 37813;\nexport const RGBA_ASTC_8x6_Format = 37814;\nexport const RGBA_ASTC_8x8_Format = 37815;\nexport const RGBA_ASTC_10x5_Format = 37816;\nexport const RGBA_ASTC_10x6_Format = 37817;\nexport const RGBA_ASTC_10x8_Format = 37818;\nexport const RGBA_ASTC_10x10_Format = 37819;\nexport const RGBA_ASTC_12x10_Format = 37820;\nexport const RGBA_ASTC_12x12_Format = 37821;\nexport const RGBA_BPTC_Format = 36492;\nexport const SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nexport const SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nexport const SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nexport const SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nexport const SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nexport const SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nexport const SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nexport const SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nexport const SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nexport const SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nexport const SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nexport const SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nexport const SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nexport const SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nexport const LoopOnce = 2200;\nexport const LoopRepeat = 2201;\nexport const LoopPingPong = 2202;\nexport const InterpolateDiscrete = 2300;\nexport const InterpolateLinear = 2301;\nexport const InterpolateSmooth = 2302;\nexport const ZeroCurvatureEnding = 2400;\nexport const ZeroSlopeEnding = 2401;\nexport const WrapAroundEnding = 2402;\nexport const NormalAnimationBlendMode = 2500;\nexport const AdditiveAnimationBlendMode = 2501;\nexport const TrianglesDrawMode = 0;\nexport const TriangleStripDrawMode = 1;\nexport const TriangleFanDrawMode = 2;\nexport const LinearEncoding = 3000;\nexport const sRGBEncoding = 3001;\nexport const GammaEncoding = 3007;\nexport const RGBEEncoding = 3002;\nexport const RGBM7Encoding = 3004;\nexport const RGBM16Encoding = 3005;\nexport const RGBDEncoding = 3006;\nexport const BasicDepthPacking = 3200;\nexport const RGBADepthPacking = 3201;\nexport const TangentSpaceNormalMap = 0;\nexport const ObjectSpaceNormalMap = 1;\n\nexport const ZeroStencilOp = 0;\nexport const KeepStencilOp = 7680;\nexport const ReplaceStencilOp = 7681;\nexport const IncrementStencilOp = 7682;\nexport const DecrementStencilOp = 7683;\nexport const IncrementWrapStencilOp = 34055;\nexport const DecrementWrapStencilOp = 34056;\nexport const InvertStencilOp = 5386;\n\nexport const NeverStencilFunc = 512;\nexport const LessStencilFunc = 513;\nexport const EqualStencilFunc = 514;\nexport const LessEqualStencilFunc = 515;\nexport const GreaterStencilFunc = 516;\nexport const NotEqualStencilFunc = 517;\nexport const GreaterEqualStencilFunc = 518;\nexport const AlwaysStencilFunc = 519;\n\nexport const StaticDrawUsage = 35044;\nexport const DynamicDrawUsage = 35048;\nexport const StreamDrawUsage = 35040;\nexport const StaticReadUsage = 35045;\nexport const DynamicReadUsage = 35049;\nexport const StreamReadUsage = 35041;\nexport const StaticCopyUsage = 35046;\nexport const DynamicCopyUsage = 35050;\nexport const StreamCopyUsage = 35042;\n\nexport const GLSL1 = '100';\nexport const GLSL3 = '300 es';\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { StaticDrawUsage } from '../constants.js';\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector2();\n\nclass BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.name = '';\n\n\t\tthis.array = array;\n\t\tthis.itemSize = itemSize;\n\t\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\t\tthis.normalized = normalized === true;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyArray( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t}\n\n\tcopyColorsArray( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyVector2sArray( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyVector3sArray( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyVector4sArray( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2.fromBufferAttribute( this, i );\n\t\t\t\t_vector2.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2.x, _vector2.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( this, i );\n\t\t\t\t_vector.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( this.usage !== StaticDrawUsage ) data.usage = this.usage;\n\t\tif ( this.updateRange.offset !== 0 || this.updateRange.count !== - 1 ) data.updateRange = this.updateRange;\n\n\t\treturn data;\n\n\t}\n\n}\n\nBufferAttribute.prototype.isBufferAttribute = true;\n\n//\n\nclass Int8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8ClampedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8ClampedArray( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nFloat16BufferAttribute.prototype.isFloat16BufferAttribute = true;\n\nclass Float32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float64BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float64Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tFloat16BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","import {\n\tBufferAttribute,\n\tClampToEdgeWrapping,\n\tDoubleSide,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tMathUtils,\n\tMatrix4,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tPropertyBinding,\n\tRGBAFormat,\n\tRGBFormat,\n\tRepeatWrapping,\n\tScene,\n\tVector3\n} from 'three';\n\n\nclass GLTFExporter {\n\n\tconstructor() {\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFLightExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsUnlitExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsPBRSpecularGlossiness( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( writer );\n\n\t\t} );\n\n\t\tthis.register( function ( writer ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( writer );\n\n\t\t} );\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Function} onError  Callback on errors\n\t * @param  {Object} options options\n\t */\n\tparse( input, onDone, onError, options ) {\n\n\t\tif ( typeof onError === 'object' ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: parse() expects options as the fourth argument now.' );\n\n\t\t\toptions = onError;\n\n\t\t}\n\n\t\tconst writer = new GLTFWriter();\n\t\tconst plugins = [];\n\n\t\tfor ( let i = 0, il = this.pluginCallbacks.length; i < il; i ++ ) {\n\n\t\t\tplugins.push( this.pluginCallbacks[ i ]( writer ) );\n\n\t\t}\n\n\t\twriter.setPlugins( plugins );\n\t\twriter.write( input, onDone, options ).catch( onError );\n\n\t}\n\n\tparseAsync( input, options ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( input, resolve, reject, options );\n\n\t\t} );\n\n\t}\n\n}\n\n//------------------------------------------------------------------------------\n// Constants\n//------------------------------------------------------------------------------\n\nconst WEBGL_CONSTANTS = {\n\tPOINTS: 0x0000,\n\tLINES: 0x0001,\n\tLINE_LOOP: 0x0002,\n\tLINE_STRIP: 0x0003,\n\tTRIANGLES: 0x0004,\n\tTRIANGLE_STRIP: 0x0005,\n\tTRIANGLE_FAN: 0x0006,\n\n\tUNSIGNED_BYTE: 0x1401,\n\tUNSIGNED_SHORT: 0x1403,\n\tFLOAT: 0x1406,\n\tUNSIGNED_INT: 0x1405,\n\tARRAY_BUFFER: 0x8892,\n\tELEMENT_ARRAY_BUFFER: 0x8893,\n\n\tNEAREST: 0x2600,\n\tLINEAR: 0x2601,\n\tNEAREST_MIPMAP_NEAREST: 0x2700,\n\tLINEAR_MIPMAP_NEAREST: 0x2701,\n\tNEAREST_MIPMAP_LINEAR: 0x2702,\n\tLINEAR_MIPMAP_LINEAR: 0x2703,\n\n\tCLAMP_TO_EDGE: 33071,\n\tMIRRORED_REPEAT: 33648,\n\tREPEAT: 10497\n};\n\nconst THREE_TO_WEBGL = {};\n\nTHREE_TO_WEBGL[ NearestFilter ] = WEBGL_CONSTANTS.NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapNearestFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapLinearFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;\nTHREE_TO_WEBGL[ LinearFilter ] = WEBGL_CONSTANTS.LINEAR;\nTHREE_TO_WEBGL[ LinearMipmapNearestFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ LinearMipmapLinearFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;\n\nTHREE_TO_WEBGL[ ClampToEdgeWrapping ] = WEBGL_CONSTANTS.CLAMP_TO_EDGE;\nTHREE_TO_WEBGL[ RepeatWrapping ] = WEBGL_CONSTANTS.REPEAT;\nTHREE_TO_WEBGL[ MirroredRepeatWrapping ] = WEBGL_CONSTANTS.MIRRORED_REPEAT;\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\tposition: 'translation',\n\tquaternion: 'rotation',\n\tmorphTargetInfluences: 'weights'\n};\n\n// GLB constants\n// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\nconst GLB_HEADER_BYTES = 12;\nconst GLB_HEADER_MAGIC = 0x46546C67;\nconst GLB_VERSION = 2;\n\nconst GLB_CHUNK_PREFIX_BYTES = 8;\nconst GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\nconst GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n//------------------------------------------------------------------------------\n// Utility functions\n//------------------------------------------------------------------------------\n\n/**\n * Compare two arrays\n * @param  {Array} array1 Array 1 to compare\n * @param  {Array} array2 Array 2 to compare\n * @return {Boolean}        Returns true if both arrays are equal\n */\nfunction equalArray( array1, array2 ) {\n\n\treturn ( array1.length === array2.length ) && array1.every( function ( element, index ) {\n\n\t\treturn element === array2[ index ];\n\n\t} );\n\n}\n\n/**\n * Converts a string to an ArrayBuffer.\n * @param  {string} text\n * @return {ArrayBuffer}\n */\nfunction stringToArrayBuffer( text ) {\n\n\tif ( window.TextEncoder !== undefined ) {\n\n\t\treturn new TextEncoder().encode( text ).buffer;\n\n\t}\n\n\tconst array = new Uint8Array( new ArrayBuffer( text.length ) );\n\n\tfor ( let i = 0, il = text.length; i < il; i ++ ) {\n\n\t\tconst value = text.charCodeAt( i );\n\n\t\t// Replacing multi-byte character with space(0x20).\n\t\tarray[ i ] = value > 0xFF ? 0x20 : value;\n\n\t}\n\n\treturn array.buffer;\n\n}\n\n/**\n * Is identity matrix\n *\n * @param {Matrix4} matrix\n * @returns {Boolean} Returns true, if parameter is identity matrix\n */\nfunction isIdentityMatrix( matrix ) {\n\n\treturn equalArray( matrix.elements, [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] );\n\n}\n\n/**\n * Get the min and max vectors from the given attribute\n * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n * @param  {Integer} start\n * @param  {Integer} count\n * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n */\nfunction getMinMax( attribute, start, count ) {\n\n\tconst output = {\n\n\t\tmin: new Array( attribute.itemSize ).fill( Number.POSITIVE_INFINITY ),\n\t\tmax: new Array( attribute.itemSize ).fill( Number.NEGATIVE_INFINITY )\n\n\t};\n\n\tfor ( let i = start; i < start + count; i ++ ) {\n\n\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\tlet value;\n\n\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t} else {\n\n\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t}\n\n\t\t\toutput.min[ a ] = Math.min( output.min[ a ], value );\n\t\t\toutput.max[ a ] = Math.max( output.max[ a ], value );\n\n\t\t}\n\n\t}\n\n\treturn output;\n\n}\n\n/**\n * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n *\n * @param {Integer} bufferSize The size the original buffer.\n * @returns {Integer} new buffer size with required padding.\n *\n */\nfunction getPaddedBufferSize( bufferSize ) {\n\n\treturn Math.ceil( bufferSize / 4 ) * 4;\n\n}\n\n/**\n * Returns a buffer aligned to 4-byte boundary.\n *\n * @param {ArrayBuffer} arrayBuffer Buffer to pad\n * @param {Integer} paddingByte (Optional)\n * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n */\nfunction getPaddedArrayBuffer( arrayBuffer, paddingByte = 0 ) {\n\n\tconst paddedLength = getPaddedBufferSize( arrayBuffer.byteLength );\n\n\tif ( paddedLength !== arrayBuffer.byteLength ) {\n\n\t\tconst array = new Uint8Array( paddedLength );\n\t\tarray.set( new Uint8Array( arrayBuffer ) );\n\n\t\tif ( paddingByte !== 0 ) {\n\n\t\t\tfor ( let i = arrayBuffer.byteLength; i < paddedLength; i ++ ) {\n\n\t\t\t\tarray[ i ] = paddingByte;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn array.buffer;\n\n\t}\n\n\treturn arrayBuffer;\n\n}\n\nlet cachedCanvas = null;\n\n/**\n * Writer\n */\nclass GLTFWriter {\n\n\tconstructor() {\n\n\t\tthis.plugins = [];\n\n\t\tthis.options = {};\n\t\tthis.pending = [];\n\t\tthis.buffers = [];\n\n\t\tthis.byteOffset = 0;\n\t\tthis.buffers = [];\n\t\tthis.nodeMap = new Map();\n\t\tthis.skins = [];\n\t\tthis.extensionsUsed = {};\n\n\t\tthis.uids = new Map();\n\t\tthis.uid = 0;\n\n\t\tthis.json = {\n\t\t\tasset: {\n\t\t\t\tversion: '2.0',\n\t\t\t\tgenerator: 'THREE.GLTFExporter'\n\t\t\t}\n\t\t};\n\n\t\tthis.cache = {\n\t\t\tmeshes: new Map(),\n\t\t\tattributes: new Map(),\n\t\t\tattributesNormalized: new Map(),\n\t\t\tmaterials: new Map(),\n\t\t\ttextures: new Map(),\n\t\t\timages: new Map()\n\t\t};\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Object} options options\n\t */\n\tasync write( input, onDone, options ) {\n\n\t\tthis.options = Object.assign( {}, {\n\t\t\t// default options\n\t\t\tbinary: false,\n\t\t\ttrs: false,\n\t\t\tonlyVisible: true,\n\t\t\ttruncateDrawRange: true,\n\t\t\tembedImages: true,\n\t\t\tmaxTextureSize: Infinity,\n\t\t\tanimations: [],\n\t\t\tincludeCustomExtensions: false\n\t\t}, options );\n\n\t\tif ( this.options.animations.length > 0 ) {\n\n\t\t\t// Only TRS properties, and not matrices, may be targeted by animation.\n\t\t\tthis.options.trs = true;\n\n\t\t}\n\n\t\tthis.processInput( input );\n\n\t\tawait Promise.all( this.pending );\n\n\t\tconst writer = this;\n\t\tconst buffers = writer.buffers;\n\t\tconst json = writer.json;\n\t\toptions = writer.options;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\t// Merge buffers.\n\t\tconst blob = new Blob( buffers, { type: 'application/octet-stream' } );\n\n\t\t// Declare extensions.\n\t\tconst extensionsUsedList = Object.keys( extensionsUsed );\n\n\t\tif ( extensionsUsedList.length > 0 ) json.extensionsUsed = extensionsUsedList;\n\n\t\t// Update bytelength of the single buffer.\n\t\tif ( json.buffers && json.buffers.length > 0 ) json.buffers[ 0 ].byteLength = blob.size;\n\n\t\tif ( options.binary === true ) {\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\tconst reader = new window.FileReader();\n\t\t\treader.readAsArrayBuffer( blob );\n\t\t\treader.onloadend = function () {\n\n\t\t\t\t// Binary chunk.\n\t\t\t\tconst binaryChunk = getPaddedArrayBuffer( reader.result );\n\t\t\t\tconst binaryChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\tbinaryChunkPrefix.setUint32( 0, binaryChunk.byteLength, true );\n\t\t\t\tbinaryChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_BIN, true );\n\n\t\t\t\t// JSON chunk.\n\t\t\t\tconst jsonChunk = getPaddedArrayBuffer( stringToArrayBuffer( JSON.stringify( json ) ), 0x20 );\n\t\t\t\tconst jsonChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\tjsonChunkPrefix.setUint32( 0, jsonChunk.byteLength, true );\n\t\t\t\tjsonChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_JSON, true );\n\n\t\t\t\t// GLB header.\n\t\t\t\tconst header = new ArrayBuffer( GLB_HEADER_BYTES );\n\t\t\t\tconst headerView = new DataView( header );\n\t\t\t\theaderView.setUint32( 0, GLB_HEADER_MAGIC, true );\n\t\t\t\theaderView.setUint32( 4, GLB_VERSION, true );\n\t\t\t\tconst totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\theaderView.setUint32( 8, totalByteLength, true );\n\n\t\t\t\tconst glbBlob = new Blob( [\n\t\t\t\t\theader,\n\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\tjsonChunk,\n\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\tbinaryChunk\n\t\t\t\t], { type: 'application/octet-stream' } );\n\n\t\t\t\tconst glbReader = new window.FileReader();\n\t\t\t\tglbReader.readAsArrayBuffer( glbBlob );\n\t\t\t\tglbReader.onloadend = function () {\n\n\t\t\t\t\tonDone( glbReader.result );\n\n\t\t\t\t};\n\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tif ( json.buffers && json.buffers.length > 0 ) {\n\n\t\t\t\tconst reader = new window.FileReader();\n\t\t\t\treader.readAsDataURL( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\tconst base64data = reader.result;\n\t\t\t\t\tjson.buffers[ 0 ].uri = base64data;\n\t\t\t\t\tonDone( json );\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tonDone( json );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\t/**\n\t * Serializes a userData.\n\t *\n\t * @param {THREE.Object3D|THREE.Material} object\n\t * @param {Object} objectDef\n\t */\n\tserializeUserData( object, objectDef ) {\n\n\t\tif ( Object.keys( object.userData ).length === 0 ) return;\n\n\t\tconst options = this.options;\n\t\tconst extensionsUsed = this.extensionsUsed;\n\n\t\ttry {\n\n\t\t\tconst json = JSON.parse( JSON.stringify( object.userData ) );\n\n\t\t\tif ( options.includeCustomExtensions && json.gltfExtensions ) {\n\n\t\t\t\tif ( objectDef.extensions === undefined ) objectDef.extensions = {};\n\n\t\t\t\tfor ( const extensionName in json.gltfExtensions ) {\n\n\t\t\t\t\tobjectDef.extensions[ extensionName ] = json.gltfExtensions[ extensionName ];\n\t\t\t\t\textensionsUsed[ extensionName ] = true;\n\n\t\t\t\t}\n\n\t\t\t\tdelete json.gltfExtensions;\n\n\t\t\t}\n\n\t\t\tif ( Object.keys( json ).length > 0 ) objectDef.extras = json;\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' +\n\t\t\t\t'won\\'t be serialized because of JSON.stringify error - ' + error.message );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Assign and return a temporal unique id for an object\n\t * especially which doesn't have .uuid\n\t * @param  {Object} object\n\t * @return {Integer}\n\t */\n\tgetUID( object ) {\n\n\t\tif ( ! this.uids.has( object ) ) this.uids.set( object, this.uid ++ );\n\n\t\treturn this.uids.get( object );\n\n\t}\n\n\t/**\n\t * Checks if normal attribute values are normalized.\n\t *\n\t * @param {BufferAttribute} normal\n\t * @returns {Boolean}\n\t */\n\tisNormalizedNormalAttribute( normal ) {\n\n\t\tconst cache = this.cache;\n\n\t\tif ( cache.attributesNormalized.has( normal ) ) return false;\n\n\t\tconst v = new Vector3();\n\n\t\tfor ( let i = 0, il = normal.count; i < il; i ++ ) {\n\n\t\t\t// 0.0005 is from glTF-validator\n\t\t\tif ( Math.abs( v.fromBufferAttribute( normal, i ).length() - 1.0 ) > 0.0005 ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Creates normalized normal buffer attribute.\n\t *\n\t * @param {BufferAttribute} normal\n\t * @returns {BufferAttribute}\n\t *\n\t */\n\tcreateNormalizedNormalAttribute( normal ) {\n\n\t\tconst cache = this.cache;\n\n\t\tif ( cache.attributesNormalized.has( normal ) )\treturn cache.attributesNormalized.get( normal );\n\n\t\tconst attribute = normal.clone();\n\t\tconst v = new Vector3();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\tv.fromBufferAttribute( attribute, i );\n\n\t\t\tif ( v.x === 0 && v.y === 0 && v.z === 0 ) {\n\n\t\t\t\t// if values can't be normalized set (1, 0, 0)\n\t\t\t\tv.setX( 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\tv.normalize();\n\n\t\t\t}\n\n\t\t\tattribute.setXYZ( i, v.x, v.y, v.z );\n\n\t\t}\n\n\t\tcache.attributesNormalized.set( normal, attribute );\n\n\t\treturn attribute;\n\n\t}\n\n\t/**\n\t * Applies a texture transform, if present, to the map definition. Requires\n\t * the KHR_texture_transform extension.\n\t *\n\t * @param {Object} mapDef\n\t * @param {THREE.Texture} texture\n\t */\n\tapplyTextureTransform( mapDef, texture ) {\n\n\t\tlet didTransform = false;\n\t\tconst transformDef = {};\n\n\t\tif ( texture.offset.x !== 0 || texture.offset.y !== 0 ) {\n\n\t\t\ttransformDef.offset = texture.offset.toArray();\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( texture.rotation !== 0 ) {\n\n\t\t\ttransformDef.rotation = texture.rotation;\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( texture.repeat.x !== 1 || texture.repeat.y !== 1 ) {\n\n\t\t\ttransformDef.scale = texture.repeat.toArray();\n\t\t\tdidTransform = true;\n\n\t\t}\n\n\t\tif ( didTransform ) {\n\n\t\t\tmapDef.extensions = mapDef.extensions || {};\n\t\t\tmapDef.extensions[ 'KHR_texture_transform' ] = transformDef;\n\t\t\tthis.extensionsUsed[ 'KHR_texture_transform' ] = true;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Process a buffer to append to the default one.\n\t * @param  {ArrayBuffer} buffer\n\t * @return {Integer}\n\t */\n\tprocessBuffer( buffer ) {\n\n\t\tconst json = this.json;\n\t\tconst buffers = this.buffers;\n\n\t\tif ( ! json.buffers ) json.buffers = [ { byteLength: 0 } ];\n\n\t\t// All buffers are merged before export.\n\t\tbuffers.push( buffer );\n\n\t\treturn 0;\n\n\t}\n\n\t/**\n\t * Process and generate a BufferView\n\t * @param  {BufferAttribute} attribute\n\t * @param  {number} componentType\n\t * @param  {number} start\n\t * @param  {number} count\n\t * @param  {number} target (Optional) Target usage of the BufferView\n\t * @return {Object}\n\t */\n\tprocessBufferView( attribute, componentType, start, count, target ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\t// Create a new dataview and dump the attribute's array into it\n\n\t\tlet componentSize;\n\n\t\tif ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\tcomponentSize = 1;\n\n\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\tcomponentSize = 2;\n\n\t\t} else {\n\n\t\t\tcomponentSize = 4;\n\n\t\t}\n\n\t\tconst byteLength = getPaddedBufferSize( count * attribute.itemSize * componentSize );\n\t\tconst dataView = new DataView( new ArrayBuffer( byteLength ) );\n\t\tlet offset = 0;\n\n\t\tfor ( let i = start; i < start + count; i ++ ) {\n\n\t\t\tfor ( let a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\tlet value;\n\n\t\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( componentType === WEBGL_CONSTANTS.FLOAT ) {\n\n\t\t\t\t\tdataView.setFloat32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_INT ) {\n\n\t\t\t\t\tdataView.setUint32( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\t\tdataView.setUint16( offset, value, true );\n\n\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\t\tdataView.setUint8( offset, value );\n\n\t\t\t\t}\n\n\t\t\t\toffset += componentSize;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bufferViewDef = {\n\n\t\t\tbuffer: this.processBuffer( dataView.buffer ),\n\t\t\tbyteOffset: this.byteOffset,\n\t\t\tbyteLength: byteLength\n\n\t\t};\n\n\t\tif ( target !== undefined ) bufferViewDef.target = target;\n\n\t\tif ( target === WEBGL_CONSTANTS.ARRAY_BUFFER ) {\n\n\t\t\t// Only define byteStride for vertex attributes.\n\t\t\tbufferViewDef.byteStride = attribute.itemSize * componentSize;\n\n\t\t}\n\n\t\tthis.byteOffset += byteLength;\n\n\t\tjson.bufferViews.push( bufferViewDef );\n\n\t\t// @TODO Merge bufferViews where possible.\n\t\tconst output = {\n\n\t\t\tid: json.bufferViews.length - 1,\n\t\t\tbyteLength: 0\n\n\t\t};\n\n\t\treturn output;\n\n\t}\n\n\t/**\n\t * Process and generate a BufferView from an image Blob.\n\t * @param {Blob} blob\n\t * @return {Promise<Integer>}\n\t */\n\tprocessBufferViewImage( blob ) {\n\n\t\tconst writer = this;\n\t\tconst json = writer.json;\n\n\t\tif ( ! json.bufferViews ) json.bufferViews = [];\n\n\t\treturn new Promise( function ( resolve ) {\n\n\t\t\tconst reader = new window.FileReader();\n\t\t\treader.readAsArrayBuffer( blob );\n\t\t\treader.onloadend = function () {\n\n\t\t\t\tconst buffer = getPaddedArrayBuffer( reader.result );\n\n\t\t\t\tconst bufferViewDef = {\n\t\t\t\t\tbuffer: writer.processBuffer( buffer ),\n\t\t\t\t\tbyteOffset: writer.byteOffset,\n\t\t\t\t\tbyteLength: buffer.byteLength\n\t\t\t\t};\n\n\t\t\t\twriter.byteOffset += buffer.byteLength;\n\t\t\t\tresolve( json.bufferViews.push( bufferViewDef ) - 1 );\n\n\t\t\t};\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Process attribute to generate an accessor\n\t * @param  {BufferAttribute} attribute Attribute to process\n\t * @param  {THREE.BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n\t * @param  {Integer} start (Optional)\n\t * @param  {Integer} count (Optional)\n\t * @return {Integer|null} Index of the processed accessor on the \"accessors\" array\n\t */\n\tprocessAccessor( attribute, geometry, start, count ) {\n\n\t\tconst options = this.options;\n\t\tconst json = this.json;\n\n\t\tconst types = {\n\n\t\t\t1: 'SCALAR',\n\t\t\t2: 'VEC2',\n\t\t\t3: 'VEC3',\n\t\t\t4: 'VEC4',\n\t\t\t16: 'MAT4'\n\n\t\t};\n\n\t\tlet componentType;\n\n\t\t// Detect the component type of the attribute array (float, uint or ushort)\n\t\tif ( attribute.array.constructor === Float32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.FLOAT;\n\n\t\t} else if ( attribute.array.constructor === Uint32Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_INT;\n\n\t\t} else if ( attribute.array.constructor === Uint16Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_SHORT;\n\n\t\t} else if ( attribute.array.constructor === Uint8Array ) {\n\n\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_BYTE;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.GLTFExporter: Unsupported bufferAttribute component type.' );\n\n\t\t}\n\n\t\tif ( start === undefined ) start = 0;\n\t\tif ( count === undefined ) count = attribute.count;\n\n\t\t// @TODO Indexed buffer geometry with drawRange not supported yet\n\t\tif ( options.truncateDrawRange && geometry !== undefined && geometry.index === null ) {\n\n\t\t\tconst end = start + count;\n\t\t\tconst end2 = geometry.drawRange.count === Infinity\n\t\t\t\t? attribute.count\n\t\t\t\t: geometry.drawRange.start + geometry.drawRange.count;\n\n\t\t\tstart = Math.max( start, geometry.drawRange.start );\n\t\t\tcount = Math.min( end, end2 ) - start;\n\n\t\t\tif ( count < 0 ) count = 0;\n\n\t\t}\n\n\t\t// Skip creating an accessor if the attribute doesn't have data to export\n\t\tif ( count === 0 ) return null;\n\n\t\tconst minMax = getMinMax( attribute, start, count );\n\t\tlet bufferViewTarget;\n\n\t\t// If geometry isn't provided, don't infer the target usage of the bufferView. For\n\t\t// animation samplers, target must not be set.\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tbufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS.ARRAY_BUFFER;\n\n\t\t}\n\n\t\tconst bufferView = this.processBufferView( attribute, componentType, start, count, bufferViewTarget );\n\n\t\tconst accessorDef = {\n\n\t\t\tbufferView: bufferView.id,\n\t\t\tbyteOffset: bufferView.byteOffset,\n\t\t\tcomponentType: componentType,\n\t\t\tcount: count,\n\t\t\tmax: minMax.max,\n\t\t\tmin: minMax.min,\n\t\t\ttype: types[ attribute.itemSize ]\n\n\t\t};\n\n\t\tif ( attribute.normalized === true ) accessorDef.normalized = true;\n\t\tif ( ! json.accessors ) json.accessors = [];\n\n\t\treturn json.accessors.push( accessorDef ) - 1;\n\n\t}\n\n\t/**\n\t * Process image\n\t * @param  {Image} image to process\n\t * @param  {Integer} format of the image (e.g. RGBFormat, RGBAFormat etc)\n\t * @param  {Boolean} flipY before writing out the image\n\t * @return {Integer}     Index of the processed texture in the \"images\" array\n\t */\n\tprocessImage( image, format, flipY ) {\n\n\t\tconst writer = this;\n\t\tconst cache = writer.cache;\n\t\tconst json = writer.json;\n\t\tconst options = writer.options;\n\t\tconst pending = writer.pending;\n\n\t\tif ( ! cache.images.has( image ) ) cache.images.set( image, {} );\n\n\t\tconst cachedImages = cache.images.get( image );\n\t\tconst mimeType = format === RGBAFormat ? 'image/png' : 'image/jpeg';\n\t\tconst key = mimeType + ':flipY/' + flipY.toString();\n\n\t\tif ( cachedImages[ key ] !== undefined ) return cachedImages[ key ];\n\n\t\tif ( ! json.images ) json.images = [];\n\n\t\tconst imageDef = { mimeType: mimeType };\n\n\t\tif ( options.embedImages ) {\n\n\t\t\tconst canvas = cachedCanvas = cachedCanvas || document.createElement( 'canvas' );\n\n\t\t\tcanvas.width = Math.min( image.width, options.maxTextureSize );\n\t\t\tcanvas.height = Math.min( image.height, options.maxTextureSize );\n\n\t\t\tconst ctx = canvas.getContext( '2d' );\n\n\t\t\tif ( flipY === true ) {\n\n\t\t\t\tctx.translate( 0, canvas.height );\n\t\t\t\tctx.scale( 1, - 1 );\n\n\t\t\t}\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof OffscreenCanvas !== 'undefined' && image instanceof OffscreenCanvas ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tctx.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\t} else {\n\n\t\t\t\tif ( format !== RGBAFormat && format !== RGBFormat ) {\n\n\t\t\t\t\tconsole.error( 'GLTFExporter: Only RGB and RGBA formats are supported.' );\n\n\t\t\t\t}\n\n\t\t\t\tif ( image.width > options.maxTextureSize || image.height > options.maxTextureSize ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Image size is bigger than maxTextureSize', image );\n\n\t\t\t\t}\n\n\t\t\t\tconst data = new Uint8ClampedArray( image.height * image.width * 4 );\n\n\t\t\t\tif ( format === RGBAFormat ) {\n\n\t\t\t\t\tfor ( let i = 0; i < data.length; i += 4 ) {\n\n\t\t\t\t\t\tdata[ i + 0 ] = image.data[ i + 0 ];\n\t\t\t\t\t\tdata[ i + 1 ] = image.data[ i + 1 ];\n\t\t\t\t\t\tdata[ i + 2 ] = image.data[ i + 2 ];\n\t\t\t\t\t\tdata[ i + 3 ] = image.data[ i + 3 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let i = 0, j = 0; i < data.length; i += 4, j += 3 ) {\n\n\t\t\t\t\t\tdata[ i + 0 ] = image.data[ j + 0 ];\n\t\t\t\t\t\tdata[ i + 1 ] = image.data[ j + 1 ];\n\t\t\t\t\t\tdata[ i + 2 ] = image.data[ j + 2 ];\n\t\t\t\t\t\tdata[ i + 3 ] = 255;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tctx.putImageData( new ImageData( data, image.width, image.height ), 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( options.binary === true ) {\n\n\t\t\t\tpending.push( new Promise( function ( resolve ) {\n\n\t\t\t\t\tcanvas.toBlob( function ( blob ) {\n\n\t\t\t\t\t\twriter.processBufferViewImage( blob ).then( function ( bufferViewIndex ) {\n\n\t\t\t\t\t\t\timageDef.bufferView = bufferViewIndex;\n\t\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}, mimeType );\n\n\t\t\t\t} ) );\n\n\t\t\t} else {\n\n\t\t\t\timageDef.uri = canvas.toDataURL( mimeType );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\timageDef.uri = image.src;\n\n\t\t}\n\n\t\tconst index = json.images.push( imageDef ) - 1;\n\t\tcachedImages[ key ] = index;\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process sampler\n\t * @param  {Texture} map Texture to process\n\t * @return {Integer}     Index of the processed texture in the \"samplers\" array\n\t */\n\tprocessSampler( map ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.samplers ) json.samplers = [];\n\n\t\tconst samplerDef = {\n\t\t\tmagFilter: THREE_TO_WEBGL[ map.magFilter ],\n\t\t\tminFilter: THREE_TO_WEBGL[ map.minFilter ],\n\t\t\twrapS: THREE_TO_WEBGL[ map.wrapS ],\n\t\t\twrapT: THREE_TO_WEBGL[ map.wrapT ]\n\t\t};\n\n\t\treturn json.samplers.push( samplerDef ) - 1;\n\n\t}\n\n\t/**\n\t * Process texture\n\t * @param  {Texture} map Map to process\n\t * @return {Integer} Index of the processed texture in the \"textures\" array\n\t */\n\tprocessTexture( map ) {\n\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tif ( cache.textures.has( map ) ) return cache.textures.get( map );\n\n\t\tif ( ! json.textures ) json.textures = [];\n\n\t\tconst textureDef = {\n\t\t\tsampler: this.processSampler( map ),\n\t\t\tsource: this.processImage( map.image, map.format, map.flipY )\n\t\t};\n\n\t\tif ( map.name ) textureDef.name = map.name;\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeTexture && ext.writeTexture( map, textureDef );\n\n\t\t} );\n\n\t\tconst index = json.textures.push( textureDef ) - 1;\n\t\tcache.textures.set( map, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process material\n\t * @param  {THREE.Material} material Material to process\n\t * @return {Integer|null} Index of the processed material in the \"materials\" array\n\t */\n\tprocessMaterial( material ) {\n\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tif ( cache.materials.has( material ) ) return cache.materials.get( material );\n\n\t\tif ( material.isShaderMaterial ) {\n\n\t\t\tconsole.warn( 'GLTFExporter: THREE.ShaderMaterial not supported.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tif ( ! json.materials ) json.materials = [];\n\n\t\t// @QUESTION Should we avoid including any attribute that has the default value?\n\t\tconst materialDef = {\tpbrMetallicRoughness: {} };\n\n\t\tif ( material.isMeshStandardMaterial !== true && material.isMeshBasicMaterial !== true ) {\n\n\t\t\tconsole.warn( 'GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.' );\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.baseColorFactor\n\t\tconst color = material.color.toArray().concat( [ material.opacity ] );\n\n\t\tif ( ! equalArray( color, [ 1, 1, 1, 1 ] ) ) {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.baseColorFactor = color;\n\n\t\t}\n\n\t\tif ( material.isMeshStandardMaterial ) {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = material.metalness;\n\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = material.roughness;\n\n\t\t} else {\n\n\t\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.5;\n\t\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.5;\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.metallicRoughnessTexture\n\t\tif ( material.metalnessMap || material.roughnessMap ) {\n\n\t\t\tif ( material.metalnessMap === material.roughnessMap ) {\n\n\t\t\t\tconst metalRoughMapDef = { index: this.processTexture( material.metalnessMap ) };\n\t\t\t\tthis.applyTextureTransform( metalRoughMapDef, material.metalnessMap );\n\t\t\t\tmaterialDef.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// pbrMetallicRoughness.baseColorTexture or pbrSpecularGlossiness diffuseTexture\n\t\tif ( material.map ) {\n\n\t\t\tconst baseColorMapDef = { index: this.processTexture( material.map ) };\n\t\t\tthis.applyTextureTransform( baseColorMapDef, material.map );\n\t\t\tmaterialDef.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\t// note: emissive components are limited to stay within the 0 - 1 range to accommodate glTF spec. see #21849 and #22000.\n\t\t\tconst emissive = material.emissive.clone().multiplyScalar( material.emissiveIntensity );\n\t\t\tconst maxEmissiveComponent = Math.max( emissive.r, emissive.g, emissive.b );\n\n\t\t\tif ( maxEmissiveComponent > 1 ) {\n\n\t\t\t\temissive.multiplyScalar( 1 / maxEmissiveComponent );\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited' );\n\n\t\t\t}\n\n\t\t\tif ( maxEmissiveComponent > 0 ) {\n\n\t\t\t\tmaterialDef.emissiveFactor = emissive.toArray();\n\n\t\t\t}\n\n\t\t\t// emissiveTexture\n\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\tconst emissiveMapDef = { index: this.processTexture( material.emissiveMap ) };\n\t\t\t\tthis.applyTextureTransform( emissiveMapDef, material.emissiveMap );\n\t\t\t\tmaterialDef.emissiveTexture = emissiveMapDef;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// normalTexture\n\t\tif ( material.normalMap ) {\n\n\t\t\tconst normalMapDef = { index: this.processTexture( material.normalMap ) };\n\n\t\t\tif ( material.normalScale && material.normalScale.x !== 1 ) {\n\n\t\t\t\t// glTF normal scale is univariate. Ignore `y`, which may be flipped.\n\t\t\t\t// Context: https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\tnormalMapDef.scale = material.normalScale.x;\n\n\t\t\t}\n\n\t\t\tthis.applyTextureTransform( normalMapDef, material.normalMap );\n\t\t\tmaterialDef.normalTexture = normalMapDef;\n\n\t\t}\n\n\t\t// occlusionTexture\n\t\tif ( material.aoMap ) {\n\n\t\t\tconst occlusionMapDef = {\n\t\t\t\tindex: this.processTexture( material.aoMap ),\n\t\t\t\ttexCoord: 1\n\t\t\t};\n\n\t\t\tif ( material.aoMapIntensity !== 1.0 ) {\n\n\t\t\t\tocclusionMapDef.strength = material.aoMapIntensity;\n\n\t\t\t}\n\n\t\t\tthis.applyTextureTransform( occlusionMapDef, material.aoMap );\n\t\t\tmaterialDef.occlusionTexture = occlusionMapDef;\n\n\t\t}\n\n\t\t// alphaMode\n\t\tif ( material.transparent ) {\n\n\t\t\tmaterialDef.alphaMode = 'BLEND';\n\n\t\t} else {\n\n\t\t\tif ( material.alphaTest > 0.0 ) {\n\n\t\t\t\tmaterialDef.alphaMode = 'MASK';\n\t\t\t\tmaterialDef.alphaCutoff = material.alphaTest;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// doubleSided\n\t\tif ( material.side === DoubleSide ) materialDef.doubleSided = true;\n\t\tif ( material.name !== '' ) materialDef.name = material.name;\n\n\t\tthis.serializeUserData( material, materialDef );\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeMaterial && ext.writeMaterial( material, materialDef );\n\n\t\t} );\n\n\t\tconst index = json.materials.push( materialDef ) - 1;\n\t\tcache.materials.set( material, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process mesh\n\t * @param  {THREE.Mesh} mesh Mesh to process\n\t * @return {Integer|null} Index of the processed mesh in the \"meshes\" array\n\t */\n\tprocessMesh( mesh ) {\n\n\t\tconst cache = this.cache;\n\t\tconst json = this.json;\n\n\t\tconst meshCacheKeyParts = [ mesh.geometry.uuid ];\n\n\t\tif ( Array.isArray( mesh.material ) ) {\n\n\t\t\tfor ( let i = 0, l = mesh.material.length; i < l; i ++ ) {\n\n\t\t\t\tmeshCacheKeyParts.push( mesh.material[ i ].uuid\t);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tmeshCacheKeyParts.push( mesh.material.uuid );\n\n\t\t}\n\n\t\tconst meshCacheKey = meshCacheKeyParts.join( ':' );\n\n\t\tif ( cache.meshes.has( meshCacheKey ) ) return cache.meshes.get( meshCacheKey );\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet mode;\n\n\t\t// Use the correct mode\n\t\tif ( mesh.isLineSegments ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.LINES;\n\n\t\t} else if ( mesh.isLineLoop ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.LINE_LOOP;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.LINE_STRIP;\n\n\t\t} else if ( mesh.isPoints ) {\n\n\t\t\tmode = WEBGL_CONSTANTS.POINTS;\n\n\t\t} else {\n\n\t\t\tmode = mesh.material.wireframe ? WEBGL_CONSTANTS.LINES : WEBGL_CONSTANTS.TRIANGLES;\n\n\t\t}\n\n\t\tif ( geometry.isBufferGeometry !== true ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.' );\n\n\t\t}\n\n\t\tconst meshDef = {};\n\t\tconst attributes = {};\n\t\tconst primitives = [];\n\t\tconst targets = [];\n\n\t\t// Conversion between attributes names in threejs and gltf spec\n\t\tconst nameConversion = {\n\t\t\tuv: 'TEXCOORD_0',\n\t\t\tuv2: 'TEXCOORD_1',\n\t\t\tcolor: 'COLOR_0',\n\t\t\tskinWeight: 'WEIGHTS_0',\n\t\t\tskinIndex: 'JOINTS_0'\n\t\t};\n\n\t\tconst originalNormal = geometry.getAttribute( 'normal' );\n\n\t\tif ( originalNormal !== undefined && ! this.isNormalizedNormalAttribute( originalNormal ) ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.' );\n\n\t\t\tgeometry.setAttribute( 'normal', this.createNormalizedNormalAttribute( originalNormal ) );\n\n\t\t}\n\n\t\t// @QUESTION Detect if .vertexColors = true?\n\t\t// For every attribute create an accessor\n\t\tlet modifiedAttribute = null;\n\n\t\tfor ( let attributeName in geometry.attributes ) {\n\n\t\t\t// Ignore morph target attributes, which are exported later.\n\t\t\tif ( attributeName.substr( 0, 5 ) === 'morph' ) continue;\n\n\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\tattributeName = nameConversion[ attributeName ] || attributeName.toUpperCase();\n\n\t\t\t// Prefix all geometry attributes except the ones specifically\n\t\t\t// listed in the spec; non-spec attributes are considered custom.\n\t\t\tconst validVertexAttributes =\n\t\t\t\t\t/^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n\n\t\t\tif ( ! validVertexAttributes.test( attributeName ) ) attributeName = '_' + attributeName;\n\n\t\t\tif ( cache.attributes.has( this.getUID( attribute ) ) ) {\n\n\t\t\t\tattributes[ attributeName ] = cache.attributes.get( this.getUID( attribute ) );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\t\t\tmodifiedAttribute = null;\n\t\t\tconst array = attribute.array;\n\n\t\t\tif ( attributeName === 'JOINTS_0' &&\n\t\t\t\t! ( array instanceof Uint16Array ) &&\n\t\t\t\t! ( array instanceof Uint8Array ) ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.' );\n\t\t\t\tmodifiedAttribute = new BufferAttribute( new Uint16Array( array ), attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tconst accessor = this.processAccessor( modifiedAttribute || attribute, geometry );\n\n\t\t\tif ( accessor !== null ) {\n\n\t\t\t\tattributes[ attributeName ] = accessor;\n\t\t\t\tcache.attributes.set( this.getUID( attribute ), accessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( originalNormal !== undefined ) geometry.setAttribute( 'normal', originalNormal );\n\n\t\t// Skip if no exportable attributes found\n\t\tif ( Object.keys( attributes ).length === 0 ) return null;\n\n\t\t// Morph targets\n\t\tif ( mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0 ) {\n\n\t\t\tconst weights = [];\n\t\t\tconst targetNames = [];\n\t\t\tconst reverseDictionary = {};\n\n\t\t\tif ( mesh.morphTargetDictionary !== undefined ) {\n\n\t\t\t\tfor ( const key in mesh.morphTargetDictionary ) {\n\n\t\t\t\t\treverseDictionary[ mesh.morphTargetDictionary[ key ] ] = key;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < mesh.morphTargetInfluences.length; ++ i ) {\n\n\t\t\t\tconst target = {};\n\t\t\t\tlet warned = false;\n\n\t\t\t\tfor ( const attributeName in geometry.morphAttributes ) {\n\n\t\t\t\t\t// glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n\t\t\t\t\t// Three.js doesn't support TANGENT yet.\n\n\t\t\t\t\tif ( attributeName !== 'position' && attributeName !== 'normal' ) {\n\n\t\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'GLTFExporter: Only POSITION and NORMAL morph are supported.' );\n\t\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst attribute = geometry.morphAttributes[ attributeName ][ i ];\n\t\t\t\t\tconst gltfAttributeName = attributeName.toUpperCase();\n\n\t\t\t\t\t// Three.js morph attribute has absolute values while the one of glTF has relative values.\n\t\t\t\t\t//\n\t\t\t\t\t// glTF 2.0 Specification:\n\t\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\t\t\t\t\tconst baseAttribute = geometry.attributes[ attributeName ];\n\n\t\t\t\t\tif ( cache.attributes.has( this.getUID( attribute ) ) ) {\n\n\t\t\t\t\t\ttarget[ gltfAttributeName ] = cache.attributes.get( this.getUID( attribute ) );\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clones attribute not to override\n\t\t\t\t\tconst relativeAttribute = attribute.clone();\n\n\t\t\t\t\tif ( ! geometry.morphTargetsRelative ) {\n\n\t\t\t\t\t\tfor ( let j = 0, jl = attribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\trelativeAttribute.setXYZ(\n\t\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\t\tattribute.getX( j ) - baseAttribute.getX( j ),\n\t\t\t\t\t\t\t\tattribute.getY( j ) - baseAttribute.getY( j ),\n\t\t\t\t\t\t\t\tattribute.getZ( j ) - baseAttribute.getZ( j )\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttarget[ gltfAttributeName ] = this.processAccessor( relativeAttribute, geometry );\n\t\t\t\t\tcache.attributes.set( this.getUID( baseAttribute ), target[ gltfAttributeName ] );\n\n\t\t\t\t}\n\n\t\t\t\ttargets.push( target );\n\n\t\t\t\tweights.push( mesh.morphTargetInfluences[ i ] );\n\n\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) targetNames.push( reverseDictionary[ i ] );\n\n\t\t\t}\n\n\t\t\tmeshDef.weights = weights;\n\n\t\t\tif ( targetNames.length > 0 ) {\n\n\t\t\t\tmeshDef.extras = {};\n\t\t\t\tmeshDef.extras.targetNames = targetNames;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst isMultiMaterial = Array.isArray( mesh.material );\n\n\t\tif ( isMultiMaterial && geometry.groups.length === 0 ) return null;\n\n\t\tconst materials = isMultiMaterial ? mesh.material : [ mesh.material ];\n\t\tconst groups = isMultiMaterial ? geometry.groups : [ { materialIndex: 0, start: undefined, count: undefined } ];\n\n\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = {\n\t\t\t\tmode: mode,\n\t\t\t\tattributes: attributes,\n\t\t\t};\n\n\t\t\tthis.serializeUserData( geometry, primitive );\n\n\t\t\tif ( targets.length > 0 ) primitive.targets = targets;\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\tlet cacheKey = this.getUID( geometry.index );\n\n\t\t\t\tif ( groups[ i ].start !== undefined || groups[ i ].count !== undefined ) {\n\n\t\t\t\t\tcacheKey += ':' + groups[ i ].start + ':' + groups[ i ].count;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cache.attributes.has( cacheKey ) ) {\n\n\t\t\t\t\tprimitive.indices = cache.attributes.get( cacheKey );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprimitive.indices = this.processAccessor( geometry.index, geometry, groups[ i ].start, groups[ i ].count );\n\t\t\t\t\tcache.attributes.set( cacheKey, primitive.indices );\n\n\t\t\t\t}\n\n\t\t\t\tif ( primitive.indices === null ) delete primitive.indices;\n\n\t\t\t}\n\n\t\t\tconst material = this.processMaterial( materials[ groups[ i ].materialIndex ] );\n\n\t\t\tif ( material !== null ) primitive.material = material;\n\n\t\t\tprimitives.push( primitive );\n\n\t\t}\n\n\t\tmeshDef.primitives = primitives;\n\n\t\tif ( ! json.meshes ) json.meshes = [];\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeMesh && ext.writeMesh( mesh, meshDef );\n\n\t\t} );\n\n\t\tconst index = json.meshes.push( meshDef ) - 1;\n\t\tcache.meshes.set( meshCacheKey, index );\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Process camera\n\t * @param  {THREE.Camera} camera Camera to process\n\t * @return {Integer}      Index of the processed mesh in the \"camera\" array\n\t */\n\tprocessCamera( camera ) {\n\n\t\tconst json = this.json;\n\n\t\tif ( ! json.cameras ) json.cameras = [];\n\n\t\tconst isOrtho = camera.isOrthographicCamera;\n\n\t\tconst cameraDef = {\n\t\t\ttype: isOrtho ? 'orthographic' : 'perspective'\n\t\t};\n\n\t\tif ( isOrtho ) {\n\n\t\t\tcameraDef.orthographic = {\n\t\t\t\txmag: camera.right * 2,\n\t\t\t\tymag: camera.top * 2,\n\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tcameraDef.perspective = {\n\t\t\t\taspectRatio: camera.aspect,\n\t\t\t\tyfov: MathUtils.degToRad( camera.fov ),\n\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\t\t\t};\n\n\t\t}\n\n\t\t// Question: Is saving \"type\" as name intentional?\n\t\tif ( camera.name !== '' ) cameraDef.name = camera.type;\n\n\t\treturn json.cameras.push( cameraDef ) - 1;\n\n\t}\n\n\t/**\n\t * Creates glTF animation entry from AnimationClip object.\n\t *\n\t * Status:\n\t * - Only properties listed in PATH_PROPERTIES may be animated.\n\t *\n\t * @param {THREE.AnimationClip} clip\n\t * @param {THREE.Object3D} root\n\t * @return {number|null}\n\t */\n\tprocessAnimation( clip, root ) {\n\n\t\tconst json = this.json;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tif ( ! json.animations ) json.animations = [];\n\n\t\tclip = GLTFExporter.Utils.mergeMorphTargetTracks( clip.clone(), root );\n\n\t\tconst tracks = clip.tracks;\n\t\tconst channels = [];\n\t\tconst samplers = [];\n\n\t\tfor ( let i = 0; i < tracks.length; ++ i ) {\n\n\t\t\tconst track = tracks[ i ];\n\t\t\tconst trackBinding = PropertyBinding.parseTrackName( track.name );\n\t\t\tlet trackNode = PropertyBinding.findNode( root, trackBinding.nodeName );\n\t\t\tconst trackProperty = PATH_PROPERTIES[ trackBinding.propertyName ];\n\n\t\t\tif ( trackBinding.objectName === 'bones' ) {\n\n\t\t\t\tif ( trackNode.isSkinnedMesh === true ) {\n\n\t\t\t\t\ttrackNode = trackNode.skeleton.getBoneByName( trackBinding.objectIndex );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttrackNode = undefined;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! trackNode || ! trackProperty ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Could not export animation track \"%s\".', track.name );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tconst inputItemSize = 1;\n\t\t\tlet outputItemSize = track.values.length / track.times.length;\n\n\t\t\tif ( trackProperty === PATH_PROPERTIES.morphTargetInfluences ) {\n\n\t\t\t\toutputItemSize /= trackNode.morphTargetInfluences.length;\n\n\t\t\t}\n\n\t\t\tlet interpolation;\n\n\t\t\t// @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n\n\t\t\t// Detecting glTF cubic spline interpolant by checking factory method's special property\n\t\t\t// GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n\t\t\t// valid value from .getInterpolation().\n\t\t\tif ( track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true ) {\n\n\t\t\t\tinterpolation = 'CUBICSPLINE';\n\n\t\t\t\t// itemSize of CUBICSPLINE keyframe is 9\n\t\t\t\t// (VEC3 * 3: inTangent, splineVertex, and outTangent)\n\t\t\t\t// but needs to be stored as VEC3 so dividing by 3 here.\n\t\t\t\toutputItemSize /= 3;\n\n\t\t\t} else if ( track.getInterpolation() === InterpolateDiscrete ) {\n\n\t\t\t\tinterpolation = 'STEP';\n\n\t\t\t} else {\n\n\t\t\t\tinterpolation = 'LINEAR';\n\n\t\t\t}\n\n\t\t\tsamplers.push( {\n\t\t\t\tinput: this.processAccessor( new BufferAttribute( track.times, inputItemSize ) ),\n\t\t\t\toutput: this.processAccessor( new BufferAttribute( track.values, outputItemSize ) ),\n\t\t\t\tinterpolation: interpolation\n\t\t\t} );\n\n\t\t\tchannels.push( {\n\t\t\t\tsampler: samplers.length - 1,\n\t\t\t\ttarget: {\n\t\t\t\t\tnode: nodeMap.get( trackNode ),\n\t\t\t\t\tpath: trackProperty\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tjson.animations.push( {\n\t\t\tname: clip.name || 'clip_' + json.animations.length,\n\t\t\tsamplers: samplers,\n\t\t\tchannels: channels\n\t\t} );\n\n\t\treturn json.animations.length - 1;\n\n\t}\n\n\t/**\n\t * @param {THREE.Object3D} object\n\t * @return {number|null}\n\t */\n\t processSkin( object ) {\n\n\t\tconst json = this.json;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tconst node = json.nodes[ nodeMap.get( object ) ];\n\n\t\tconst skeleton = object.skeleton;\n\n\t\tif ( skeleton === undefined ) return null;\n\n\t\tconst rootJoint = object.skeleton.bones[ 0 ];\n\n\t\tif ( rootJoint === undefined ) return null;\n\n\t\tconst joints = [];\n\t\tconst inverseBindMatrices = new Float32Array( skeleton.bones.length * 16 );\n\t\tconst temporaryBoneInverse = new Matrix4();\n\n\t\tfor ( let i = 0; i < skeleton.bones.length; ++ i ) {\n\n\t\t\tjoints.push( nodeMap.get( skeleton.bones[ i ] ) );\n\t\t\ttemporaryBoneInverse.copy( skeleton.boneInverses[ i ] );\n\t\t\ttemporaryBoneInverse.multiply( object.bindMatrix ).toArray( inverseBindMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( json.skins === undefined ) json.skins = [];\n\n\t\tjson.skins.push( {\n\t\t\tinverseBindMatrices: this.processAccessor( new BufferAttribute( inverseBindMatrices, 16 ) ),\n\t\t\tjoints: joints,\n\t\t\tskeleton: nodeMap.get( rootJoint )\n\t\t} );\n\n\t\tconst skinIndex = node.skin = json.skins.length - 1;\n\n\t\treturn skinIndex;\n\n\t}\n\n\t/**\n\t * Process Object3D node\n\t * @param  {THREE.Object3D} node Object3D to processNode\n\t * @return {Integer} Index of the node in the nodes list\n\t */\n\tprocessNode( object ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst nodeMap = this.nodeMap;\n\n\t\tif ( ! json.nodes ) json.nodes = [];\n\n\t\tconst nodeDef = {};\n\n\t\tif ( options.trs ) {\n\n\t\t\tconst rotation = object.quaternion.toArray();\n\t\t\tconst position = object.position.toArray();\n\t\t\tconst scale = object.scale.toArray();\n\n\t\t\tif ( ! equalArray( rotation, [ 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\tnodeDef.rotation = rotation;\n\n\t\t\t}\n\n\t\t\tif ( ! equalArray( position, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\tnodeDef.translation = position;\n\n\t\t\t}\n\n\t\t\tif ( ! equalArray( scale, [ 1, 1, 1 ] ) ) {\n\n\t\t\t\tnodeDef.scale = scale;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( object.matrixAutoUpdate ) {\n\n\t\t\t\tobject.updateMatrix();\n\n\t\t\t}\n\n\t\t\tif ( isIdentityMatrix( object.matrix ) === false ) {\n\n\t\t\t\tnodeDef.matrix = object.matrix.elements;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// We don't export empty strings name because it represents no-name in Three.js.\n\t\tif ( object.name !== '' ) nodeDef.name = String( object.name );\n\n\t\tthis.serializeUserData( object, nodeDef );\n\n\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\tconst meshIndex = this.processMesh( object );\n\n\t\t\tif ( meshIndex !== null ) nodeDef.mesh = meshIndex;\n\n\t\t} else if ( object.isCamera ) {\n\n\t\t\tnodeDef.camera = this.processCamera( object );\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) this.skins.push( object );\n\n\t\tif ( object.children.length > 0 ) {\n\n\t\t\tconst children = [];\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\tconst child = object.children[ i ];\n\n\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\tconst nodeIndex = this.processNode( child );\n\n\t\t\t\t\tif ( nodeIndex !== null ) children.push( nodeIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( children.length > 0 ) nodeDef.children = children;\n\n\t\t}\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.writeNode && ext.writeNode( object, nodeDef );\n\n\t\t} );\n\n\t\tconst nodeIndex = json.nodes.push( nodeDef ) - 1;\n\t\tnodeMap.set( object, nodeIndex );\n\t\treturn nodeIndex;\n\n\t}\n\n\t/**\n\t * Process Scene\n\t * @param  {Scene} node Scene to process\n\t */\n\tprocessScene( scene ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tif ( ! json.scenes ) {\n\n\t\t\tjson.scenes = [];\n\t\t\tjson.scene = 0;\n\n\t\t}\n\n\t\tconst sceneDef = {};\n\n\t\tif ( scene.name !== '' ) sceneDef.name = scene.name;\n\n\t\tjson.scenes.push( sceneDef );\n\n\t\tconst nodes = [];\n\n\t\tfor ( let i = 0, l = scene.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = scene.children[ i ];\n\n\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\tconst nodeIndex = this.processNode( child );\n\n\t\t\t\tif ( nodeIndex !== null ) nodes.push( nodeIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( nodes.length > 0 ) sceneDef.nodes = nodes;\n\n\t\tthis.serializeUserData( scene, sceneDef );\n\n\t}\n\n\t/**\n\t * Creates a Scene to hold a list of objects and parse it\n\t * @param  {Array} objects List of objects to process\n\t */\n\tprocessObjects( objects ) {\n\n\t\tconst scene = new Scene();\n\t\tscene.name = 'AuxScene';\n\n\t\tfor ( let i = 0; i < objects.length; i ++ ) {\n\n\t\t\t// We push directly to children instead of calling `add` to prevent\n\t\t\t// modify the .parent and break its original scene and hierarchy\n\t\t\tscene.children.push( objects[ i ] );\n\n\t\t}\n\n\t\tthis.processScene( scene );\n\n\t}\n\n\t/**\n\t * @param {THREE.Object3D|Array<THREE.Object3D>} input\n\t */\n\tprocessInput( input ) {\n\n\t\tconst options = this.options;\n\n\t\tinput = input instanceof Array ? input : [ input ];\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.beforeParse && ext.beforeParse( input );\n\n\t\t} );\n\n\t\tconst objectsWithoutScene = [];\n\n\t\tfor ( let i = 0; i < input.length; i ++ ) {\n\n\t\t\tif ( input[ i ] instanceof Scene ) {\n\n\t\t\t\tthis.processScene( input[ i ] );\n\n\t\t\t} else {\n\n\t\t\t\tobjectsWithoutScene.push( input[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( objectsWithoutScene.length > 0 ) this.processObjects( objectsWithoutScene );\n\n\t\tfor ( let i = 0; i < this.skins.length; ++ i ) {\n\n\t\t\tthis.processSkin( this.skins[ i ] );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < options.animations.length; ++ i ) {\n\n\t\t\tthis.processAnimation( options.animations[ i ], input[ 0 ] );\n\n\t\t}\n\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\text.afterParse && ext.afterParse( input );\n\n\t\t} );\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tfor ( let i = 0, il = this.plugins.length; i < il; i ++ ) {\n\n\t\t\tfunc( this.plugins[ i ] );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_lights_punctual';\n\n\t}\n\n\twriteNode( light, nodeDef ) {\n\n\t\tif ( ! light.isLight ) return;\n\n\t\tif ( ! light.isDirectionalLight && ! light.isPointLight && ! light.isSpotLight ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Only directional, point, and spot lights are supported.', light );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst writer = this.writer;\n\t\tconst json = writer.json;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst lightDef = {};\n\n\t\tif ( light.name ) lightDef.name = light.name;\n\n\t\tlightDef.color = light.color.toArray();\n\n\t\tlightDef.intensity = light.intensity;\n\n\t\tif ( light.isDirectionalLight ) {\n\n\t\t\tlightDef.type = 'directional';\n\n\t\t} else if ( light.isPointLight ) {\n\n\t\t\tlightDef.type = 'point';\n\n\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t} else if ( light.isSpotLight ) {\n\n\t\t\tlightDef.type = 'spot';\n\n\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t\tlightDef.spot = {};\n\t\t\tlightDef.spot.innerConeAngle = ( light.penumbra - 1.0 ) * light.angle * - 1.0;\n\t\t\tlightDef.spot.outerConeAngle = light.angle;\n\n\t\t}\n\n\t\tif ( light.decay !== undefined && light.decay !== 2 ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, '\n\t\t\t\t+ 'and expects light.decay=2.' );\n\n\t\t}\n\n\t\tif ( light.target\n\t\t\t\t&& ( light.target.parent !== light\n\t\t\t\t|| light.target.position.x !== 0\n\t\t\t\t|| light.target.position.y !== 0\n\t\t\t\t|| light.target.position.z !== - 1 ) ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFExporter: Light direction may be lost. For best results, '\n\t\t\t\t+ 'make light.target a child of the light with position 0,0,-1.' );\n\n\t\t}\n\n\t\tif ( ! extensionsUsed[ this.name ] ) {\n\n\t\t\tjson.extensions = json.extensions || {};\n\t\t\tjson.extensions[ this.name ] = { lights: [] };\n\t\t\textensionsUsed[ this.name ] = true;\n\n\t\t}\n\n\t\tconst lights = json.extensions[ this.name ].lights;\n\t\tlights.push( lightDef );\n\n\t\tnodeDef.extensions = nodeDef.extensions || {};\n\t\tnodeDef.extensions[ this.name ] = { light: lights.length - 1 };\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_unlit';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshBasicMaterial ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = {};\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t\tmaterialDef.pbrMetallicRoughness.metallicFactor = 0.0;\n\t\tmaterialDef.pbrMetallicRoughness.roughnessFactor = 0.9;\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n */\nclass GLTFMaterialsPBRSpecularGlossiness {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_pbrSpecularGlossiness';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isGLTFSpecularGlossinessMaterial ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\tif ( materialDef.pbrMetallicRoughness.baseColorFactor ) {\n\n\t\t\textensionDef.diffuseFactor = materialDef.pbrMetallicRoughness.baseColorFactor;\n\n\t\t}\n\n\t\tconst specularFactor = [ 1, 1, 1 ];\n\t\tmaterial.specular.toArray( specularFactor, 0 );\n\t\textensionDef.specularFactor = specularFactor;\n\t\textensionDef.glossinessFactor = material.glossiness;\n\n\t\tif ( materialDef.pbrMetallicRoughness.baseColorTexture ) {\n\n\t\t\textensionDef.diffuseTexture = materialDef.pbrMetallicRoughness.baseColorTexture;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tconst specularMapDef = { index: writer.processTexture( material.specularMap ) };\n\t\t\twriter.applyTextureTransform( specularMapDef, material.specularMap );\n\t\t\textensionDef.specularGlossinessTexture = specularMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_clearcoat';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.clearcoatFactor = material.clearcoat;\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tconst clearcoatMapDef = { index: writer.processTexture( material.clearcoatMap ) };\n\t\t\twriter.applyTextureTransform( clearcoatMapDef, material.clearcoatMap );\n\t\t\textensionDef.clearcoatTexture = clearcoatMapDef;\n\n\t\t}\n\n\t\textensionDef.clearcoatRoughnessFactor = material.clearcoatRoughness;\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tconst clearcoatRoughnessMapDef = { index: writer.processTexture( material.clearcoatRoughnessMap ) };\n\t\t\twriter.applyTextureTransform( clearcoatRoughnessMapDef, material.clearcoatRoughnessMap );\n\t\t\textensionDef.clearcoatRoughnessTexture = clearcoatRoughnessMapDef;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tconst clearcoatNormalMapDef = { index: writer.processTexture( material.clearcoatNormalMap ) };\n\t\t\twriter.applyTextureTransform( clearcoatNormalMapDef, material.clearcoatNormalMap );\n\t\t\textensionDef.clearcoatNormalTexture = clearcoatNormalMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_transmission';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.transmission === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.transmissionFactor = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tconst transmissionMapDef = { index: writer.processTexture( material.transmissionMap ) };\n\t\t\twriter.applyTextureTransform( transmissionMapDef, material.transmissionMap );\n\t\t\textensionDef.transmissionTexture = transmissionMapDef;\n\n\t\t}\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( writer ) {\n\n\t\tthis.writer = writer;\n\t\tthis.name = 'KHR_materials_volume';\n\n\t}\n\n\twriteMaterial( material, materialDef ) {\n\n\t\tif ( ! material.isMeshPhysicalMaterial || material.transmission === 0 ) return;\n\n\t\tconst writer = this.writer;\n\t\tconst extensionsUsed = writer.extensionsUsed;\n\n\t\tconst extensionDef = {};\n\n\t\textensionDef.thicknessFactor = material.thickness;\n\n\t\tif ( material.thicknessMap ) {\n\n\t\t\tconst thicknessMapDef = { index: writer.processTexture( material.thicknessMap ) };\n\t\t\twriter.applyTextureTransform( thicknessMapDef, material.thicknessMap );\n\t\t\textensionDef.thicknessTexture = thicknessMapDef;\n\n\t\t}\n\n\t\textensionDef.attenuationDistance = material.attenuationDistance;\n\t\textensionDef.attenuationColor = material.attenuationColor.toArray();\n\n\t\tmaterialDef.extensions = materialDef.extensions || {};\n\t\tmaterialDef.extensions[ this.name ] = extensionDef;\n\n\t\textensionsUsed[ this.name ] = true;\n\n\t}\n\n}\n\n/**\n * Static utility functions\n */\nGLTFExporter.Utils = {\n\n\tinsertKeyframe: function ( track, time ) {\n\n\t\tconst tolerance = 0.001; // 1ms\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = new track.TimeBufferType( track.times.length + 1 );\n\t\tconst values = new track.ValueBufferType( track.values.length + valueSize );\n\t\tconst interpolant = track.createInterpolant( new track.ValueBufferType( valueSize ) );\n\n\t\tlet index;\n\n\t\tif ( track.times.length === 0 ) {\n\n\t\t\ttimes[ 0 ] = time;\n\n\t\t\tfor ( let i = 0; i < valueSize; i ++ ) {\n\n\t\t\t\tvalues[ i ] = 0;\n\n\t\t\t}\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time < track.times[ 0 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ 0 ] - time ) < tolerance ) return 0;\n\n\t\t\ttimes[ 0 ] = time;\n\t\t\ttimes.set( track.times, 1 );\n\n\t\t\tvalues.set( interpolant.evaluate( time ), 0 );\n\t\t\tvalues.set( track.values, valueSize );\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time > track.times[ track.times.length - 1 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ track.times.length - 1 ] - time ) < tolerance ) {\n\n\t\t\t\treturn track.times.length - 1;\n\n\t\t\t}\n\n\t\t\ttimes[ times.length - 1 ] = time;\n\t\t\ttimes.set( track.times, 0 );\n\n\t\t\tvalues.set( track.values, 0 );\n\t\t\tvalues.set( interpolant.evaluate( time ), track.values.length );\n\n\t\t\tindex = times.length - 1;\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < track.times.length; i ++ ) {\n\n\t\t\t\tif ( Math.abs( track.times[ i ] - time ) < tolerance ) return i;\n\n\t\t\t\tif ( track.times[ i ] < time && track.times[ i + 1 ] > time ) {\n\n\t\t\t\t\ttimes.set( track.times.slice( 0, i + 1 ), 0 );\n\t\t\t\t\ttimes[ i + 1 ] = time;\n\t\t\t\t\ttimes.set( track.times.slice( i + 1 ), i + 2 );\n\n\t\t\t\t\tvalues.set( track.values.slice( 0, ( i + 1 ) * valueSize ), 0 );\n\t\t\t\t\tvalues.set( interpolant.evaluate( time ), ( i + 1 ) * valueSize );\n\t\t\t\t\tvalues.set( track.values.slice( ( i + 1 ) * valueSize ), ( i + 2 ) * valueSize );\n\n\t\t\t\t\tindex = i + 1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttrack.times = times;\n\t\ttrack.values = values;\n\n\t\treturn index;\n\n\t},\n\n\tmergeMorphTargetTracks: function ( clip, root ) {\n\n\t\tconst tracks = [];\n\t\tconst mergedTracks = {};\n\t\tconst sourceTracks = clip.tracks;\n\n\t\tfor ( let i = 0; i < sourceTracks.length; ++ i ) {\n\n\t\t\tlet sourceTrack = sourceTracks[ i ];\n\t\t\tconst sourceTrackBinding = PropertyBinding.parseTrackName( sourceTrack.name );\n\t\t\tconst sourceTrackNode = PropertyBinding.findNode( root, sourceTrackBinding.nodeName );\n\n\t\t\tif ( sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined ) {\n\n\t\t\t\t// Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n\t\t\t\ttracks.push( sourceTrack );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete\n\t\t\t\t&& sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear ) {\n\n\t\t\t\tif ( sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\t\t// This should never happen, because glTF morph target animations\n\t\t\t\t\t// affect all targets already.\n\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.' );\n\n\t\t\t\t}\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.' );\n\n\t\t\t\tsourceTrack = sourceTrack.clone();\n\t\t\t\tsourceTrack.setInterpolation( InterpolateLinear );\n\n\t\t\t}\n\n\t\t\tconst targetCount = sourceTrackNode.morphTargetInfluences.length;\n\t\t\tconst targetIndex = sourceTrackNode.morphTargetDictionary[ sourceTrackBinding.propertyIndex ];\n\n\t\t\tif ( targetIndex === undefined ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex );\n\n\t\t\t}\n\n\t\t\tlet mergedTrack;\n\n\t\t\t// If this is the first time we've seen this object, create a new\n\t\t\t// track to store merged keyframe data for each morph target.\n\t\t\tif ( mergedTracks[ sourceTrackNode.uuid ] === undefined ) {\n\n\t\t\t\tmergedTrack = sourceTrack.clone();\n\n\t\t\t\tconst values = new mergedTrack.ValueBufferType( targetCount * mergedTrack.times.length );\n\n\t\t\t\tfor ( let j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\t\tvalues[ j * targetCount + targetIndex ] = mergedTrack.values[ j ];\n\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration the intended target node\n\t\t\t\t// of our original un-merged morphTarget animation.\n\t\t\t\tmergedTrack.name = ( sourceTrackBinding.nodeName || '' ) + '.morphTargetInfluences';\n\t\t\t\tmergedTrack.values = values;\n\n\t\t\t\tmergedTracks[ sourceTrackNode.uuid ] = mergedTrack;\n\t\t\t\ttracks.push( mergedTrack );\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst sourceInterpolant = sourceTrack.createInterpolant( new sourceTrack.ValueBufferType( 1 ) );\n\n\t\t\tmergedTrack = mergedTracks[ sourceTrackNode.uuid ];\n\n\t\t\t// For every existing keyframe of the merged track, write a (possibly\n\t\t\t// interpolated) value from the source track.\n\t\t\tfor ( let j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\tmergedTrack.values[ j * targetCount + targetIndex ] = sourceInterpolant.evaluate( mergedTrack.times[ j ] );\n\n\t\t\t}\n\n\t\t\t// For every existing keyframe of the source track, write a (possibly\n\t\t\t// new) keyframe to the merged track. Values from the previous loop may\n\t\t\t// be written again, but keyframes are de-duplicated.\n\t\t\tfor ( let j = 0; j < sourceTrack.times.length; j ++ ) {\n\n\t\t\t\tconst keyframeIndex = this.insertKeyframe( mergedTrack, sourceTrack.times[ j ] );\n\t\t\t\tmergedTrack.values[ keyframeIndex * targetCount + targetIndex ] = sourceTrack.values[ j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\treturn clip;\n\n\t}\n\n};\n\nexport { GLTFExporter };\n","import { InstancedMesh } from 'three';\r\nimport { BufferAttribute } from 'three/src/core/BufferAttribute';\r\nimport { GLTFExporter } from 'three/examples/jsm/exporters/GLTFExporter';\r\nexport class FragmentMesh extends InstancedMesh {\r\n    constructor(geometry, material, count) {\r\n        super(geometry, material, count);\r\n        this.elementCount = 0;\r\n        this.exportOptions = {\r\n            trs: false,\r\n            onlyVisible: false,\r\n            truncateDrawRange: true,\r\n            binary: true,\r\n            maxTextureSize: 0\r\n        };\r\n        this.exporter = new GLTFExporter();\r\n        this.material = FragmentMesh.newMaterialArray(material);\r\n        this.geometry = this.newFragmentGeometry(geometry);\r\n    }\r\n    export() {\r\n        const mesh = this;\r\n        return new Promise((resolve) => {\r\n            this.exporter.parse(mesh, (geometry) => resolve(geometry), this.exportOptions);\r\n        });\r\n    }\r\n    newFragmentGeometry(geometry) {\r\n        if (!geometry.index) {\r\n            throw new Error('The geometry must be indexed!');\r\n        }\r\n        if (!geometry.attributes.blockID) {\r\n            const vertexSize = geometry.attributes.position.count;\r\n            const array = new Uint16Array(vertexSize);\r\n            array.fill(this.elementCount++);\r\n            geometry.attributes.blockID = new BufferAttribute(array, 1);\r\n        }\r\n        const size = geometry.index.count;\r\n        FragmentMesh.initializeGroups(geometry, size);\r\n        return geometry;\r\n    }\r\n    static initializeGroups(geometry, size) {\r\n        if (!geometry.groups.length) {\r\n            geometry.groups.push({\r\n                start: 0,\r\n                count: size,\r\n                materialIndex: 0\r\n            });\r\n        }\r\n    }\r\n    static newMaterialArray(material) {\r\n        if (!Array.isArray(material))\r\n            material = [material];\r\n        return material;\r\n    }\r\n}\r\n//# sourceMappingURL=fragment-mesh.js.map","export class BlocksMap {\r\n    constructor(fragment) {\r\n        this.indices = BlocksMap.initializeBlocks(fragment);\r\n        this.generateGeometryIndexMap(fragment);\r\n    }\r\n    generateGeometryIndexMap(fragment) {\r\n        const geometry = fragment.mesh.geometry;\r\n        for (const group of geometry.groups) {\r\n            this.fillBlocksMapWithGroupInfo(group, geometry);\r\n        }\r\n    }\r\n    getSubsetID(modelID, material, customID = 'DEFAULT') {\r\n        const baseID = modelID;\r\n        const materialID = material ? material.uuid : 'DEFAULT';\r\n        return `${baseID} - ${materialID} - ${customID}`;\r\n    }\r\n    // Use this only for destroying the current IFCLoader instance\r\n    dispose() {\r\n        this.indices = null;\r\n    }\r\n    static initializeBlocks(fragment) {\r\n        const geometry = fragment.mesh.geometry;\r\n        const startIndices = geometry.index.array;\r\n        return {\r\n            indexCache: startIndices.slice(0, geometry.index.array.length),\r\n            map: new Map()\r\n        };\r\n    }\r\n    fillBlocksMapWithGroupInfo(group, geometry) {\r\n        let prevBlockID = -1;\r\n        const materialIndex = group.materialIndex;\r\n        const materialStart = group.start;\r\n        const materialEnd = materialStart + group.count - 1;\r\n        let objectStart = -1;\r\n        let objectEnd = -1;\r\n        for (let i = materialStart; i <= materialEnd; i++) {\r\n            const index = geometry.index.array[i];\r\n            const blockID = geometry.attributes.blockID.array[index];\r\n            // First iteration\r\n            if (prevBlockID === -1) {\r\n                prevBlockID = blockID;\r\n                objectStart = i;\r\n            }\r\n            // It's the end of the material, which also means end of the object\r\n            const isEndOfMaterial = i === materialEnd;\r\n            if (isEndOfMaterial) {\r\n                const store = this.getMaterialStore(blockID, materialIndex);\r\n                store.push(objectStart, materialEnd);\r\n                break;\r\n            }\r\n            // Still going through the same object\r\n            if (prevBlockID === blockID)\r\n                continue;\r\n            // New object starts; save previous object\r\n            // Store previous object\r\n            const store = this.getMaterialStore(prevBlockID, materialIndex);\r\n            objectEnd = i - 1;\r\n            store.push(objectStart, objectEnd);\r\n            // Get ready to process next object\r\n            prevBlockID = blockID;\r\n            objectStart = i;\r\n        }\r\n    }\r\n    getMaterialStore(id, matIndex) {\r\n        // If this object wasn't store before, add it to the map\r\n        if (this.indices.map.get(id) === undefined) {\r\n            this.indices.map.set(id, {});\r\n        }\r\n        const storedIfcItem = this.indices.map.get(id);\r\n        if (storedIfcItem === undefined)\r\n            throw new Error('Geometry map generation error');\r\n        // If this material wasn't stored for this object before, add it to the object\r\n        if (storedIfcItem[matIndex] === undefined) {\r\n            storedIfcItem[matIndex] = [];\r\n        }\r\n        return storedIfcItem[matIndex];\r\n    }\r\n}\r\n//# sourceMappingURL=blocks-map.js.map","import { BlocksMap } from './blocks-map';\r\n/**\r\n * Contains the logic to get, create and delete geometric subsets of an IFC model. For example,\r\n * this can extract all the items in a specific IfcBuildingStorey and create a new Mesh.\r\n */\r\nexport class Blocks {\r\n    constructor(fragment) {\r\n        this.fragment = fragment;\r\n        this.tempIndex = [];\r\n        this.blocksMap = new BlocksMap(fragment);\r\n        this.initializeSubsetGroups(fragment);\r\n        const rawIds = fragment.mesh.geometry.attributes.blockID.array;\r\n        this.visibleIds = new Set(rawIds);\r\n        this.ids = new Set(rawIds);\r\n        this.add(Array.from(this.ids), true);\r\n    }\r\n    get count() {\r\n        return this.ids.size;\r\n    }\r\n    reset() {\r\n        this.add(Array.from(this.ids), true);\r\n    }\r\n    add(ids, removePrevious = true) {\r\n        this.filterIndices(removePrevious);\r\n        const filtered = ids.filter((id) => !this.visibleIds.has(id));\r\n        this.constructSubsetByMaterial(ids);\r\n        filtered.forEach((id) => this.visibleIds.add(id));\r\n        this.fragment.mesh.geometry.setIndex(this.tempIndex);\r\n        this.tempIndex.length = 0;\r\n    }\r\n    remove(ids) {\r\n        ids.forEach((id) => this.visibleIds.has(id) && this.visibleIds.delete(id));\r\n        const remainingIDs = Array.from(this.visibleIds);\r\n        this.add(remainingIDs, true);\r\n    }\r\n    // Use this only for destroying the current Fragment instance\r\n    dispose() {\r\n        this.blocksMap.dispose();\r\n        this.tempIndex = [];\r\n        this.visibleIds.clear();\r\n        this.visibleIds = null;\r\n        this.ids.clear();\r\n        this.ids = null;\r\n    }\r\n    initializeSubsetGroups(fragment) {\r\n        const geometry = fragment.mesh.geometry;\r\n        geometry.groups = JSON.parse(JSON.stringify(geometry.groups));\r\n        this.resetGroups(geometry);\r\n    }\r\n    // Remove previous indices or filter the given ones to avoid repeating items\r\n    filterIndices(removePrevious) {\r\n        const geometry = this.fragment.mesh.geometry;\r\n        if (!removePrevious) {\r\n            this.tempIndex = Array.from(geometry.index.array);\r\n            return;\r\n        }\r\n        geometry.setIndex([]);\r\n        this.resetGroups(geometry);\r\n    }\r\n    constructSubsetByMaterial(ids) {\r\n        const length = this.fragment.mesh.geometry.groups.length;\r\n        const newIndices = { count: 0 };\r\n        for (let i = 0; i < length; i++) {\r\n            this.insertNewIndices(ids, i, newIndices);\r\n        }\r\n    }\r\n    // Inserts indices in correct position and update groups\r\n    insertNewIndices(ids, materialIndex, newIndices) {\r\n        const indicesOfOneMaterial = this.getAllIndicesOfGroup(ids, materialIndex);\r\n        this.insertIndicesAtGroup(indicesOfOneMaterial, materialIndex, newIndices);\r\n    }\r\n    insertIndicesAtGroup(indicesByGroup, index, newIndices) {\r\n        const currentGroup = this.getCurrentGroup(index);\r\n        currentGroup.start += newIndices.count;\r\n        const newIndicesPosition = currentGroup.start + currentGroup.count;\r\n        newIndices.count += indicesByGroup.length;\r\n        if (indicesByGroup.length > 0) {\r\n            const position = newIndicesPosition;\r\n            const start = this.tempIndex.slice(0, position);\r\n            const end = this.tempIndex.slice(position);\r\n            this.tempIndex = Array.prototype.concat.apply([], [start, indicesByGroup, end]);\r\n            currentGroup.count += indicesByGroup.length;\r\n        }\r\n    }\r\n    getCurrentGroup(groupIndex) {\r\n        return this.fragment.mesh.geometry.groups[groupIndex];\r\n    }\r\n    resetGroups(geometry) {\r\n        geometry.groups.forEach((group) => {\r\n            group.start = 0;\r\n            group.count = 0;\r\n        });\r\n    }\r\n    // If flatten, all indices are in the same array; otherwise, indices are split in subarrays by material\r\n    getAllIndicesOfGroup(ids, materialIndex, flatten = true) {\r\n        const indicesByGroup = [];\r\n        for (const id of ids) {\r\n            const entry = this.blocksMap.indices.map.get(id);\r\n            if (!entry)\r\n                continue;\r\n            const value = entry[materialIndex];\r\n            if (!value)\r\n                continue;\r\n            this.getIndexChunk(value, indicesByGroup, materialIndex, flatten);\r\n        }\r\n        return indicesByGroup;\r\n    }\r\n    getIndexChunk(value, indicesByGroup, materialIndex, flatten) {\r\n        const pairs = value.length / 2;\r\n        for (let pair = 0; pair < pairs; pair++) {\r\n            const pairIndex = pair * 2;\r\n            const start = value[pairIndex];\r\n            const end = value[pairIndex + 1];\r\n            for (let j = start; j <= end; j++) {\r\n                if (flatten)\r\n                    indicesByGroup.push(this.blocksMap.indices.indexCache[j]);\r\n                else {\r\n                    if (!indicesByGroup[materialIndex])\r\n                        indicesByGroup[materialIndex] = [];\r\n                    indicesByGroup[materialIndex].push(this.blocksMap.indices.indexCache[j]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=blocks.js.map","import { BufferGeometry, Mesh } from 'three';\r\nimport { computeBoundsTree, disposeBoundsTree, acceleratedRaycast } from 'three-mesh-bvh';\r\n// Source: https://github.com/gkjohnson/three-mesh-bvh\r\nexport class BVH {\r\n    static apply(geometry) {\r\n        if (!BVH.initialized) {\r\n            BufferGeometry.prototype.computeBoundsTree = computeBoundsTree;\r\n            BufferGeometry.prototype.disposeBoundsTree = disposeBoundsTree;\r\n            Mesh.prototype.raycast = acceleratedRaycast;\r\n            BVH.initialized = true;\r\n        }\r\n        if (!geometry.boundsTree) {\r\n            geometry.computeBoundsTree();\r\n        }\r\n    }\r\n    static dispose(geometry) {\r\n        geometry.disposeBoundsTree();\r\n    }\r\n}\r\nBVH.initialized = false;\r\n//# sourceMappingURL=bvh.js.map","import { BufferGeometry, Matrix4 } from 'three';\r\nimport { FragmentMesh } from './fragment-mesh';\r\nimport { Blocks } from './blocks';\r\nimport { BVH } from './bvh';\r\n/*\r\n * Fragments can contain one or multiple Instances of one or multiple Blocks\r\n * Each Instance is identified by an instanceID (property of THREE.InstancedMesh)\r\n * Each Block identified by a blockID (custom bufferAttribute per vertex)\r\n * Both instanceId and blockId are unsigned integers starting at 0 and going up sequentially\r\n * A specific Block of a specific Instance is an Item, identified by an itemID\r\n *\r\n * For example:\r\n * Imagine a fragment mesh with 8 instances and 2 elements (16 items, identified from A to P)\r\n * It will have instanceIds from 0 to 8, and blockIds from 0 to 2\r\n * If we raycast it, we will get an instanceId and the index of the found triangle\r\n * We can use the index to get the blockId for that triangle\r\n * Combining instanceId and blockId using the elementMap will give us the itemId\r\n * The items will look like this:\r\n *\r\n *    [ A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P ]\r\n *\r\n *  Where the criteria to sort the items is the following (Y-axis is instance, X-axis is block):\r\n *\r\n *        A  C  E  G  I  K  M  O\r\n *        B  D  F  H  J  L  N  P\r\n * */\r\nexport class Fragment {\r\n    constructor(geometry, material, count) {\r\n        this.fragments = {};\r\n        this.items = [];\r\n        this.hiddenInstances = {};\r\n        this.mesh = new FragmentMesh(geometry, material, count);\r\n        this.id = this.mesh.uuid;\r\n        this.capacity = count;\r\n        this.blocks = new Blocks(this);\r\n        BVH.apply(geometry);\r\n    }\r\n    dispose(disposeResources = true) {\r\n        this.items = null;\r\n        if (disposeResources) {\r\n            this.mesh.material.forEach((mat) => mat.dispose());\r\n            BVH.dispose(this.mesh.geometry);\r\n            this.mesh.geometry.dispose();\r\n        }\r\n        this.mesh.dispose();\r\n        this.mesh = null;\r\n        this.disposeNestedFragments();\r\n    }\r\n    getItemID(instanceID, blockID) {\r\n        const index = this.getItemIndex(instanceID, blockID);\r\n        return this.items[index];\r\n    }\r\n    getInstanceAndBlockID(itemID) {\r\n        const index = this.items.indexOf(itemID);\r\n        const instanceID = this.getInstanceIDFromIndex(index);\r\n        const blockID = index % this.blocks.count;\r\n        return { instanceID, blockID };\r\n    }\r\n    getVertexBlockID(geometry, index) {\r\n        return geometry.attributes.blockID.array[index];\r\n    }\r\n    getItemData(itemID) {\r\n        const index = this.items.indexOf(itemID);\r\n        const instanceID = Math.ceil(index / this.blocks.count);\r\n        const blockID = index % this.blocks.count;\r\n        return { instanceID, blockID };\r\n    }\r\n    getInstance(instanceID, matrix) {\r\n        return this.mesh.getMatrixAt(instanceID, matrix);\r\n    }\r\n    setInstance(instanceID, items) {\r\n        this.checkIfInstanceExist(instanceID);\r\n        this.mesh.setMatrixAt(instanceID, items.transform);\r\n        this.mesh.instanceMatrix.needsUpdate = true;\r\n        if (items.ids) {\r\n            this.saveItemsInMap(items.ids, instanceID);\r\n        }\r\n    }\r\n    addInstances(items) {\r\n        this.resizeCapacityIfNeeded(items.length);\r\n        const start = this.mesh.count;\r\n        this.mesh.count += items.length;\r\n        for (let i = 0; i < items.length; i++) {\r\n            this.setInstance(start + i, items[i]);\r\n        }\r\n    }\r\n    removeInstances(itemsIDs) {\r\n        if (this.mesh.count <= 1) {\r\n            this.clear();\r\n            return;\r\n        }\r\n        this.deleteAndRearrangeInstances(itemsIDs);\r\n        this.mesh.count -= itemsIDs.length;\r\n        this.mesh.instanceMatrix.needsUpdate = true;\r\n    }\r\n    clear() {\r\n        this.mesh.clear();\r\n        this.mesh.count = 0;\r\n        this.items = [];\r\n    }\r\n    addFragment(id, material = this.mesh.material) {\r\n        const newGeometry = this.initializeGeometry();\r\n        if (material === this.mesh.material) {\r\n            this.copyGroups(newGeometry);\r\n        }\r\n        const newFragment = new Fragment(newGeometry, material, this.capacity);\r\n        newFragment.mesh.applyMatrix4(this.mesh.matrix);\r\n        newFragment.mesh.updateMatrix();\r\n        this.fragments[id] = newFragment;\r\n        return this.fragments[id];\r\n    }\r\n    removeFragment(id) {\r\n        const fragment = this.fragments[id];\r\n        if (fragment) {\r\n            fragment.dispose(false);\r\n            delete this.fragments[id];\r\n        }\r\n    }\r\n    resetVisibility() {\r\n        if (this.blocks.count > 1) {\r\n            this.blocks.reset();\r\n        }\r\n        else {\r\n            const hiddenInstances = Object.keys(this.hiddenInstances).map((id) => parseInt(id, 10));\r\n            this.makeInstancesVisible(hiddenInstances);\r\n            this.hiddenInstances = {};\r\n        }\r\n    }\r\n    setVisibility(itemIDs, visible) {\r\n        if (this.blocks.count > 1) {\r\n            this.toggleBlockVisibility(visible, itemIDs);\r\n            this.mesh.geometry.disposeBoundsTree();\r\n            BVH.apply(this.mesh.geometry);\r\n        }\r\n        else {\r\n            this.toggleInstanceVisibility(visible, itemIDs);\r\n        }\r\n    }\r\n    resize(size) {\r\n        var _a;\r\n        const newMesh = this.createFragmentMeshWithNewSize(size);\r\n        this.capacity = size;\r\n        const oldMesh = this.mesh;\r\n        (_a = oldMesh.parent) === null || _a === void 0 ? void 0 : _a.add(newMesh);\r\n        oldMesh.removeFromParent();\r\n        this.mesh = newMesh;\r\n        oldMesh.dispose();\r\n    }\r\n    async export() {\r\n        const geometryBuffer = await this.mesh.export();\r\n        const geometry = new File([new Blob([geometryBuffer])], `${this.id}.glb`);\r\n        const fragmentData = {\r\n            matrices: Array.from(this.mesh.instanceMatrix.array),\r\n            ids: this.items\r\n        };\r\n        const dataString = JSON.stringify(fragmentData);\r\n        const data = new File([new Blob([dataString])], `${this.id}.json`);\r\n        return { geometry, data };\r\n    }\r\n    copyGroups(newGeometry) {\r\n        newGeometry.groups = [];\r\n        for (const group of this.mesh.geometry.groups) {\r\n            newGeometry.groups.push({ ...group });\r\n        }\r\n    }\r\n    initializeGeometry() {\r\n        const newGeometry = new BufferGeometry();\r\n        newGeometry.setAttribute('position', this.mesh.geometry.attributes.position);\r\n        newGeometry.setAttribute('normal', this.mesh.geometry.attributes.normal);\r\n        newGeometry.setAttribute('blockID', this.mesh.geometry.attributes.blockID);\r\n        newGeometry.setIndex(Array.from(this.mesh.geometry.index.array));\r\n        return newGeometry;\r\n    }\r\n    saveItemsInMap(ids, instanceId) {\r\n        this.checkBlockNumberValid(ids);\r\n        let counter = 0;\r\n        for (const id of ids) {\r\n            const index = this.getItemIndex(instanceId, counter);\r\n            this.items[index] = id;\r\n            counter++;\r\n        }\r\n    }\r\n    resizeCapacityIfNeeded(newSize) {\r\n        const necessaryCapacity = newSize + this.mesh.count;\r\n        if (necessaryCapacity > this.capacity) {\r\n            this.resize(necessaryCapacity);\r\n        }\r\n    }\r\n    createFragmentMeshWithNewSize(capacity) {\r\n        const newMesh = new FragmentMesh(this.mesh.geometry, this.mesh.material, capacity);\r\n        newMesh.count = this.mesh.count;\r\n        return newMesh;\r\n    }\r\n    disposeNestedFragments() {\r\n        const fragments = Object.values(this.fragments);\r\n        for (let i = 0; i < fragments.length; i++) {\r\n            fragments[i].dispose();\r\n        }\r\n        this.fragments = {};\r\n    }\r\n    checkBlockNumberValid(ids) {\r\n        if (ids.length > this.blocks.count) {\r\n            throw new Error(`You passed more items (${ids.length}) than blocks in this instance (${this.blocks.count})`);\r\n        }\r\n    }\r\n    checkIfInstanceExist(index) {\r\n        if (index > this.mesh.count) {\r\n            throw new Error(`The given index (${index}) exceeds the instances in this fragment (${this.mesh.count})`);\r\n        }\r\n    }\r\n    // Assigns the index of the removed instance to the last instance\r\n    // F.e. let there be 6 instances: (A) (B) (C) (D) (E) (F)\r\n    // If instance (C) is removed: -> (A) (B) (F) (D) (E)\r\n    deleteAndRearrangeInstances(ids) {\r\n        const deletedItems = [];\r\n        for (const id of ids) {\r\n            const deleted = this.deleteAndRearrange(id);\r\n            if (deleted) {\r\n                deletedItems.push(deleted);\r\n            }\r\n        }\r\n        for (const id of ids) {\r\n            delete this.hiddenInstances[id];\r\n        }\r\n        return deletedItems;\r\n    }\r\n    deleteAndRearrange(id) {\r\n        const index = this.items.indexOf(id);\r\n        if (index === -1)\r\n            return null;\r\n        this.mesh.count--;\r\n        const isLastElement = index === this.mesh.count;\r\n        const instanceId = this.getInstanceIDFromIndex(index);\r\n        const tempMatrix = new Matrix4();\r\n        const transform = new Matrix4();\r\n        this.mesh.getMatrixAt(instanceId, transform);\r\n        if (isLastElement) {\r\n            this.items.pop();\r\n            return { ids: [id], transform };\r\n        }\r\n        const lastElement = this.mesh.count;\r\n        this.items[index] = this.items[lastElement];\r\n        this.items.pop();\r\n        this.mesh.getMatrixAt(lastElement, tempMatrix);\r\n        this.mesh.setMatrixAt(instanceId, tempMatrix);\r\n        this.mesh.instanceMatrix.needsUpdate = true;\r\n        return { ids: [id], transform };\r\n    }\r\n    getItemIndex(instanceId, blockId) {\r\n        return instanceId * this.blocks.count + blockId;\r\n    }\r\n    getInstanceIDFromIndex(itemIndex) {\r\n        return Math.trunc(itemIndex / this.blocks.count);\r\n    }\r\n    toggleInstanceVisibility(visible, itemIDs) {\r\n        if (visible) {\r\n            this.makeInstancesVisible(itemIDs);\r\n        }\r\n        else {\r\n            this.makeInstancesInvisible(itemIDs);\r\n        }\r\n    }\r\n    makeInstancesInvisible(itemIDs) {\r\n        itemIDs = this.filterHiddenItems(itemIDs, false);\r\n        const deletedItems = this.deleteAndRearrangeInstances(itemIDs);\r\n        for (const item of deletedItems) {\r\n            if (item.ids) {\r\n                this.hiddenInstances[item.ids[0]] = item;\r\n            }\r\n        }\r\n    }\r\n    makeInstancesVisible(itemIDs) {\r\n        const items = [];\r\n        itemIDs = this.filterHiddenItems(itemIDs, true);\r\n        for (const id of itemIDs) {\r\n            items.push(this.hiddenInstances[id]);\r\n            delete this.hiddenInstances[id];\r\n        }\r\n        this.addInstances(items);\r\n    }\r\n    filterHiddenItems(itemIDs, hidden) {\r\n        const hiddenItems = Object.keys(this.hiddenInstances).map((item) => parseInt(item, 10));\r\n        return itemIDs.filter((item) => hidden ? hiddenItems.includes(item) : !hiddenItems.includes(item));\r\n    }\r\n    toggleBlockVisibility(visible, itemIDs) {\r\n        const blockIDs = itemIDs.map((id) => this.getInstanceAndBlockID(id).blockID);\r\n        if (visible) {\r\n            this.blocks.add(blockIDs, false);\r\n        }\r\n        else {\r\n            this.blocks.remove(blockIDs);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=fragment.js.map","import {\r\n    PlacedGeometry,\r\n    IfcGeometry,\r\n    IFCSPACE,\r\n    FlatMesh,\r\n    IFCOPENINGELEMENT,\r\n    IFCPRODUCTDEFINITIONSHAPE,\r\n    IFCFURNISHINGELEMENT,\r\n    IFCWINDOW,\r\n    IFCDOOR,\r\n} from 'web-ifc';\r\nimport {IfcState, IfcMesh} from '../BaseDefinitions';\r\nimport {\r\n    Color,\r\n    MeshLambertMaterial,\r\n    Matrix4,\r\n    BufferGeometry,\r\n    BufferAttribute,\r\n} from 'three';\r\nimport {BvhManager} from './BvhManager';\r\nimport {GeometryUtils} from 'bim-fragment/geometry-utils';\r\nimport {Fragment} from 'bim-fragment/fragment';\r\nimport {TypeManager} from \"./TypeManager\";\r\n\r\n// import {downloadZip} from \"client-zip\";\r\nimport {PropertyManagerAPI} from \"./properties/BaseDefinitions\";\r\nimport {IFCModel} from \"./IFCModel\";\r\nimport {IfcTypesMap} from \"./IfcTypesMap\";\r\n\r\nexport interface ParserProgress {\r\n    loaded: number;\r\n    total: number;\r\n}\r\n\r\nexport interface OptionalCategories {\r\n    [category: number]: boolean\r\n}\r\n\r\nexport class FragmentGroup extends IFCModel {\r\n    fragments: Fragment[] = [];\r\n    levelRelationships: any;\r\n    allTypes: any;\r\n    itemTypes: any;\r\n    floorsProperties: any;\r\n}\r\n\r\nexport interface GeometriesByMaterial {\r\n    [materialID: string]: {\r\n        material: MeshLambertMaterial,\r\n        geometries: BufferGeometry[]\r\n    }\r\n}\r\n\r\n/**\r\n * Reads all the geometry of the IFC file and generates an optimized `THREE.Mesh`.\r\n */\r\nexport class FragmentParser {\r\n\r\n    // Categories that always will be instanced\r\n    instancedCategories = new Set<number>();\r\n\r\n    // Generate at least one chunk by floor\r\n    splitByFloors = true;\r\n\r\n    // Generate at least one chunk by category\r\n    splitByCategory = true;\r\n\r\n    loadedModels = 0;\r\n\r\n    optionalCategories: OptionalCategories = {\r\n        [IFCSPACE]: true,\r\n        [IFCOPENINGELEMENT]: false,\r\n    };\r\n\r\n    private items: {\r\n        [geometryID: string]: {\r\n            instances: { id: number; matrix: Matrix4 }[];\r\n            geometriesByMaterial: { [materialID: string]: BufferGeometry[] }\r\n            referenceMatrix: Matrix4;\r\n        }\r\n    } = {};\r\n\r\n    private materials: { [materialID: string]: MeshLambertMaterial } = {};\r\n\r\n    // private geometriesByMaterials: GeometriesByMaterial = {};\r\n\r\n    private loadingState = {\r\n        total: 0,\r\n        current: 0,\r\n        step: 0.1,\r\n    };\r\n\r\n    // Represents the index of the model in webIfcAPI\r\n    private currentWebIfcID = -1;\r\n    // When using JSON data for optimization, webIfcAPI is reinitialized every time a model is loaded\r\n    // This means that currentID is always 0, while currentModelID is the real index of stored models\r\n    private currentModelID = -1;\r\n\r\n    // BVH is optional because when using workers we have to apply it in the main thread,\r\n    // once the model has been serialized and reconstructed\r\n    constructor(private state: IfcState, private properties?: PropertyManagerAPI, private types?: TypeManager, private BVH?: BvhManager) {\r\n    }\r\n\r\n    async setupOptionalCategories(config: OptionalCategories) {\r\n        this.optionalCategories = config;\r\n    }\r\n\r\n    async parse(buffer: any, coordinationMatrix?: number[]) {\r\n        if (this.state.api.wasmModule === undefined) {\r\n            await this.state.api.Init();\r\n        }\r\n        await this.newIfcModel(buffer);\r\n        this.loadedModels++;\r\n        if (coordinationMatrix) {\r\n            await this.state.api.SetGeometryTransformation(this.currentWebIfcID, coordinationMatrix);\r\n        }\r\n        return await this.loadAllGeometry(this.currentWebIfcID);\r\n    }\r\n\r\n    getAndClearErrors(_modelId: number) {\r\n        // return this.state.api.GetAndClearErrors(modelId);\r\n    }\r\n\r\n    private notifyProgress(loaded: number, total: number) {\r\n        if (this.state.onProgress) {\r\n            this.state.onProgress({loaded, total});\r\n        }\r\n    }\r\n\r\n    private async newIfcModel(buffer: any) {\r\n        const data = new Uint8Array(buffer);\r\n        this.currentWebIfcID = await this.state.api.OpenModel(data, this.state.webIfcSettings);\r\n        this.currentModelID = this.state.useJSON ? this.loadedModels : this.currentWebIfcID;\r\n        this.state.models[this.currentModelID] = {\r\n            modelID: this.currentModelID,\r\n            mesh: {} as IfcMesh,\r\n            types: {},\r\n            jsonData: {},\r\n        };\r\n    }\r\n\r\n    private async loadAllGeometry(modelID: number) {\r\n        this.addOptionalCategories(modelID);\r\n        await this.initializeLoadingState(modelID);\r\n\r\n        this.instancedCategories.add(IFCFURNISHINGELEMENT);\r\n        this.instancedCategories.add(IFCWINDOW);\r\n        this.instancedCategories.add(IFCDOOR);\r\n\r\n        this.state.api.StreamAllMeshes(modelID, (mesh: FlatMesh) => {\r\n            this.updateLoadingState();\r\n            // only during the lifetime of this function call, the geometry is available in memory\r\n            this.streamMesh(modelID, mesh);\r\n        });\r\n\r\n        if (this.splitByCategory && this.types) {\r\n            await this.types.getAllTypes();\r\n        }\r\n\r\n        const floorProperties: any[] = [];\r\n        let tree: { [itemID: number]: number } = {};\r\n        if (this.splitByFloors && this.properties) {\r\n            const project = await this.properties.getSpatialStructure(modelID);\r\n            const floors = project.children[0].children[0].children;\r\n            for (const floor of floors) {\r\n\r\n                const props = await this.properties.getItemProperties(modelID, floor.expressID, false);\r\n                floorProperties.push(props);\r\n\r\n                for (const item of floor.children) {\r\n                    tree[item.expressID] = floor.expressID;\r\n                    if (item.children.length) {\r\n                        for (const child of item.children) {\r\n                            tree[child.expressID] = floor.expressID;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        const model = new FragmentGroup();\r\n        const fragmentsData = Object.values(this.items);\r\n\r\n        const uniqueItems: {\r\n            [category: string]: {\r\n                [floor: string]: {\r\n                    [materialID: string]: BufferGeometry[]\r\n                }\r\n            }\r\n        } = {};\r\n\r\n        const expressIdBlockIdMap: {\r\n            [category: number]: {\r\n                [level: number]: {\r\n                    [expressID: number]: number\r\n                }\r\n            }\r\n        } = [];\r\n        let blockCounter = 0;\r\n\r\n        for (const data of fragmentsData) {\r\n            const size = data.instances.length;\r\n\r\n            const id = data.instances[0].id;\r\n            const typeNumber = this.state.models[0].types[id];\r\n\r\n            // Gather unique items to merge them together in a single fragment\r\n            const isUnique = size === 1;\r\n\r\n            // Each repeated item will be a separate fragment\r\n            if (!isUnique || this.instancedCategories.has(typeNumber)) {\r\n\r\n                const mats = Object.keys(data.geometriesByMaterial).map(id => this.materials[id]);\r\n                const geoms = Object.values(data.geometriesByMaterial);\r\n                const merged = GeometryUtils.merge(geoms);\r\n\r\n                const fragment = new Fragment(merged, mats, size);\r\n                for (let i = 0; i < size; i++) {\r\n                    const instance = data.instances[i];\r\n                    fragment.setInstance(i, {\r\n                        ids: [instance.id],\r\n                        transform: instance.matrix\r\n                    })\r\n                }\r\n                model.fragments.push(fragment);\r\n                model.add(fragment.mesh);\r\n\r\n            } else {\r\n\r\n                // Unique items will be collapsed to save draw calls\r\n\r\n                for (const matID in data.geometriesByMaterial) {\r\n\r\n                    const id = data.instances[0].id;\r\n                    const category = this.splitByCategory ? this.state.models[modelID].types[id] : -1;\r\n                    if (!uniqueItems[category]) uniqueItems[category] = {};\r\n\r\n                    const level = this.splitByFloors ? tree[id] : -1;\r\n                    if (!uniqueItems[category][level]) uniqueItems[category][level] = {};\r\n\r\n                    if (!uniqueItems[category][level][matID]) uniqueItems[category][level][matID] = [];\r\n                    const geometries = data.geometriesByMaterial[matID];\r\n                    const instance = data.instances[0];\r\n\r\n                    for (const geom of geometries) {\r\n                        geom.userData.id = id;\r\n                        uniqueItems[category][level][matID].push(geom);\r\n\r\n                        geom.applyMatrix4(instance.matrix);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        for (const categoryString in uniqueItems) {\r\n            for (const levelString in uniqueItems[categoryString]) {\r\n                const category = parseInt(categoryString);\r\n                const level = parseInt(levelString);\r\n                if (!level || !category) continue;\r\n                const mats = Object.keys(uniqueItems[category][level]).map(id => this.materials[id]);\r\n                const geometries = Object.values(uniqueItems[category][level]);\r\n\r\n                let size = 0;\r\n                const itemsIDs = new Set<number>()\r\n                for (const geometryGroup of geometries) {\r\n                    for (const geom of geometryGroup) {\r\n                        size += geom.attributes.position.count;\r\n                        itemsIDs.add(geom.userData.id);\r\n                    }\r\n                }\r\n\r\n                const buffer = new Uint32Array(size);\r\n                const currentIDs = new Map<number, number>();\r\n                let offset = 0;\r\n                let blockID = 0;\r\n\r\n                for (const geometryGroup of geometries) {\r\n                    for (const geom of geometryGroup) {\r\n                        if (!currentIDs.has(geom.userData.id)) {\r\n                            currentIDs.set(geom.userData.id, blockID++);\r\n                        }\r\n                        const size = geom.attributes.position.count;\r\n                        const currentBlockID = currentIDs.get(geom.userData.id) as number;\r\n                        buffer.fill(currentBlockID, offset, offset + size);\r\n                        offset += size;\r\n                    }\r\n                }\r\n\r\n\r\n                const merged = GeometryUtils.merge(geometries);\r\n                merged.setAttribute('blockID', new BufferAttribute(buffer, 1));\r\n                const mergedFragment = new Fragment(merged, mats, 1);\r\n                const ids = Array.from(itemsIDs);\r\n\r\n                mergedFragment.setInstance(0, {ids, transform: new Matrix4()});\r\n                model.fragments.push(mergedFragment);\r\n                model.add(mergedFragment.mesh);\r\n            }\r\n        }\r\n\r\n        // const files: File[] = [];\r\n        // for (const frag of model.fragments) {\r\n        //     const file = await frag.export();\r\n        //     files.push(file.geometry, file.data);\r\n        // }\r\n        //\r\n        // files.push(new File([JSON.stringify(tree)], 'levels-relationship.json'));\r\n        // files.push(new File([JSON.stringify(this.state.models[modelID].types)], 'model-types.json'));\r\n        // files.push(new File([JSON.stringify(IfcTypesMap)], 'all-types.json'));\r\n        // files.push(new File([JSON.stringify(floorProperties)], 'levels-properties.json'));\r\n\r\n        model.levelRelationships = tree;\r\n        model.allTypes = IfcTypesMap;\r\n        model.itemTypes = this.state.models[modelID].types;\r\n        model.floorsProperties = floorProperties;\r\n\r\n        // await this.downloadFiles(files);\r\n\r\n        for (let data of fragmentsData) {\r\n            (data.geometriesByMaterial as any) = null;\r\n            (data.instances as any) = null;\r\n            (data.referenceMatrix as any) = null;\r\n        }\r\n\r\n        this.items = {};\r\n        this.materials = {};\r\n\r\n        this.notifyLoadingEnded();\r\n\r\n        this.state.models[this.currentModelID].mesh = model as any;\r\n        return model;\r\n    }\r\n\r\n    private async initializeLoadingState(modelID: number) {\r\n        const shapes = await this.state.api.GetLineIDsWithType(modelID, IFCPRODUCTDEFINITIONSHAPE);\r\n        this.loadingState.total = shapes.size();\r\n        this.loadingState.current = 0;\r\n        this.loadingState.step = 0.1;\r\n    }\r\n\r\n    private notifyLoadingEnded() {\r\n        this.notifyProgress(this.loadingState.total, this.loadingState.total);\r\n    }\r\n\r\n    private updateLoadingState() {\r\n        const realCurrentItem = Math.min(this.loadingState.current++, this.loadingState.total);\r\n        if (realCurrentItem / this.loadingState.total >= this.loadingState.step) {\r\n            const currentProgress = Math.ceil(this.loadingState.total * this.loadingState.step);\r\n            this.notifyProgress(currentProgress, this.loadingState.total);\r\n            this.loadingState.step += 0.1;\r\n        }\r\n    }\r\n\r\n    // Some categories (like IfcSpace and IfcOpeningElement) need to be set explicitly\r\n    private addOptionalCategories(modelID: number) {\r\n\r\n        const optionalTypes: number[] = [];\r\n\r\n        for (let key in this.optionalCategories) {\r\n            if (this.optionalCategories.hasOwnProperty(key)) {\r\n                const category = parseInt(key);\r\n                if (this.optionalCategories[category]) {\r\n                    optionalTypes.push(category);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.state.api.StreamAllMeshesWithTypes(this.currentWebIfcID, optionalTypes, (mesh: FlatMesh) => {\r\n            this.streamMesh(modelID, mesh);\r\n        });\r\n    }\r\n\r\n    private streamMesh(modelID: number, mesh: FlatMesh) {\r\n        const placedGeometries = mesh.geometries;\r\n        const size = placedGeometries.size();\r\n\r\n        let geometryID = '';\r\n        let referenceMatrix = new Matrix4();\r\n        let isFirstMatrix = true;\r\n\r\n        const geoms: {\r\n            [color: string]: BufferGeometry[]\r\n        } = {};\r\n\r\n        // Find the ID of this geometry. The ID is a concatenation of all the IDs\r\n        // of the individual geometries that compose this object\r\n        for (let i = 0; i < size; i++) {\r\n            const placedGeometry = placedGeometries.get(i);\r\n            geometryID += placedGeometry.geometryExpressID;\r\n        }\r\n\r\n        // If it's the first time that we find this geometry\r\n        if (!this.items[geometryID]) {\r\n\r\n            // Get all buffergeometries\r\n            for (let i = 0; i < size; i++) {\r\n                const placedGeometry = placedGeometries.get(i);\r\n                const geom = this.getBufferGeometry(modelID, placedGeometry);\r\n                if (!geom) {\r\n                    return;\r\n                }\r\n\r\n                const matrix = this.getMeshMatrix(placedGeometry.flatTransformation);\r\n\r\n                // We apply the tranformation only to the first geometry, and then\r\n                // apply the inverse to the rest of the instances\r\n                geom.applyMatrix4(matrix);\r\n\r\n                // We store this matrix to use it as a reference point. We'll apply this\r\n                // later to the rest of the instances\r\n                if (isFirstMatrix) {\r\n                    const inverse = new Matrix4().copy(matrix).invert();\r\n                    referenceMatrix = inverse;\r\n                    isFirstMatrix = false;\r\n                }\r\n\r\n                // Save this geometry by material\r\n                const color = placedGeometry.color;\r\n                const colorID = `${color.x}${color.y}${color.z}${color.w}`;\r\n\r\n                // Share materials across the model\r\n                if (!this.materials[colorID]) {\r\n                    this.materials[colorID] = new MeshLambertMaterial({\r\n                        color: new Color(color.x, color.y, color.z),\r\n                        transparent: color.w !== 1,\r\n                        opacity: color.w\r\n                    })\r\n                }\r\n\r\n                if (!geoms[colorID]) {\r\n                    geoms[colorID] = [geom];\r\n                } else {\r\n                    geoms[colorID].push(geom);\r\n                }\r\n            }\r\n\r\n            // Merge the geometries by material\r\n            // const geometriesByMaterial = Object.values(geoms);\r\n            // const materials = geometriesByMaterial.map(item => item.material);\r\n            // const geometries = geometriesByMaterial.map(item => item.geometries);\r\n            // const geometry = GeometryUtils.merge(geometries);\r\n\r\n            this.items[geometryID] = {\r\n                instances: [{\r\n                    id: mesh.expressID,\r\n                    matrix: new Matrix4(),\r\n                }],\r\n                geometriesByMaterial: geoms,\r\n                referenceMatrix\r\n            };\r\n\r\n\r\n            // If it's not the first time we find this geometry, just find out its\r\n            // transformation relative to the first item that was found\r\n        } else {\r\n\r\n            const referenceMatrix = this.items[geometryID].referenceMatrix;\r\n            const placedGeometry = placedGeometries.get(0);\r\n            const transform = this.getMeshMatrix(placedGeometry.flatTransformation);\r\n            transform.multiply(referenceMatrix);\r\n\r\n            this.items[geometryID].instances.push({\r\n                id: mesh.expressID,\r\n                matrix: transform\r\n            })\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // private getPlacedGeometry(modelID: number, expressID: number, placedGeometry: PlacedGeometry) {\r\n    //     const geometry = this.getBufferGeometry(modelID, expressID, placedGeometry);\r\n    //     const mesh = new Mesh(geometry);\r\n    //     mesh.matrix = this.getMeshMatrix(placedGeometry.flatTransformation);\r\n    //     mesh.matrixAutoUpdate = false;\r\n    //     return mesh;\r\n    // }\r\n\r\n    private getBufferGeometry(modelID: number, placedGeometry: PlacedGeometry) {\r\n        const geometry = this.state.api.GetGeometry(modelID, placedGeometry.geometryExpressID) as IfcGeometry;\r\n        const verts = this.state.api.GetVertexArray(geometry.GetVertexData(), geometry.GetVertexDataSize()) as Float32Array;\r\n        if (!verts.length) return null;\r\n        const indices = this.state.api.GetIndexArray(geometry.GetIndexData(), geometry.GetIndexDataSize()) as Uint32Array;\r\n        if (!indices.length) return null;\r\n        const buffer = this.ifcGeometryToBuffer(verts, indices);\r\n        //@ts-ignore\r\n        geometry.delete();\r\n        return buffer;\r\n    }\r\n\r\n    private getMeshMatrix(matrix: Array<number>) {\r\n        const mat = new Matrix4();\r\n        mat.fromArray(matrix);\r\n        return mat;\r\n    }\r\n\r\n    private ifcGeometryToBuffer(vertexData: Float32Array, indexData: Uint32Array) {\r\n        const geometry = new BufferGeometry();\r\n\r\n        const posFloats = new Float32Array(vertexData.length / 2);\r\n        const normFloats = new Float32Array(vertexData.length / 2);\r\n        // const idAttribute = new Uint32Array(vertexData.length / 6);\r\n\r\n        for (let i = 0; i < vertexData.length; i += 6) {\r\n            posFloats[i / 2] = vertexData[i];\r\n            posFloats[i / 2 + 1] = vertexData[i + 1];\r\n            posFloats[i / 2 + 2] = vertexData[i + 2];\r\n\r\n            normFloats[i / 2] = vertexData[i + 3];\r\n            normFloats[i / 2 + 1] = vertexData[i + 4];\r\n            normFloats[i / 2 + 2] = vertexData[i + 5];\r\n\r\n            // idAttribute[i / 6] = expressID;\r\n        }\r\n\r\n        geometry.setAttribute(\r\n            'position',\r\n            new BufferAttribute(posFloats, 3));\r\n        geometry.setAttribute(\r\n            'normal',\r\n            new BufferAttribute(normFloats, 3));\r\n\r\n        geometry.setIndex(new BufferAttribute(indexData, 1));\r\n        return geometry;\r\n    }\r\n}","import * as WebIFC from 'web-ifc';\r\nimport { IFCParser, ParserAPI, ParserProgress } from './IFCParser';\r\nimport { SubsetManager } from './subsets/SubsetManager';\r\nimport { PropertyManager } from './properties/PropertyManager';\r\nimport { IfcElements } from './IFCElementsMap';\r\nimport { TypeManager } from './TypeManager';\r\nimport { SubsetConfig, IfcState, JSONObject } from '../BaseDefinitions';\r\nimport {BufferGeometry, Material, Matrix4, Scene} from 'three';\r\nimport { IFCModel } from './IFCModel';\r\nimport { BvhManager } from './BvhManager';\r\nimport { LoaderSettings } from 'web-ifc';\r\nimport { IFCWorkerHandler } from '../web-workers/IFCWorkerHandler';\r\nimport { PropertyManagerAPI } from './properties/BaseDefinitions';\r\nimport { MemoryCleaner } from './MemoryCleaner';\r\nimport { IFCUtils } from './IFCUtils';\r\nimport { Data } from './sequence/Data'\r\nimport { IfcTypesMap } from './IfcTypesMap';\r\nimport {FragmentParser} from \"./FragmentParser\";\r\n\r\n/**\r\n * Contains all the logic to work with the loaded IFC files (select, edit, etc).\r\n */\r\nexport class IFCManager {\r\n    state: IfcState = {\r\n        models: [],\r\n        api: new WebIFC.IfcAPI(),\r\n        useJSON: false,\r\n        worker: { active: false, path: '' }\r\n    };\r\n\r\n    BVH = new BvhManager();\r\n    typesMap: {[key: number]: string} = IfcTypesMap;\r\n    parser: ParserAPI = new IFCParser(this.state, this.BVH);\r\n    subsets = new SubsetManager(this.state, this.BVH);\r\n    utils = new IFCUtils(this.state);\r\n    sequenceData = new Data(this.state);\r\n    properties: PropertyManagerAPI = new PropertyManager(this.state);\r\n    types = new TypeManager(this.state);\r\n\r\n    fragments = new FragmentParser(this.state, this.properties, this.types, this.BVH);\r\n    useFragments = false;\r\n\r\n    private cleaner = new MemoryCleaner(this.state);\r\n    private worker?: IFCWorkerHandler;\r\n\r\n    /**\r\n     * Returns the underlying web-ifc API.\r\n     */\r\n    get ifcAPI() {\r\n        return this.state.api;\r\n    }\r\n\r\n    // SETUP - all the logic regarding the configuration of web-ifc-three\r\n\r\n    async parse(buffer: ArrayBuffer) {\r\n        let model: IFCModel;\r\n        if(this.useFragments) {\r\n            model = await this.fragments.parse(buffer, this.state.coordinationMatrix?.toArray()) as IFCModel;\r\n        } else {\r\n            model = await this.parser.parse(buffer, this.state.coordinationMatrix?.toArray()) as IFCModel;\r\n        }\r\n        model.setIFCManager(this);\r\n        // this.state.useJSON ? await this.disposeMemory() : await this.types.getAllTypes(this.worker);\r\n        await this.types.getAllTypes(this.worker);\r\n        return model;\r\n    }\r\n\r\n    /**\r\n     * Sets the relative path of web-ifc.wasm file in the project.\r\n     * Beware: you **must** serve this file in your page; this means\r\n     * that you have to copy this files from *node_modules/web-ifc*\r\n     * to your deployment directory.\r\n     *\r\n     * If you don't use this methods,\r\n     * IFC.js assumes that you are serving it in the root directory.\r\n     *\r\n     * Example if web-ifc.wasm is in dist/wasmDir:\r\n     * `ifcLoader.setWasmPath(\"dist/wasmDir/\");`\r\n     *\r\n     * @path Relative path to web-ifc.wasm.\r\n     */\r\n    async setWasmPath(path: string) {\r\n        this.state.api.SetWasmPath(path);\r\n        this.state.wasmPath = path;\r\n    }\r\n\r\n    /**\r\n     * Makes object picking a lot faster\r\n     * Courtesy of gkjohnson's [work](https://github.com/gkjohnson/three-mesh-bvh).\r\n     * Import these objects from his library and pass them as arguments. IFC.js takes care of the rest!\r\n     */\r\n    setupThreeMeshBVH(computeBoundsTree: any, disposeBoundsTree: any, acceleratedRaycast: any) {\r\n        this.BVH.initializeMeshBVH(computeBoundsTree, disposeBoundsTree, acceleratedRaycast);\r\n    }\r\n\r\n    /**\r\n     * Sets a callback function that is called every 10% of IFC loaded.\r\n     * @onProgress callback function\r\n     */\r\n    setOnProgress(onProgress: (event: ParserProgress) => void) {\r\n        this.state.onProgress = onProgress;\r\n    }\r\n\r\n\r\n    /**\r\n     * Sets a coordination matrix to be applied when loading geometry.\r\n     * @matrix THREE.Matrix4\r\n     */\r\n    setupCoordinationMatrix(matrix: Matrix4){\r\n        this.state.coordinationMatrix = matrix;\r\n    }\r\n\r\n    /**\r\n     * Clears the coordination matrix that is applied when loading geometry.\r\n     */\r\n    clearCoordinationMatrix(){\r\n        delete this.state.coordinationMatrix;\r\n    }\r\n\r\n    /**\r\n     * Applies a configuration for [web-ifc](https://ifcjs.github.io/info/docs/Guide/web-ifc/Introduction).\r\n     */\r\n    async applyWebIfcConfig(settings: LoaderSettings) {\r\n        this.state.webIfcSettings = settings;\r\n        if (this.state.worker.active && this.worker) {\r\n            await this.worker.workerState.updateStateWebIfcSettings();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Uses web workers, making the loader non-blocking.\r\n     * @active Wether to use web workers or not.\r\n     * @path Relative path to the web worker file. Necessary if active=true.\r\n     */\r\n    async useWebWorkers(active: boolean, path?: string) {\r\n        if (this.state.worker.active === active) return;\r\n        // @ts-ignore\r\n        this.state.api = null;\r\n        if (active) {\r\n            if (!path) throw new Error('You must provide a path to the web worker.');\r\n            this.state.worker.active = active;\r\n            this.state.worker.path = path;\r\n            await this.initializeWorkers();\r\n            const wasm = this.state.wasmPath;\r\n            if(wasm) await this.setWasmPath(wasm);\r\n        } else {\r\n            this.state.api = new WebIFC.IfcAPI();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @deprecated This approach had sense when the compute-heavy operations were blocking. If you are facing performance issues, you can either use webworkers or use the approach used in web-ifc-viewer to work with JSON and glTF. If you have any question regarding this, check out the docs or ask us direclty.\r\n     * Enables the JSON mode (which consumes way less memory) and eliminates the WASM data.\r\n     * Only use this in the following scenarios:\r\n     * - If you don't need to access the properties of the IFC\r\n     * - If you will provide the properties as JSON.\r\n     * @useJSON: Wether to use the JSON mode or not.\r\n     */\r\n    async useJSONData(useJSON = true) {\r\n        this.state.useJSON = useJSON;\r\n        if (useJSON) {\r\n            await this.worker?.workerState.updateStateUseJson();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @deprecated This approach had sense when the compute-heavy operations were blocking. If you are facing performance issues, you can either use webworkers or use the approach used in web-ifc-viewer to work with JSON and glTF. If you have any question regarding this, check out the docs or ask us direclty.\r\n     * Adds the properties of a model as JSON data. If you are using web workers, use\r\n     * `loadJsonDataFromWorker()` instead to avoid overheads.\r\n     * @modelID ID of the IFC model.\r\n     * @data: data as an object where the keys are the expressIDs and the values the properties.\r\n     */\r\n    async addModelJSONData(modelID: number, data: { [id: number]: JSONObject }) {\r\n        const model = this.state.models[modelID];\r\n        if (!model) throw new Error('The specified model for the JSON data does not exist');\r\n        if (this.state.worker.active) {\r\n            await this.worker?.workerState.updateModelStateJsonData(modelID, data);\r\n        } else {\r\n            model.jsonData = data;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @deprecated This approach had sense when the compute-heavy operations were blocking. If you are facing performance issues, you can either use webworkers or use the approach used in web-ifc-viewer to work with JSON and glTF. If you have any question regarding this, check out the docs or ask us direclty.\r\n     * Loads the data of an IFC model from a JSON file directly from a web worker. If you are not using\r\n     * web workers, use `addModelJSONData()` instead.\r\n     * @modelID ID of the IFC model.\r\n     * @path: the path to the JSON file **relative to the web worker file**.\r\n     */\r\n    async loadJsonDataFromWorker(modelID: number, path: string) {\r\n        if (this.state.worker.active) {\r\n            await this.worker?.workerState.loadJsonDataFromWorker(modelID, path);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Closes the specified model and deletes it from the [scene](https://threejs.org/docs/#api/en/scenes/Scene).\r\n     * @modelID ID of the IFC model.\r\n     * @scene Scene where the model is (if it's located in a scene).\r\n     */\r\n    close(modelID: number, scene?: Scene) {\r\n        this.state.api.CloseModel(modelID);\r\n        if (scene) scene.remove(this.state.models[modelID].mesh);\r\n        delete this.state.models[modelID];\r\n    }\r\n\r\n    /**\r\n     * Gets the **Express ID** to which the given face belongs.\r\n     * This ID uniquely identifies this entity within this IFC file.\r\n     * @geometry The geometry IFC model.\r\n     * @faceIndex The index of the face of a geometry.You can easily get this index using the [Raycaster](https://threejs.org/docs/#api/en/core/Raycaster).\r\n     */\r\n    getExpressId(geometry: BufferGeometry, faceIndex: number) {\r\n        return this.properties.getExpressId(geometry, faceIndex);\r\n    }\r\n\r\n    /**\r\n     * Returns all items of the specified type. You can import\r\n     * the types from *web-ifc*.\r\n     *\r\n     * Example to get all the standard walls of a project:\r\n     * ```js\r\n     * import { IFCWALLSTANDARDCASE } from 'web-ifc';\r\n     * const walls = ifcLoader.getAllItemsOfType(IFCWALLSTANDARDCASE);\r\n     * ```\r\n     * @modelID ID of the IFC model.\r\n     * @type type of IFC items to get.\r\n     * @verbose If false (default), this only gets IDs. If true, this also gets the native properties of all the fetched items.\r\n     */\r\n    getAllItemsOfType(modelID: number, type: number, verbose: boolean) {\r\n        return this.properties.getAllItemsOfType(modelID, type, verbose);\r\n    }\r\n\r\n    /**\r\n     * Gets the native properties of the given element.\r\n     * @modelID ID of the IFC model.\r\n     * @id Express ID of the element.\r\n     * @recursive Wether you want to get the information of the referenced elements recursively.\r\n     */\r\n    getItemProperties(modelID: number, id: number, recursive = false) {\r\n        return this.properties.getItemProperties(modelID, id, recursive);\r\n    }\r\n\r\n    /**\r\n     * Gets the [property sets](https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/schema/ifckernel/lexical/ifcpropertyset.htm)\r\n     * assigned to the given element.\r\n     * @modelID ID of the IFC model.\r\n     * @id Express ID of the element.\r\n     * @recursive If true, this gets the native properties of the referenced elements recursively.\r\n     */\r\n    getPropertySets(modelID: number, id: number, recursive = false) {\r\n        return this.properties.getPropertySets(modelID, id, recursive);\r\n    }\r\n\r\n    /**\r\n     * Gets the properties of the type assigned to the element.\r\n     * For example, if applied to a wall (IfcWall), this would get back the information\r\n     * contained in the IfcWallType assigned to it, if any.\r\n     * @modelID ID of the IFC model.\r\n     * @id Express ID of the element.\r\n     * @recursive If true, this gets the native properties of the referenced elements recursively.\r\n     */\r\n    getTypeProperties(modelID: number, id: number, recursive = false) {\r\n        return this.properties.getTypeProperties(modelID, id, recursive);\r\n    }\r\n\r\n    /**\r\n     * Gets the materials assigned to the given element.\r\n     * @modelID ID of the IFC model.\r\n     * @id Express ID of the element.\r\n     * @recursive If true, this gets the native properties of the referenced elements recursively.\r\n     */\r\n    getMaterialsProperties(modelID: number, id: number, recursive = false) {\r\n        return this.properties.getMaterialsProperties(modelID, id, recursive);\r\n    }\r\n\r\n    /**\r\n     * Gets the ifc type of the specified item.\r\n     * @modelID ID of the IFC model.\r\n     * @id Express ID of the element.\r\n     */\r\n    getIfcType(modelID: number, id: number) {\r\n        const typeID = this.state.models[modelID].types[id];\r\n        return IfcElements[typeID];\r\n    }\r\n\r\n    /**\r\n     * Gets the spatial structure of the project. The\r\n     * [spatial structure](https://standards.buildingsmart.org/IFC/DEV/IFC4_2/FINAL/HTML/schema/ifcproductextension/lexical/ifcspatialstructureelement.htm)\r\n     * is the hierarchical structure that organizes every IFC project (all physical items\r\n     * are referenced to an element of the spatial structure). It is formed by\r\n     * one IfcProject that contains one or more IfcSites, that contain one or more\r\n     * IfcBuildings, that contain one or more IfcBuildingStoreys, that contain\r\n     * one or more IfcSpaces.\r\n     * @modelID ID of the IFC model.\r\n     */\r\n    getSpatialStructure(modelID: number, includeProperties?: boolean) {\r\n        return this.properties.getSpatialStructure(modelID, includeProperties);\r\n    }\r\n\r\n    /**\r\n     * Gets the mesh of the subset with the specified [material](https://threejs.org/docs/#api/en/materials/Material).\r\n     * If no material is given, this returns the subset with the original materials.\r\n     * @modelID ID of the IFC model.\r\n     * @material Material assigned to the subset (if any).\r\n     * @customId Optional identifier of the subset.\r\n     */\r\n    getSubset(modelID: number, material?: Material, customId?: string) {\r\n        return this.subsets.getSubset(modelID, material, customId);\r\n    }\r\n\r\n    /**\r\n     * Removes the specified subset.\r\n     * @modelID ID of the IFC model.\r\n     * @parent The parent where the subset is (can be any `THREE.Object3D`).\r\n     * @material Material assigned to the subset, if any.\r\n     */\r\n    removeSubset(modelID: number, material?: Material, customID?: string) {\r\n        this.subsets.removeSubset(modelID, material, customID);\r\n    }\r\n\r\n    /**\r\n     * Creates a new geometric subset.\r\n     * @config A configuration object with the following options:\r\n     * - **scene**: `THREE.Object3D` where the model is located.\r\n     * - **modelID**: ID of the model.\r\n     * - **ids**: Express IDs of the items of the model that will conform the subset.\r\n     * - **removePrevious**: wether to remove the previous subset of this model with this material.\r\n     * - **material**: (optional) wether to apply a material to the subset.\r\n     * - **customID**: (optional) custom identifier to distinguish subsets of the same model with the same material.\r\n     */\r\n    createSubset(config: SubsetConfig) {\r\n        return this.subsets.createSubset(config);\r\n    }\r\n\r\n    /**\r\n     * Removes the specified items from the geometry of a subset.\r\n     * @modelID ID of the IFC model.\r\n     * @ids Express IDs of the items of the model that will conform the subset.\r\n     * @material (optional) Material assigned to the subset, if any.\r\n     * @customID (optional) custom identifier to distinguish subsets of the same model with the same material.\r\n     */\r\n    removeFromSubset(modelID: number, ids: number[], customID?: string, material?: Material) {\r\n        return this.subsets.removeFromSubset(modelID, ids, customID, material);\r\n    }\r\n\r\n    /**\r\n     * Removes all the geometry of a subset.\r\n     * @modelID ID of the IFC model.\r\n     * @ids Express IDs of the items of the model that will conform the subset.\r\n     * @material (optional) Material assigned to the subset, if any.\r\n     * @customID (optional) custom identifier to distinguish subsets of the same model with the same material.\r\n     */\r\n    clearSubset(modelID: number, customID?: string, material?: Material) {\r\n        return this.subsets.clearSubset(modelID, customID, material);\r\n    }\r\n\r\n\r\n\r\n\r\n    // UTILITIES - Miscelaneus logic for various purposes\r\n\r\n    /**\r\n    * Returns the IFC class name of an instance if the optional parameter is not provided.\r\n    * If an entit class is provided, it will check if an instance belongs to the class.\r\n    * @modelID ID of the IFC model.\r\n    * @entityClass IFC Class name.\r\n    */\r\n    async isA(entity: any, entity_class: string) {\r\n        return this.utils.isA(entity, entity_class);\r\n    }\r\n\r\n    async getSequenceData(modelID: number) {\r\n        await this.sequenceData.load(modelID);\r\n        return this.sequenceData;\r\n    }\r\n\r\n\r\n    /**\r\n    * Returns the IFC objects filtered by IFC Type and wrapped with the entity_instance class.\r\n    * If an IFC type class has subclasses, all entities of those subclasses are also returned.\r\n    * @modelID ID of the IFC model.\r\n    * @entityClass IFC Class name.\r\n    */\r\n    async byType(modelID: number, entityClass: string) {\r\n        return this.utils.byType(modelID, entityClass);\r\n    }\r\n\r\n    /**\r\n    * Returns the IFC objects filtered by IFC ID.\r\n    * @modelID ID of the IFC model.\r\n    * @id Express ID of the element.\r\n    */\r\n    async byId(modelID: number, id: number) {\r\n        return this.utils.byId(modelID, id);\r\n    }\r\n\r\n    /**\r\n    * Returns the IFC objects filtered by IFC Type and wrapped with the entity_instance class.\r\n    * If an IFC type class has subclasses, all entities of those subclasses are also returned.\r\n    * @modelID ID of the IFC model.\r\n    * @entityClass IFC Class name.\r\n    */\r\n    async idsByType(modelID: number, entityClass: string) {\r\n        return this.utils.idsByType(modelID, entityClass);\r\n    }\r\n\r\n\r\n    // MISC - Miscelaneus logic for various purposes\r\n\r\n    /**\r\n     * Disposes all memory used by the IFCLoader, including WASM memory and the web worker.\r\n     * Use this if you want to destroy the object completely.\r\n     * If you want to load an IFC later, you'll need to create a new instance.\r\n     */\r\n    async dispose() {\r\n        IFCModel.dispose();\r\n        await this.cleaner.dispose();\r\n        this.subsets.dispose();\r\n        if(this.worker && this.state.worker.active) await this.worker.terminate();\r\n        (this.state as any) = null;\r\n    }\r\n\r\n    /**\r\n     * @deprecated This approach had sense when the compute-heavy operations were blocking. If you are facing performance issues, you can either use webworkers or use the approach used in web-ifc-viewer to work with JSON and glTF. If you have any question regarding this, check out the docs or ask us direclty.\r\n     * Completely releases the WASM memory, thus drastically decreasing the memory use of the app.\r\n     * Only use this in the following scenarios:\r\n     * - If you don't need to access the properties of the IFC\r\n     * - If you will provide the properties as JSON.\r\n     */\r\n    async disposeMemory() {\r\n        if (this.state.worker.active) {\r\n            await this.worker?.Close();\r\n        } else {\r\n            // @ts-ignore\r\n            this.state.api.Close();\r\n            (this.state.api as any) = null;\r\n            this.state.api = new WebIFC.IfcAPI();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * For internal use of IFC.js dev team and testers\r\n     */\r\n    getAndClearErrors(modelID: number) {\r\n        return this.parser.getAndClearErrors(modelID);\r\n    }\r\n\r\n    private async initializeWorkers() {\r\n        this.worker = new IFCWorkerHandler(this.state, this.BVH);\r\n        this.state.api = this.worker.webIfc;\r\n        this.properties = this.worker.properties;\r\n        await this.worker.parser.setupOptionalCategories(this.parser.optionalCategories);\r\n        this.parser = this.worker.parser;\r\n        await this.worker.workerState.updateStateUseJson();\r\n        await this.worker.workerState.updateStateWebIfcSettings();\r\n    }\r\n\r\n\r\n}\r\n","import { IFCManager } from './IFC/components/IFCManager';\r\nimport {FileLoader, Loader, LoadingManager, Matrix4} from 'three';\r\nimport { IFCModel } from './IFC/components/IFCModel';\r\n\r\nclass IFCLoader extends Loader {\r\n    ifcManager: IFCManager;\r\n    private onProgress?: (event: ProgressEvent) => void;\r\n\r\n    constructor(manager?: LoadingManager) {\r\n        super(manager);\r\n        this.ifcManager = new IFCManager();\r\n    }\r\n\r\n    load(\r\n        url: any,\r\n        onLoad: (ifc: IFCModel) => void,\r\n        onProgress?: (event: ProgressEvent) => void,\r\n        onError?: (event: ErrorEvent) => void\r\n    ) {\r\n        const scope = this;\r\n\r\n        const loader = new FileLoader(scope.manager);\r\n        this.onProgress = onProgress;\r\n        loader.setPath(scope.path);\r\n        loader.setResponseType('arraybuffer');\r\n        loader.setRequestHeader(scope.requestHeader);\r\n        loader.setWithCredentials(scope.withCredentials);\r\n        loader.load(\r\n            url,\r\n            async function (buffer) {\r\n                try {\r\n                    if (typeof buffer == 'string') {\r\n                        throw new Error('IFC files must be given as a buffer!');\r\n                    }\r\n                    onLoad(await scope.parse(buffer));\r\n                } catch (e: any) {\r\n                    if (onError) {\r\n                        onError(e);\r\n                    } else {\r\n                        console.error(e);\r\n                    }\r\n\r\n                    scope.manager.itemError(url);\r\n                }\r\n            },\r\n            onProgress,\r\n            onError\r\n        );\r\n    }\r\n\r\n    parse(buffer: ArrayBuffer) {\r\n        return this.ifcManager.parse(buffer);\r\n    }\r\n}\r\n\r\nexport { IFCLoader };\r\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _getRequireWildcardCache(e) {\n  if (\"function\" != typeof WeakMap) return null;\n  var r = new WeakMap(),\n    t = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n    return e ? t : r;\n  })(e);\n}\nfunction _interopRequireWildcard(e, r) {\n  if (!r && e && e.__esModule) return e;\n  if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return {\n    \"default\": e\n  };\n  var t = _getRequireWildcardCache(r);\n  if (t && t.has(e)) return t.get(e);\n  var n = {\n      __proto__: null\n    },\n    a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) {\n    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n  }\n  return n[\"default\"] = e, t && t.set(e, n), n;\n}\nmodule.exports = _interopRequireWildcard, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}"],"names":["_interopRequireDefault","require","_interopRequireWildcard","exports","React","_default","default","createElement","d","Fragment","cx","cy","r","Object","defineProperty","value","enumerable","get","_utils","createSvgIcon","PaginationItem","props","ref","classes","className","_props$color","color","component","_props$disabled","disabled","page","_props$selected","selected","_props$shape","shape","_props$size","size","_props$type","type","_props$variant","variant","other","_objectWithoutProperties","Icon","useTheme","direction","previous","NavigateNextIcon","next","NavigateBeforeIcon","last","FirstPageIcon","first","LastPageIcon","clsx","root","ellipsis","concat","capitalize","ButtonBase","_extends","focusVisibleClassName","focusVisible","icon","withStyles","theme","typography","body2","borderRadius","textAlign","boxSizing","minWidth","height","padding","margin","palette","text","primary","transition","transitions","create","duration","short","backgroundColor","action","hover","focus","alpha","selectedOpacity","hoverOpacity","opacity","disabledOpacity","sizeSmall","fontSize","pxToRem","sizeLarge","textPrimary","contrastText","main","dark","textSecondary","secondary","outlined","border","disabledBackground","outlinedPrimary","activatedOpacity","outlinedSecondary","rounded","name","defaultGetAriaLabel","Pagination","boundaryCount","_props$getItemAriaLab","count","defaultPage","getItemAriaLabel","_props$renderItem","hideNextButton","hidePrevButton","onChange","renderItem","item","showFirstButton","showLastButton","siblingCount","_usePagination","arguments","length","undefined","_props$boundaryCount","_props$componentName","componentName","_props$count","_props$defaultPage","_props$hideNextButton","_props$hidePrevButton","handleChange","pageProp","_props$showFirstButto","_props$showLastButton","_props$siblingCount","_useControlled","useControlled","controlled","state","_useControlled2","_slicedToArray","setPageState","handleClick","event","range","start","end","Array","from","_","i","startPages","Math","min","endPages","max","siblingsStart","siblingsEnd","itemList","_toConsumableArray","buttonPage","items","map","onClick","indexOf","usePagination","ul","index","key","display","flexWrap","alignItems","listStyle","TreeItem","children","collapseIcon","endIcon","expandIcon","iconProp","label","nodeId","onLabelClick","onIconClick","onFocus","onKeyDown","onMouseDown","_props$TransitionComp","TransitionComponent","Collapse","TransitionProps","_React$useContext","TreeViewContext","contextIcons","icons","focusFirstNode","focusLastNode","focusNextNode","focusPreviousNode","focusByFirstCharacter","selectNode","selectRange","selectNextNode","selectPreviousNode","rangeSelectToFirst","rangeSelectToLast","selectAllNodes","expandAllSiblings","toggleExpansion","isExpanded","isFocused","isSelected","isTabbable","multiSelect","getParent","mapFirstChar","addNodeToNodeMap","removeNodeFromNodeMap","nodeRef","contentRef","handleRef","useForkRef","expandable","Boolean","isArray","expanded","focused","tabbable","defaultCollapseIcon","defaultExpandIcon","defaultParentIcon","defaultEndIcon","ariaSelected","handleNextArrow","handlePreviousArrow","parent","childIds","child","push","current","textContent","substring","toLowerCase","role","flag","altKey","currentTarget","target","str","ctrlPressed","ctrlKey","metaKey","shiftKey","stopPropagation","match","preventDefault","tabIndex","content","multiple","defaultPrevented","iconContainer","Typography","unmountOnExit","group","in","outline","WebkitTapHighlightColor","marginLeft","width","cursor","marginRight","flexShrink","justifyContent","paddingLeft","position","findNextFirstChar","firstChars","startIndex","char","defaultExpandedDefault","defaultSelectedDefault","TreeView","_props$defaultExpande","defaultExpanded","_props$defaultSelecte","defaultSelected","_props$disableSelecti","disableSelection","_props$multiSelect","expandedProp","onNodeSelect","onNodeToggle","selectedProp","_React$useState","setTabbable","_React$useState2","focusedNodeId","setFocusedNodeId","nodeMap","firstCharMap","visibleNodes","setExpandedState","_useControlled3","_useControlled4","setSelectedState","id","getNextNode","nodeIndex","getPreviousNode","getLastNode","getFirstNode","lastSelectedNode","lastSelectionWasRange","currentRangeSelection","handleRangeArrowSelect","nodes","base","filter","handleRangeSelect","a","b","aIndex","bIndex","slice","getNodesInRange","newSelected","handleMultipleSelect","handleSingleSelect","stacked","_nodes$start","getNodesToRemove","forEach","node","cleanUpFirstCharMap","newMap","parentMap","parentChildren","c","oldFocusedNodeId","prevChildIds","_React$useState3","childrenCalculated","setChildrenCalculated","arr1","arr2","arrayDiff","buildVisible","list","childs","noopSelection","lowercaseChar","firstCharIds","keys","firstChar","diff","newExpanded","oldTabbable","childrenIds","currentMap","childId","currentChildMap","_createSvgIcon","_jsxRuntime","jsx","fillRule","hookCallback","some","hooks","apply","setHookCallback","callback","input","prototype","toString","call","isObject","hasOwnProp","hasOwnProperty","isObjectEmpty","obj","getOwnPropertyNames","k","isUndefined","isNumber","isDate","Date","arr","fn","res","arrLen","extend","valueOf","createUTC","format","locale","strict","createLocalOrUTC","utc","defaultParsingFlags","empty","unusedTokens","unusedInput","overflow","charsLeftOver","nullInput","invalidEra","invalidMonth","invalidFormat","userInvalidated","iso","parsedDateParts","era","meridiem","rfc2822","weekdayMismatch","getParsingFlags","m","_pf","isValid","_isValid","flags","parsedParts","isNowValid","isNaN","_d","getTime","invalidWeekday","_strict","bigHour","isFrozen","createInvalid","NaN","fun","t","this","len","momentProperties","updateInProgress","copyConfig","to","prop","val","momentPropertiesLen","_isAMomentObject","_i","_f","_l","_tzm","_isUTC","_offset","_locale","Moment","config","updateOffset","isMoment","warn","msg","suppressDeprecationWarnings","console","deprecate","firstTime","deprecationHandler","arg","args","argLen","join","Error","stack","deprecations","deprecateSimple","isFunction","Function","set","_config","_dayOfMonthOrdinalParseLenient","RegExp","_dayOfMonthOrdinalParse","source","_ordinalParse","mergeConfigs","parentConfig","childConfig","Locale","defaultCalendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","calendar","mom","now","output","_calendar","zeroFill","number","targetLength","forceSign","absNumber","abs","zerosToFill","pow","substr","formattingTokens","localFormattingTokens","formatFunctions","formatTokenFunctions","addFormatToken","token","padded","ordinal","func","localeData","removeFormattingTokens","replace","makeFormatFunction","array","formatMoment","expandFormat","invalidDate","replaceLongDateFormatTokens","longDateFormat","lastIndex","test","defaultLongDateFormat","LTS","LT","L","LL","LLL","LLLL","_longDateFormat","formatUpper","toUpperCase","tok","defaultInvalidDate","_invalidDate","defaultOrdinal","defaultDayOfMonthOrdinalParse","_ordinal","defaultRelativeTime","future","past","s","ss","mm","h","hh","dd","w","ww","M","MM","y","yy","relativeTime","withoutSuffix","string","isFuture","_relativeTime","pastFuture","aliases","addUnitAlias","unit","shorthand","lowerCase","normalizeUnits","units","normalizeObjectUnits","inputObject","normalizedProp","normalizedInput","priorities","addUnitPriority","priority","getPrioritizedUnits","unitsObj","u","sort","isLeapYear","year","absFloor","ceil","floor","toInt","argumentForCoercion","coercedNumber","isFinite","makeGetSet","keepTime","set$1","month","date","daysInMonth","stringGet","stringSet","prioritized","prioritizedLen","regexes","match1","match2","match3","match4","match6","match1to2","match3to4","match5to6","match1to3","match1to4","match1to6","matchUnsigned","matchSigned","matchOffset","matchShortOffset","matchTimestamp","matchWord","addRegexToken","regex","strictRegex","isStrict","getParseRegexForToken","unescapeFormat","regexEscape","matched","p1","p2","p3","p4","tokens","addParseToken","tokenLen","addWeekParseToken","_w","addTimeToArrayFromToken","_a","YEAR","MONTH","DATE","HOUR","MINUTE","SECOND","MILLISECOND","WEEK","WEEKDAY","mod","n","x","modMonth","o","monthsShort","months","monthsShortRegex","monthsRegex","monthsParse","defaultLocaleMonths","split","defaultLocaleMonthsShort","MONTHS_IN_FORMAT","defaultMonthsShortRegex","defaultMonthsRegex","localeMonths","_months","isFormat","localeMonthsShort","_monthsShort","handleStrictParse","monthName","ii","llc","toLocaleLowerCase","_monthsParse","_longMonthsParse","_shortMonthsParse","localeMonthsParse","_monthsParseExact","setMonth","dayOfMonth","getSetMonth","getDaysInMonth","computeMonthsParse","_monthsShortStrictRegex","_monthsShortRegex","_monthsStrictRegex","_monthsRegex","cmpLenRev","shortPieces","longPieces","mixedPieces","daysInYear","parseTwoDigitYear","parseInt","getSetYear","getIsLeapYear","createDate","ms","getFullYear","setFullYear","createUTCDate","UTC","getUTCFullYear","setUTCFullYear","firstWeekOffset","dow","doy","fwd","getUTCDay","dayOfYearFromWeeks","week","weekday","resYear","resDayOfYear","dayOfYear","weekOfYear","resWeek","weekOffset","weeksInYear","weekOffsetNext","localeWeek","_week","defaultLocaleWeek","localeFirstDayOfWeek","localeFirstDayOfYear","getSetWeek","add","getSetISOWeek","parseWeekday","weekdaysParse","parseIsoWeekday","shiftWeekdays","ws","weekdaysMin","weekdaysShort","weekdays","weekdaysMinRegex","weekdaysShortRegex","weekdaysRegex","defaultLocaleWeekdays","defaultLocaleWeekdaysShort","defaultLocaleWeekdaysMin","defaultWeekdaysRegex","defaultWeekdaysShortRegex","defaultWeekdaysMinRegex","localeWeekdays","_weekdays","day","localeWeekdaysShort","_weekdaysShort","localeWeekdaysMin","_weekdaysMin","handleStrictParse$1","weekdayName","_weekdaysParse","_shortWeekdaysParse","_minWeekdaysParse","localeWeekdaysParse","_weekdaysParseExact","_fullWeekdaysParse","getSetDayOfWeek","getDay","getSetLocaleDayOfWeek","getSetISODayOfWeek","computeWeekdaysParse","_weekdaysStrictRegex","_weekdaysRegex","_weekdaysShortStrictRegex","_weekdaysShortRegex","_weekdaysMinStrictRegex","_weekdaysMinRegex","minp","shortp","longp","minPieces","hFormat","hours","kFormat","lowercase","minutes","matchMeridiem","_meridiemParse","localeIsPM","charAt","seconds","kInput","_isPm","isPM","_meridiem","pos","pos1","pos2","defaultLocaleMeridiemParse","getSetHour","localeMeridiem","isLower","globalLocale","baseConfig","dayOfMonthOrdinalParse","meridiemParse","locales","localeFamilies","commonPrefix","minl","normalizeLocale","chooseLocale","names","j","loadLocale","isLocaleNameSane","oldLocale","module","_abbr","aliasedRequire","getSetGlobalLocale","e","values","data","getLocale","defineLocale","abbr","parentLocale","updateLocale","tmpLocale","listLocales","checkOverflow","_overflowDayOfYear","_overflowWeeks","_overflowWeekday","extendedIsoRegex","basicIsoRegex","tzRegex","isoDates","isoTimes","aspNetJsonRegex","obsOffsets","UT","GMT","EDT","EST","CDT","CST","MDT","MST","PDT","PST","configFromISO","l","allowTime","dateFormat","timeFormat","tzFormat","exec","isoDatesLen","isoTimesLen","configFromStringAndFormat","extractFromRFC2822Strings","yearStr","monthStr","dayStr","hourStr","minuteStr","secondStr","result","untruncateYear","preprocessRFC2822","checkWeekday","weekdayStr","parsedInput","calculateOffset","obsOffset","militaryOffset","numOffset","hm","configFromRFC2822","parsedArray","setUTCMinutes","getUTCMinutes","configFromString","createFromInputFallback","defaults","currentDateArray","nowValue","_useUTC","getUTCMonth","getUTCDate","getMonth","getDate","configFromArray","currentDate","expectedWeekday","yearToUse","dayOfYearFromWeekInfo","_dayOfYear","_nextDay","weekYear","temp","weekdayOverflow","curWeek","GG","W","E","createLocal","gg","ISO_8601","RFC_2822","skipped","stringLength","totalParsedInputLength","meridiemFixWrap","erasConvertYear","hour","isPm","meridiemHour","configFromStringAndArray","tempConfig","bestMoment","scoreToBeat","currentScore","validFormatFound","bestFormatIsValid","configfLen","score","configFromObject","dayOrDate","minute","second","millisecond","createFromConfig","prepareConfig","preparse","configFromInput","isUTC","prototypeMin","prototypeMax","pickBy","moments","ordering","isDurationValid","unitHasDecimal","orderLen","parseFloat","isValid$1","createInvalid$1","createDuration","Duration","years","quarters","quarter","weeks","isoWeek","days","milliseconds","_milliseconds","_days","_data","_bubble","isDuration","absRound","round","compareArrays","array1","array2","dontConvert","lengthDiff","diffs","offset","separator","utcOffset","sign","offsetFromString","chunkOffset","matcher","parts","matches","cloneWithOffset","model","clone","setTime","local","getDateOffset","getTimezoneOffset","getSetOffset","keepLocalTime","keepMinutes","localAdjust","_changeInProgress","addSubtract","getSetZone","setOffsetToUTC","setOffsetToLocal","subtract","setOffsetToParsedOffset","tZone","hasAlignedHourOffset","isDaylightSavingTime","isDaylightSavingTimeShifted","_isDSTShifted","toArray","isLocal","isUtcOffset","isUtc","aspNetRegex","isoRegex","ret","diffRes","parseIso","momentsDifference","inp","positiveMomentsDifference","isAfter","isBefore","createAdder","period","tmp","isAdding","invalid","isString","String","isMomentInput","isNumberOrStringArray","isMomentInputObject","property","objectTest","propertyTest","properties","propertyLen","arrayTest","dataTypeTest","isCalendarSpec","getCalendarFormat","myMoment","calendar$1","time","formats","sod","startOf","calendarFormat","localInput","endOf","isBetween","inclusivity","localFrom","localTo","isSame","inputMs","isSameOrAfter","isSameOrBefore","asFloat","that","zoneDelta","monthDiff","wholeMonthDiff","anchor","toISOString","keepOffset","toDate","inspect","prefix","datetime","suffix","zone","inputString","defaultFormatUtc","defaultFormat","postformat","humanize","fromNow","toNow","newLocaleData","lang","MS_PER_SECOND","MS_PER_MINUTE","MS_PER_HOUR","MS_PER_400_YEARS","mod$1","dividend","divisor","localStartOfDate","utcStartOfDate","startOfDate","isoWeekday","unix","toObject","toJSON","isValid$2","parsingFlags","invalidAt","creationData","localeEras","eras","_eras","since","until","localeErasParse","eraName","narrow","localeErasConvertYear","dir","getEraName","getEraNarrow","getEraAbbr","getEraYear","erasNameRegex","computeErasParse","_erasNameRegex","_erasRegex","erasAbbrRegex","_erasAbbrRegex","erasNarrowRegex","_erasNarrowRegex","matchEraAbbr","matchEraName","matchEraNarrow","matchEraYearOrdinal","_eraYearOrdinalRegex","abbrPieces","namePieces","narrowPieces","addWeekYearFormatToken","getter","getSetWeekYear","getSetWeekYearHelper","getSetISOWeekYear","getISOWeeksInYear","getISOWeeksInISOWeekYear","isoWeekYear","getWeeksInYear","weekInfo","getWeeksInWeekYear","weeksTarget","setWeekAll","dayOfYearData","getSetQuarter","erasParse","eraYearOrdinalParse","getSetDayOfMonth","getSetDayOfYear","getSetMinute","getSetMillisecond","getSetSecond","parseMs","getZoneAbbr","getZoneName","proto","createUnix","createInZone","parseZone","preParsePostFormat","Symbol","for","eraNarrow","eraAbbr","eraYear","isoWeeks","weeksInWeekYear","isoWeeksInYear","isoWeeksInISOWeekYear","isDST","zoneAbbr","zoneName","dates","isDSTShifted","proto$1","get$1","field","setter","listMonthsImpl","out","listWeekdaysImpl","localeSorted","shift","listMonths","listMonthsShort","listWeekdays","listWeekdaysShort","listWeekdaysMin","firstDayOfYear","firstDayOfWeek","langData","mathAbs","addSubtract$1","add$1","subtract$1","absCeil","bubble","monthsFromDays","monthsToDays","daysToMonths","as","valueOf$1","makeAs","alias","asMilliseconds","asSeconds","asMinutes","asHours","asDays","asWeeks","asMonths","asQuarters","asYears","clone$1","get$2","makeGetter","thresholds","substituteTimeAgo","relativeTime$1","posNegDuration","getSetRelativeTimeRounding","roundingFunction","getSetRelativeTimeThreshold","threshold","limit","argWithSuffix","argThresholds","withSuffix","th","assign","abs$1","toISOString$1","totalSign","ymSign","daysSign","hmsSign","total","toFixed","proto$2","toIsoString","version","relativeTimeRounding","relativeTimeThreshold","HTML5_FMT","DATETIME_LOCAL","DATETIME_LOCAL_SECONDS","DATETIME_LOCAL_MS","TIME","TIME_SECONDS","TIME_MS","factory","nullIfcManagerErrorMessage","IFCModel","modelID","ifcManager","manager","path","setWasmPath","faceIndex","getExpressId","geometry","verbose","getAllItemsOfType","getItemProperties","recursive","getPropertySets","getIfcType","getSpatialStructure","material","getSubset","customID","removeSubset","modelIdCounter","Mesh","IFCParser","BVH","IFCSPACE","loadingState","coordinationMatrix","buffer","api","SetGeometryTransformation","currentWebIfcID","loadAllGeometry","_modelId","loaded","onProgress","Uint8Array","OpenModel","useJSON","loadedModels","models","mesh","types","geometries","materials","merged","combinedGeometry","mergeBufferGeometries","currentModelID","GetLineIDsWithType","IFCPRODUCTDEFINITIONSHAPE","shapes","step","notifyProgress","optionalTypes","optionalCategories","category","getPlacedGeometry","placedGeometry","itemMesh","applyMatrix4","expressID","getBufferGeometry","getMeshMatrix","GetGeometry","GetIndexArray","BufferAttribute","indices","colID","col","side","geometriesByMaterials","matrix","mat","Matrix4","vertexData","indexData","BufferGeometry","Float32Array","idAttribute","posFloats","normFloats","setAttribute","geometriesByMaterial","ItemsMap","getGeometry","newItemsMap","baseID","materialID","prevExpressID","materialIndex","materialEnd","materialStart","objectStart","store","getMaterialStore","objectEnd","matIndex","storedIfcItem","SubsetUtils","ids","indicesByGroup","entry","flatten","pair","indexCache","subsets","subsetID","generateGeometryIndexMap","subset","applyThreeMeshBVH","initializeSubsetAttributes","initializeSubsetGroups","subsetGeom","bvh","attributes","setIndex","groups","JSON","resetGroups","tempIndex","insertNewIndices","newIndices","currentGroup","newIndicesPosition","groupIndex","SubsetManager","customId","getSubsetID","removeFromParent","dispose","subsetCreator","createSubset","previousIDs","removePrevious","applyBVH","scene","mats","geom","aggregates","related","relating","BasePropertyManager","elementID","PropsNames","treeChunks","includeProperties","getChildren","propNames","getSpatialNode","getChunks","rel","chunks","IDs","element","ele","relatedItems","WebIfcPropertyManager","GetLine","IFCPROJECT","allLines","projectID","project","lines","propName","propSetIds","relation","jsonData","projectsIDs","JSONPropertyManager","typeName","IfcTypesMap","resultIDs","getItemsByID","numKey","line","jsonObject","PropertyManager","getX","geoIndex","currentProps","updateCurrentProps","getMaterialsProperties","getAllTypesOfModel","worker","elements","BvhManager","computeBoundsTree","acceleratedRaycast","disposeBoundsTree","WorkerActions","WorkerAPIs","Vector","vector","IfcGeometry","_GetIndexDataSize","_GetVertexData","FlatMesh","serializer","flatMesh","reconstructVector","FlatMeshVector","SerializedMaterial","g","MeshLambertMaterial","transparent","SerializedGeometry","_b","_c","normal","GeometryReconstructor","serialized","BufferAttribute$1","MeshReconstructor","MaterialReconstructor","Serializer","GetVertexData","GetVertexDataSize","GetIndexData","GetIndexDataSize","serializeVector","new","PropertyHandler","handler","API","request","WebIfcHandler","settings","serializeHandlers","reconstructIfcGeometry","geometryExpressID","lineObject","requestID","transformationMatrix","ptr","heap","startPtr","sizeBytes","meshCallback","callbackHandlers","reconstructFlatMesh","reconstructFlatMeshVector","WorkerStateHandler","useJson","webIfcSettings","DBOperation","IndexedDatabase","open","resolve","reject","db","keyPath","getDBItems","tx","ParserHandler","IDB","onprogressHandlers","load","serializedModel","reconstructIfcModel","IFCWorkerHandler","resolveHandlers","workerPath","ifcWorker","Worker","onmessage","terminate","resolveOnProgress","callHandlers","rejectHandlers","resolveSerializations","resolveCallbacks","error","callbackParameter","MemoryCleaner","IFCUtils","reverseElement","entity","entity_class","entities_ids","getMapping","Data","isLoaded","workPlans","workSchedules","lagTimes","utils","loadTasks","loadWorkCalendars","loadWorkTimes","loadTimePeriods","workSchedule","relsControls","relControls","relatingControl","relatedObjects","isA","objectIndex","tasks","task","loadTaskSequence","loadTaskNesting","loadTaskOperations","relsSequence","relSequenceId","relSequence","related_process","relatingProcess","rels_assigns_to_product","relAssignsToProduct","relatedObject","relatingProduct","rels_nests","relNests","relating_object","object_index","relsAssignsToProcess","relAssignToProcess","relsAssignsToControl","relAssignsToControl","byId","workCalendars","workCalendar","workCalenderData","workTimes","workTime","workTimeData","timePeriods","timePeriod","GeometryUtils","splitByBlocks","geometriesByMat","mergeGeomsOfSameMaterial","sizes","meshes","counter","getIndicesOfMesh","getMeshGroup","vertexCounter","fill","Vector4","z","scalar","v","addVectors","q","epsilon","epsilon2","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","angle","PI","xx","xy","xz","yz","acos","minVal","maxVal","divideScalar","v1","v2","attribute","lerp","Quaternion","_x","_z","_onChangeCallback","_y","constructor","quaternion","euler","update","order","sin","c1","c3","cos","c2","s1","s2","s3","halfAngle","axis","trace","vFrom","dot","vTo","Number","EPSILON","normalize","angleTo","multiplyQuaternions","p","qay","qaz","qaw","qbx","qby","qbz","qbw","qax","qb","copy","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","ratioB","halfTheta","ratioA","sqrt1u1","u2","sqrtu1","getZ","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","sqrSin","tDir","f","Vector3","_vector","subVectors","applyMatrix3","qx","qy","qz","qw","iw","iy","iz","ix","camera","multiplyScalar","ax","ay","az","by","bz","denominator","_vector$1","theta","dy","dz","sx","setFromMatrixColumn","sz","sy","fromArray","isVector3","_quaternion","Vector2","MathUtils.clamp","distanceToSquared","center","iterator","isVector2","MathUtils.lerp","SRGBToLinear","Color","setHex","setStyle","hex","clamp","hue2rgb","style","components","handleAlpha","gammaFactor","safeInverse","copyGammaToLinear","LinearToSRGB","copySRGBToLinear","saturation","hue","delta","getHSL","_hslA","color1","color2","_hslB","normalized","usage","index1","index2","vectors","_vector2","itemSize","getY","updateRange","isBufferAttribute","Float16BufferAttribute","isFloat16BufferAttribute","GLTFExporter","pluginCallbacks","register","writer","GLTFMaterialsPBRSpecularGlossiness","splice","onError","options","plugins","scope","LINES","LINE_STRIP","UNSIGNED_BYTE","FLOAT","ARRAY_BUFFER","NEAREST","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","CLAMP_TO_EDGE","REPEAT","THREE_TO_WEBGL","WEBGL_CONSTANTS","scale","morphTargetInfluences","stringToArrayBuffer","ArrayBuffer","il","getPaddedBufferSize","bufferSize","paddedLength","paddingByte","arrayBuffer","GLTFWriter","pending","buffers","skins","uids","Map","uid","asset","generator","cache","attributesNormalized","textures","images","onDone","binary","trs","onlyVisible","truncateDrawRange","embedImages","maxTextureSize","animations","includeCustomExtensions","Promise","json","extensionsUsed","blob","extensionsUsedList","reader","binaryChunkPrefix","DataView","GLB_CHUNK_TYPE_BIN","jsonChunk","jsonChunkPrefix","headerView","setUint32","GLB_HEADER_MAGIC","binaryChunk","byteLength","totalByteLength","header","glbReader","window","glbBlob","uri","base64data","object","objectDef","has","texture","transformDef","didTransform","rotation","mapDef","extensions","componentType","componentSize","bufferViews","dataView","byteOffset","bufferViewDef","getPaddedArrayBuffer","Uint32Array","minMax","bufferViewTarget","bufferView","accessorDef","mimeType","canvas","flipY","ctx","HTMLImageElement","image","HTMLCanvasElement","ImageBitmap","imageDef","cachedImages","samplerDef","magFilter","minFilter","wrapS","wrapT","sampler","processSampler","textureDef","ext","materialDef","pbrMetallicRoughness","roughnessFactor","applyTextureTransform","metalRoughMapDef","baseColorMapDef","maxEmissiveComponent","emissive","emissiveMapDef","normalMapDef","normalScale","texCoord","occlusionMapDef","alphaCutoff","doubleSided","serializeUserData","_invokeAll","meshCacheKeyParts","mode","isLine","meshDef","primitives","nameConversion","uv","uv2","skinWeight","skinIndex","originalNormal","attributeName","getUID","modifiedAttribute","reverseDictionary","gltfAttributeName","relativeAttribute","jl","warned","targets","weights","extras","isMultiMaterial","primitive","cacheKey","cameraDef","orthographic","xmag","ymag","zfar","znear","near","aspectRatio","yfov","tracks","clip","mergeMorphTargetTracks","samplers","track","trackNode","outputItemSize","trackProperty","PATH_PROPERTIES","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","interpolation","channels","inverseBindMatrices","skeleton","joints","temporaryBoneInverse","nodeDef","updateMatrix","meshIndex","scenes","sceneDef","visible","objects","processScene","objectsWithoutScene","Scene","processAnimation","GLTFLightExtension","light","lightDef","distance","innerConeAngle","lights","GLTFMaterialsUnlitExtension","metallicFactor","isGLTFSpecularGlossinessMaterial","extensionDef","baseColorFactor","specularFactor","baseColorTexture","specularMapDef","GLTFMaterialsClearcoatExtension","clearcoatMapDef","clearcoatRoughnessMapDef","processTexture","clearcoatNormalMapDef","GLTFMaterialsTransmissionExtension","transmissionMap","transmissionMapDef","GLTFMaterialsVolumeExtension","thicknessMapDef","insertKeyframe","valueSize","times","tolerance","evaluate","interpolant","sourceTracks","sourceTrackBinding","sourceTrack","PropertyBinding","propertyName","InterpolateLinear","sourceTrackNode","morphTargetDictionary","uuid","mergedTrack","targetCount","targetIndex","sourceInterpolant","keyframeIndex","mergedTracks","FragmentMesh","elementCount","exporter","newMaterialArray","blockID","Uint16Array","vertexSize","InstancedMesh","BlocksMap","fragment","prevBlockID","rawIds","filterIndices","remainingIDs","clear","getAllIndicesOfGroup","insertIndicesAtGroup","indicesOfOneMaterial","blocksMap","pairs","pairIndex","blocks","Blocks","__esModule","_typeof","_getRequireWildcardCache","WeakMap","__proto__","getOwnPropertyDescriptor","excluded","sourceKeys","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable"],"sourceRoot":""}