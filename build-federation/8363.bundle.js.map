{"version":3,"file":"8363.bundle.js","mappings":"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CA,4BACA,mCACA,2BACA,wBACA,6BACA,oBACA,0BACA,+BACA,+BACA,iCACA,sBACA,2BACA,kCACA,6BACA,oCACA,sBACA,aACA,wBACA,sBACA,wBACA,uBACA,mBACA,uBACA,sBACA,uBACA,wBACA,kBACA,cACA,WACA,gBACA,oBACA,kCACA,YACA,2BACA,0BACA,YACA,YACA,aACA,UACA,eACA,gBACA,kBACA,uBACA,mBACA,YACA,uBACA,gBACA,mBACA,gBACA,qBACA,iBACA,iBACA,gBACA,sBACA,oBACA,YACA,+BACA,yBACA,eACA,sBACA,qBACA,WACA,yBACA,kBACA,iBACA,iBACA,iBACA,gBACA,SACA,UACA,yBACA,kBACA,iBACA,iBACA,+BACA,UACA,iBACA,0BACA,6BACA,uBACA,6BACA,UACA,kBACA,mBACA,YACA,sBACA,iBACA,mBACA,mBACA,kBACA,YACA,iBACA,uBACA,yBACA,oBACA,oBACA,eACA,4BACA,uBACA,oBACA,qCACA,4BACA,iBACA,2BACA,6BACA,6BACA,+BACA,aACA,aACA,qBCnII3oB,IAAYC,EAAAA,EAAAA,aAAW,SAACC,GAAD,MAAY,CACvC4jB,QAAS,CACPnW,SAAUzN,EAAM6jB,WAAWC,QAAQ,IACnCpW,WAAY1N,EAAM6jB,WAAWE,mBAE/B7O,MAAO,CACLxU,MAAO,QAETmmB,SAAU,CACR9K,OAAQ,IACRrb,MAAO,OACPsD,OAAQ,QAEVogB,YAAa,CACXpgB,OAAQ,MACR8I,UAAW,OACXuX,UAAW,SACX,uBAAwB,CACtB3jB,MAAO,SAET,6BAA8B,CAC5B,qBAAsB,kCAExB,6BAA8B,CAC5B8G,gBAAiB,iBACjB8c,QAAS,wBAGbwC,cAAe,CACbxJ,KAAM,MACN9e,SAAU,WACVuoB,aAAc,WACdtK,SAAU,SACVuK,SAAU,aACVC,MAAM,GAGRC,iBAAkB,CAChBxnB,OAAQ,EACR2B,QAAS,GAEX8lB,SAAU,CAERzlB,SAAU,GAGZ0lB,YAAa,CACX5f,gBAAiB,QACjB+B,UAAW,OAhDc,IAiY7B,GA5UiB,SAAC,GAMX,I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","sources":["webpack://ciqo/./src/history.js","webpack://ciqo/./src/Components/NavBarElem/NavBarElem.jsx","webpack://ciqo/./src/Components/AppContainerElem/AppContainerElem.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/BcfDialog/BcfDialog.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/Login/Login.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/PortalList/PortalList.js","webpack://ciqo/./src/Components/SearchBar/SearchBar.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectsSetsList/TreeClass.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectsSetsList/ObjectsSetsList.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/PropertyList/DefineTypeComponent.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/PropertyList/PropertyList.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectList/DefineTypeComponent.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectList/SelectionComponent.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/Components/ObjectList/ObjectList.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DatBimApi/DatBimApi.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/DropBox/DropBox.js","webpack://ciqo/./src/Components/ToolTipsElem/ToolTipsElem.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Tracim/img/TracimLogo.svg","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Tracim/Tracim.hooks.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Tracim/Tracim.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Marketplace/Marketplace.js","webpack://ciqo/./src/Views/IfcRenderer/Components/SearchData/SearchData.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/Components/Tree/index.js","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/reducer.js","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/actions.js","webpack://ciqo/./src/Views/IfcRenderer/Components/ProjectTree/ProjectTree.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Settings/utils/ifcClasses.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Settings/Settings.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/SpatialStructure/SpatialStructure.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Properties/Properties.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Validation/Validation.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Cuts/Cuts.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/Drawings/Scenes/DrawingList/index.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Drawings/Scenes/DxfViewer/index.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Drawings/Drawings.js","webpack://ciqo/./src/Views/IfcRenderer/Components/Measures/Measures.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/ContextMenu/ContextMenu.jsx","webpack://ciqo/./src/Views/IfcRenderer/Components/DraggableCard/DraggableCard.js","webpack://ciqo/./src/Views/IfcRenderer/Utils/geometry-types.js","webpack://ciqo/./src/Views/IfcRenderer/Utils/TriBim.js","webpack://ciqo/./src/Views/IfcRenderer/IfcRenderer.js","webpack://ciqo/./src/Views/IfcRenderer/IfcRenderer.hooks.js","webpack://ciqo/./src/App.js","webpack://ciqo/./src/serviceWorker.js","webpack://ciqo/./src/bootstrap.js","webpack://ciqo/./node_modules/web-ifc/ sync"],"sourcesContent":["import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory();\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Button,\n  IconButton,\n} from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\n\nconst NavBarElem = ({ title, classes, handleDrawerOpen, open }) => {\n  // const classes = useStyles();\n\n  const { REACT_APP_LOGO, REACT_APP_COMPANY, REACT_APP_VERSION } = process.env;\n\n  return (\n    <AppBar\n      position=\"fixed\"\n      className={clsx(classes.appBar, {\n        [classes.appBarShift]: open,\n      })}\n    >\n      <Toolbar>\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"open drawer\"\n          onClick={handleDrawerOpen}\n          edge=\"start\"\n          className={clsx(classes.menuButton, {\n            [classes.hide]: open,\n          })}\n        >\n          <MenuIcon />\n        </IconButton>\n        <Typography variant=\"h6\" noWrap>\n          {title}\n        </Typography>\n        <div style={{ position: \"absolute\", right: \"10px\" }}>\n          <a style={{ color: \"inherit\", margin: \"0 20px\" }} target=\"_blank\">\n            {`${REACT_APP_VERSION}`}\n          </a>\n          <a\n            href=\"https://documentation-ciqo.notion.site/documentation-ciqo/Doc-CIQO-f47d770ccf344ea6ae50119e58c82198\"\n            style={{ color: \"inherit\", margin: \"0 20px\" }}\n            target=\"_blank\"\n          >\n            Documentation\n            </a>\n          <a\n            href=\"https://alliance-batiment.mydatbim.com/mydatbimCom/mentions-legales\"\n            style={{ color: \"inherit\", margin: \"0 20px\" }}\n            target=\"_blank\"\n          >\n            Mentions lgales\n            </a>\n          <a\n            href=\"https://alliance-batiment.mydatbim.com/template/contact/387982\"\n            style={{ color: \"inherit\", margin: \"0 20px\" }}\n            target=\"_blank\"\n          >\n            Contact\n            </a>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default NavBarElem;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport clsx from 'clsx';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport {\n  Container,\n  Drawer,\n  List,\n  CssBaseline,\n  Divider,\n  IconButton,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Icon\n} from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport NavBarElem from '../NavBarElem';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  content: {\n    flexGrow: 1,\n    // padding: theme.spacing(3),\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: -drawerWidth,\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: 0,\n  },\n}));\n\nexport default function PersistentDrawerLeft({\n  title,\n  menu,\n  children\n}) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      <NavBarElem\n        title={title}\n        classes={classes}\n        handleDrawerOpen={handleDrawerOpen}\n        open={open}\n      />\n      <Drawer\n        className={classes.drawer}\n        variant=\"persistent\"\n        anchor=\"left\"\n        open={open}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <div className={classes.drawerHeader}>\n          <IconButton onClick={handleDrawerClose}>\n            {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\n          </IconButton>\n        </div>\n        <Divider />\n        <List>\n          {menu.MenuSideBarSup.map((item, index) => (\n            <Link to={item.link} style={{ textDecoration: 'none' }}>\n              <ListItem button key={index}>\n                <ListItemIcon><Icon>{item.icon}</Icon></ListItemIcon>\n                <ListItemText primary={item.text} />\n              </ListItem>\n            </Link>\n          ))}\n        </List>\n        <Divider />\n        <List>\n          {menu.MenuSideBarInf.map((item, index) => (\n            <a href={item.href} target='_blank' style={{ textDecoration: 'none' }}>\n              <ListItem button key={index}>\n                <ListItemIcon><Icon>{item.icon}</Icon></ListItemIcon>\n                <ListItemText primary={item.text} />\n              </ListItem>\n            </a>\n          ))}\n        </List>\n      </Drawer>\n      <main\n        className={clsx(classes.content, {\n          [classes.contentShift]: open,\n        })}\n      >\n        <div className={classes.drawerHeader} />\n        <Container maxWidth=\"lg\" className={classes.container}>\n          {children}\n        </Container>\n      </main>\n    </div>\n  );\n}\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { BcfReader } from '@parametricos/bcf-js';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport { Box, Dialog, DialogActions, DialogContent, DialogTitle, Grid, Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 140,\n  },\n});\n\nexport default function BcfDialog({\n  open,\n  onClose,\n  onOpenViewpoint\n}) {\n  const [file, setFile] = useState();\n  const [topics, setTopics] = useState([]);\n  const [fitleredTopics, setFitleredTopics] = useState([]);\n\n  useEffect(() => {\n    const fitleredTopics = topics.filter((t) => t.viewpoints.length > 0);\n    setFitleredTopics(fitleredTopics);\n  }, []);\n\n  const handleOpenViewpoint = (viewpoint) => {\n    onOpenViewpoint(viewpoint);\n    onClose();\n  }\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    const reader = new BcfReader();\n    await reader.read(acceptedFiles[0]);\n    console.log('SET TOPICS', reader.topics)\n    setTopics(reader.topics);\n    setFile(acceptedFiles[0])\n    const fitleredTopics = reader.topics.filter((t) => t.viewpoints.length > 0);\n    setFitleredTopics(fitleredTopics);\n    console.log('SET TOPICS', fitleredTopics)\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop, accept: \".bcf\" });\n\n  return (\n    <Dialog\n      maxWidth='xl'\n      fullWidth\n      disableBackdropClick\n      open={open}\n      onClose={onClose}\n    >\n      <DialogTitle>BCF Viewer</DialogTitle>\n      <DialogContent>\n        {!file && (\n          <Box\n            height={600}\n            display='flex'\n            alignItems=\"center\"\n            justifyContent=\"center\"\n            border={isDragActive ? \"solid 4px\" : \"none\"}\n            borderColor={isDragActive ? \"#ffa50f\" : \"\"}\n            borderRadius={20}\n            {...getRootProps()}\n          >\n            <input {...getInputProps()} />\n            {\n              isDragActive ?\n                <Typography variant=\"h6\">Drop the BCF here ...</Typography> :\n                <Typography variant=\"h6\">Drag 'n' drop a BCF here, or click to select</Typography>\n            }\n          </Box>\n        )}\n        {file && (\n          <Grid container spacing={2}>\n            {fitleredTopics.map((topic, i) => (\n              <Grid key={i} item>\n                <TopicCard topic={topic} onOpenViewpoint={handleOpenViewpoint} />\n              </Grid>\n            ))}\n          </Grid>\n        )}\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>\n          Close\n              </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction TopicCard({\n  topic,\n  onOpenViewpoint\n}) {\n\n  const classes = useStyles();\n  const [defaultViewpoint, setDefaultViewpoint] = useState(null);\n  const [defaultViewpointUrl, setDefaultViewpointUrl] = useState(\"\");\n  // const { topic, onOpenViewpoint } = props;\n\n  // const defaultViewpoint = topic?.markup?.viewpoints?.length > 0 ? topic.markup.viewpoints[0] : null;\n\n  const handleClick = () => {\n    if (topic.viewpoints.length > 0) {\n      onOpenViewpoint(topic.viewpoints[0]);\n    }\n  }\n\n  // useEffect(() => {\n  //   const getViewpoint = async () => {\n  //     const newDefaultViewpoint = topic?.markup?.viewpoints?.length > 0 ? topic.markup.viewpoints[0] : null;\n  //     if (newDefaultViewpoint) {\n  //       const data = await topic.getViewpointSnapshot(defaultViewpoint);\n  //       const url = window.URL.createObjectURL(data);\n  //       setDefaultViewpointUrl(url);\n  //     }\n  //     setDefaultViewpoint(newDefaultViewpoint)\n  //   }\n  //   getViewpoint()\n  // }, [defaultViewpoint, topic]);\n\n  return (\n    <Card className={classes.root}>\n      <CardActionArea onClick={handleClick}>\n        <CardMedia\n          className={classes.media}\n          image={defaultViewpointUrl}\n          title={topic.markup.topic.title}\n        />\n        <CardContent>\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\n            {topic.markup.topic.title}\n          </Typography>\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n            {topic.markup.topic.description}\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      {/*<CardActions>\n              <Button size=\"small\" color=\"primary\">\n                  Open\n              </Button>\n              <Button size=\"small\" color=\"primary\">\n                  Learn More\n              </Button>\n          </CardActions>*/}\n    </Card>\n  )\n}","import { useState } from \"react\";\nimport {\n  makeStyles,\n  Grid,\n  Button,\n  TextField,\n  FormControl,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  button: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n  datBimTitle: {\n    textAlign: \"center\",\n    // color: '#E6464D',\n    textTransform: \"none\",\n  },\n}));\n\nconst { REACT_APP_COMPANY } = process.env;\n\nconst Login = ({ handleSubmit }) => {\n  const classes = useStyles();\n\n  const username = localStorage.getItem(\"email\");\n  const [email, setEmail] = useState(username);\n\n  const handleChange = (event) => {\n    setEmail(event.target.value);\n  };\n\n  let createAccountLink;\n  if (REACT_APP_COMPANY === \"TriDyme\") {\n    createAccountLink = \"https://www.datbim.com/template/espace-client\";\n  } else if (REACT_APP_COMPANY === \"VBMC\") {\n    createAccountLink =\n      \"https://boxboisbim.mydatbim.com/template/espace-client\";\n  } else if (REACT_APP_COMPANY === \"Alliance-Batiment\") {\n    createAccountLink =\n      \"https://alliance-batiment.mydatbim.com/template/espace-client\";\n  } else {\n    createAccountLink =\n    \"https://alliance-batiment.mydatbim.com/template/espace-client\";\n  }\n\n  let lostPasswordLink;\n  if (REACT_APP_COMPANY === \"TriDyme\") {\n    lostPasswordLink = \"https://www.datbim.com/inscription/oublie-mdp\";\n  } else if (REACT_APP_COMPANY === \"VBMC\") {\n    lostPasswordLink = \"https://boxboisbim.mydatbim.com/inscription/oublie-mdp\";\n  } else if (REACT_APP_COMPANY === \"Alliance-Batiment\") {\n    lostPasswordLink =\n      \"https://alliance-batiment.mydatbim.com/inscription/oublie-mdp\";\n  } else {\n    lostPasswordLink =\n    \"https://alliance-batiment.mydatbim.com/template/espace-client\";\n  }\n\n  return (\n    <>\n      <h2 className={classes.datBimTitle}>Open dthX API Connexion</h2>\n      <Grid item xs={12}>\n        <form\n          className={classes.root}\n          noValidate\n          autoComplete=\"off\"\n          onSubmit={handleSubmit}\n        >\n          <FormControl fullWidth className={classes.margin}>\n            <TextField\n              id=\"filled-basic\"\n              label=\"Email\"\n              name=\"email\"\n              variant=\"filled\"\n              value={email}\n              onChange={handleChange}\n            />\n            <TextField\n              type=\"password\"\n              id=\"outlined-basic\"\n              label=\"Mot de passe\"\n              name=\"password\"\n              variant=\"filled\"\n            />\n            <Button type=\"submit\" className={classes.button}>\n              Connexion\n            </Button>\n            <a href={createAccountLink} target=\"_blank\" rel=\"noreferrer\">\n              Crer un compte\n            </a>\n            <a href={lostPasswordLink} target=\"_blank\" rel=\"noreferrer\">\n              Mot de passe oubli?\n            </a>\n          </FormControl>\n        </form>\n      </Grid>\n    </>\n  );\n};\n\nexport default Login;\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  makeStyles,\n  Grid,\n  Card,\n  CardContent,\n  Typography,\n  CircularProgress,\n} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  datBimCard: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    margin: theme.spacing(1),\n    cursor: \"pointer\",\n    height: \"8em\",\n  },\n  datBimCardTitle: {\n    margin: 0,\n    color: \"white\",\n  },\n  loader: {\n    color: \"inherit\",\n    marginTop: \"80px\",\n  },\n}));\n\nconst PortalList = ({\n  openObjects,\n  setBreadcrumbMap,\n  handleNext,\n  setActiveStep,\n}) => {\n  const classes = useStyles();\n\n  const [portals, setPortals] = useState([]);\n  const [portalsLoader, setPortalsLoader] = useState(false);\n\n  useEffect(() => {\n    const getPortalList = async () => {\n      try {\n        setPortalsLoader(true);\n\n        const portalList = await axios.get(\n          `${process.env.REACT_APP_API_DATBIM}/portals`,\n          {\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          }\n        );\n\n        setPortals(portalList.data.data);\n        setPortalsLoader(false);\n      } catch (error) {\n        setActiveStep(0);\n      }\n    };\n\n    getPortalList();\n  }, []);\n\n  return (\n    <Grid item xs={12}>\n      <Grid container spacing={1}>\n        <Grid item xs={12}>\n          <Typography variant=\"subtitle1\" component=\"h3\">\n            Slectionnez un portail:\n          </Typography>\n        </Grid>\n        {portalsLoader ? (\n          <Grid container justify=\"center\">\n            <CircularProgress className={classes.loader} />\n          </Grid>\n        ) : (\n          <>\n            {portals?.map((portal) => (\n              <Grid item lg={4}>\n                <Card\n                  key={portal.portal_id}\n                  className={`${classes.root} ${classes.datBimCard}`}\n                >\n                  <CardContent\n                    onClick={() => {\n                      openObjects(portal.portal_id);\n                      setBreadcrumbMap([portal.portal_name]);\n                      handleNext();\n                    }}\n                  >\n                    <Typography\n                      variant=\"h6\"\n                      component=\"h3\"\n                      className={classes.datBimCardTitle}\n                    >{`${portal.portal_name}`}</Typography>\n                    {/* <Typography variant=\"body1\" component=\"body1\" className={classes.datBimCardTitle}>{`url: ${portal.portal_url}`}</Typography> */}\n                  </CardContent>\n                </Card>\n              </Grid>\n            ))}\n          </>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default PortalList;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { Paper, InputBase, ButtonGroup, Button } from \"@material-ui/core\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport RotateLeftIcon from \"@material-ui/icons/RotateLeft\";\n\nconst useStyles = makeStyles((theme) => ({\n  search: {\n    height: \"3em\",\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    width: \"100%\",\n    // marginBotton: \"2em\",\n    \"&:disabled\": {\n      cursor: \"not-allowed\",\n    },\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1,\n  },\n  iconButton: {\n    border: \"none\",\n    color: \"black\",\n    // \"&:hover\": {\n    //   backgroundColor: \"#E6464D\",\n    //   color: \"white\",\n    // },\n    // \"&:disabled\": {\n    //   border: \"none\",\n    // },\n  },\n}));\n\nconst SearchBar = ({\n  keyword,\n  onChange,\n  placeholder,\n  className,\n  onClickOne,\n  onClickTwo,\n  disabled,\n  input,\n}) => {\n  const classes = useStyles();\n\n  const onKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      if (e.target.value.length === 0) {\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n        onClickOne();\n      }\n    }\n  };\n\n  const onClickOneCheck = () => {\n    // console.log(\"input ==>\", input);\n    if (input.length > 0) {\n      onClickOne();\n    }\n  };\n\n  return (\n    // <Input\n    //     value={keyword}\n    //     placeholder={placeholder}\n    //     onChange={(e) => onChange(e.target.value)}\n    //     className={className}\n    // />\n    <Paper component=\"form\" className={classes.search}>\n      <InputBase\n        disabled={disabled}\n        value={input}\n        className={classes.input}\n        placeholder={placeholder}\n        inputProps={{ \"aria-label\": \"search google maps\" }}\n        onChange={(e) => onChange(e.target.value)}\n        onKeyDown={onKeyDown}\n      />\n      <ButtonGroup aria-label=\"search button group\">\n        <Button\n          className={classes.iconButton}\n          disabled={disabled}\n          onClick={onClickOneCheck}\n        >\n          <SearchIcon />\n        </Button>\n        <Button\n          className={classes.iconButton}\n          disabled={disabled}\n          onClick={onClickTwo}\n        >\n          <RotateLeftIcon />\n        </Button>\n      </ButtonGroup>\n    </Paper>\n  );\n};\n\nexport default SearchBar;\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Grid, CircularProgress } from \"@material-ui/core\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\n\nconst TreeClass = ({ selectedPortal, getobjectsSetsBySelectedClass }) => {\n  const [classListing, setClassListing] = useState({});\n  const [treeClassListLoader, setTreeClassListLoader] = useState(false);\n\n  useEffect(() => {\n    getTreeClassList();\n  }, []);\n\n  const getTreeClassList = async () => {\n    try {\n      setTreeClassListLoader(true);\n      const treeClassList = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/tree-class`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n      // console.log(treeClassList);\n      setClassListing({\n        id: \"ClassList\",\n        name: \"Liste des classes\",\n        children: treeClassList.data,\n      });\n      setTreeClassListLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // async function getObjectsSets() {\n  //   setObjectsSetsListLoader(true);\n  //   const organizations = await axios.get(\n  //     `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/organizations`,\n  //     {\n  //       headers: {\n  //         \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //       },\n  //     }\n  //   );\n\n  //   Promise.allSettled(\n  //     organizations.data.data.map(async (organizationProperty) => {\n  //       return await axios.get(\n  //         `${process.env.REACT_APP_API_DATBIM}/organizations/${organizationProperty.organization_id}/object-sets`,\n  //         {\n  //           headers: {\n  //             \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //           },\n  //         }\n  //       );\n  //     })\n  //   ).then(function (values) {\n  //     const objects = values.reduce((acc, value) => {\n  //       if (value.status === \"fulfilled\") {\n  //         value.value.data.data.map((value) => acc.push(value));\n  //       }\n  //       return acc;\n  //     }, []);\n  //     setObjectsSetsListDefault(objects);\n  //     setObjectsSetsListLoader(false);\n  //   });\n  // }\n\n  const renderTree = (nodes) => (\n    <TreeItem\n      key={nodes.id}\n      nodeId={nodes.id}\n      label={nodes.name}\n      onClick={() => {\n        if (nodes.children.length === 0) {\n          console.log(\"nodes.id\", nodes.id);\n          getobjectsSetsBySelectedClass(nodes.id);\n        }\n      }}\n    >\n      {Array.isArray(nodes.children) &&\n        nodes.children.map((node) => <div>{renderTree(node)}</div>)}\n    </TreeItem>\n  );\n\n  return (\n    <>\n      {treeClassListLoader ? (\n        <Grid container justify=\"center\">\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n      ) : (\n        <>\n          {classListing && (\n            <TreeView\n              aria-label=\"rich object\"\n              defaultCollapseIcon={<ExpandMoreIcon />}\n              defaultExpandIcon={<ChevronRightIcon />}\n              defaultExpanded={[`ClassList`]}\n              sx={{\n                height: 110,\n                flexGrow: 1,\n                maxWidth: 400,\n                overflowY: \"auto\",\n              }}\n            >\n              {console.log(\"classListing\", classListing)}\n              {renderTree(classListing)}\n            </TreeView>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n\nexport default TreeClass;\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  makeStyles,\n  Grid,\n  Card,\n  CardContent,\n  CircularProgress,\n  Breadcrumbs,\n  Typography,\n  Divider,\n  CardActions,\n  CardActionArea,\n  Chip,\n} from \"@material-ui/core\";\nimport SearchBar from \"../../../../../../../Components/SearchBar\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport TreeClass from \"./TreeClass\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  datBimCard: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    margin: theme.spacing(1),\n    cursor: \"pointer\",\n    // height: \"8em\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n  },\n  datBimCardActionArea: {\n    width: \"100%\",\n    height: \"100%\",\n  },\n  datBimCardContent: {\n    width: \"100%\",\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    padding: 0,\n  },\n  datBimCardTitle: {\n    fontSize: 12,\n    margin: 0,\n    color: \"white\",\n    fontWeight: \"bold\",\n    padding: \"1.5em 0 0 1.5em\",\n  },\n  datBimCardDesc: {\n    fontSize: 8,\n    margin: 0,\n    // fontStyle: \"italic\",\n  },\n  datBimCardImg: {\n    width: \"100%\",\n    height: \"100%\",\n    marginBottom: \"1em\",\n    maxHeight: \"250px\",\n    objectFit: \"contain\",\n  },\n  button: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n  link: {\n    color: \"inherit\",\n    \"&:hover\": {\n      color: \"textPrimary\",\n      cursor: \"pointer\",\n      textDecoration: \"underline\",\n    },\n  },\n\n  noObjectSetsMessage: {\n    textAlign: \"center\",\n  },\n}));\n\nconst ObjectsSetsList = ({\n  viewer,\n  selectedPortal,\n  setSelectedObjectSet,\n  setSelectedObjectSetName,\n  eids,\n  breadcrumbMap,\n  setBreadcrumbMap,\n  handleNext,\n  setActiveStep,\n}) => {\n  const classes = useStyles();\n\n  const [objectsSetsList, setObjectsSetsList] = useState([]);\n  const [objectsSetsListDefault, setObjectsSetsListDefault] = useState([]);\n  const [objectsSetsListWithEIDS, setObjectsSetsListWithEIDS] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [objectsSetsListLoader, setObjectsSetsListLoader] = useState(false);\n\n  useEffect(() => {\n    getObjectsSetsList();\n  }, [eids]);\n\n  const getObjectsSetsList = () => {\n    setSearchInput(\"\");\n\n    if (eids.length > 0) {\n      getobjectsSetsBySelectedEids();\n    } else {\n      setObjectsSetsList(objectsSetsListDefault);\n      getObjectsSets();\n    }\n  };\n\n  const getObjectsSets = async () => {\n    try {\n      setObjectsSetsListLoader(true);\n\n      if (objectsSetsListDefault && objectsSetsListDefault.length > 0) {\n        setObjectsSetsListLoader(false);\n      } else {\n        const getObjectsSetsList = await axios.get(\n          `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/object-sets`,\n          {\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          }\n        );\n\n        console.log(\"objectsSetsList\", objectsSetsList);\n\n        const objectsSets = getObjectsSetsList.data.data;\n\n        console.log(\"objectsSetsList\", objectsSets);\n\n        setObjectsSetsListDefault(objectsSets);\n        setObjectsSetsList(objectsSets);\n\n        console.log(\"objectsSetsListDefault\", objectsSets);\n        setObjectsSetsListLoader(false);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getobjectsSetsBySelectedClass = async (classId) => {\n    try {\n      setObjectsSetsListLoader(true);\n      const objectsSetsBySelectedClass = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/object-sets/classes/${classId}`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n\n      setObjectsSetsList(objectsSetsBySelectedClass.data.data);\n      setObjectsSetsListWithEIDS(objectsSetsBySelectedClass.data.data);\n      setObjectsSetsListLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getobjectsSetsBySelectedEids = async () => {\n    try {\n      setObjectsSetsListLoader(true);\n      const ifcClass = await viewer.IFC.loader.ifcManager.getIfcType(\n        0,\n        eids[0]\n      );\n      console.log(\"ifcClass\", ifcClass);\n      const treeClassList = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/classes/mapping/${ifcClass}`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n      // console.log(\"treeClassList.data.data\", treeClassList.data.data);\n\n      Promise.allSettled(\n        treeClassList.data.data.map(async (treeClassListElement) => {\n          return await axios.get(\n            `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/object-sets/classes/${treeClassListElement.class_reference_id}`,\n            {\n              headers: {\n                \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n              },\n            }\n          );\n        })\n      ).then(function (values) {\n        const objectsSets = values.reduce((acc, value) => {\n          if (value.status === \"fulfilled\") {\n            value.value.data.data.map((value) => acc.push(value));\n          }\n          return acc;\n        }, []);\n        setObjectsSetsListWithEIDS(objectsSets);\n        setObjectsSetsList(objectsSets);\n        // console.log(\"ObjectsSetsListWithEIDS\", objectsSets);\n        setObjectsSetsListLoader(false);\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const searchObject = (input) => {\n    // console.log(\"input ==>\", input);\n    if (eids.length > 0) {\n      if (objectsSetsListWithEIDS && objectsSetsListWithEIDS.length > 0) {\n        const filtered = objectsSetsListWithEIDS.filter((objectsSets) => {\n          // console.log(\"objectsSetsListWithEIDS\", objectsSetsListWithEIDS);\n          const searchByObjectName = objectsSets.object_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n          const searchByOrganizationName = objectsSets.organization_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n\n          if (searchByObjectName) {\n            // console.log(\"searchByObjectName\", searchByObjectName);\n            return searchByObjectName;\n          } else if (searchByOrganizationName) {\n            return searchByOrganizationName;\n          }\n        });\n        setSearchInput(input);\n        setObjectsSetsList(filtered);\n      } else {\n        setSearchInput(input);\n      }\n    } else {\n      if (objectsSetsListDefault && objectsSetsListDefault.length > 0) {\n        const filtered = objectsSetsListDefault.filter((objectsSets) => {\n          const searchByObjectName = objectsSets.object_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n          const searchByOrganizationName = objectsSets.organization_name\n            .toLowerCase()\n            .includes(input.toLowerCase());\n\n          if (searchByObjectName) {\n            return searchByObjectName;\n          } else if (searchByOrganizationName) {\n            return searchByOrganizationName;\n          }\n        });\n        setSearchInput(input);\n        setObjectsSetsList(filtered);\n      }\n    }\n  };\n\n  const getObjectsSetsByKeyWord = async () => {\n    try {\n      setObjectsSetsListLoader(true);\n\n      const organizations = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/organizations`,\n        {\n          headers: {\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n\n      Promise.allSettled(\n        organizations.data.data.map(async (organizationProperty) => {\n          return await axios({\n            method: \"get\",\n            url: `${process.env.REACT_APP_API_DATBIM}/organizations/${organizationProperty.organization_id}/object-sets`,\n            params: { search: `${searchInput}` },\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          });\n        })\n      ).then(function (values) {\n        // console.log(\"values\", values);\n        const objectsSets = values.reduce((acc, value) => {\n          if (value.status === \"fulfilled\") {\n            value.value.data.data.map((value) => acc.push(value));\n          }\n          return acc;\n        }, []);\n        // console.log(\"objectsSets\", objectsSets);\n        setObjectsSetsList(objectsSets);\n\n        // console.log(\"objectsSetsListDefault\", objectsSets);\n        setObjectsSetsListLoader(false);\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const resetObjectsSetsList = () => {\n    setSearchInput(\"\");\n    setObjectsSetsList(objectsSetsListDefault);\n\n    if (eids.length > 0) {\n      getobjectsSetsBySelectedEids();\n    }\n  };\n\n  let usedList =\n    (eids.length > 0) & (searchInput.length === 0)\n      ? objectsSetsListWithEIDS\n      : objectsSetsList;\n\n  return (\n    <Grid container spacing={3}>\n      <Grid item xs={12}>\n        <Breadcrumbs\n          separator={<NavigateNextIcon fontSize=\"small\" />}\n          aria-label=\"breadcrumb\"\n        >\n          <Typography\n            className={classes.link}\n            onClick={(e) => setActiveStep(1)}\n          >\n            Portails\n          </Typography>\n          <Typography color=\"textPrimary\">\n            {breadcrumbMap[0].length > 15\n              ? breadcrumbMap[0].slice(0, 15) + \"...\"\n              : breadcrumbMap[0]}\n          </Typography>\n        </Breadcrumbs>\n      </Grid>\n      <Grid item xs={12}>\n        <Typography variant=\"subtitle1\" component=\"h3\">\n          Slectionnez une collection d'objets:\n        </Typography>\n      </Grid>\n      <Divider />\n      <Grid item xs={12}>\n        <SearchBar\n          disabled={objectsSetsListLoader === true}\n          input={searchInput}\n          onChange={searchObject}\n          className={classes.searchBar}\n          placeholder=\"Mot cl\"\n          onClickOne={getObjectsSetsByKeyWord}\n          onClickTwo={resetObjectsSetsList}\n        />\n      </Grid>\n      {objectsSetsListLoader ? (\n        <Grid container justify=\"center\">\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n      ) : (\n        <>\n          <Grid item xs={4}>\n            <TreeClass\n              selectedPortal={selectedPortal}\n              getobjectsSetsBySelectedClass={getobjectsSetsBySelectedClass}\n            />\n          </Grid>\n          <Grid item xs={8}>\n            {objectsSetsListLoader ? (\n              <Grid container justify=\"center\">\n                <CircularProgress color=\"inherit\" />\n              </Grid>\n            ) : (\n              <Grid container spacing={1}>\n                {usedList.length === 0 ? (\n                  <Grid item sm={12} className={classes.noObjectSetsMessage}>\n                    Aucune collection trouve. Veuillez faire une recherche par\n                    mot cl.\n                  </Grid>\n                ) : (\n                  usedList.map((object, index) => (\n                    <Grid item sm={4}>\n                      <Card\n                        key={index}\n                        className={`${classes.root} ${classes.datBimCard}`}\n                      >\n                        <CardActionArea\n                          className={`${classes.datBimCardActionArea}`}\n                        >\n                          <CardContent\n                            className={`${classes.datBimCardContent}`}\n                            onClick={() => {\n                              setSelectedObjectSet(object.object_id);\n                              setSelectedObjectSetName(object.object_name);\n                              setBreadcrumbMap([\n                                ...breadcrumbMap,\n                                object.object_name,\n                              ]);\n                              handleNext();\n                            }}\n                          >\n                            <Typography className={classes.datBimCardTitle}>\n                              {object.object_name}\n                              <br />\n                            </Typography>\n                            <img\n                              className={classes.datBimCardImg}\n                              src={object.img_ref}\n                              alt={object.object_name}\n                            />\n                          </CardContent>\n                        </CardActionArea>\n                        <CardActions>\n                          {/* <Typography className={classes.datBimCardDesc}>\n                                          {object.organization_name}\n                                        </Typography> */}\n                          <Chip\n                            className={classes.datBimCardDesc}\n                            label={`${object.organization_name}`}\n                          />\n                        </CardActions>\n                      </Card>\n                    </Grid>\n                  ))\n                )}\n\n                {objectsSetsList?.meta && (\n                  <Pagination\n                    count={objectsSetsList.meta.current_items}\n                    onChange={(e, value) => getObjectsSetsList()}\n                    variant=\"outlined\"\n                  />\n                )}\n              </Grid>\n            )}\n          </Grid>\n        </>\n      )}\n    </Grid>\n  );\n};\n\nexport default ObjectsSetsList;\n","import { useState } from \"react\";\nimport {\n  Grid,\n  Input,\n  Select,\n  MenuItem,\n  Slider,\n  RadioGroup,\n  Radio,\n  FormControlLabel,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow\n} from \"@material-ui/core\";\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\nfunction isStaticProperty(property_type) {\n  return property_type === \"S\";\n}\n\nfunction toBoolean(property_value) {\n  if (property_value === \"true\" || property_value) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction DefineTypeComponent(type, property, propertyIndex, configureProperty) {\n  let component = null;\n  switch (type) {\n    case \"Rel\":\n      component = (\n        <Input\n          type=\"number\"\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Entier\":\n      component = (\n        <Input\n          type=\"number\"\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Date\":\n      component = (\n        <Input\n          type=\"date\"\n          name=\"text_value\"\n          format=\"DD/MM/YYYY\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Lien\":\n    case \"Texte\":\n    case \"Texte paramtrique\":\n      component = (\n        <Input\n          type=\"text\"\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        />\n      );\n      break;\n    case \"Liste\":\n      component = (\n        <Select\n          name=\"text_value\"\n          fullWidth\n          value={property.text_value}\n          disabled={isStaticProperty(property.property_type)}\n          onChange={configureProperty(propertyIndex)}\n        >\n          {property.list_value.map((value, index) => (\n            <MenuItem key={index} value={value}>\n              {value}\n            </MenuItem>\n          ))}\n        </Select>\n      );\n      break;\n    case \"Grid/Tableau\":\n      const { values } = JSON.parse(property.text_value)\n      component = (\n        <TableContainer>\n          <Table style={{ minWidth: 650 }} aria-label=\"simple table\">\n            <TableBody>\n              {values.map((row, index) => (\n                <TableRow\n                  key={`row ${index}`}\n                  style={{ '&:last-child td, &:last-child th': { border: 0 } }}\n                >\n                  {row.map((cell, i) => (\n                    <TableCell key={`cell ${index} ${i}`} component=\"th\" scope=\"row\">\n                      {cell.data}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      );\n      break;\n    case \"Boolen\":\n      component = (\n        <RadioGroup\n          name=\"text_value\"\n          value={`${property.text_value}`}\n          onChange={configureProperty(propertyIndex)}\n          row\n        >\n          <FormControlLabel\n            value=\"true\"\n            control={<Radio />}\n            label=\"OUI\"\n            disabled={isStaticProperty(property.property_type)}\n          />\n          <FormControlLabel\n            value=\"false\"\n            control={<Radio />}\n            label=\"NON\"\n            disabled={isStaticProperty(property.property_type)}\n          />\n        </RadioGroup>\n      );\n      break;\n    case \"Intervalle\":\n      const marks = [\n        {\n          label: `${property.min_interval}`,\n          value: property.min_interval,\n        },\n        {\n          label: `${property.max_interval}`,\n          value: property.max_interval,\n        },\n      ];\n      component = (\n        <Slider\n          disabled={isStaticProperty(property.property_type)}\n          name=\"num_value\"\n          onChange={configureProperty(propertyIndex, \"num_value\")}\n          defaultValue={parseFloat(property.num_value)}\n          getAriaValueText={valuetext}\n          aria-labelledby=\"discrete-slider-custom\"\n          min={parseFloat(property.min_interval)}\n          step={\n            Math.pow(\n              10,\n              Math.floor(\n                Math.log10(property.max_interval - property.min_interval)\n              )\n            ) * 0.1\n          }\n          value={property.num_value}\n          max={parseFloat(property.max_interval)}\n          marks={marks}\n          valueLabelDisplay=\"auto\"\n        />\n      );\n      break;\n    default:\n      console.log(`Sorry, we are out of ${type}.`);\n  }\n\n  return component;\n}\n\nexport default DefineTypeComponent;\n","import { useEffect, useState } from \"react\";\n\nimport {\n  Grid,\n  Button,\n  TableContainer,\n  Table,\n  TableBody,\n  TableRow,\n  TableHead,\n  Paper,\n  TableCell,\n  makeStyles,\n  Input,\n  InputLabel,\n  InputAdornment,\n  Tooltip,\n  IconButton,\n  Checkbox,\n} from \"@material-ui/core\";\nimport Add from \"@material-ui/icons/Add\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport SearchBar from \"../../../../../../../Components/SearchBar/SearchBar.jsx\";\nimport DefineTypeComponent from \"./DefineTypeComponent\";\nimport InfoIcon from \"@mui/icons-material/Info\";\n\nconst useStyles = makeStyles((theme) => ({\n  searchBar: {\n    width: \"100%\",\n    underline: \"black\",\n    margin: \"20px 0px\",\n    \"&:before\": {\n      borderBottom: \"1px solid #E6464D\",\n    },\n    \"&:after\": {\n      borderBottom: `2px solid #E6464D`,\n    },\n  },\n  datBimList: {\n    color: \"white\",\n    \"&:nth-child(odd)\": {\n      backgroundColor: \"#DCDCDC\",\n      opacity: 0.8,\n    },\n  },\n  datBimCardTitle: {\n    margin: 0,\n    color: \"white\",\n  },\n  table: {\n    minWidth: \"100%\",\n  },\n  button: {\n    marginTop: \"10px\",\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n}));\n\nconst PropertyList = ({\n  projectId,\n  setLoader,\n  objSelected,\n  selectedObject,\n  bimData,\n  setBimData,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  addElementsNewProperties,\n  handleShowMarketplace,\n}) => {\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [propertyListDefault, setPropertyListDefault] = useState([]);\n  const [properties, setProperties] = useState([]);\n  const [allChecked, setAllChecked] = useState(true);\n  const history = useHistory();\n  const classes = useStyles();\n\n  function searchProperty(input) {\n    const filtered = propertyListDefault.filter((property) => {\n      return property.property_name.toLowerCase().includes(input.toLowerCase());\n    });\n    setSearchInput(input);\n    setProperties(filtered);\n  }\n\n\n  useEffect(() => {\n    const getPropertiesValues = async () => {\n      try {\n        const { data: dataProp } = await axios.get(\n          `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObject}/properties-values`,\n          {\n            headers: {\n              \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n            },\n          }\n        );\n        //console.log(\"data\", dataProp);\n        const dataPropFilter = dataProp.data.filter(\n          (prop) => prop.property_visibility\n        );\n\n        const dataWithCheckStatus = dataPropFilter.map((property) => {\n          return {\n            ...property,\n            checked: true,\n          };\n        });\n\n        const temporaryFixProperties = dataWithCheckStatus.map((property) => {\n          if (\n            property.data_type_name === \"Entier\" &&\n            property.text_value === \"A saisir\"\n          ) {\n            return {\n              ...property,\n              text_value: 0,\n            };\n          }\n\n          if (property.data_type_name === \"Lien\") {\n            const newLink = property.text_value.replace(\"Https\", \"https\");\n            return {\n              ...property,\n              text_value: newLink,\n            };\n          }\n          // console.log(\"Property =>\", property);\n          return property;\n        });\n\n        setPropertyListDefault(temporaryFixProperties);\n        setProperties(temporaryFixProperties);\n\n        // console.log(\"temporaryFixProperties\", temporaryFixProperties);\n      } catch (err) {\n        console.log(\"error\", err);\n      }\n    };\n\n    getPropertiesValues();\n  }, [selectedObject]);\n\n  const handleCheckedProperties = (e) => {\n    // console.log(`Checkbox id:`, e.target.id);\n    // console.log(`Checkbox check:`, e.target.checked);\n    console.log(\"properties\", properties);\n\n    const index = e.target.id;\n    const checkStatus = e.target.checked;\n\n    const newPropertiesArr = [...properties];\n    newPropertiesArr[index].checked = checkStatus;\n\n    if (!checkStatus) {\n      setAllChecked(false);\n    } else {\n      for (let i = 0; i < properties.length; i++) {\n        if (properties[i].checked === true) {\n          setAllChecked(true);\n        } else {\n          setAllChecked(false);\n          break;\n        }\n      }\n    }\n\n    setProperties(newPropertiesArr);\n  };\n\n  const handleGlobalCheckedProperties = (e) => {\n    const checked = e.target.checked;\n\n    if (!checked) {\n      // console.log(\"properties ==>\", properties);\n      // console.log(\"All checked ==> now to be unchecked\");\n\n      properties.map((property) => {\n        property.checked = false;\n      });\n\n      setAllChecked(false);\n    } else {\n      // console.log(\"properties 2 ==>\", properties);\n      // console.log(\"One or more are unchecked ==> all are now checked\");\n\n      properties.map((property) => {\n        property.checked = true;\n      });\n\n      setAllChecked(true);\n    }\n  };\n\n  const configureProperty = (index, key) => (e, value) => {\n    // console.log(\"Value =>\", value);\n    // console.log(\"index=>\", index);\n\n    // console.log(\"properties\", properties);\n\n    // let keyValue = key ? key : 'text_value';\n    let inputValue = e.target.value;\n\n    let property = properties[index];\n    const newPropertiesArr = [...properties];\n    switch (property.data_type_name) {\n      case \"Intervalle\":\n        newPropertiesArr[index]['num_value'] = inputValue || value;\n        newPropertiesArr[index]['text_value'] = inputValue || value;\n        break;\n      default:\n        newPropertiesArr[index]['text_value'] = inputValue || value;\n        break;\n    }\n    // const newPropertiesArr = [...properties];\n    // newPropertiesArr[index][keyValue] = inputValue || value;\n    // newPropertiesArr[index].value = inputValue || value;\n\n    setProperties(newPropertiesArr);\n  };\n\n\n  const updatePorperty = (property) => {\n    switch (property.data_type_name) {\n      case \"Intervalle\":\n        return {\n          ...property,\n          text_value: property.num_value,\n          value: property.num_value\n        }\n      case \"Grid/Tableau\":\n        const { values } = JSON.parse(property.text_value)\n        const newValues = [];\n        for (let value of values) {\n          newValues.push(`${value[0].data}: ${value[1].data}`)\n        }\n        return {\n          ...property,\n          text_value: newValues.toString(),\n          value: newValues.toString(),\n        }\n      default:\n        return {\n          ...property,\n          value: property.text_value\n        };\n    }\n  }\n\n\n\n  const addElementsDatBimProperties = async (properties, objSelected) => {\n    const filteredProperties = properties.filter(\n      (property) => property.checked\n    );\n\n    const updateProperties = [];\n    for (let property of filteredProperties) {\n      updateProperties.push(updatePorperty(property));\n    }\n\n    console.log('updateProperties', updateProperties)\n    console.log('objSelected', objSelected)\n    const response = await axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_API_DATBIM}/objects/${objSelected}/signing`,\n      headers: {\n        \"content-type\": \"application/json\",\n        \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n      },\n      data: updateProperties\n    });\n\n    console.log('data', response.data)\n\n    await addElementsNewProperties({\n      bimData,\n      setBimData,\n      viewer,\n      modelID,\n      expressIDs: eids,\n      properties: response.data.property ? response.data.property : updateProperties,\n    });\n    handleShowMarketplace(\"home\");\n  };\n\n  console.log(\"properties\", properties);\n  return (\n    <TableContainer component={Paper}>\n      {/* <SearchBar\n            input={searchInput}\n            onChange={searchProperty}\n            className={classes.searchBar}\n            placeholder=\"Chercher un Objet\"\n          /> */}\n      <Table className={classes.table} aria-label=\"simple table\">\n        <TableHead>\n          <TableRow className={`${classes.root} ${classes.datBimCardTitle}`}>\n            <TableCell>Proprit</TableCell>\n            <TableCell align=\"center\">Info</TableCell>\n            <TableCell align=\"center\">Valeur</TableCell>\n            <TableCell align=\"center\">Unit</TableCell>\n            {selectedObject ? (\n              <TableCell align=\"center\">\n                Ajouter\n                <Checkbox\n                  defaultChecked\n                  checked={allChecked}\n                  onChange={handleGlobalCheckedProperties}\n                />\n              </TableCell>\n            ) : (\n              \"\"\n            )}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {properties?.map((property, propertyIndex) => (\n            <TableRow\n              key={propertyIndex}\n              className={`${classes.root} ${classes.datBimList}`}\n            >\n              <TableCell width=\"35%\" component=\"th\" scope=\"row\">\n                {property.property_name}\n              </TableCell>\n              <TableCell width=\"10%\" component=\"th\" scope=\"row\">\n                {property.property_definition && (\n                  <Tooltip\n                    title={`${property.property_definition}`}\n                    placement=\"top-start\"\n                  >\n                    <IconButton>\n                      <InfoIcon />\n                    </IconButton>\n                  </Tooltip>\n                )}\n              </TableCell>\n              <TableCell width=\"35%\" align=\"right\">\n                {DefineTypeComponent(\n                  property.data_type_name,\n                  property,\n                  propertyIndex,\n                  configureProperty\n                )}\n              </TableCell>\n              <TableCell width=\"10%\" align=\"center\">\n                {property.unit}\n              </TableCell>\n              <TableCell width=\"10%\" align=\"center\">\n                <Checkbox\n                  defaultChecked\n                  checked={properties[propertyIndex].checked}\n                  onChange={handleCheckedProperties}\n                  id={propertyIndex}\n                />\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n      <Grid row align=\"right\">\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            addElementsDatBimProperties(properties, selectedObject);\n          }}\n          color=\"primary\"\n          className={classes.button}\n        >\n          Ajouter\n        </Button>\n      </Grid>\n    </TableContainer>\n  );\n};\n\nexport default PropertyList;\n","import { useState } from \"react\";\nimport { Input, Select, MenuItem, Slider, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  datBIMColor: {\n    color: \"#E6464D\",\n  },\n  slider: {\n    marginTop: \"25px\",\n  },\n}));\n\nconst valuetext = (value) => {\n  return `${value}`;\n};\n\nconst isStaticSelector = (selector_type) => {\n  return selector_type === \"S\";\n};\n\nconst DefineTypeComponent = ({\n  type,\n  selector,\n  selectorsRequest,\n  setSelectorsRequest,\n  getObjectsOfAdvancedSearch,\n}) => {\n  const classes = useStyles();\n\n  const [selectedRangedValues, setSelectedRangedValues] = useState([\n    selector.value_min,\n    selector.value_max,\n  ]);\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const handleChangeIntervalCommitted = (event, selectorIndex) => {\n    const newSelectorRequest = [...selectorsRequest];\n    let checkExist = false;\n\n    selectorsRequest.forEach((select, index) => {\n      if (select.id === selector.id) {\n        checkExist = true;\n        newSelectorRequest.splice(index, 1, {\n          id: select.id,\n          type: select.type,\n          value: selectorIndex,\n        });\n      }\n    });\n\n    if (!checkExist) {\n      newSelectorRequest.push({\n        id: selector.id,\n        type: selector.type,\n        value: selectorIndex,\n      });\n    }\n    setSelectorsRequest(newSelectorRequest);\n    //console.log(\"selectorsRequest\", newSelectorRequest);\n    getObjectsOfAdvancedSearch(newSelectorRequest);\n    //console.log(\"selectorsIndex ==>\", selectorIndex);\n  };\n\n  const updateSelectedRangedValues = (event, selectorIndex) => {\n    //console.log(\"selectorIndex ==>\", selectorIndex);\n    setSelectedRangedValues(selectorIndex);\n  };\n\n  const handleChangeDefinitionCommitted = (event) => {\n    const newSelectorRequest = [...selectorsRequest];\n    let checkExist = false;\n\n    selectorsRequest.forEach((select, index) => {\n      if (select.id === selector.id) {\n        checkExist = true;\n        newSelectorRequest.splice(index, 1, {\n          id: select.id,\n          type: select.type,\n          value_min: selectedRangedValues[0],\n          value_max: selectedRangedValues[1],\n        });\n      }\n    });\n\n    if (!checkExist) {\n      newSelectorRequest.push({\n        id: selector.id,\n        type: selector.type,\n        value_min: selectedRangedValues[0],\n        value_max: selectedRangedValues[1],\n      });\n    }\n    setSelectorsRequest(newSelectorRequest);\n    //console.log(\"selectorsRequest\", newSelectorRequest);\n    getObjectsOfAdvancedSearch(newSelectorRequest);\n    //console.log(\"selectorsIndex ==>\", selectorIndex);\n  };\n\n  const searchSubmit = (event, selectorIndex) => {\n    // console.log(\"selectorsRequest\", selectorsRequest);\n    // console.log(\"event\", event);\n    // console.log(\"selectorIndex\", selectorIndex);\n    const newSelectorRequest = [...selectorsRequest];\n    let checkExist = false;\n\n    selectorsRequest.forEach((select, index) => {\n      if (select.id === selector.id) {\n        checkExist = true;\n        newSelectorRequest.splice(index, 1, {\n          id: select.id,\n          type: select.type,\n          value:\n            inputValue && inputValue.length > 0\n              ? inputValue\n              : selectorIndex.props.value,\n        });\n      }\n    });\n\n    if (!checkExist) {\n      newSelectorRequest.push({\n        id: selector.id,\n        type: selector.type,\n        value:\n          inputValue && inputValue.length > 0\n            ? inputValue\n            : selectorIndex.props.value,\n      });\n    }\n    setSelectorsRequest(newSelectorRequest);\n    // console.log(\"selectorsRequest\", newSelectorRequest);\n    // console.log(\"selectorsIndex ==>\", selectorIndex);\n  };\n\n  const marks = [\n    {\n      label: `${selector.value_min}`,\n      value: selector.value_min,\n    },\n    {\n      label: `${selector.value_max}`,\n      value: selector.value_max,\n    },\n  ];\n\n  let component = null;\n  switch (type) {\n    // case 'Rel':\n    //     component = <Input type=\"number\" name=\"text_value\" fullWidth value={selector.text_value} disabled={isStaticSelector(selector.selector_type)} onChange={configureSelector(selectorIndex)} />\n    //     break;\n    // case 'Entier':\n    //     component = <Input type=\"number\" name=\"text_value\" fullWidth value={selector.text_value} disabled={isStaticSelector(selector.selector_type)} onChange={configureSelector(selectorIndex)} />\n    //     break;\n    // case 'Date':\n    //     component = <Input type=\"date\" name=\"text_value\" format=\"DD/MM/YYYY\" fullWidth value={selector.text_value} disabled={isStaticSelector(selector.selector_type)} onChange={configureSelector(selectorIndex)} />\n    //     break;\n    // case 'Lien':\n    case \"text\":\n      component = (\n        <Input\n          type=\"text\"\n          name=\"text_value\"\n          fullWidth\n          value={selector.text_value}\n          disabled={isStaticSelector(selector.selector_type)}\n          onChange={setInputValue}\n        />\n      );\n      break;\n    case \"list\":\n      component = (\n        <Select\n          name=\"text_value\"\n          fullWidth\n          value={selector.text_value}\n          disabled={isStaticSelector(selector.selector_type)}\n          onChange={searchSubmit}\n        >\n          {selector.list_value.map((value, index) => (\n            <MenuItem key={index} value={value}>\n              {value}\n            </MenuItem>\n          ))}\n        </Select>\n      );\n      break;\n    // case \"boolen\":\n    //   component = (\n    //     <RadioGroup\n    //       name=\"text_value\"\n    //       value={selector.text_value}\n    //       disabled={isStaticSelector(selector.selector_type)}\n    //       //   onChange={configureSelector(selectorIndex)}\n    //       row\n    //     >\n    //       <FormControlLabel value=\"1\" control={<Radio />} label=\"OUI\" />\n    //       <FormControlLabel value=\"0\" control={<Radio />} label=\"NON\" />\n    //     </RadioGroup>\n    //   );\n    //   break;\n    case \"interval\":\n      component = (\n        <Slider\n          className={`${classes.slider} ${classes.datBIMColor}`}\n          defaultValue={selector.value_min}\n          getAriaValueText={valuetext}\n          aria-labelledby=\"discrete-slider\"\n          valueLabelDisplay=\"auto\"\n          step={(selector.value_max - selector.value_min) / 100}\n          marks={marks}\n          min={selector.value_min}\n          max={selector.value_max}\n          onChangeCommitted={handleChangeIntervalCommitted}\n        />\n      );\n      break;\n\n    case \"definition\":\n      console.log('definition', selector);\n      console.log('selector.value_min', parseInt(selector.value_min));\n\n      component = (\n        <Slider\n          className={`${classes.slider} ${classes.datBIMColor}`}\n          name=\"text_value\"\n          getAriaValueText={valuetext}\n          aria-labelledby=\"range-slider\"\n          valueLabelDisplay=\"auto\"\n          defaultValue={selectedRangedValues}\n          step={(selector.value_max - selector.value_min) / 100}\n          marks={marks}\n          value={selectedRangedValues}\n          min={selector.value_min}\n          max={selector.value_max}\n          onChange={updateSelectedRangedValues}\n          onChangeCommitted={handleChangeDefinitionCommitted}\n        />\n      );\n      break;\n    default:\n      console.log(`Sorry, we are out of ${type}.`);\n  }\n\n  return component;\n};\n\nexport default DefineTypeComponent;\n","import {\n  Grid,\n  TableContainer,\n  Table,\n  TableBody,\n  TableRow,\n  Paper,\n  CircularProgress,\n  TableCell,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Typography,\n  Button\n} from \"@material-ui/core\";\n\nimport DefineTypeComponent from \"./DefineTypeComponent\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport React from \"react\";\n\n\n\nconst SelectionComponent = ({\n  selectors,\n  selectorsLoader,\n  getObjectsOfAdvancedSearch,\n  selectorsRequest,\n  setSelectorsRequest,\n  resetSelectors\n}) => {\n  // const classes = useStyles();\n\n\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>Slection</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        {selectorsLoader ? (\n          <Grid container justify=\"center\">\n            <CircularProgress color=\"inherit\" />\n          </Grid>\n        ) : (\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              {selectors && selectors.length > 0 ? (\n                <TableContainer component={Paper}>\n                  <Table aria-label=\"simple table\">\n                    <TableBody>\n                      {selectors?.map((selector, selectorIndex) => (\n                        <TableRow key={selector.id}>\n                          <TableCell width=\"40%\" component=\"th\" scope=\"row\">\n                            {selector.name}\n                          </TableCell>\n                          <TableCell width=\"40%\" align=\"right\">\n                            {DefineTypeComponent({\n                              type: selector.type,\n                              selector,\n                              selectorsRequest,\n                              setSelectorsRequest,\n                              getObjectsOfAdvancedSearch,\n                            })}\n                          </TableCell>\n                          <TableCell width=\"10%\" align=\"center\">\n                            {selector.unit}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              ) : (\n                <Typography>Aucun slecteur disponible</Typography>\n              )}\n            </Grid>\n            <Grid item xs={12} style={{ textAlign: 'right' }}>\n              <Button\n                variant=\"contained\"\n                onClick={resetSelectors}\n                color=\"primary\"\n                style={{ backgroundColor: \"#E6464D\", color: \"white\" }}\n              >\n                Rinitialiser\n              </Button>\n            </Grid>\n          </Grid>\n        )}\n      </AccordionDetails>\n    </Accordion>\n  );\n};\n\nexport default SelectionComponent;\n","import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport {\n  makeStyles,\n  Grid,\n  CircularProgress,\n  Typography,\n  Breadcrumbs,\n  Divider,\n} from \"@material-ui/core\";\nimport PropertyList from \"../PropertyList/PropertyList\";\nimport SelectionComponent from \"./SelectionComponent\";\n\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport SearchBar from \"../../../../../../../Components/SearchBar\";\n\nconst useStyles = makeStyles((theme) => ({\n  link: {\n    color: \"inherit\",\n    \"&:hover\": {\n      color: \"textPrimary\",\n      cursor: \"pointer\",\n      textDecoration: \"underline\",\n    },\n  },\n  button: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n}));\n\nconst ObjectList = ({\n  bimData,\n  setBimData,\n  projectId,\n  objSelected,\n  addElementsNewProperties,\n  selectedObject,\n  selectedObjectSet,\n  setSelectedObject,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  breadcrumbMap,\n  handleShowMarketplace,\n  setActiveStep,\n}) => {\n  const classes = useStyles();\n\n  const [searchBarInput, setSearchBarInput] = useState(\"\");\n  const [selectors, setSelectors] = useState([]);\n  const [selectorsRequest, setSelectorsRequest] = useState([]);\n  const [selectorsLoader, setSelectorsLoader] = useState(false);\n  const [objectsLoader, setObjectsLoader] = useState(false);\n  const [objectListing, setObjectListing] = useState({});\n  const [selectedObjectName, setSelectedObjectName] = useState(\"\");\n\n  // const classes = await axios.get(\n  //   `${process.env.REACT_APP_API_DATBIM}/classes/mapping/${typeProperties}`,\n  //   {\n  //     headers: {\n  //       \"content-type\": \"application/json\",\n  //       \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //     },\n  //   }\n  // );\n\n  useEffect(() => {\n    getSelectorsOfObjectSet();\n    getObjectsOfSelectedObject();\n  }, []);\n\n  const getSelectorsOfObjectSet = async () => {\n    try {\n      setSelectorsLoader(true);\n      const selectorsOfObjectSet = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObjectSet}/get-selector`,\n        {\n          headers: {\n            \"content-type\": \"application/json\",\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n      // console.log(\"selectorsOfObjectSet.data\", selectorsOfObjectSet.data);\n      setSelectors(selectorsOfObjectSet.data);\n      setSelectorsLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getObjectsOfAdvancedSearch = async (selectorsRequest) => {\n    try {\n      setSelectorsLoader(true);\n      setObjectsLoader(true);\n      // console.log(\"selectorsRequest ==>\", selectorsRequest);\n      const objectsOfAdvancedSearch = await axios({\n        method: \"post\",\n        url: `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObjectSet}/search-on-selector?tree=1`,\n        headers: {\n          \"content-type\": \"application/json\",\n          \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n        },\n        data: {\n          keyword: searchBarInput,\n          property: selectorsRequest,\n        },\n      });\n\n      setSelectors(objectsOfAdvancedSearch.data.search);\n      // console.log(\n      //   \"objectsListOfAdvancedSearch.data.result ==>\",\n      //   objectsOfAdvancedSearch.data.result\n      // );\n      setObjectListing({\n        id: \"FiltredObjects\",\n        name: \"Liste des objets filtrs\",\n        children: objectsOfAdvancedSearch.data.result,\n      });\n      setSelectorsLoader(false);\n      setObjectsLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const getObjectsOfSelectedObject = async () => {\n    try {\n      setObjectsLoader(true);\n\n      const treeOfObjectSet = await axios.get(\n        `${process.env.REACT_APP_API_DATBIM}/objects/${selectedObjectSet}/tree-structure`,\n        {\n          headers: {\n            \"content-type\": \"application/json\",\n            \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n          },\n        }\n      );\n\n      setObjectListing(treeOfObjectSet.data);\n      //console.log(\"objectListing ==>\", treeOfObjectSet.data);\n\n      setObjectsLoader(false);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  // const getObjects = async (typeProperties, selectedPage) => {\n  //   const classes = await axios.get(\n  //     `${process.env.REACT_APP_API_DATBIM}/classes/mapping/${typeProperties}`,\n  //     {\n  //       headers: {\n  //         \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //       },\n  //     }\n  //   );\n\n  //   Promise.all(\n  //     classes.data.properties.map(async (classProperty) => {\n  //       return await axios.get(\n  //         `${process.env.REACT_APP_API_DATBIM}/portals/${selectedPortal}/objects/${classProperty.class_reference_id}`,\n  //         {\n  //           headers: {\n  //             \"X-Auth-Token\": sessionStorage.getItem(\"token\"),\n  //           },\n  //         }\n  //       );\n  //     })\n  //   ).then(function (values) {\n  //     const objects = values.reduce((acc, value) => {\n  //       if (value.data.properties) {\n  //         return acc.concat(value.data.properties);\n  //       }\n\n  //       return acc;\n  //     }, []);\n  //     setObjectListDefault(objects);\n  //     setObjects(objects);\n  //     setObjectsLoader(false);\n  //   });\n  // }\n\n  // const searchObject = (input) => {\n  //   if (objectListDefault && objectListDefault.length > 0) {\n  //     const filtered = objectListDefault.filter((object) => {\n  //       const searchByObjectName = object.object_name\n  //         .toLowerCase()\n  //         .includes(input.toLowerCase());\n  //       const searchByOrganizationName = object.organization_name\n  //         .toLowerCase()\n  //         .includes(input.toLowerCase());\n\n  //       if (searchByObjectName) {\n  //         return searchByObjectName;\n  //       } else if (searchByOrganizationName) {\n  //         return searchByOrganizationName;\n  //       }\n  //     });\n  //     setSearchInput(input);\n  //     setObjects(filtered);\n  //   }\n  // }\n\n  const handleChangeKeyword = (value) => {\n    console.log(value);\n    setSearchBarInput(value);\n  };\n\n  const resetSelectors = () => {\n    setSearchBarInput(\"\");\n    setSelectorsRequest([]);\n    getSelectorsOfObjectSet();\n    getObjectsOfSelectedObject();\n    setSelectedObject(null);\n  };\n\n  const childRenderTree = ([renderedChildren, count], node) => {\n    const [renderedChild, newCount] = renderTree(node, count);\n    return [renderedChildren.concat(<div>{renderedChild}</div>), newCount];\n  };\n\n  const renderTree = (nodes, count) => {\n    const [children, newCount] =\n      Array.isArray(nodes.children) && nodes.children.length > 0\n        ? nodes.children.reduce(childRenderTree, [[], count])\n        : [null, count + 1];\n    return [\n      <TreeItem\n        key={nodes.id}\n        nodeId={nodes.id}\n        label={nodes.name}\n        onClick={() => {\n          setSelectedObject(nodes.id);\n          setSelectedObjectName(nodes.name);\n        }}\n      >\n        {children}\n      </TreeItem>,\n      newCount,\n    ];\n  };\n\n  const getExpandedNodes = async (list, node) => {\n    list.push(`${node.id}`);\n    if (node.children && node.children.length > 0) {\n      node.children.forEach((child) => {\n        getExpandedNodes(list, child);\n      });\n    }\n  };\n\n  let listing = null;\n\n  if (objectListing) {\n    const [tree, count] = renderTree(objectListing, 0);\n    let selectedObjectListing = [];\n    if (objectListing.id === \"FiltredObjects\") {\n      getExpandedNodes(selectedObjectListing, objectListing);\n      console.log(\"selectedObjectListing\", selectedObjectListing);\n    }\n\n    console.log(\"objectListing\", objectListing);\n    console.log(\"selectedObjectListing\", selectedObjectListing);\n    listing = (\n      <Grid item xs={12}>\n        <Typography>Objets trouvs: {count}</Typography>\n        <TreeView\n          aria-label=\"rich object\"\n          defaultCollapseIcon={<ExpandMoreIcon />}\n          // defaultExpanded={\n          //   objectListing.id === \"FiltredObjects\"\n          //     ? [`${objectListing.id}`, `${objectListing.children[0].id}`]\n          //     : [`${objectListing.id}`]\n          // }\n          defaultExpanded={\n            objectListing.id === \"FiltredObjects\"\n              ? selectedObjectListing\n              : [`${objectListing.id}`]\n          }\n          defaultExpandIcon={<ChevronRightIcon />}\n          sx={{\n            height: 1100,\n            flexGrow: 1,\n            maxWidth: 400,\n            overflowY: \"auto\",\n          }}\n        >\n          {tree}\n        </TreeView>\n      </Grid>\n    );\n  }\n\n  return (\n    <>\n      <Grid container spacing={3}>\n        <Grid item xs={12}>\n          <Breadcrumbs\n            separator={<NavigateNextIcon fontSize=\"small\" />}\n            aria-label=\"breadcrumb\"\n          >\n            <Typography\n              href=\"/\"\n              className={classes.link}\n              onClick={(e) => setActiveStep(1)}\n            >\n              Portails\n            </Typography>\n            <Typography\n              href=\"/\"\n              className={classes.link}\n              onClick={(e) => setActiveStep(2)}\n            >\n              {breadcrumbMap[0].length > 15\n                ? breadcrumbMap[0].slice(0, 15) + \"...\"\n                : breadcrumbMap[0]}\n            </Typography>\n            <Typography color={selectedObjectName ? \"inherit\" : \"textPrimary\"}>\n              {breadcrumbMap[1]}\n            </Typography>\n            {/* <Typography color={selectedObjectName ? \"textPrimary\" : \"inherit\"}>\n              {selectedObject &&\n                (selectedObjectName.length > 20\n                  ? selectedObjectName.slice(0, 20) + \"...\"\n                  : selectedObjectName)}\n            </Typography> */}\n          </Breadcrumbs>\n        </Grid>\n\n        <Grid item xs={12}>\n          <Typography variant=\"subtitle1\" component=\"h3\">\n            {`Slectionnez un objet: ${selectedObjectName}`}\n          </Typography>\n        </Grid>\n\n        <Grid item xs={12}>\n          <SearchBar\n            disabled={objectsLoader === true}\n            input={searchBarInput}\n            onChange={handleChangeKeyword}\n            className={classes.searchBar}\n            placeholder=\"Mot cl\"\n            onClickOne={() => getObjectsOfAdvancedSearch(selectorsRequest)}\n            onClickTwo={resetSelectors}\n          />\n        </Grid>\n        <Divider />\n\n        <Grid item sm={5}>\n          {objectsLoader ? (\n            <Grid container justify=\"center\">\n              <CircularProgress color=\"inherit\" />\n            </Grid>\n          ) : (\n            <>\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <SelectionComponent\n                    zIndex=\"2\"\n                    selectors={selectors}\n                    selectorsLoader={selectorsLoader}\n                    getObjectsOfAdvancedSearch={getObjectsOfAdvancedSearch}\n                    selectorsRequest={selectorsRequest}\n                    setSelectorsRequest={setSelectorsRequest}\n                    resetSelectors={resetSelectors}\n                  />\n                </Grid>\n                {listing}\n              </Grid>\n\n              {/* {objects?.meta && (\n                  <Pagination\n                    count={objects.meta.current_items}\n                    onChange={(e, value) => getObjects(typeProperties, value)}\n                    variant=\"outlined\"\n                  />\n                )} */}\n            </>\n          )}\n        </Grid>\n\n        <Grid item sm={7}>\n          <PropertyList\n            classes={classes}\n            projectId={projectId}\n            objSelected={objSelected}\n            selectedObject={selectedObject}\n            bimData={bimData}\n            setBimData={setBimData}\n            viewer={viewer}\n            modelID={modelID}\n            eids={eids}\n            setEids={setEids}\n            addElementsNewProperties={addElementsNewProperties}\n            handleShowMarketplace={handleShowMarketplace}\n          />\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport default ObjectList;\n","import { useState, useEffect } from \"react\";\nimport {\n  Grid,\n  makeStyles,\n  Typography,\n  Step,\n  StepLabel,\n  withStyles,\n  Stepper,\n} from \"@material-ui/core\";\nimport {\n  Alert\n} from \"@mui/material\";\nimport StepConnector from \"@material-ui/core/StepConnector\";\nimport clsx from \"clsx\";\nimport Check from \"@material-ui/icons/Check\";\nimport Login from \"./Components/Login/Login\";\nimport PortalList from \"./Components/PortalList/PortalList\";\nimport ObjectsSetsList from \"./Components/ObjectsSetsList/ObjectsSetsList\";\nimport ObjectList from \"./Components/ObjectList/ObjectList\";\nimport axios from \"axios\";\nimport KeyboardBackspaceIcon from \"@material-ui/icons/KeyboardBackspace\";\nimport PowerSettingsNewIcon from \"@material-ui/icons/PowerSettingsNew\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  button: {\n    fontSize: 40,\n    borderRadius: \"10%\",\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    \"&:hover\": {\n      backgroundColor: \"#E6464D\",\n      color: \"white\",\n      cursor: \"pointer\",\n    },\n    \"&:disabled\": {\n      opacity: 0.8,\n      color: \"white\",\n    },\n  },\n  headerButton: {\n    // fontSize: 30,\n    borderRadius: \"50%\",\n    color: \"#E6464D\",\n    \"&:hover\": {\n      color: \"white\",\n      backgroundColor: \"#E6464D\",\n      cursor: \"pointer\",\n    },\n  },\n  navigationBar: {\n    margin: 0,\n    bottom: 0,\n    width: \"100%\",\n    backgroundColor: \"white\",\n    padding: \"10px\",\n  },\n  modal: {\n    display: \"flex\",\n    padding: theme.spacing(1),\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  modalDatBim: {\n    width: \"50%\",\n    height: \"70%\",\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflow: \"hidden scroll\",\n    position: \"relative\",\n  },\n  datBimCard: {\n    backgroundColor: \"#E6464D\",\n    color: \"white\",\n    margin: theme.spacing(1),\n    cursor: \"pointer\",\n    height: \"8em\",\n  },\n  datBimTitle: {\n    textAlign: \"center\",\n    textTransform: \"none\",\n  },\n  datBimCardTitle: {\n    margin: 0,\n    color: \"white\",\n  },\n  datBimFooterCard: {\n    display: \"block\",\n    textAlign: \"right\",\n  },\n  datBimCardButton: {\n    textAlign: \"right\",\n    color: \"white\",\n  },\n  accordionDetails: {\n    display: \"block\",\n  },\n  datBimIcon: {\n    width: \"3em\",\n  },\n}));\n\nconst useQontoStepIconStyles = makeStyles({\n  root: {\n    color: \"#E6464D\",\n    display: \"flex\",\n    height: 22,\n    alignItems: \"right\",\n  },\n  active: {\n    color: \"#E6464D\",\n  },\n  circle: {\n    width: 8,\n    height: 8,\n    borderRadius: \"50%\",\n    backgroundColor: \"currentColor\",\n  },\n  completed: {\n    color: \"#E6464D\",\n    zIndex: 1,\n    fontSize: 18,\n  },\n});\n\nconst QontoConnector = withStyles({\n  alternativeLabel: {\n    top: 10,\n    left: \"calc(-50% + 16px)\",\n    right: \"calc(50% + 16px)\",\n  },\n  active: {\n    \"& $line\": {\n      borderColor: \"#E6464D\",\n    },\n  },\n  completed: {\n    \"& $line\": {\n      borderColor: \"#E6464D\",\n    },\n  },\n  line: {\n    borderColor: \"#eaeaf0\",\n    borderTopWidth: 3,\n    borderRadius: 1,\n  },\n})(StepConnector);\n\nconst DatBimApi = ({\n  bimData,\n  setBimData,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  addElementsNewProperties,\n  handleShowMarketplace, s\n}) => {\n  const [activeStep, setActiveStep] = useState(0);\n  const [breadcrumbMap, setBreadcrumbMap] = useState([]);\n  const [selectedPortal, setSelectedPortal] = useState(null);\n  const [selectedObjectSet, setSelectedObjectSet] = useState(null);\n  const [selectedObjectSetName, setSelectedObjectSetName] = useState(null);\n  const [selectedObject, setSelectedObject] = useState(null);\n  const [validation, setValidation] = useState({\n    status: true,\n    message: 'Connected',\n  });\n\n  useEffect(() => {\n    const init = async () => {\n      const token = sessionStorage.getItem(\"token\");\n      if (token) {\n        handleNext();\n      }\n    };\n    init();\n  }, []);\n\n  const steps = getSteps();\n  const classes = useStyles();\n\n  function QontoStepIcon(props) {\n    const classes = useQontoStepIconStyles();\n    const { active, completed } = props;\n\n    return (\n      <div\n        className={clsx(classes.root, {\n          [classes.active]: active,\n        })}\n      >\n        {completed ? (\n          <Check className={classes.completed} />\n        ) : (\n          <div className={classes.circle} />\n        )}\n      </div>\n    );\n  }\n\n  function getSteps() {\n    return [\"Connexion\", \"Portails\", \"Collections d'objets\", \"Objets\"];\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const data = new FormData(e.target);\n    localStorage.setItem(\"email\", data.get(\"email\"));\n\n    axios({\n      method: \"post\",\n      url: `${process.env.REACT_APP_API_DATBIM}/auth-token`,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n      data: {\n        entry_mode: \"string\",\n        ip: \"string\",\n        lang: \"fr\",\n        local_at: \"string\",\n        login: `${data.get(\"email\")}`,\n        password: `${data.get(\"password\")}`,\n        service: \"string\",\n      },\n    })\n      .then((r) => {\n        console.log(\"TOKEN\", r.data);\n        sessionStorage.setItem(\"token\", r.data.token);\n        setValidation({\n          status: true,\n          message: 'Connect'\n        })\n        handleNext();\n      })\n      .catch((error) => {\n        console.log('error', error);\n        setValidation({\n          status: false,\n          message: 'Erreur de connexion'\n        })\n        setActiveStep(0);\n      });\n  };\n\n  const handleDisconnect = async () => {\n    sessionStorage.setItem(\"token\", null);\n    setActiveStep(0);\n  };\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  function openObjects(id) {\n    setSelectedPortal(id);\n  }\n\n  function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return <Login handleSubmit={handleSubmit} />;\n      case 1:\n        return (\n          <PortalList\n            openObjects={openObjects}\n            setSelectedPortal={setSelectedPortal}\n            handleNext={handleNext}\n            breadcrumbMap={breadcrumbMap}\n            setBreadcrumbMap={setBreadcrumbMap}\n            setActiveStep={setActiveStep}\n          />\n        );\n      case 2:\n        return (\n          <ObjectsSetsList\n            selectedPortal={selectedPortal}\n            setSelectedObjectSet={setSelectedObjectSet}\n            setSelectedObjectSetName={setSelectedObjectSetName}\n            viewer={viewer}\n            eids={eids}\n            breadcrumbMap={breadcrumbMap}\n            setBreadcrumbMap={setBreadcrumbMap}\n            handleNext={handleNext}\n            setActiveStep={setActiveStep}\n          />\n        );\n      case 3:\n        return (\n          <ObjectList\n            selectedObject={selectedObject}\n            selectedObjectSet={selectedObjectSet}\n            selectedObjectSetName={selectedObjectSetName}\n            setSelectedObject={setSelectedObject}\n            handleNext={handleNext}\n            selectedPortal={selectedPortal}\n            // typeProperties={window.objProperties.type}\n            typeProperties={\"IfcWall\"}\n            bimData={bimData}\n            setBimData={setBimData}\n            viewer={viewer}\n            modelID={modelID}\n            eids={eids}\n            setEids={setEids}\n            addElementsNewProperties={addElementsNewProperties}\n            handleShowMarketplace={handleShowMarketplace}\n            breadcrumbMap={breadcrumbMap}\n            setBreadcrumbMap={setBreadcrumbMap}\n            setActiveStep={setActiveStep}\n          />\n        );\n      default:\n        return \"Unknown step\";\n    }\n  }\n\n  return (\n    <>\n      <Grid container>\n        <Grid item xs={6} style={{ textAlign: \"left\" }}>\n          {activeStep > 0 && (\n            <KeyboardBackspaceIcon\n              disabled={activeStep === 0}\n              onClick={handleBack}\n              className={classes.headerButton}\n            />\n          )}\n        </Grid>\n        <Grid item xs={6} style={{ textAlign: \"right\" }}>\n          {activeStep > 0 && (\n            <PowerSettingsNewIcon\n              className={classes.headerButton}\n              onClick={handleDisconnect}\n            />\n          )}\n        </Grid>\n      </Grid>\n      <Stepper\n        alternativeLabel\n        activeStep={activeStep}\n        connector={<QontoConnector />}\n      >\n        {steps.map((label) => (\n          <Step key={label}>\n            <StepLabel StepIconComponent={QontoStepIcon}>{label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n      {/* <div className={classes.navigationBar}>\n        <Grid container>\n          <Grid item xs={6}>\n            {activeStep > 0 && (\n              <Button\n                disabled={activeStep === 0}\n                onClick={handleBack}\n                className={classes.button}\n              >\n                Back\n              </Button>\n            )}\n          </Grid>\n        </Grid>\n      </div> */}\n      <Typography className={classes.instructions}>\n        {getStepContent(activeStep)}\n      </Typography>\n      {(!validation.status && activeStep === 0) &&\n        <Grid item xs={12}>\n          <Alert severity={'error'}>{`${validation.message}`}</Alert>\n        </Grid>\n      }\n    </>\n  );\n};\n\nexport default DatBimApi;\n","import React, { useState } from 'react';\nimport {\n  Grid,\n  Button,\n  TextField,\n  FormControl,\n  makeStyles,\n  Card,\n  CardHeader,\n  CardActionArea,\n  CardContent,\n  Avatar,\n  Badge,\n  Typography\n} from '@material-ui/core';\nimport DropBoxLogo from './img/DropBoxLogo.jpg';\nimport DropboxChooser from 'react-dropbox-chooser';\n\nconst {\n  REACT_APP_DROPBOX_APP_KEY\n} = process.env;\n\nconst useStyles = makeStyles((theme) => ({\n\n}));\n\nconst DropBox = ({\n  viewer,\n  onDrop\n}) => {\n  const [selectedApp, setSelectedApp] = useState({\n    name: 'DropBox',\n    img: DropBoxLogo,\n    type: 'storage',\n  })\n\n  async function handleSuccess(files) {\n    const rawResponse = await fetch(files[0].link, {\n      mode: 'no-cors'\n    });\n    const result = await rawResponse.text();\n    const ifcBlob = new Blob([result], { type: 'text/plain' });\n    const file = new File([ifcBlob], 'ifcFile');\n    onDrop({ files: [file], viewer });\n  }\n\n  return (\n    <>\n      <Grid container>\n        {/* <Grid item xs={3} /> */}\n        <Grid item xs={12}>\n          <DropboxChooser\n            appKey={REACT_APP_DROPBOX_APP_KEY}\n            success={handleSuccess}\n            cancel={() => console.log('closed')}\n            multiselect={false}\n            extensions={['.ifc']}\n          >\n            <Card\n            >\n              <CardActionArea\n              >\n                <CardHeader\n                  avatar={\n                    <Avatar\n                      aria-label=\"recipe\"\n                      src={selectedApp.img}\n                      alt={selectedApp.name}\n                      title={selectedApp.name}\n                    />\n                  }\n                  title={selectedApp.name}\n                  subheader={<Badge color=\"success\" pill>{selectedApp.type}</Badge>}\n                />\n                {/* <CardContent>\n                  <Typography\n                    variant=\"h4\"\n                    color=\"textSecondary\"\n                    component=\"h4\"\n                  >\n                    {'Connexion'}\n                  </Typography>\n                </CardContent> */}\n              </CardActionArea>\n            </Card>\n          </DropboxChooser>\n          {/* <Grid item xs={3} /> */}\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n\nexport default DropBox;\n\n","import { Tooltip, Fab } from \"@material-ui/core\";\n\nconst ToolTipsElem = ({\n  title,\n  placement,\n  disabled,\n  className,\n  onClick,\n  children\n}) => {\n  return (\n    <Tooltip arrow title={title} placement={placement}>\n      <Fab size=\"small\" className={className} onClick={onClick} disabled={disabled}>\n        {children}\n      </Fab>\n    </Tooltip>\n  );\n};\n\nexport default ToolTipsElem;\n","var _defs, _sodipodi$namedview, _metadata, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTracimLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    \"xmlns:dc\": \"http://purl.org/dc/elements/1.1/\",\n    \"xmlns:cc\": \"http://creativecommons.org/ns#\",\n    \"xmlns:rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n    \"xmlns:svg\": \"http://www.w3.org/2000/svg\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    \"xmlns:sodipodi\": \"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\",\n    \"xmlns:inkscape\": \"http://www.inkscape.org/namespaces/inkscape\",\n    width: 350,\n    height: 350,\n    viewBox: \"0 0 92.604165 92.604169\",\n    id: \"svg8\",\n    \"inkscape:version\": \"0.92.4 (5da689c313, 2019-01-14)\",\n    \"sodipodi:docname\": \"tracim juejue.svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", {\n    id: \"defs2\"\n  })), _sodipodi$namedview || (_sodipodi$namedview = /*#__PURE__*/React.createElement(\"sodipodi:namedview\", {\n    id: \"base\",\n    pagecolor: \"#ffffff\",\n    bordercolor: \"#666666\",\n    borderopacity: 1,\n    \"inkscape:pageopacity\": 0,\n    \"inkscape:pageshadow\": 2,\n    \"inkscape:zoom\": 0.35,\n    \"inkscape:cx\": -257.14286,\n    \"inkscape:cy\": 548.57143,\n    \"inkscape:document-units\": \"px\",\n    \"inkscape:current-layer\": \"layer1\",\n    showgrid: \"false\",\n    units: \"px\",\n    \"inkscape:window-width\": 1920,\n    \"inkscape:window-height\": 1016,\n    \"inkscape:window-x\": 0,\n    \"inkscape:window-y\": 27,\n    \"inkscape:window-maximized\": 1\n  })), _metadata || (_metadata = /*#__PURE__*/React.createElement(\"metadata\", {\n    id: \"metadata5\"\n  }, /*#__PURE__*/React.createElement(\"rdf:RDF\", null, /*#__PURE__*/React.createElement(\"cc:Work\", {\n    \"rdf:about\": \"\"\n  }, /*#__PURE__*/React.createElement(\"dc:format\", null, \"image/svg+xml\"), /*#__PURE__*/React.createElement(\"dc:type\", {\n    \"rdf:resource\": \"http://purl.org/dc/dcmitype/StillImage\"\n  }), /*#__PURE__*/React.createElement(\"dc:title\", null))))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    \"inkscape:label\": \"Calque 1\",\n    \"inkscape:groupmode\": \"layer\",\n    id: \"layer1\",\n    transform: \"translate(0,-204.39583)\"\n  }, /*#__PURE__*/React.createElement(\"image\", {\n    width: 96.194939,\n    height: 91.961594,\n    preserveAspectRatio: \"none\",\n    xlinkHref: \"data:image/png;base64,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 9b8CkgPQMbepVAAAAABJRU5ErkJggg== \",\n    id: \"image909\",\n    x: -1.7953858,\n    y: 205.85104\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTracimLogo);\nexport default __webpack_public_path__ + \"static/media/TracimLogo.5ddec76c77f0947c2b34359b650a9690.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useState } from 'react';\nimport axios from \"axios\";\n\nconst {\n  REACT_APP_THIRD_PARTY_API,\n  REACT_APP_IDS_API_URL\n} = process.env;\n\nfunction UseTracim({\n  viewer\n}) {\n  const [locked, setLocked] = useState(false);\n  const [apiInformation, setApiInformation] = useState({\n    lockProject: \"\",\n    unlockProject: \"\",\n    updateProject: \"\",\n  });\n\n  const handleUpdateProject = async () => {\n    try {\n      // EXPORT FICHIER IFC\n      const ifcData = await viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n      console.log('ifcData', ifcData);\n      let ifcDataString = new TextDecoder().decode(ifcData);\n      console.log('IFC STRING', ifcDataString);\n      let newIfcDataString = ifcDataString.replace(\n        \"FILE_NAME('no name', '', (''), (''), 'web-ifc-export');\",\n        \"FILE_NAME('0001','2011-09-07T12:40:02',(''),(''),'Autodesk Revit MEP 2011 - 1.0','20100326_1700 (Solibri IFC Optimizer)','');\"\n      );\n      console.log('newIfcDataString', newIfcDataString);\n\n\n\n\n      const ifcBlob = new Blob([newIfcDataString], { type: 'text/plain' });\n      console.log('ifcBlob', ifcBlob)\n      const ifcFile = new File([ifcBlob], 'ifcFile');\n      console.log('model', ifcFile)\n\n      // Accs  Tracim\n      const query = new URLSearchParams(window.location.search);\n\n      const content_id = query.get('content_id');\n      const space_id = query.get('space_id');\n      const user_id = query.get('user_id');\n\n      console.log('handleInitTracim Content ID:', content_id);\n      console.log('handleInitTracim Space ID:', space_id);\n      console.log('handleInitTracim User ID:', user_id);\n\n      const formData = new FormData();\n      formData.append('content_id', content_id);\n      formData.append('space_id', space_id);\n      formData.append('user_id', user_id);\n      formData.append('file', ifcFile);\n      const res = await axios.put(`${REACT_APP_IDS_API_URL}/tracim/updateModel`, formData);\n\n      console.log('res', res);\n\n      //sessionStorage.setItem(\"axeobim_lock_token\", res.data.lock_token);\n      //setLocked(false);\n      setApiInformation({\n        ...apiInformation,\n        updateProject: 'Maquette mise  jour'\n      })\n    } catch (err) {\n      setApiInformation({\n        ...apiInformation,\n        updateProject: 'Non connect  Tracim'\n      })\n    }\n  }\n\n  return {\n    setLocked,\n    setApiInformation,\n    handleUpdateProject\n  }\n};\n\nexport {\n  UseTracim\n};","import { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Alert,\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  ButtonGroup,\n  Divider,\n  Tooltip,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Stack\n} from \"@mui/material\";\nimport ToolTipsElem from '../../../../../Components/ToolTipsElem/ToolTipsElem';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport LockIcon from '@mui/icons-material/Lock';\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\nimport KeyboardCapslockIcon from '@mui/icons-material/KeyboardCapslock';\nimport FileUploadIcon from '@mui/icons-material/FileUpload';\nimport StepConnector from \"@material-ui/core/StepConnector\";\nimport clsx from \"clsx\";\nimport Check from \"@material-ui/icons/Check\";\nimport axios from \"axios\";\nimport OAuth2Login from 'react-simple-oauth2-login';\nimport TracimLogo from './img/TracimLogo.svg'\nimport { UseTracim } from './Tracim.hooks';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n  },\n  table: {\n    width: \"100%\",\n  },\n  iconButton: {\n    backgroundColor: 'red'\n  }\n}));\n\n\nconst {\n  REACT_APP_THIRD_PARTY_API\n} = process.env;\n\nconst Tracim = ({\n  openProperties,\n  projectId,\n  objSelected,\n  viewer,\n  modelID,\n  eids,\n  setEids,\n  addElementsNewProperties,\n  handleShowMarketplace,\n  setSelectedApp\n}) => {\n  const classes = useStyles();\n\n  const {\n    locked,\n    setLocked,\n    apiInformation,\n    setApiInformation,\n    handleUpdateProject\n  } = UseTracim({\n    viewer\n  });\n\n  useEffect(() => {\n    async function init() {\n      const lockToken = sessionStorage.getItem(\"axeobim_lock_token\");\n      console.log('lockToekn', lockToken)\n      if (!lockToken || lockToken === \"\") {\n        setLocked(false);\n      } else {\n        setLocked(true);\n      }\n    }\n    init();\n  }, []);\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12}>\n        <Typography variant=\"subtitle1\" component=\"h3\">\n          Modle BIM en cours de traitement:\n        </Typography>\n      </Grid>\n\n      <Grid item xs={12}>\n        <List sx={{ width: \"100%\", backgroundColor: '#1890ff', color: 'white', borderRadius: '1em' }}>\n          <ListItem\n            key={0}\n            secondaryAction={\n              <>\n                <Tooltip\n                  title={\n                    <p>\n                      Tracim:\n                      <br />\n                      Mise  jour de la maquette dans Tracim pour les autres utilisateurs\n                    </p>\n                  }\n                  placement=\"top\"\n                >\n                  <IconButton\n                    edge=\"end\"\n                    aria-label=\"comments\"\n                    onClick={handleUpdateProject}\n                    className={classes.icons}\n                  >\n                    <FileUploadIcon sx={{ color: 'white' }} />\n                  </IconButton>\n                </Tooltip>\n              </>\n            }\n            disablePadding\n          >\n            Mise  jour de la maquette dans Tracim\n          </ListItem>\n        </List>\n      </Grid >\n      \n    </Grid >\n  );\n};\n\nexport default Tracim;\n","import React, { useEffect, useState } from \"react\";\nimport { Alert } from \"@mui/material\";\nimport {\n  Typography,\n  Grid,\n  makeStyles,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Card,\n  CardHeader,\n  CardActionArea,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Badge,\n  Fab,\n} from \"@material-ui/core\";\nimport AppsIcon from \"@material-ui/icons/Apps\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport DatBimApi from \"./DatBimApi/DatBimApi\";\nimport DropBox from \"./DropBox/DropBox\";\nimport DropboxChooser from \"react-dropbox-chooser\";\nimport OpenDthxLogo from \"./img/OpenDthxLogo.png\";\nimport SearchBar from \"../../../../Components/SearchBar\";\nimport Tracim from \"./Tracim/Tracim\";\nimport TracimLogo from \"./Tracim/img/TracimLogo.svg\"\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  application: {\n    height: \"17em\",\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    padding: \"5px\",\n    borderRadius: \"0px\",\n  },\n  root: {\n    maxWidth: 345,\n    margin: \"10px\",\n    cursor: \"pointer\",\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\", // 16:9\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n  button: {\n    color: \"black\",\n    // \"&:hover\": {\n    //   color: \"white\",\n    //   backgroundColor: \"black\",\n    //   cursor: \"pointer\",\n    // },\n  },\n}));\n\nconst applications = [\n  {\n    name: \"Open dthX\",\n    img: OpenDthxLogo,\n    type: \"data\",\n    description: \"Base de donnes permettant l'enrichissement de la maquette\",\n  },\n  // {\n  //   name: \"DropBox\",\n  //   img: DropBoxLogo,\n  //   type: \"storage\",\n  //   description: \"Espace permettant le partage et le stockage de fichier\",\n  // },\n  // {\n  //   name: 'Google Drive',\n  //   img: GoogleDriveLogo,\n  //   type: 'storage',\n  //   tags: ['Coming Soon'],\n  //   description: 'Espace permettant le partage et le stockage de fichier'\n  // },\n  {\n    name: \"Tracim\",\n    img: TracimLogo,\n    type: \"storage\",\n    description: \"Espace permettant le partage et le stockage de fichier\",\n  },\n];\n\nconst { REACT_APP_DROPBOX_APP_KEY } = process.env;\n\nconst Marketplace = ({\n  bimData,\n  setBimData,\n  viewer,\n  modelID,\n  handleShowMarketplace,\n  eids,\n  setEids,\n  onDrop,\n  addElementsNewProperties,\n  specificApplication,\n  apiConnectors,\n  setApiConnectors,\n}) => {\n  const [selectedApp, setSelectedApp] = useState(\"home\");\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [filteredData, setFilteredData] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  useEffect(() => {\n    console.log(\"apiConnectors\", apiConnectors);\n    setFilteredData(applications);\n    if (specificApplication) {\n      setSelectedApp(specificApplication);\n    } else {\n      setSelectedApp(\"home\");\n    }\n  }, []);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleSearchData = (input) => {\n    const dataList = [...applications];\n    if (dataList && dataList.length > 0) {\n      const newFilteredData = dataList.filter((data) => {\n        const searchResult = `${data.name} ${data.type} ${data.description}`\n          .toLowerCase()\n          .includes(input.toLowerCase());\n        return searchResult;\n      });\n      setSearchInput(input);\n      setFilteredData(newFilteredData);\n    }\n  };\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowMarketplace}\n            >\n              <AppsIcon />\n            </Fab>\n          </Avatar>\n        }\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleShowMarketplace}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              className={classes.button}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              {/* <ListItem\n                button\n                onClick={handleShowElement}\n              >\n                <ListItemIcon>\n                  <VisibilityIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Visibility\" />\n              </ListItem> */}\n              <ListItem button onClick={handleShowMarketplace}>\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n        title={`Place de march`}\n        subheader={`Liste des applications BIM`}\n      />\n      <CardContent className={classes.cardContent}>\n        {selectedApp === \"home\" && (\n          <Grid container spacing={3}>\n            {filteredData?.length >= 0 && (\n              <>\n                <Grid item xs={12}>\n                  <SearchBar\n                    input={searchInput}\n                    onChange={handleSearchData}\n                    placeholder=\"Key words\"\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                  <Typography>{`Number of results: ${filteredData.length}`}</Typography>\n                </Grid>\n              </>\n            )}\n            {filteredData?.map((application) => (\n              <Grid item xs={4}>\n                <Card className={classes.application}>\n                  <CardActionArea\n                    onClick={() => {\n                      // if (application.name === 'Dropbox') {\n                      //   viewer.openDropboxWindow();\n                      // } else {\n                      setSelectedApp(application.name);\n                      // }\n                    }}\n                  >\n                    <CardHeader\n                      avatar={\n                        <Avatar\n                          aria-label=\"recipe\"\n                          className={classes.avatar}\n                          src={application.img}\n                          alt={application.name}\n                          title={application.name}\n                        />\n                      }\n                      title={application.name}\n                      subheader={\n                        <Badge color=\"success\" pill>\n                          {application.type}\n                        </Badge>\n                      }\n                    />\n                    <CardContent>\n                      <Typography\n                        variant=\"body2\"\n                        color=\"textSecondary\"\n                        component=\"p\"\n                      >\n                        {application.description}\n                      </Typography>\n                    </CardContent>\n                  </CardActionArea>\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        )}\n        {selectedApp === \"Open dthX\" && (\n          <DatBimApi\n            bimData={bimData}\n            setBimData={setBimData}\n            viewer={viewer}\n            modelID={modelID}\n            eids={eids}\n            setEids={setEids}\n            addElementsNewProperties={addElementsNewProperties}\n            handleShowMarketplace={handleShowMarketplace}\n          />\n        )}\n        {selectedApp === \"DropBox\" && (\n          <DropBox viewer={viewer} onDrop={onDrop} />\n        )}\n        {selectedApp === \"Tracim\" && (\n          <Tracim viewer={viewer} onDrop={onDrop} />\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Marketplace;\n","import React, { useEffect, useState, memo } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  // List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  ButtonGroup,\n  CircularProgress,\n  Divider\n} from \"@mui/material\";\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { useDemoData } from '@mui/x-data-grid-generator';\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport DownloadIcon from '@mui/icons-material/Download';\nimport SearchBar from '../../../../Components/SearchBar';\nimport { IFCSLAB, IFCMEMBER, IFCSTRUCTURALCURVEMEMBER } from \"web-ifc\";\nimport CommentIcon from '@mui/icons-material/Comment';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport LibraryAddIcon from '@mui/icons-material/LibraryAdd';\nimport MutltiSelectionIcon from '@mui/icons-material/ControlPointDuplicate';\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\nimport IfcIcons from '../../Utils/ifc-full-icons.json';\nimport flatten from 'tree-flatten';\nimport { FixedSizeList as List } from \"react-window\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  },\n  buttonGroup: {\n    backgroundColor: 'white',\n    marginTop: '1em'\n  }\n}));\n\n\nconst SearchData = ({\n  bimData,\n  setBimData,\n  viewer,\n  handleShowMarketplace,\n  handleShowProperties,\n  handleGetJsonData,\n  eids,\n  setEids\n}) => {\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [checked, setChecked] = React.useState([0]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [selectedElements, setSelectedElements] = useState([]);\n  const [validation, setValidation] = useState({\n    loading: false,\n    message: `${selectedElements.length} lments`,\n  });\n  // const [ifcElementByType, setIfcElementByType] = useState([]);\n  // const [expressIDList, setExpressIDList] = useState([]);\n\n  useEffect(() => {\n    async function init() {\n      setValidation({\n        loading: true,\n        message: `Chargement de la slection...`,\n      })\n      const selectedElements = await Promise.all(eids.map(async (eid) => {\n        const elementProperties = await viewer.IFC.getProperties(0, eid, false, false);\n        const type = await viewer.IFC.loader.ifcManager.getIfcType(0, eid);\n        return elementProperties;\n      }));\n\n      setSelectedElements(selectedElements);\n      setValidation({\n        loading: false,\n        message: `${selectedElements.length} lments`\n      })\n    }\n    init();\n  }, [eids]);\n\n  const handleElementsMultiSelection = async () => {\n    const found = await viewer.IFC.pickIfcItem(true, 1);\n    setEids([...eids, found.id]);\n  }\n\n  const handleElementSelection = async (element) => {\n    const currentIndex = checked.indexOf(element);\n    const newChecked = [...checked];\n    //await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n    if (currentIndex === -1) {\n      newChecked.push(currentIndex);\n    } else {\n      // await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  }\n\n  const handleRemoveAllElements = async () => {\n    setEids([]);\n    await viewer.IFC.unpickIfcItems();\n  }\n\n\n  const handleGetAllItemsOfType = async (element) => {\n    console.log('element', element);\n    const elementsByType = await viewer.getAllItemsOfType(0, element.type, false, false);\n    console.log('elementsByType', elementsByType)\n    setEids([...eids, ...elementsByType]);\n  }\n\n  const handleRemoveElement = async (element) => {\n    const newEids = eids.filter(eid => eid !== element.expressID);\n    await viewer.IFC.pickIfcItemsByID(0, newEids);\n    setEids(newEids);\n  }\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement('a')\n    a.download = fileName\n    a.href = window.URL.createObjectURL(blob)\n    const clickEvt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n    a.dispatchEvent(clickEvt)\n    a.remove()\n  }\n\n  const handleExportToCsv = async (e, eids) => {\n    e.preventDefault()\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = ['modelId', 'elementName', 'elementClass', 'globalId', 'expressId', 'psetName', 'propertyName', 'propertyValue'].join(',');\n    propertiesCsv.push(headers)\n\n    await Promise.all(eids.map(async eid => {\n      const ifcElement = await viewer.IFC.getProperties(0, eid, true, true);\n      const selectedModelID = await viewer.IFC.getModelID();\n      // const ifcLoader = new IFCLoader();\n      // const ifcClass = ifcClassType[];\n      console.log('ifcClass ', ifcElement)\n      await Promise.all(ifcElement.psets?.map(async pset => pset.HasProperties && await Promise.all(pset.HasProperties?.map(async (property) => {\n        const modelID = 0;\n        const elementName = `${ifcElement.Name?.value}`;\n        const elementClass = `NONE`;\n        const globalID = `${ifcElement.GlobalId.value}`;\n        const expressID = `${ifcElement.expressID}`;\n        const psetName = `${pset.Name.value}`;\n        const propertyName = `${property.Name?.value}`;\n        const propertyValue = `${property.NominalValue?.value}`;\n\n        propertiesCsv.push([modelID, elementName, elementClass, globalID, expressID, psetName, propertyName, propertyValue].join(','))\n      }))))\n    }));\n\n    downloadFile({\n      data: [...propertiesCsv].join('\\n'),\n      fileName: `selection.csv`,\n      fileType: 'text/csv',\n    })\n  }\n\n  function getAllItemsOfType(type, properties) {\n    return Object.values(properties).filter(item => item.type === type);\n  }\n\n  // function getRelElements(data, dataList) {\n  //   if (data.type.toLowerCase().includes(\"property\")) {\n  //     const pset = dataList.filter(item => item.type === 'IFCPROPERTYSET');\n  //     const allPsetsRels = propertyValues.filter(item => item.type === 'IFCRELDEFINESBYPROPERTIES');\n  //     const relatedPsetsRels = allPsetsRels.filter(item => item.RelatedObjects.includes(id));\n  //     const psets = relatedPsetsRels.map(item => properties[item.RelatingPropertyDefinition]);\n  //     for (let pset of psets) {\n  //       pset.HasProperty = pset.HasProperties.map(id => properties[id]);\n  //     }\n  //   }\n  // }\n\n  // const newHandleSearchData = async (input) => {\n  //   setValidation({\n  //     loading: true,\n  //     message: 'Chargement...'\n  //   });\n\n  //   const properties = bimData.models.data[0];\n  //   const relContained = getAllItemsOfType('IFCRELAGGREGATES', properties);\n  //   console.log('relContained', relContained)\n  //   const relSpatial = getAllItemsOfType('IFCRELCONTAINEDINSPATIALSTRUCTURE', properties);\n  //   console.log('relSpatial', relSpatial)\n\n  //   const relPset = getAllItemsOfType('IFCRELDEFINESBYPROPERTIES', properties);\n  //   const relMat = getAllItemsOfType('IFCRELASSOCIATESMATERIAL', properties);\n\n\n  //   console.log('propertiesValues', Object.values(properties))\n  //   const dataList = Object.values(properties)\n  //   // const dataList =  await Object.keys(data).forEach(index => {\n  //   //   maxExpressId = Math.max(maxExpressId, allLines._data[index])\n  //   // });\n  //   // console.log('dataList', dataList)\n  //   const filteredEids = [];\n\n  //   const newFilteredData = await dataList.filter((data) => {\n  //     const searchResult = newSearchEngine(data, input);\n  //     if (searchResult) {\n  //       filteredEids.push(data.expressID);\n  //     }\n  //     return searchResult;\n  //   });\n  //   console.log('filteredEids', filteredEids)\n  //   setEids(filteredEids);\n  //   await viewer.IFC.pickIfcItemsByID(0, filteredEids);\n  //   setValidation({\n  //     loading: false,\n  //     message: `lments`\n  //   });\n  // }\n\n  // const newSearchEngine = (data, input) => {\n  //   const keyWords = [];\n  //   keyWords.push(`${data.expressID} ${DecodeIFCString(data.Name)} ${data.type} ${DecodeIFCString(data.Description)} ${data.GlobalId} ${DecodeIFCString(data.NominalValue)} ${data.Unit}`);\n\n  //   const searchResult = keyWords.some(keyWord => keyWord.toLowerCase()\n  //     .includes(input.toLowerCase()));\n\n  //   return searchResult;\n  // }\n\n  const handleSearchData = async (input) => {\n    setValidation({\n      loading: true,\n      message: 'Chargement...'\n    });\n    console.log('inputs', input)\n    let dataList = bimData.search.data[0];\n    console.log('dataList', dataList)\n    if (!dataList || dataList.length === 0) {\n      const data = await handleGetJsonData(viewer, flatten(bimData.spatialStructures.list[0], 'children'), setValidation);\n      setBimData({\n        ...bimData,\n        search: {\n          ...bimData.search,\n          data: [...bimData.search.data, data]\n        }\n      });\n      dataList = [...data];\n    }\n    const filteredEids = [];\n\n    if (dataList && dataList.length > 0) {\n      const newFilteredData = await dataList.filter((data) => {\n        const searchResult = searchEngine(data, input);\n        if (searchResult) {\n          filteredEids.push(data.expressID);\n        }\n        return searchResult;\n      });\n      setSearchInput(input);\n      setFilteredData(newFilteredData);\n      setEids(filteredEids);\n      console.log('newFilteredData', newFilteredData)\n      setSelectedElements(newFilteredData);\n      await viewer.IFC.pickIfcItemsByID(0, filteredEids);\n    }\n    setValidation({\n      loading: false,\n      message: `${filteredEids.length} lments`\n    });\n  };\n\n  function DecodeIFCString(ifcString) {\n    const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/giu;\n    let resultString = ifcString;\n    let match = ifcUnicodeRegEx.exec(ifcString);\n    while (match) {\n      const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n      resultString = resultString.replace(match[0], unicodeChar);\n      match = ifcUnicodeRegEx.exec(ifcString);\n    }\n    return resultString;\n  }\n\n  const searchEngine = (data, input) => {\n    const keyWords = [];\n    keyWords.push(`${data.Name?.value} ${data.type} ${data.Description} ${data.GlobalId?.value} ${data.ObjectType?.value} ${data.expressID}`);\n    // for (let pset of data.psets) {\n    //   keyWords.push(`${pset.Name?.value}`);\n    //   if (pset.HasProperties && pset.HasProperties.length > 0) {\n    //     for (let property of pset.HasProperties) {\n    //       const label = DecodeIFCString(property.Name.value);\n    //       const value = property.NominalValue\n    //         ? DecodeIFCString(property.NominalValue.value)\n    //         : \"\";\n\n    //       const description =\n    //         property.Description && property.Description !== \"\"\n    //           ? DecodeIFCString(property.Description.value)\n    //           : null;\n    //       keyWords.push(`${label} ${value} ${description}`);\n    //     }\n    //   }\n    // }\n\n    // for (let mat of data.mats) {\n    //   keyWords.push(`${mat.ForLayerSet?.Description} ${mat.ForLayerSet?.LayerSetName?.value}`);\n    //   if (mat.ForLayerSet?.MaterialLayers && mat.ForLayerSet?.MaterialLayers.length > 0) {\n    //     for (let material of mat.ForLayerSet.MaterialLayers) {\n    //       const name = DecodeIFCString(material.Material.Name.value);\n    //       // const thickness = DecodeIFCString(material.Material.Name.value);\n    //       keyWords.push(`${name}`);\n    //     }\n    //   }\n    // }\n\n    const searchResult = keyWords.some(keyWord => keyWord.toLowerCase()\n      .includes(input.toLowerCase()));\n\n    return searchResult;\n  }\n\n\n  const handleChange = (input) => {\n    setSearchInput(input);\n  }\n\n  const handleResetSearch = async () => {\n    setSearchInput(\"\");\n    setEids([]);\n    setSelectedElements([]);\n    await viewer.IFC.pickIfcItemsByID(0, []);\n  };\n\n  const Row = ({ index, key, style }) => (\n    // <div key={key} style={style} className=\"post\">\n    //   <p>{`${selectedElements[index].Name ? selectedElements[index].Name.value : 'NO NAME'} / ${selectedElements[index].expressID}`}</p>\n    // </div>\n    <ListItem\n      key={key}\n      secondaryAction={\n        <>\n          {/* <IconButton\n    edge=\"end\"\n    aria-label=\"comments\"\n    onClick={() => handleGetAllItemsOfType(element)}\n  >\n    <LibraryAddIcon />\n  </IconButton> */}\n          <IconButton\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={(e) => {\n              handleShowProperties(selectedElements[index].expressID);\n              e.stopPropagation();\n            }}\n          >\n            <DescriptionIcon />\n          </IconButton>\n          <IconButton\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={(e) => handleExportToCsv(e, [selectedElements[index].expressID])}\n          >\n            <DownloadIcon />\n          </IconButton>\n          <IconButton\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleRemoveElement(selectedElements[index])}\n          >\n            <CloseIcon />\n          </IconButton>\n        </>\n      }\n      disablePadding\n      style={style}\n    >\n      <ListItemButton\n        role={undefined}\n        dense\n        onClick={() => handleElementSelection(selectedElements[index])}\n      >\n        {/* <Chip label={`${String(element.type)}`} /> */}\n        <ListItemText\n          id={`checkbox-list-label-${index}`}\n          primary={`${selectedElements[index].Name ? selectedElements[index].Name.value : 'NO NAME'} / ${selectedElements[index].expressID}`}\n        // secondary={secondary ? 'Secondary text' : null}\n        />\n      </ListItemButton>\n    </ListItem>\n  )\n\n  return (\n    <Grid container spacing={1}>\n      <Grid item xs={12}>\n        <SearchBar\n          input={searchInput}\n          style={{ marginBottom: \"1em\" }}\n          onChange={handleChange}\n          placeholder=\"Mot cl\"\n          onClickOne={() => handleSearchData(searchInput)}\n          onClickTwo={handleResetSearch}\n        />\n      </Grid>\n      <Grid item xs={12}>\n        <Typography gutterBottom variant=\"title2\" component=\"div\">\n          Remarque: La premire recherche par mot cls peut tre longue car elle gnre les donnes pour la recherche.\n        </Typography>\n      </Grid>\n      <Grid item xs={6} style={{ textAlign: 'left' }}>\n        <ButtonGroup\n          // color=\"secondary\" aria-label=\"medium secondary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <CheckBoxIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={handleRemoveAllElements}\n          >\n            <DeleteIcon />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={6} style={{ textAlign: 'right' }}>\n        <ButtonGroup\n          // variant=\"contained\"\n          // aria-label=\"outlined primary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <MutltiSelectionIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n            onClick={(e) => handleExportToCsv(e, eids)}\n          >\n            <DownloadIcon />\n          </Button>\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleShowMarketplace('Open dthX')}\n          >\n            {/* <img\n              src={OpenDthxLogo}\n            /> */}\n            <Avatar\n              aria-label=\"recipe\"\n              className={classes.avatar}\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={12}>\n        {validation.loading ?\n          <>\n            <Grid item xs={12} style={{ textAlign: 'center' }}>\n              <CircularProgress color=\"inherit\" />\n            </Grid>\n            <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n              <Typography gutterBottom variant=\"h5\" component=\"div\">{`${validation.message}`}    </Typography>\n            </Grid>\n          </>\n          :\n          <>\n            <Grid item xs={12} >\n              <Typography gutterBottom variant=\"title\" component=\"div\">{`${validation.message}`}    </Typography>\n            </Grid>\n            <Grid item xs={12}>\n              <List\n                // sx={{ width: \"100%\" }}\n                width={\"100%\"}\n                height={700}\n                itemCount={selectedElements.length}\n                itemSize={30}\n              >\n                {Row}\n              </List>\n            </Grid>\n          </>\n        }\n\n      </Grid>\n    </Grid>\n    // <div style={{ height: 400, width: '100%' }}>\n    //   <DataGrid {...data} components={{ Toolbar: GridToolbar }} />\n    // </div>\n  );\n};\n\nexport default memo(SearchData);\n","import React, { useRef, useEffect, useState } from 'react';\nimport ArrowDropDown from '@mui/icons-material/ArrowDropDown';\nimport ArrowRight from '@mui/icons-material/ArrowRight';\nimport {\n  Typography,\n  Button,\n  TreeItem,\n  Grid,\n  Checkbox,\n  IconButton,\n  Chip\n} from \"@mui/material\";\nimport DownloadIcon from '@mui/icons-material/Download';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { FixedSizeTree as Tree } from 'react-vtree';\n\nconst TreeComponent = ({\n  spatialStructures,\n  spatialStructure,\n  handleShowProperties,\n  toggleRow,\n  vtree\n}) => {\n  const [refVisible, setRefVisible] = useState(false)\n  let treeInstance = useRef();\n\n  useEffect(() => {\n    // if (refVisible) {\n    setTimeout(() => {\n      treeInstance.current?.recomputeTree(vtree);\n    }, 1)\n    // }\n  }, [refVisible, vtree]);\n\n  const Node = ({ data: { isLeaf, type, id, nestingLevel, name }, isOpen, style, setOpen, exportNodeToCsv }) => (\n    <div\n      style={{\n        ...style,\n        alignItems: 'center',\n        display: 'flex',\n        marginLeft: nestingLevel * 20 + (isLeaf ? 48 : 0),\n      }}\n    >\n      {!isLeaf && (\n        <span onClick={() => setOpen(!isOpen)}>\n          {isOpen ? <ArrowDropDown /> : <ArrowRight />}\n        </span>\n      )}\n      {/* <input type=\"checkbox\" name=\"scales\" defaultChecked={vtree[id]} onClick={() => toggleRow(id)} /> */}\n      <Checkbox\n        type=\"checkbox\" name=\"scales\" defaultChecked={vtree[id]} onClick={() => toggleRow(id)}\n      />\n      <Chip label={`${type}`} />\n      <Typography\n        component=\"div\"\n      >\n        {`/${name.toLowerCase()}/${id}`}\n      </Typography>\n      <Grid item xs={2} sx={{ textAlign: 'right' }}>\n        <IconButton\n          edge=\"end\"\n          aria-label=\"comments\"\n          onClick={(e) => {\n            handleShowProperties(parseInt(id));\n            // e.stopPropagation();\n          }}\n        >\n          <DescriptionIcon />\n        </IconButton>\n      </Grid>\n      {/* <Button\n        edge=\"end\"\n        aria-label=\"comments\"\n        // style={{ textAlign: 'right', position: 'absolute', right: - nestingLevel * 30 - (isLeaf ? 48 : 0) }}\n        // className={classes.button}\n        onClick={(e) => exportNodeToCsv(e)}\n      >\n        <DownloadIcon />\n      </Button> */}\n    </div>\n  );\n\n  const getNodeData = (node, nestingLevel, structure) => ({\n    data: {\n      id: node.expressID.toString(), // mandatory\n      isLeaf: node.children.length === 0,\n      isOpenByDefault: false, // mandatory\n      type: node.type,\n      name: node.Name ? node.Name.value : \"\",\n      nestingLevel,\n    },\n    nestingLevel,\n    node,\n  });\n\n  function* treeWalker() {\n    // Here we send root nodes to the component.\n    for (let i = 0; i < spatialStructures.length; i++) {\n      yield getNodeData(spatialStructures[i], 0);\n    }\n\n    while (true) {\n      // Here we receive an object we created via getNodeData function\n      // and yielded before. All we need here is to describe its children\n      // in the same way we described the root nodes.\n      const parentMeta = yield;\n\n      for (let i = 0; i < parentMeta.node.children.length; i++) {\n        yield getNodeData(\n          parentMeta.node.children[i],\n          parentMeta.nestingLevel + 1,\n        );\n      }\n    }\n  }\n\n  return (\n    <AutoSizer>\n      {({ height, width }) => (\n        <Tree\n          // key={spatialStructure.expressID}\n          ref={el => { treeInstance.current = el; setRefVisible(!!el); }}\n          itemCount={1000}\n          itemSize={30}\n          treeWalker={treeWalker}\n          height={height}\n          width={width}\n        >\n          {Node}\n        </Tree>\n      )}\n    </AutoSizer>\n  )\n}\n\nexport default TreeComponent;","function reducer(state, action) {\n    switch (action.type) {\n        case 'LOAD_DATA': {\n            const { originalStructureTree, hashMapTree, vtree, selected } = action.payload;\n            return { ...state, spatialStructures: originalStructureTree, hashMapTree: hashMapTree, vtree: vtree, selected: selected, loading: false };\n        }\n        case 'SET_EXPANDED':\n            return { ...state, expanded: action.payload, loading: false, loadingCursor: false };\n        case 'SELECT_CHILDREN':\n            const { selected, vtree } = action.payload;\n            return { ...state, selected: selected, vtree: vtree, expanded: null, loading: false };\n        case 'RESET_TREE':\n            return { ...state, selected: [], vtree: {}, expanded: null, loading: false };\n        case 'LOADING':\n            return { ...state, loading: true };\n        case 'LOADING_CURSOR':\n            return { ...state, loadingCursor: true };\n        default:\n            throw new Error();\n    }\n}\n\nexport default reducer;","const hashMapSpatialStructures = (spatialStructures, hash, parentID = 0) => spatialStructures.reduce((acc, structure) => {\n  acc[structure.expressID] = structure;\n  acc[structure.expressID].parentsIds = acc[parentID] && acc[parentID].parentsIds ? [...acc[parentID].parentsIds, structure.expressID] : [structure.expressID];\n  acc[structure.expressID].childrenIds = getChildNodes([structure.expressID], acc[structure.expressID])\n  if (structure.children) {\n    acc = hashMapSpatialStructures(structure.children, acc, structure.expressID);\n    acc[structure.expressID].parentID = parentID;\n  }\n  return acc;\n}, hash)\n\nfunction getChildNodes(nodeID, spatialStructures) {\n  let childNodes = [nodeID[0]];\n\n  //GET Object\n  const elem = spatialStructures;\n  function traverseChildren(spatialStructures) {\n    if (spatialStructures.children && spatialStructures.children.length > 0) {\n      spatialStructures.children.forEach((child) => {\n        childNodes.push(child.expressID);\n        traverseChildren(child);\n      });\n    }\n  }\n\n  traverseChildren(elem);\n  return childNodes;\n};\n\nfunction addExpandedNodes(tree) {\n  const hashMapTree = hashMapSpatialStructures(tree, {});\n  return { originalStructureTree: tree, hashMapTree };\n};\n\nfunction recomputeToVtree(selectedItems) {\n  const computeSelectedItems = selectedItems.reduce((acc, val) => {\n    acc[val] = {\n      open: true\n    };\n    return acc;\n  }, {});\n  return computeSelectedItems;\n}\n\nfunction manageNodeSelection(oldSelectedItems, selectedItems, childrenIds, nodeId) {\n  let selectedTree = selectedItems;\n  if (oldSelectedItems.length > 0) {\n    if (oldSelectedItems.includes(parseInt(nodeId))) {\n      const indexOfExistingItem = oldSelectedItems.indexOf(parseInt(nodeId));\n      const newSelectedItems = oldSelectedItems\n        .filter((_, i) => i !== indexOfExistingItem)\n        .filter((selectedItem) => {\n          return !childrenIds.includes(selectedItem);\n        });\n      selectedTree = newSelectedItems;\n    } else {\n      selectedTree = [...new Set(oldSelectedItems.concat([...selectedItems, parseInt(nodeId)]))]\n    }\n  }\n  return selectedTree;\n}\n\nasync function highlightOnTreeView(selected, viewer) {\n  const mapSelected = selected.map((item) => parseInt(item, 10));\n  await viewer.IFC.pickIfcItemsByID(0, mapSelected);\n}\n\nexport const loadTree = (dispatch) => (tree, eids) => {\n  const { originalStructureTree, hashMapTree } = addExpandedNodes(tree);\n  let selectedItems = eids;\n  if (eids.length === 1) {\n    const selectedIFCObject = hashMapTree[eids[0]];\n    const { childrenIds, parentsIds } = selectedIFCObject ?? { childrenIds: [], parentsIds: [] };\n    selectedItems = [...eids, ...childrenIds, ...parentsIds]\n  }\n\n  const vtree = recomputeToVtree(selectedItems);\n  dispatch({\n    type: 'LOAD_DATA',\n    payload: {\n      originalStructureTree: originalStructureTree,\n      hashMapTree: hashMapTree,\n      vtree: vtree,\n      selected: selectedItems\n    },\n  });\n}\n\nexport const toggleNode = (dispatch) => async (selected, hashMapTree, nodeId, viewer) => {\n\n  const { childrenIds, parentsIds } = hashMapTree[nodeId] ?? { childrenIds: [], parentsIds: [] };\n  let familyTreeIds = [...parentsIds, ...childrenIds];\n  let oldFamilyTreeIds = selected;\n  const selectedItemsUpdated = manageNodeSelection(oldFamilyTreeIds, familyTreeIds, childrenIds, nodeId)\n\n  const computeToTree = selectedItemsUpdated.map((item) => item.toString())\n  const newVtree = recomputeToVtree(computeToTree);\n\n  await highlightOnTreeView(computeToTree, viewer)\n\n  dispatch({\n    type: 'SELECT_CHILDREN',\n    payload: {\n      selected: selectedItemsUpdated,\n      vtree: newVtree\n    },\n  });\n}\n\nexport const deselectAllNodes = (dispatch) => async (viewer) => {\n  await viewer.IFC.unpickIfcItems();\n  dispatch({\n    type: 'RESET_TREE'\n  });\n}","import React, { useEffect, useState, useReducer, useRef, useCallback } from \"react\";\nimport { IFCLoader } from \"web-ifc-three/IFCLoader\";\nimport { makeStyles, Icon } from \"@material-ui/core\";\nimport {\n  Avatar,\n  Grid,\n  Button,\n  ButtonGroup,\n  CircularProgress\n} from \"@mui/material\";\n\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\nimport TreeComponent from \"./Components/Tree\";\nimport reducer from './reducer';\nimport { deselectAllNodes, toggleNode, loadTree } from './actions';\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  }\n}));\n\nconst ProjectTree = ({\n  tree,\n  viewer,\n  handleShowMarketplace,\n  handleShowProperties,\n  eids,\n  setEids\n}) => {\n  const [{ spatialStructures, loading, selected, hashMapTree, vtree }, dispatch] = useReducer(reducer, { loading: true, loadingCursor: false, selected: [], expanded: [], hashMapTree: {}, vtree: {} });\n  const refSelectedItems = useRef(selected);\n  const classes = useStyles();\n\n  useEffect(() => {\n    refSelectedItems.current = selected\n  }, [selected])\n\n  useEffect(() => {\n    return () => {\n      const selectedItemsIds = refSelectedItems.current.map((selectedItems) => parseInt(selectedItems));\n      setEids(selectedItemsIds);\n    };\n  }, [])\n\n  useEffect(() => {\n    loadTree(dispatch)(tree, eids);\n  }, [eids]);\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement('a')\n    a.download = fileName\n    a.href = window.URL.createObjectURL(blob)\n    const clickEvt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n    a.dispatchEvent(clickEvt)\n    a.remove()\n  }\n\n  const handleExportToCsv = async (e, eids) => {\n    e.preventDefault()\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = ['modelId', 'elementName', 'elementClass', 'globalId', 'expressId', 'psetName', 'propertyName', 'propertyValue'].join(',');\n    propertiesCsv.push(headers)\n\n    await Promise.all(eids.map(async eid => {\n      const ifcElement = await viewer.IFC.getProperties(0, eid, true, true);\n      const selectedModelID = await viewer.IFC.getModelID();\n      const ifcLoader = new IFCLoader();\n      // const ifcClass = ifcClassType[];\n      const ifcClass = await viewer.IFC.loader.ifcManager.getIfcType(0, eid);\n\n      console.log('ifcClass', await viewer.IFC.loader.ifcManager.getIfcType(0, eid))\n      await Promise.all(ifcElement.psets?.map(async pset => pset.HasProperties && await Promise.all(pset.HasProperties?.map(async (property) => {\n        const modelID = 0;\n        const elementName = `${ifcElement.Name?.value}`;\n        const elementClass = ifcClass ? ifcClass : `NONE`;\n        const globalID = `${ifcElement.GlobalId.value}`;\n        const expressID = `${ifcElement.expressID}`;\n        const psetName = `${pset.Name.value}`;\n        const propertyName = `${property.Name?.value}`;\n        const propertyValue = `${property.NominalValue?.value}`;\n\n        propertiesCsv.push([modelID, elementName, elementClass, globalID, expressID, psetName, propertyName, propertyValue].join(','))\n      }))))\n    }));\n\n    downloadFile({\n      data: [...propertiesCsv].join('\\n'),\n      fileName: `selection.csv`,\n      fileType: 'text/csv',\n    })\n  }\n\n  function toggleRow(nodeId) {\n    toggleNode(dispatch)(selected, hashMapTree, nodeId, viewer);\n  }\n\n  function handleRemoveAllElements() {\n    deselectAllNodes(dispatch)(viewer);\n  }\n\n  return (\n    <Grid container>\n      <Grid xs={6} style={{ textAlign: 'left' }}>\n        <ButtonGroup\n          className={classes.buttonGroup}\n        >\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleRemoveAllElements()}\n          >\n            <DeleteIcon />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid xs={6} style={{ textAlign: 'right' }}>\n        <ButtonGroup\n          // variant=\"contained\"\n          // aria-label=\"outlined primary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <MutltiSelectionIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n            onClick={(e) => handleExportToCsv(e, eids)}\n          >\n            <DownloadIcon />\n          </Button>\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleShowMarketplace('Open dthX')}\n          >\n            {/* <img\n              src={OpenDthxLogo}\n            /> */}\n            <Avatar\n              aria-label=\"recipe\"\n              className={classes.avatar}\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      {(loading) ?\n        <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n        :\n        <div style={{ display: 'flex', width: \"100%\" }}>\n\n          {\n            spatialStructures &&\n            spatialStructures.length &&\n            spatialStructures.map((spatialStructure) => (\n              <div style={{ flex: '1 1 auto', height: '300px' }} key={spatialStructure.expressID}>\n                <TreeComponent\n                  spatialStructures={spatialStructures}\n                  spatialStructure={spatialStructure}\n                  handleShowProperties={handleShowProperties}\n                  toggleRow={toggleRow}\n                  vtree={vtree}\n                />\n              </div>\n\n            ))\n          }\n        </div>\n      }\n    </Grid >\n  );\n};\n\nexport default ProjectTree;\n\n","export default [\n  \"IfcProduct\",\n  \"IfcAnnotation\",\n  \"IfcElement\",\n  \"IfcBuildingElement\",\n  \"IfcBeam\",\n  \"IfcBuildingElementComponent\",\n  \"IfcBuildingElementPart\",\n  \"IfcReinforcingElement\",\n  \"IfcReinforcingBar\",\n  \"IfcReinforcingMesh\",\n  \"IfcTendon\",\n  \"IfcTendonAnchor\",\n  \"IfcBuildingElementProxy\",\n  \"IfcColumn\",\n  \"IfcCovering\",\n  \"IfcCurtainWall\",\n  \"IfcDoor\",\n  \"IfcFooting\",\n  \"IfcMember\",\n  \"IfcPile\",\n  \"IfcPlate\",\n  \"IfcRailing\",\n  \"IfcRamp\",\n  \"IfcRampFlight\",\n  \"IfcRoof\",\n  \"IfcSlab\",\n  \"IfcStair\",\n  \"IfcStairFlight\",\n  \"IfcWall\",\n  \"IfcWallStandardCase\",\n  \"IfcWindow\",\n  \"IfcDistributionElement\",\n  \"IfcDistributionControlElement\",\n  \"IfcDistributionFlowElement\",\n  \"IfcDistributionChamberElement\",\n  \"IfcEnergyConversionDevice\",\n  \"IfcFlowController\",\n  \"IfcElectricDistributionPoint\",\n  \"IfcFlowFitting\",\n  \"IfcFlowMovingDevice\",\n  \"IfcFlowSegment\",\n  \"IfcFlowStorageDevice\",\n  \"IfcFlowTerminal\",\n  \"IfcFlowTreatmentDevice\",\n  \"IfcElectricalElement\",\n  \"IfcElementAssembly\",\n  \"IfcElementComponent\",\n  \"IfcDiscreteAccessory\",\n  \"IfcFastener\",\n  \"IfcMechanicalFastener\",\n  \"IfcEquipmentElement\",\n  \"IfcFeatureElement\",\n  \"IfcFeatureElementAddition\",\n  \"IfcProjectionElement\",\n  \"IfcFeatureElementSubtraction\",\n  \"IfcEdgeFeature\",\n  \"IfcChamferEdgeFeature\",\n  \"IfcRoundedEdgeFeature\",\n  \"IfcOpeningElement\",\n  \"IfcFurnishingElement\",\n  \"IfcTransportElement\",\n  \"IfcVirtualElement\",\n  \"IfcGrid\",\n  \"IfcPort\",\n  \"IfcDistributionPort\",\n  \"IfcProxy\",\n  \"IfcSpatialStructureElement\",\n  \"IfcBuilding\",\n  \"IfcBuildingStorey\",\n  \"IfcSite\",\n  \"IfcSpace\",\n  \"IfcStructuralActivity\",\n  \"IfcStructuralAction\",\n  \"IfcStructuralLinearAction\",\n  \"IfcStructuralLinearActionVarying\",\n  \"IfcStructuralPlanarAction\",\n  \"IfcStructuralPlanarActionVarying\",\n  \"IfcStructuralPointAction\",\n  \"IfcStructuralReaction\",\n  \"IfcStructuralPointReaction\",\n  \"IfcStructuralItem\",\n  \"IfcStructuralConnection\",\n  \"IfcStructuralCurveConnection\",\n  \"IfcStructuralPointConnection\",\n  \"IfcStructuralSurfaceConnection\",\n  \"IfcStructuralMember\",\n  \"IfcStructuralCurveMember\",\n  \"IfcStructuralCurveMemberVarying\",\n  \"IfcStructuralSurfaceMember\",\n  \"IfcStructuralSurfaceMemberVarying\",\n  \"IfcBeamStandardCase\",\n  \"IfcChimney\",\n  \"IfcColumnStandardCase\",\n  \"IfcDoorStandardCase\",\n  \"IfcMemberStandardCase\",\n  \"IfcPlateStandardCase\",\n  \"IfcShadingDevice\",\n  \"IfcSlabElementedCase\",\n  \"IfcSlabStandardCase\",\n  \"IfcWallElementedCase\",\n  \"IfcWindowStandardCase\",\n  \"IfcCivilElement\",\n  \"IfcActuator\",\n  \"IfcAlarm\",\n  \"IfcController\",\n  \"IfcFlowInstrument\",\n  \"IfcProtectiveDeviceTrippingUnit\",\n  \"IfcSensor\",\n  \"IfcUnitaryControlElement\",\n  \"IfcAirToAirHeatRecovery\",\n  \"IfcBoiler\",\n  \"IfcBurner\",\n  \"IfcChiller\",\n  \"IfcCoil\",\n  \"IfcCondenser\",\n  \"IfcCooledBeam\",\n  \"IfcCoolingTower\",\n  \"IfcElectricGenerator\",\n  \"IfcElectricMotor\",\n  \"IfcEngine\",\n  \"IfcEvaporativeCooler\",\n  \"IfcEvaporator\",\n  \"IfcHeatExchanger\",\n  \"IfcHumidifier\",\n  \"IfcMotorConnection\",\n  \"IfcSolarDevice\",\n  \"IfcTransformer\",\n  \"IfcTubeBundle\",\n  \"IfcUnitaryEquipment\",\n  \"IfcAirTerminalBox\",\n  \"IfcDamper\",\n  \"IfcElectricDistributionBoard\",\n  \"IfcElectricTimeControl\",\n  \"IfcFlowMeter\",\n  \"IfcProtectiveDevice\",\n  \"IfcSwitchingDevice\",\n  \"IfcValve\",\n  \"IfcCableCarrierFitting\",\n  \"IfcCableFitting\",\n  \"IfcDuctFitting\",\n  \"IfcJunctionBox\",\n  \"IfcPipeFitting\",\n  \"IfcCompressor\",\n  \"IfcFan\",\n  \"IfcPump\",\n  \"IfcCableCarrierSegment\",\n  \"IfcCableSegment\",\n  \"IfcDuctSegment\",\n  \"IfcPipeSegment\",\n  \"IfcElectricFlowStorageDevice\",\n  \"IfcTank\",\n  \"IfcAirTerminal\",\n  \"IfcAudioVisualAppliance\",\n  \"IfcCommunicationsAppliance\",\n  \"IfcElectricAppliance\",\n  \"IfcFireSuppressionTerminal\",\n  \"IfcLamp\",\n  \"IfcLightFixture\",\n  \"IfcMedicalDevice\",\n  \"IfcOutlet\",\n  \"IfcSanitaryTerminal\",\n  \"IfcSpaceHeater\",\n  \"IfcStackTerminal\",\n  \"IfcWasteTerminal\",\n  \"IfcDuctSilencer\",\n  \"IfcFilter\",\n  \"IfcInterceptor\",\n  \"IfcVibrationIsolator\",\n  \"IfcOpeningStandardCase\",\n  \"IfcVoidingFeature\",\n  \"IfcSurfaceFeature\",\n  \"IfcFurniture\",\n  \"IfcSystemFurnitureElement\",\n  \"IfcGeographicElement\",\n  \"IfcSpatialElement\",\n  \"IfcExternalSpatialStructureElement\",\n  \"IfcExternalSpatialElement\",\n  \"IfcSpatialZone\",\n  \"IfcStructuralCurveAction\",\n  \"IfcStructuralSurfaceAction\",\n  \"IfcStructuralCurveReaction\",\n  \"IfcStructuralSurfaceReaction\",\n  \"IfcContext\",\n  \"IfcProject\",\n  \"IfcProjectLibrary\"\n]","import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  ButtonGroup,\n  Divider,\n  Badge\n} from \"@mui/material\";\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { useDemoData } from '@mui/x-data-grid-generator';\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport SearchBar from '../../../../Components/SearchBar';\nimport { IFCSLAB, IFCMEMBER, IFCSTRUCTURALCURVEMEMBER } from \"web-ifc\";\nimport CommentIcon from '@mui/icons-material/Comment';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport LibraryAddIcon from '@mui/icons-material/LibraryAdd';\nimport MutltiSelectionIcon from '@mui/icons-material/ControlPointDuplicate';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\n\nimport ifcClasses from './utils/ifcClasses';\nimport IfcIcons from '../../Utils/ifc-full-icons.json';\nimport * as WebIFC from \"web-ifc\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  },\n  buttonGroup: {\n    backgroundColor: 'white',\n    marginTop: '1em'\n  }\n}));\n\n\nconst Settings = ({\n  viewer,\n  handleShowMarketplace,\n  handleShowProperties,\n  eids,\n  setEids\n}) => {\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [checked, setChecked] = React.useState([0]);\n  const [ifcModelsClasses, setIfcModelsClasses] = useState([]);\n  const [eidsHidden, setEidsHidden] = useState([]);\n\n  // useEffect(() => {\n  //   const models = viewer.context.items.ifcModels;\n  //   const ifcModel = models[0];\n  //   const allIDs = Array.from(\n  //     new Set(ifcModel.geometry.attributes.expressID.array)\n  //   );\n  //   const subset = getWholeSubset(viewer, ifcModel, allIDs);\n  //   replaceOriginalModelBySubset(viewer, ifcModel, subset);\n  //   setupEvents(viewer, allIDs);\n  // }, []);\n\n  useEffect(() => {\n    async function init() {\n      console.log('Settings')\n      // const ifcApi = new WebIFC.IfcAPI();\n      const newIfcModelsClasses = [];\n      for (let ifcClass of ifcClasses) {\n        if (WebIFC[`${ifcClass.toUpperCase()}`]) {\n          const classEids = await viewer.getAllItemsOfType(0, WebIFC[`${ifcClass.toUpperCase()}`], false, false);\n          if (classEids && classEids.length > 0) {\n            newIfcModelsClasses.push({\n              name: ifcClass,\n              icon: IfcIcons[`${ifcClass}`],\n              eids: [...classEids],\n              hide: false\n            })\n          }\n        }\n\n      }\n      setIfcModelsClasses(newIfcModelsClasses);\n\n    }\n    init();\n  }, [eids]);\n\n  const handleElementsMultiSelection = async () => {\n    const found = await viewer.IFC.pickIfcItem(true, 1);\n    setEids([...eids, found.id]);\n  }\n\n  const handleElementSelection = async (element) => {\n    const currentIndex = checked.indexOf(element);\n    const newChecked = [...checked];\n    //await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n    if (currentIndex === -1) {\n      newChecked.push(currentIndex);\n    } else {\n      // await viewer.IFC.pickIfcItemsByID(0, [element.expressID]);\n      newChecked.splice(currentIndex, 1);\n    }\n\n    setChecked(newChecked);\n  }\n\n  const handleRemoveAllElements = async () => {\n    setEids([]);\n    await viewer.IFC.unpickIfcItems();\n  }\n\n\n  const handleGetAllItemsOfType = async (element) => {\n    console.log('element', element);\n    const elementsByType = await viewer.getAllItemsOfType(0, element.type, false, false);\n    console.log('elementsByType', elementsByType)\n    setEids([...eids, ...elementsByType]);\n  }\n\n  const handleRemoveElement = async (element) => {\n    const newEids = eids.filter(eid => eid !== element.expressID);\n    setEids(newEids);\n  }\n\n\n  const handleShowElement = async (ids) => {\n    setEids(ids);\n    await viewer.IFC.pickIfcItemsByID(0, ids, false, 0);\n  }\n\n\n  function handleRestoreElements(eids, index) {\n    const idsHidden = eidsHidden.reduce(function (acc, id) {\n      if (eids.indexOf(id) === -1) {\n        acc.push(id);\n      }\n      return acc;\n    }, []);\n    setEidsHidden(idsHidden)\n\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[0];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    )\n    const idsRestore = allIDs.reduce(function (acc, id) {\n      if (idsHidden.indexOf(id) === -1) {\n        acc.push(id);\n      }\n      return acc;\n    }, []);\n\n    viewer.IFC.loader.ifcManager.createSubset({\n      modelID: ifcModel.modelID,\n      ids: idsRestore,\n      applyBVH: true,\n      scene: ifcModel.parent,\n      removePrevious: true,\n      customID: 'full-model-subset',\n    });\n\n    const newIfcModelsClasses = [...ifcModelsClasses];\n    newIfcModelsClasses[index] = {\n      ...newIfcModelsClasses[index],\n      hide: false\n    }\n\n    setIfcModelsClasses(newIfcModelsClasses);\n  }\n\n  const handleHideElements = async (eids, index) => {\n    setEidsHidden([...eidsHidden, ...eids]);\n    viewer.IFC.loader.ifcManager.removeFromSubset(\n      0,\n      eids,\n      'full-model-subset',\n    );\n\n    const newIfcModelsClasses = [...ifcModelsClasses];\n    newIfcModelsClasses[index] = {\n      ...newIfcModelsClasses[index],\n      hide: true\n    }\n\n    setIfcModelsClasses(newIfcModelsClasses);\n  }\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement('a')\n    a.download = fileName\n    a.href = window.URL.createObjectURL(blob)\n    const clickEvt = new MouseEvent('click', {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    })\n    a.dispatchEvent(clickEvt)\n    a.remove()\n  }\n\n  const handleExportToCsv = async (e, ifcClass) => {\n    e.preventDefault()\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = ['modelId', 'elementName', 'elementClass', 'globalId', 'expressId', 'psetName', 'propertyName', 'propertyValue'].join(',');\n    propertiesCsv.push(headers)\n\n    for (let eid of ifcClass.eids) {\n      const ifcElement = await viewer.IFC.getProperties(0, eid, true, true);\n      console.log('ifcElement', ifcElement)\n      if (ifcElement && ifcElement.psets && ifcElement.psets.length > 0) {\n        for (let pset of ifcElement.psets) {\n          console.log('pset', pset)\n          if (pset.HasProperties && pset.HasProperties.length > 0) {\n            for (let property of pset.HasProperties) {\n              console.log('property', property)\n              const modelID = 0;\n              const elementName = `${ifcElement.Name?.value}`;\n              const elementClass = `${ifcClass.name}`;\n              const globalID = `${ifcElement.GlobalId.value}`;\n              const expressID = `${ifcElement.expressID}`;\n              const psetName = `${pset.Name.value}`;\n              const propertyName = `${property.Name?.value}`;\n              const propertyValue = `${property.NominalValue?.value}`;\n\n              propertiesCsv.push([modelID, elementName, elementClass, globalID, expressID, psetName, propertyName, propertyValue].join(','))\n            }\n          }\n        }\n      }\n    }\n\n    downloadFile({\n      data: [...propertiesCsv].join('\\n'),\n      fileName: `${ifcClass ? ifcClass.name : \"Undefined\"}.csv`,\n      fileType: 'text/csv',\n    })\n  }\n  return (\n    <Grid container>\n      {/* <Grid item xs={12}>\n        <SearchBar style={{ marginBottom: \"1em\" }} />\n      </Grid> */}\n      <Grid item xs={6} style={{ textAlign: 'left' }}>\n        <ButtonGroup\n          // color=\"secondary\" aria-label=\"medium secondary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <CheckBoxIcon />\n          </Button>\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={handleRemoveAllElements}\n          >\n            <DeleteIcon />\n          </Button> */}\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={6} style={{ textAlign: 'right' }}>\n        <ButtonGroup\n          // variant=\"contained\"\n          // aria-label=\"outlined primary button group\"\n          className={classes.buttonGroup}\n        >\n          {/* <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            className={classes.button}\n          // onClick={() => handleGetAllItemsOfType(element)}\n          >\n            <MutltiSelectionIcon />\n          </Button> */}\n          <Button\n            edge=\"end\"\n            aria-label=\"comments\"\n            onClick={() => handleShowMarketplace('Open dthX')}\n          >\n            {/* <img\n              src={OpenDthxLogo}\n            /> */}\n            <Avatar\n              aria-label=\"recipe\"\n              className={classes.avatar}\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </Button>\n        </ButtonGroup>\n      </Grid>\n      <Grid item xs={12}>\n        <List sx={{ width: \"100%\" }}>\n          {ifcModelsClasses.map((ifcClass, index) => (\n            <ListItem\n              key={index}\n              secondaryAction={\n                <>\n                  {/* { ifcClass.hide ?\n                    <IconButton\n                      edge=\"end\"\n                      aria-label=\"comments\"\n                      onClick={() => handleRestoreElements(ifcClass.eids, index)}\n                    >\n                      <VisibilityOffIcon />\n                    </IconButton>\n                    :\n                    <IconButton\n                      edge=\"end\"\n                      aria-label=\"comments\"\n                      onClick={() => handleHideElements(ifcClass.eids, index)}\n                    >\n                      <VisibilityIcon color=\"primary\" />\n                    </IconButton>\n                  } */}\n                  <IconButton\n                    edge=\"end\"\n                    aria-label=\"comments\"\n                    onClick={(e) => handleExportToCsv(e, ifcClass)}\n                  >\n                    <DownloadIcon />\n                  </IconButton>\n                </>\n              }\n              disablePadding\n            >\n              <ListItemButton\n                role={undefined}\n                dense\n                onClick={() => handleShowElement(ifcClass.eids)}\n              >\n                <ListItemIcon>\n                  {/* <Checkbox\n                    edge=\"start\"\n                    checked={checked.indexOf(element) !== -1}\n                    tabIndex={-1}\n                    disableRipple\n                    inputProps={{ 'aria-labelledby': `checkbox-list-label-${index}` }}\n                  /> */}\n                  <Badge badgeContent={`${ifcClass.eids.length}`} color=\"primary\">\n                    <i class='material-icons'>{`${ifcClass.icon}`}</i>\n                  </Badge>\n                </ListItemIcon>\n                <ListItemText\n                  id={`checkbox-list-label-${index}`}\n                  primary={`${ifcClass.name}`}\n                // secondary={secondary ? 'Secondary text' : null}\n                />\n              </ListItemButton>\n            </ListItem>\n          ))}\n        </List>\n      </Grid>\n    </Grid>\n    // <div style={{ height: 400, width: '100%' }}>\n    //   <DataGrid {...data} components={{ Toolbar: GridToolbar }} />\n    // </div>\n  );\n};\n\nexport default Settings;\n","import React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  Typography,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Box,\n  Tabs,\n  Tab,\n  Chip,\n  ListItemButton,\n  Grid,\n  Button,\n  Fab,\n} from \"@mui/material\";\nimport TreeView from \"@material-ui/lab/TreeView\";\nimport TreeItem from \"@material-ui/lab/TreeItem\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport AccountTreeIcon from \"@material-ui/icons/AccountTree\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport { IFCSLAB, IFCMEMBER, IFCSTRUCTURALCURVEMEMBER } from \"web-ifc\";\nimport SearchData from \"../SearchData\";\nimport ProjectTree from \"../ProjectTree\";\nimport Settings from \"../Settings\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  treeViewLabel: {\n    left: \"3em\",\n    position: \"absolute\",\n    textOverflow: \"ellipsis\",\n    overflow: \"hidden\",\n    wordWrap: \"break-word\",\n    warp: true,\n    // width: '5em'\n  },\n  treeViewCheckbox: {\n    margin: 0,\n    padding: 0,\n  },\n  treeView: {\n    // height: 240,\n    flexGrow: 1,\n    // maxWidth: 400,\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    // width: theme.spacing(7),\n    // height: theme.spacing(7),\n    // padding: '5px',\n    // borderRadius: '0px'\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n  MuiButtonBase: {\n    defaultProps: {\n      // The props to apply\n      disableRipple: true, // No more ripple, on the whole application !\n    },\n  },\n\n}));\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nconst SpatialStructure = ({\n  state,\n  setState,\n  viewer,\n  handleShowSpatialStructure,\n  handleShowMarketplace,\n  handleShowProperties,\n  handleGetJsonData,\n  eids,\n  setEids,\n}) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [value, setValue] = useState(0);\n  const [ifcElementByType, setIfcElementByType] = useState([]);\n  const [expressIDList, setExpressIDList] = useState([]);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  // useEffect(() => {\n  //   async function init() {\n  //     console.log('Spatial Structure')\n  //     const modelID = await viewer.IFC.getModelID();\n  //     setExpressIDList(eids);\n  //     console.log(\"EIDS\", eids);\n  //   }\n  //   init();\n  // }, [eids]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <AccountTreeIcon />\n            </Fab>\n          </Avatar>\n        }\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleShowSpatialStructure}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem button onClick={handleShowSpatialStructure}>\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n        title={`Centre d'informations`}\n        subheader=\"Espace de recherche et mise  jour des donnes\"\n      />\n      <CardContent className={classes.cardContent}>\n        <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n          <Tabs\n            value={value}\n            onChange={handleChange}\n            aria-label=\"basic tabs example\"\n          >\n            <Tab label=\"Slection\" {...a11yProps(0)} />\n            <Tab label=\"Structure spatiale\" {...a11yProps(1)} />\n            <Tab label=\"Classes\" {...a11yProps(2)} />\n          </Tabs>\n        </Box>\n        <TabPanel value={value} index={0}>\n          {/* <SearchBar /> */}\n          <SearchData\n            bimData={state}\n            setBimData={setState}\n            viewer={viewer}\n            handleShowMarketplace={handleShowMarketplace}\n            handleShowProperties={handleShowProperties}\n            handleGetJsonData={handleGetJsonData}\n            eids={eids}\n            setEids={setEids}\n          />\n        </TabPanel>\n        <TabPanel value={value} index={1}>\n          <ProjectTree\n            // state={state}\n            // setState={setState}\n            tree={state.spatialStructures.list}\n            viewer={viewer}\n            handleShowMarketplace={handleShowMarketplace}\n            handleShowProperties={handleShowProperties}\n            eids={eids}\n            setEids={setEids}\n          />\n        </TabPanel>\n        <TabPanel value={value} index={2}>\n          <Settings\n            viewer={viewer}\n            handleShowMarketplace={handleShowMarketplace}\n            handleShowProperties={handleShowProperties}\n            eids={eids}\n            setEids={setEids}\n          />\n        </TabPanel>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default SpatialStructure;\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          <Typography>{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport {\n  Typography,\n  makeStyles,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Popover,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  CircularProgress,\n  Tooltip,\n  Paper\n} from \"@material-ui/core\";\nimport InfoIcon from \"@mui/icons-material/Info\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport * as WebIFC from \"web-ifc\";\nimport { Grid } from \"@mui/material\";\nimport {\n  Scene,\n  WebGLRenderer,\n  PerspectiveCamera,\n  BoxGeometry,\n  MeshLambertMaterial,\n  Mesh,\n  Color,\n  DoubleSide,\n  MathUtils,\n  EdgesGeometry,\n  LineBasicMaterial,\n  MeshBasicMaterial,\n  Vector2,\n  Box3,\n  Vector3\n} from \"three\";\nimport { IfcViewerAPI } from 'web-ifc-viewer';\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  mapContainer: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    overflow: 'auto',\n    flexDirection: 'column',\n    height: 400,\n  },\n  map: {\n    width: '100%',\n    height: '100%'\n  }\n}));\n\nconst Properties = ({\n  bimData,\n  setBimData,\n  viewer,\n  element,\n  selectedElementID,\n  setSelectedElementID,\n  setShowProperties,\n  handleShowMarketplace,\n  addElementsNewProperties,\n}) => {\n  const [ifcElement, setIfcElement] = useState(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  // const props = { width: { viewWidth }, height: { viewHeight } };\n  const props = {\n    width: viewWidth,\n    height: viewHeight\n  };\n\n  const classes = useStyles(props);\n\n  function DecodeIFCString(ifcString) {\n    const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/giu;\n    let resultString = ifcString;\n    let match = ifcUnicodeRegEx.exec(ifcString);\n    while (match) {\n      const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n      resultString = resultString.replace(match[0], unicodeChar);\n      match = ifcUnicodeRegEx.exec(ifcString);\n    }\n    return resultString;\n  }\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  useEffect(() => {\n    async function init() {\n      console.log(\"selectedElementID\", selectedElementID);\n      setIsLoading(true);\n      if (selectedElementID) {\n\n        // const models = viewer.context.items.ifcModels;\n        // const ifcModel = models[0];\n        // viewer.IFC.loader.ifcManager.createSubset({\n        //   modelID: ifcModel.modelID,\n        //   ids: [selectedElementID],\n        //   applyBVH: true,\n        //   scene: ifcModel.parent,\n        //   removePrevious: true,\n        //   customID: 'single-element-subset',\n        // });\n        // const elementMesh = await viewer.IFC.loader.ifcManager.getSubset(0, null, 'single-element-subset')\n        // console.log('elementMesh', elementMesh)\n        // if (elementMesh) {\n        //   const container = document.getElementById('element-viewer');\n        //   const elementViewer = new IfcViewerAPI({ container, backgroundColor: new Color(0xffffff) });\n        //   elementViewer.IFC.setWasmPath(\"../../files/\");\n        //   elementViewer.IFC.applyWebIfcConfig({\n        //     COORDINATE_TO_ORIGIN: true,\n        //     USE_FAST_BOOLS: false\n        //   });;\n        //   elementMesh.position.set(0, 0, 0);\n        //   const scene = elementViewer.IFC.context.scene.scene;\n        //   scene.add(elementMesh);\n        // }\n\n        const elementProperties = await viewer.IFC.getProperties(\n          0,\n          selectedElementID,\n          true,\n          true\n        );\n        console.log('elementProperties', elementProperties)\n        // console.log(\"viewer\", viewer);\n        // console.log(\n        //   \"ifcClass\",\n        //   viewer.IFC.loader.ifcManager.getIfcType(0, selectedElementID)\n        // );\n        const ifcClass = viewer.IFC.loader.ifcManager.getIfcType(\n          0,\n          selectedElementID\n        );\n        let psets = [];\n        if (elementProperties.psets.length > 0) {\n          for (let pset of elementProperties.psets) {\n            if (pset.HasProperties && pset.HasProperties.length > 0) {\n              const newPset = [];\n              for (let property of pset.HasProperties) {\n                const label = DecodeIFCString(property.Name.value);\n                const value = property.NominalValue\n                  ? DecodeIFCString(property.NominalValue.value)\n                  : \"\";\n\n                const description =\n                  property.Description && property.Description !== \"\"\n                    ? DecodeIFCString(property.Description.value)\n                    : null;\n                // const unit =\n                //   property.Unit == null\n                //     ? \"\"\n                //     : property.Unit.value === \"null\"\n                //       ? \"\"\n                //       : property.Unit.value;\n                const unit = property.Unit\n                  ? property.Unit.Prefix\n                    ? DecodeIFCString(property.Unit.Prefix.value) // unit defined by IFCSIUNIT\n                    : property.Unit.Name\n                      ? DecodeIFCString(property.Unit.Name.value) // unit defined by IFCCONTEXTDEPENDENTUNIT\n                      : property.Unit.value\n                        ? DecodeIFCString(property.Unit.value) // unit defined by 'text' (from opendthX connector)\n                        : \"\"\n                  : \"\";\n\n                // console.log(\"unit\", unit);\n                newPset.push({\n                  label,\n                  description,\n                  value,\n                  unit,\n                });\n              }\n              psets.push({\n                ...pset,\n                HasProperties: [...newPset],\n              });\n            } else if (pset.Quantities && pset.Quantities.length > 0) {\n              const newPset = [];\n              for (let property of pset.Quantities) {\n                const label = DecodeIFCString(property.Name.value);\n                const value = property.NominalValue\n                  ? DecodeIFCString(property.NominalValue.value)\n                  : null;\n                newPset.push({\n                  label,\n                  value,\n                });\n              }\n              psets.push({\n                ...pset,\n                HasProperties: [...newPset],\n              });\n            } else {\n              psets.push({\n                ...pset,\n                HasProperties: [],\n              });\n            }\n          }\n          for (let mat of elementProperties.mats) {\n\n          }\n          // psets = await Promise.all(elementProperties.psets.map(async (pset) => {\n          //   if (pset.HasProperties && pset.HasProperties.length > 0) {\n          //     const newPset = await Promise.all(pset.HasProperties.map(async (property) => {\n          //       console.log('property', property)\n          //       const label = DecodeIFCString(property.Name.value);\n          //       const value = property.NominalValue ? DecodeIFCString(property.NominalValue.value) : '';\n          //       const unit = (property.Unit == null) ? '' : (property.Unit.value === 'null' ? '' : property.Unit.value);\n          //       console.log('unit', unit)\n          //       return {\n          //         label,\n          //         value,\n          //         unit\n          //       }\n          //     }));\n\n          //     return {\n          //       ...pset,\n          //       HasProperties: [...newPset]\n          //     }\n          //   }\n          //   if (pset.Quantities && pset.Quantities.length > 0) {\n          //     const newPset = await Promise.all(pset.Quantities.map(async (property) => {\n          //       const label = DecodeIFCString(property.Name.value);\n          //       const value = property.NominalValue ? DecodeIFCString(property.NominalValue.value) : null;\n          //       return {\n          //         label,\n          //         value\n          //       }\n          //     }));\n\n          //     return {\n          //       ...pset,\n          //       HasProperties: [...newPset]\n          //     }\n          //   }\n          //   return {\n          //     ...pset,\n          //     HasProperties: []\n          //   }\n          // }));\n        }\n        const elem = {\n          ...elementProperties,\n          name: elementProperties.Name\n            ? elementProperties.Name.value\n            : \"NO NAME\",\n          type: ifcClass ? ifcClass : \"NO TYPE\",\n          modelID: 0,\n          psets,\n        };\n        // console.log(\"elem\", elem);\n        setIfcElement(elem);\n      }\n      setIsLoading(false);\n      // else {\n      //   if (element) {\n      //     console.log(\"elements\", element);\n      //     setIfcElement(element);\n      //   }\n      // }\n    }\n    init();\n  }, [selectedElementID]);\n\n  const handleShowElement = async () => {\n    const modelID = element.modelID;\n    const ids = [element.expressID];\n    console.log(\"viewer\", viewer);\n    // const mesh = await viewer.IFC.visibility.getMesh(modelID);\n    // console.log(\"mesh\", mesh);\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleAddProperties = async () => {\n    handleShowMarketplace(\"Open dthX\");\n    setShowProperties(false);\n  };\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement(\"a\");\n    a.download = fileName;\n    a.href = window.URL.createObjectURL(blob);\n    const clickEvt = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    a.dispatchEvent(clickEvt);\n    a.remove();\n  };\n\n  // const handleExportToJson = e => {\n  //   e.preventDefault()\n  //   downloadFile({\n  //     data: JSON.stringify(usersData.users),\n  //     fileName: `${ifcElement ? ifcElement.name : \"Undefined\"}.csv`,\n  //     fileType: 'text/json',\n  //   })\n  // }\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleExportToCsv = (e) => {\n    e.preventDefault();\n    // Headers for each column\n    let propertiesCsv = [];\n    let headers = [\n      \"modelId\",\n      \"elementName\",\n      \"elementClass\",\n      \"globalId\",\n      \"expressId\",\n      \"psetName\",\n      \"propertyName\",\n      \"propertyValue\",\n    ].join(\",\");\n    propertiesCsv.push(headers);\n    // Convert Properties data to a csv\n\n    // let propertiesCsv = ifcElement.psets?.map(pset => pset.HasProperties?.reduce((acc, property) => {\n    //   const { label, value } = property\n    //   acc.push([label, `${value} \\n`].join(','))\n    //   console.log(acc[acc.length - 1])\n    //   return acc\n    // }, []));\n\n    // console.log(\"ifcElement\", ifcElement);\n    ifcElement.psets?.forEach((pset) =>\n      pset.HasProperties?.forEach((property) => {\n        const modelID = `${ifcElement.modelID}`;\n        const elementName = `${ifcElement.name}`;\n        const elementClass = `${ifcElement.type}`;\n        const globalID = `${ifcElement.GlobalId.value}`;\n        const expressID = `${ifcElement.expressID}`;\n        const psetName = `${pset.Name.value}`;\n        const { label: propertyName, value: propertyValue } = property;\n        propertiesCsv.push(\n          [\n            modelID,\n            elementName,\n            elementClass,\n            globalID,\n            expressID,\n            psetName,\n            propertyName,\n            propertyValue,\n          ].join(\",\")\n        );\n      })\n    );\n    downloadFile({\n      data: [...propertiesCsv].join(\"\\n\"),\n      fileName: `${ifcElement ? ifcElement.name : \"Undefined\"}.csv`,\n      fileType: \"text/csv\",\n    });\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <DescriptionIcon />\n          </Avatar>\n        }\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                setShowProperties(false);\n                // setSelectedElementID(null); Empche rouverture de la view aprs fermeture\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              {/* <ListItem\n                button\n                onClick={handleShowElement}\n              >\n                <ListItemIcon>\n                  <VisibilityIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Visibility\" />\n              </ListItem> */}\n              {ifcElement && (\n                <>\n                  <ListItem button onClick={handleExportToCsv}>\n                    <ListItemIcon>\n                      <DownloadIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Tlcharger CSV\" />\n                  </ListItem>\n                  <ListItem button onClick={handleAddProperties}>\n                    <ListItemIcon>\n                      <AddIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Ajouter proprit\" />\n                  </ListItem>\n                </>\n              )}\n              <ListItem\n                button\n                onClick={() => {\n                  setShowProperties(false);\n                  // setSelectedElementID(null); Empche rouverture de la view aprs fermeture\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n        title={`${ifcElement ? DecodeIFCString(ifcElement.name) : \"Undefined\"}`}\n        subheader={`${ifcElement ? ifcElement.type : \"Undefined\"} - ${selectedElementID}`}\n      />\n      <CardContent className={classes.cardContent}>\n        {/* <Paper className={classes.mapContainer}>\n          <div id=\"element-viewer\" style={{\n            // position: \"absolute\",\n            height: \"100%\",\n            width: \"100%\",\n            left: \"0\",\n            top: \"0\",\n          }}>\n          </div>\n        </Paper> */}\n        {isLoading ? (\n          <Grid container>\n            <Grid item md={12} style={{ textAlign: \"center\" }}>\n              <CircularProgress color=\"inherit\" />\n            </Grid>\n          </Grid>\n        ) : (\n\n          <>\n\n            {ifcElement && (\n              <>\n                <Accordion>\n                  <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                    aria-controls=\"panel1a-content\"\n                    id=\"panel1a-header\"\n                  >\n                    <Typography className={classes.heading}>\n                      Attributes\n                  </Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    <TableContainer>\n                      <Table className={classes.table} aria-label=\"simple table\">\n                        <TableBody>\n                          <TableRow key={0}>\n                            <TableCell>{`GlobalId`}</TableCell>\n                            <TableCell>{`${ifcElement.GlobalId.value}`}</TableCell>\n                          </TableRow>\n                          <TableRow key={1}>\n                            <TableCell>{`Name`}</TableCell>\n                            <TableCell>{`${ifcElement.name}`}</TableCell>\n                          </TableRow>\n                          <TableRow key={2}>\n                            <TableCell>{`Type`}</TableCell>\n                            <TableCell>{`${ifcElement.type}`}</TableCell>\n                          </TableRow>\n                          {ifcElement.PredefinedType &&\n                            <TableRow key={2}>\n                              <TableCell>{`Predifined Type`}</TableCell>\n                              <TableCell>{`${ifcElement.PredefinedType.value}`}</TableCell>\n                            </TableRow>\n                          }\n                        </TableBody>\n                      </Table>\n                    </TableContainer>\n                  </AccordionDetails>\n                </Accordion>\n                {ifcElement.psets.length > 0 &&\n                  ifcElement.psets.map((pset, i) => (\n                    <Accordion key={i}>\n                      <AccordionSummary\n                        expandIcon={<ExpandMoreIcon />}\n                        aria-controls=\"panel1a-content\"\n                        id=\"panel1a-header\"\n                      >\n                        <Typography\n                          className={classes.heading}\n                        >{`${DecodeIFCString(pset.Name.value)}`}</Typography>\n                      </AccordionSummary>\n                      <AccordionDetails>\n                        <TableContainer>\n                          <Table\n                            className={classes.table}\n                            aria-label=\"simple table\"\n                          >\n                            <TableBody>\n                              {pset.HasProperties &&\n                                pset.HasProperties.length > 0 &&\n                                pset.HasProperties.map((property, index) => (\n                                  <TableRow key={index}>\n                                    <TableCell>{`${property.label}`}</TableCell>\n                                    <TableCell>\n                                      {property.description &&\n                                        property.description !== \"\" && (\n                                          <Tooltip\n                                            title={`${property.description}`}\n                                            placement=\"top-start\"\n                                          >\n                                            <IconButton>\n                                              <InfoIcon />\n                                            </IconButton>\n                                          </Tooltip>\n                                        )}\n                                    </TableCell>\n                                    {RegExp(`^http`).test(property.value) ? (\n                                      <TableCell>\n                                        <a\n                                          href={`${property.value}`}\n                                          target=\"_blank\"\n                                          rel=\"noreferrer\"\n                                        >{`${property.value}`}</a>\n                                      </TableCell>\n                                    ) : (\n                                      <TableCell style={{maxWidth: \"200px\"}} >{`${property.value}`}</TableCell>\n                                    )}\n                                    <TableCell>{`${property.unit}`}</TableCell>\n                                  </TableRow>\n                                ))}\n                            </TableBody>\n                          </Table>\n                        </TableContainer>\n                      </AccordionDetails>\n                    </Accordion>\n                  ))}\n              </>\n            )}\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Properties;\n","import React, {\n  useEffect,\n  useState,\n  useRef,\n  useMemo,\n  useCallback,\n} from \"react\";\nimport { makeStyles, Fab, Button } from \"@material-ui/core\";\nimport { useDropzone } from \"react-dropzone\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableContainer,\n  TableRow,\n  List,\n  Paper,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  Grid,\n  LinearProgress,\n  Box,\n  Typography,\n} from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport FactCheckIcon from \"@mui/icons-material/FactCheck\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\n// import { FirstPersonControls } from 'three/examples/jsm/controls/FirstPersonControls';\nimport axios from \"axios\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n  button: {\n    color: \"white\",\n    backgroundColor: \"black\",\n    width: \"100%\",\n    marginTop: \"1em\",\n    marginBottom: \"1em\",\n  },\n  linearProgress: {\n    width: \"90%\",\n    margin: \"1em\",\n    left: 0,\n    right: 0,\n    //position: 'absolute',\n    // top: '25%',\n    // transform: 'translateY(-25%)'\n  },\n}));\n\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  height: \"150px\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 2,\n  width: \"100%\",\n  borderColor: \"#ddddd\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"#fafafa\",\n  color: \"#bdbdbd\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\",\n  cursor: \"pointer\",\n};\n\nconst Validation = ({\n  bimData,\n  setBimData,\n  showValidation,\n  setShowValidation,\n}) => {\n  const style = useMemo(\n    () => ({\n      ...baseStyle,\n    }),\n    []\n  );\n\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [logs, setLogs] = useState([]);\n  const [bimModel, setBimModel] = useState(null);\n  const [progress, setProgress] = useState(-1);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  useEffect(() => {\n    const init = async () => {\n      const models = await bimData.viewer.context.items.ifcModels;\n      if (models.length > 0) {\n        setBimModel(models[0]);\n      }\n    };\n    init();\n  }, [bimModel]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return () => {\n      window.removeEventListener(\"resize\", resizeListener);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  useEffect(() => {\n    // if (progress === 100) {\n    //   window.parent.postMessage({ projectId: projectId }, `${process.env.REACT_APP_TRIDYME}`);\n    // }\n  }, [progress]);\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  let timeoutIdentifier;\n\n  const handleModelValidation = async () => {\n    try {\n      setProgress(0);\n      const ifcData =\n        await bimData.viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n      const blobIfc = new Blob([ifcData], { type: \"text/plain\" });\n      const ifcFile = new File([blobIfc], \"ifcFile.png\");\n\n      const formData = new FormData();\n      formData.append(\"files\", ifcFile);\n\n      const analysis = await axios.post(\n        process.env.REACT_APP_API_URL,\n        formData,\n        {\n          headers: {\n            \"Access-Control-Allow-Origin\": \"*\"\n          }\n        }\n      );\n      const { projectId } = analysis.data;\n      console.log(\"projectId\", projectId);\n      function poll() {\n        axios\n          .get(`${process.env.REACT_APP_API_URL}/pp/${projectId}`, {\n            headers: {\n              \"Access-Control-Allow-Origin\": \"*\"\n            }\n          })\n          .then((r) => {\n            const progressLoading = r.data.progress;\n            if (progressLoading === 100) {\n              clearTimeout(timeoutIdentifier);\n              setProgress(progressLoading);\n              // axios.get(`${process.env.REACT_APP_API_URL}/v/${projectId}`).then((r) => {\n              //   window.MODEL_ID = projectId;\n              //   window.NUM_FILES = r.data.n_files;\n              //   window.SPINNER_CLASS = 'spinner';\n\n              //   //TEMP FIX\n              //   window.hasOwnProperty('launch3D') && window.launch3D();\n              //   if (!window.hasOwnProperty('launch3D')) {\n              //     document.location.reload();\n              //   }\n              // })\n              axios\n                .get(`${process.env.REACT_APP_API_URL}/log/${projectId}.json`)\n                .then((logs) => {\n                  console.log(\"logs\", logs.data);\n                  setLogs(logs.data);\n                });\n            } else {\n              console.log(\"progress\", progressLoading);\n              timeoutIdentifier = setTimeout(poll, 1000);\n              if (progressLoading > -1) {\n                setProgress(progressLoading);\n              }\n            }\n          });\n      }\n      await poll();\n    } catch (err) {\n      // return res.status(500).json({ error: err });\n    }\n  };\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    const formData = new FormData();\n    formData.append(\"files\", acceptedFiles[0]);\n    if (acceptedFiles.length > 0) {\n      if (acceptedFiles[0].size / 1024 / 1024 > 15) {\n        alert(\"Version limite  15 Mo\");\n      } else {\n        setProgress(0);\n        const analysis = await axios.post(\n          process.env.REACT_APP_API_URL,\n          formData,\n          {\n            headers: {\n              \"Access-Control-Allow-Origin\": \"*\"\n            }\n          }\n        );\n        const { projectId } = analysis.data;\n        console.log(\"projectId\", projectId);\n        function poll() {\n          axios\n            .get(`${process.env.REACT_APP_API_URL}/pp/${projectId}`, {\n              headers: {\n                \"Access-Control-Allow-Origin\": \"*\"\n              }\n            })\n            .then((r) => {\n              const progressLoading = r.data.progress;\n              if (progressLoading === 100) {\n                clearTimeout(timeoutIdentifier);\n                setProgress(progressLoading);\n\n                axios\n                  .get(`${process.env.REACT_APP_API_URL}/log/${projectId}.json`, {\n                    headers: {\n                      \"Access-Control-Allow-Origin\": \"*\"\n                    }\n                  })\n                  .then((logs) => {\n                    console.log(\"logs\", logs.data);\n                    setLogs(logs.data);\n                  });\n              } else {\n                console.log(\"progress\", progressLoading);\n                timeoutIdentifier = setTimeout(poll, 1000);\n                if (progressLoading > -1) {\n                  setProgress(progressLoading);\n                }\n              }\n            });\n        }\n        await poll();\n      }\n    }\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: \".ifc\",\n  });\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  const downloadFile = ({ data, fileName, fileType }) => {\n    // Create a blob with the data we want to download as a file\n    const blob = new Blob([data], { type: fileType });\n    // Create an anchor element and dispatch a click event on it\n    // to trigger a download\n    const a = document.createElement(\"a\");\n    a.download = fileName;\n    a.href = window.URL.createObjectURL(blob);\n    const clickEvt = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n    a.dispatchEvent(clickEvt);\n    a.remove();\n  };\n\n  const handleExportToCsv = (e) => {\n    e.preventDefault();\n    // Headers for each column\n    let logsCsv = [];\n    let headers = [\"Severity\", \"Message\", \"Instance\", \"Time\"].join(\",\");\n    logsCsv.push(headers);\n\n    logs?.forEach((log) => {\n      const { level, message, instance, time } = log;\n      logsCsv.push([level, message, instance, time].join(\",\"));\n    });\n\n    downloadFile({\n      data: [...logsCsv].join(\"\\n\"),\n      fileName: `logs.csv`,\n      fileType: \"text/csv\",\n    });\n  };\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <FactCheckIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Validation`}\n        subheader={`Systme de validation d'un fichier IFC`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => setShowValidation(false)}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              {logs.length > 0 && (\n                <ListItem button onClick={handleExportToCsv}>\n                  <ListItemIcon>\n                    <DownloadIcon />\n                  </ListItemIcon>\n                  <ListItemText primary=\"Tlcharger CSV\" />\n                </ListItem>\n              )}\n              <ListItem button onClick={() => setShowValidation(false)}>\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent className={classes.cardContent}>\n        <Grid item xs={12} align=\"center\" justify=\"center\" alignItems=\"center\">\n          <div {...getRootProps({ style })}>\n            <input {...getInputProps()} />\n            {isDragActive ? (\n              <p>\n                Importer votre fichier ici ou cliquez pour selectionner un\n                fichier\n              </p>\n            ) : (\n              <p>\n                Importer votre fichier ici ou cliquez pour selectionner un\n                fichier\n              </p>\n            )}\n          </div>\n        </Grid>\n\n        {progress >= 0 && progress < 100 ? (\n          <Grid\n            item\n            xs={12}\n            align=\"center\"\n            justify=\"center\"\n            alignItems=\"center\"\n          >\n            <LinearProgressWithLabel value={progress} />\n          </Grid>\n        ) : (\n          <>\n            {bimModel && (\n              <>\n                <Grid item xs={12}>\n                  <br />\n                  <Typography gutterBottom variant=\"title2\" component=\"div\">\n                    Pour lancer l'audit de la maquette dja charge:\n                  </Typography>\n                </Grid>\n                <Grid item xs={12}>\n                  <Button\n                    variant=\"contained\"\n                    className={classes.button}\n                    onClick={handleModelValidation}\n                  >\n                    Audit\n                  </Button>\n                </Grid>\n              </>\n            )}\n          </>\n        )}\n        <Grid item xs={12}>\n          {logs.length > 0 && (\n            <TableContainer component={Paper}>\n              <Table className={classes.table} aria-label=\"simple table\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Severity</TableCell>\n                    <TableCell align=\"left\">Message</TableCell>\n                    <TableCell align=\"left\">Instance</TableCell>\n                    <TableCell align=\"left\">time</TableCell>\n                  </TableRow>\n                </TableHead>\n                {logs.map((log, i) => (\n                  <TableRow\n                    key={i}\n                    sx={{ \"&:last-child td, &:last-child th\": { border: 0 } }}\n                  >\n                    <TableCell\n                      style={{\n                        color: `${log.level === \"Error\" ? \"red\" : \"orange\"}`,\n                      }}\n                    >\n                      {log.level}\n                    </TableCell>\n                    <TableCell>{log.message}</TableCell>\n                    <TableCell>{log.instance}</TableCell>\n                    <TableCell>{log.time}</TableCell>\n                  </TableRow>\n                ))}\n              </Table>\n            </TableContainer>\n          )}\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Validation;\n\nfunction LinearProgressWithLabel(props) {\n  const classes = useStyles();\n\n  return (\n    <>\n      <Box display=\"flex\" className={classes.root} alignItems=\"center\">\n        {props.value === 0 ? (\n          <div className={classes.linearProgress}>Vrification en cours...</div>\n        ) : (\n          <>\n            <Box width=\"100%\" mr={1}>\n              <LinearProgress\n                className={classes.linearProgress}\n                variant=\"determinate\"\n                {...props}\n              />\n            </Box>\n            <Box minWidth={35}>\n              <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\n                props.value\n              )}%`}</Typography>\n            </Box>\n          </>\n        )}\n      </Box>\n    </>\n  );\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab, Typography } from \"@material-ui/core\";\nimport {\n  Grid,\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  CircularProgress,\n} from \"@mui/material\";\nimport CropIcon from \"@mui/icons-material/Crop\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport ControlCameraIcon from \"@mui/icons-material/ControlCamera\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n}));\n\nconst Cuts = ({ viewer, showCuts, setShowCuts }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [cuts, setCuts] = useState([]);\n  const [allowCut, setAllowCut] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  // useEffect(() => {\n  //   console.log('viewer.clipper.planes', viewer.clipper.planes)\n  //   const getCuts = async () => {\n  //     setLoading(true);\n  //     viewer.clipper.active = true;\n  //     setCuts(viewer.clipper.planes);\n  //     setLoading(false);\n  //   };\n  //   getCuts();\n  // }, [cuts]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    viewer.clipper.active = true;\n    window.addEventListener(\"resize\", resizeListener);\n    window.addEventListener(\"dblclick\", addClippingPlane, false);\n    return () => {\n      viewer.clipper.active = false;\n      window.removeEventListener(\"resize\", resizeListener);\n      window.removeEventListener(\"dblclick\", addClippingPlane, false);\n    };\n  }, []);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const addClippingPlane = async () => {\n    setLoading(true);\n    console.log(\"viewer\", viewer);\n    await viewer.clipper.createPlane();\n    console.log(\"viewer.clipper.planes\", viewer.clipper.planes);\n    console.log(\"viewer.plans.planLists\", viewer.plans.planLists);\n    setCuts(viewer.clipper.planes);\n    setLoading(false)\n  };\n\n  const handleAddClippingPlane = () => {\n    if (showCuts) {\n      viewer.clipper.active = true;\n      window.addEventListener(\"dblclick\", addClippingPlane, false);\n    }\n  };\n\n  const handleDeleteClippingPlane = async (cut, index) => {\n    if (showCuts) {\n      setLoading(true);\n      await viewer.clipper.deletePlane(cut);\n      setLoading(false);\n      console.log(\"viewer.clipper.planes\", viewer.clipper.planes);\n      window.removeEventListener(\"dblclick\", addClippingPlane, false);\n      // const newCuts = cuts.splice(index, 1);\n      // setCuts([...newCuts]);\n    }\n  };\n\n  const handleHideAllClippingPlane = async () => {\n    setLoading(true);\n    viewer.clipper.active = !viewer.clipper.active;\n    if (!viewer.clipper.active) {\n      await viewer.removeClippingPlane();\n    }\n    setLoading(false);\n  };\n\n  const handleRemoveAllClippingPlane = async () => {\n    setLoading(true);\n    viewer.clipper.active = false;\n    await viewer.clipper.deleteAllPlanes();\n    // if (viewer.clipper.planes.length > 0) {\n    //   viewer.clipper.planes.forEach(dimension => dimension.removeFromScene());\n    // }\n    viewer.clipper.planes = [];\n    setCuts([]);\n    setLoading(false);\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <CropIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Coupes`}\n        subheader={`Liste des coupes`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                viewer.clipper.active = false;\n                window.removeEventListener(\"dblclick\", addClippingPlane, false);\n                setShowCuts(false);\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem\n                button\n                onClick={() => {\n                  viewer.clipper.active = false;\n                  window.removeEventListener(\n                    \"dblclick\",\n                    addClippingPlane,\n                    false\n                  );\n                  setShowCuts(false);\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent>\n        <Grid container spacing={2}>\n          {/* <Grid item xs={6} style={{ textAlign: \"left\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleAddClippingPlane}\n              >\n                <AddIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid item xs={6} style={{ textAlign: \"right\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleHideAllClippingPlane}\n              >\n                <VisibilityIcon />\n              </Button>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleRemoveAllClippingPlane}\n              >\n                <DeleteIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid> */}\n          <Grid item xs={12}>\n            {/* <Typography variant=\"subtitle1\" component=\"h3\">\n              Liste de coupes:\n        </Typography> */}\n            <Typography gutterBottom variant=\"title2\" component=\"div\">\n              Double-cliquer sur une surface pour gnrer une coupe\n                  </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            {loading ? (\n              <CircularProgress color=\"inherit\" />\n            ) : (\n              <List sx={{ width: \"100%\" }}>\n                {viewer.clipper.planes.length > 0 &&\n                  viewer.clipper.planes.map((cut, index) => (\n                    <ListItem\n                      key={index}\n                      secondaryAction={\n                        <>\n                          <IconButton\n                            edge=\"end\"\n                            aria-label=\"comments\"\n                            onClick={() =>\n                              handleDeleteClippingPlane(cut, index)\n                            }\n                          >\n                            <CloseIcon />\n                          </IconButton>\n                        </>\n                      }\n                      disablePadding\n                    >\n                      <ListItemButton\n                        role={undefined}\n                        dense\n                      //  onClick={() => handleShowElement(ifcClass.eids)}\n                      >\n                        {/* <ListItemIcon>\n                    </ListItemIcon> */}\n                        <ListItemText\n                          id={`checkbox-list-label-${index}`}\n                          primary={`${cut.arrowBoundingBox.uuid}`}\n                        />\n                      </ListItemButton>\n                    </ListItem>\n                  ))}\n              </List>\n            )}\n          </Grid>\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Cuts;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab, Typography } from \"@material-ui/core\";\nimport {\n  Grid,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemText,\n  CircularProgress,\n  Button\n} from \"@mui/material\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport LayersClearIcon from \"@mui/icons-material/LayersClear\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport Drawing from \"dxf-writer\";\nimport {\n  IFCWINDOW,\n  IFCPLATE,\n  IFCMEMBER,\n  IFCWALL,\n  IFCWALLSTANDARDCASE,\n  IFCSLAB,\n  IFCFURNISHINGELEMENT,\n  IFCDOOR,\n  IFCSTAIR,\n  IFCSTAIRFLIGHT,\n  IFCRAILING\n} from 'web-ifc';\nimport { ClippingEdges } from 'web-ifc-viewer/dist/components/display/clipping-planes/clipping-edges';\nimport { Color, LineBasicMaterial, MeshBasicMaterial } from 'three';\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\nimport ViewInArIcon from '@mui/icons-material/ViewInAr';\n\nconst useStyles = makeStyles(() => ({\n  // list: {\n  //   width: \"100%\",\n  //   height: \"100%\",\n  //   maxHeight: \"100%\",\n  //   overflow: \"auto\",\n  // },\n  activePlan: {\n    color: \"#E6464D\",\n  },\n  button: {\n    color: \"white\",\n    backgroundColor: 'black',\n    width: '100%'\n  },\n}));\n\nconst DrawingList = ({\n  viewer,\n  setPlans\n}) => {\n  const [drawings, setDrawings] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [activeViewIndex, setActiveViewIndex] = useState();\n\n  const classes = useStyles();\n\n\n  const clippingMaterial = new LineMaterial();\n  const subsetMat = new MeshBasicMaterial();\n\n\n  const sectionedCategories = [\n    {\n      name: \"windows_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.BLUE,\n      value: [IFCWINDOW, IFCPLATE, IFCMEMBER],\n      stringValue: [\"IFCWINDOW\", \"IFCPLATE\", \"IFCMEMBER\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"walls_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCWALL, IFCWALLSTANDARDCASE],\n      stringValue: [\"IFCWALL\", \"IFCWALLSTANDARDCASE\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"floors_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCSLAB],\n      stringValue: [\"IFCSLAB\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"doors_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.YELLOW,\n      value: [IFCDOOR],\n      stringValue: [\"IFCDOOR\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"furniture_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCFURNISHINGELEMENT],\n      stringValue: [\"IFCFURNISHINGELEMENT\"],\n      material: clippingMaterial\n    },\n    {\n      name: \"stairs_section\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.RED,\n      value: [IFCSTAIR, IFCSTAIRFLIGHT],\n      stringValue: [\"IFCSTAIR\", \"IFCSTAIRFLIGHT\"],\n      material: clippingMaterial\n    },\n  ];\n\n  const projectedCategories = [\n    {\n      name: \"furniture_projection\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.CYAN,\n      value: [IFCFURNISHINGELEMENT],\n      stringValue: [\"IFCFURNISHINGELEMENT\"],\n    },\n    {\n      name: \"general_projection\",\n      style: 'CONTINUOUS',\n      color: Drawing.ACI.CYAN,\n      value: [IFCSLAB, IFCWINDOW, IFCDOOR, IFCSTAIRFLIGHT, IFCSTAIR, IFCRAILING, IFCMEMBER],\n      stringValue: [\"IFCSLAB\", \"IFCWINDOW\", \"IFCDOOR\", \"IFCSTAIRFLIGHT\", \"IFCSTAIR\", \"IFCRAILING\", \"IFCMEMBER\"],\n    },\n\n  ];\n\n\n\n  useEffect(() => {\n    let newPlans = [];\n    const getDrawings = async () => {\n      try {\n        setLoading(true);\n        // ClippingEdges.createDefaultIfcStyles = false;\n        // viewer.dxf.initializeJSDXF(Drawing);\n        // const plans = await generateAllFloorPlans1();\n\n        await viewer.plans.computeAllPlanViews(0);\n        let newPlans = Object.values(viewer.plans.planLists[0]);\n\n        setDrawings(newPlans);\n        setPlans(newPlans);\n        setLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getDrawings();\n  }, []);\n\n\n  async function generateAllFloorPlans() {\n    console.log('coordinates', await viewer.plans.getSiteCoords(0))\n    await createClippingLayers();\n    await viewer.plans.computeAllPlanViews(0);\n\n    const plans = Object.values(viewer.plans.planLists[0]);\n    const ifcProject = await viewer.IFC.getSpatialStructure(0);\n    const storeys = ifcProject.children[0].children[0].children;\n    for (let storey of storeys) {\n      for (let child of storey.children) {\n        if (child.children.length) {\n          storey.children.push(...child.children);\n        }\n      }\n    }\n\n    console.log('storeys', storeys);\n\n    console.log('plans', plans);\n\n    for (let plan of plans) {\n      // Create a new drawing (if it doesn't exist)\n      if (!viewer.dxf.drawings[plan.name]) viewer.dxf.newDrawing(plan.name);\n\n      const storey = await storeys.find(storey => storey.expressID === plan.expressID);\n\n      // Draw all projected layers\n      for (let category of projectedCategories) {\n\n        // Get the IDs of all the items to draw\n        const ids = await storey.children\n          .filter(child => category.stringValue.includes(child.type))\n          .map(child => child.expressID);\n\n        // If no items to draw in this layer in this floor plan, let's continue\n        if (!ids.length) {\n          continue;\n        }\n\n        // If there are items, extract its geometry\n        const subset = await viewer.IFC.loader.ifcManager.createSubset({\n          modelID: 0,\n          ids,\n          removePrevious: true,\n          customID: \"floor_plan_generation\",\n          material: subsetMat\n        });\n\n        // Get the projection of the items in this floor plan\n        const filteredPoints = [];\n        const edges = await viewer.edgesProjector.projectEdges(subset);\n        const positions = edges.geometry.attributes.position.array;\n\n\n        // Lines shorter than this won't be rendered\n        // https://stackoverflow.com/a/20916980/14627620\n\n        const tolerance = 0.01;\n        for (let i = 0; i < positions.length - 5; i += 6) {\n\n          const a = positions[i] - positions[i + 3];\n          // Z coords are multiplied by -1 to match DXF Y coordinate\n          const b = -positions[i + 2] + positions[i + 5];\n\n          const distance = Math.sqrt(a * a + b * b);\n\n          if (distance > tolerance) {\n            filteredPoints.push([positions[i], -positions[i + 2], positions[i + 3], -positions[i + 5]]);\n          }\n\n        }\n\n        // Draw the projection of the items\n        viewer.dxf.drawEdges(plan.name, filteredPoints, category.name, category.color, category.style);\n\n        // Clean up\n        edges.geometry.dispose();\n\n      }\n\n      // Draw all sectioned items\n      for (let category of sectionedCategories) {\n        viewer.dxf.drawNamedLayer(plan.name, plan, category.name, category.name, category.color, category.style);\n      }\n    }\n\n    return plans;\n  }\n\n  async function createClippingLayers() {\n    for (let category of sectionedCategories) {\n      await ClippingEdges.newStyle(category.name, category.value, category.material);\n    }\n  }\n\n  const handleShowPlane = async (drawing, index) => {\n    console.log('drawing', drawing);\n    // const current = drawings[index];\n    // console.log('current', current);\n\n    viewer.plans.goTo(0, `${drawing.expressID}`, false);\n  }\n\n\n  const handleDxfPlane = async (drawing, index) => {\n\n    const result = viewer.dxf.exportDXF(drawing.name);\n    const link = document.createElement('a');\n    link.download = `${drawing.name}.dxf`;\n    link.href = URL.createObjectURL(result);\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  }\n\n  const handleAddPlane = async () => {\n    await viewer.plans.computeAllPlanViews(0);\n    const planNames = Object.keys(viewer.plans.planLists[0]);\n    console.log(\"viewer.plans.planLists\", viewer.plans.planLists);\n    console.log(\"viewer.plans.planLists\", planNames);\n  };\n\n  const handleDeletePlane = async () => {\n    setActiveViewIndex();\n    await viewer.plans.exitPlanView();\n  };\n\n  const handleHideAllPlane = () => {\n    viewer.clipper.active = !viewer.clipper.active;\n    if (!viewer.clipper.active) {\n      viewer.removeClippingPlane();\n    }\n  };\n\n  const handleRemoveAllPlane = () => {\n    // viewer.clipper.deleteAllPlanes();\n    viewer.clipper.planes = [];\n    setDrawings([]);\n  };\n\n  return (\n    <Grid container>\n      {/* <Grid item xs={6} style={{ textAlign: 'left' }}>\n            <ButtonGroup\n              className={classes.buttonGroup}\n            >\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleAddPlane}\n              >\n                <AddIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid item xs={6} style={{ textAlign: 'right' }}>\n            <ButtonGroup\n              className={classes.buttonGroup}\n            >\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleHideAllPlane}\n              >\n                <VisibilityIcon />\n              </Button>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleRemoveAllPlane}\n              >\n                <DeleteIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid> */}\n      <Grid item xs={12}>\n        {loading ? (\n          <Grid item xs={12} style={{ textAlign: 'center' }}>\n            <CircularProgress color=\"inherit\" />\n          </Grid>\n        ) : (\n          <List className={classes.list} disablePadding>\n            <ListItem\n              disablePadding\n              secondaryAction={\n                <>\n                  {/* <Button\n                    className={classes.button}\n                    onClick={() => handleDeletePlane()}\n                  >\n                    {'3D'}\n                  </Button> */}\n                  <IconButton\n                    edge=\"end\"\n                    aria-label=\"comments\"\n                    className={classes.button}\n                    onClick={() => handleDeletePlane()}>\n                    <ViewInArIcon />\n                  </IconButton>\n                </>\n              }\n            >\n              <ListItemButton role={undefined} dense>\n                <ListItemText primary={<Typography gutterBottom variant=\"h6\" component=\"div\">\n                  {`Liste des vues des tages:`}\n                </Typography>} />\n              </ListItemButton>\n            </ListItem>\n            <hr />\n            {/*<Typography gutterBottom variant=\"h6\" component=\"div\">\n              {`Liste des vues des tages:`}\n            </Typography> */}\n            {drawings.length > 0 &&\n              drawings.map((drawing, index) => (\n                <ListItem\n                  key={index}\n                  disablePadding\n                  className={\n                    index === activeViewIndex ? classes.activePlan : \"\"\n                  }\n                  secondaryAction={\n                    <>\n                      {/* <IconButton\n                        edge=\"end\"\n                        aria-label=\"comments\"\n                        onClick={() => handleDxfPlane(drawing, index)}\n                      >\n                        <DownloadIcon />\n                      </IconButton> */}\n                      <IconButton\n                        // className={\n                        //   index === activeViewIndex ? classes.activePlan : \"\"\n                        // }\n                        style={{\n                          color: index === activeViewIndex ? \"#E6464D\" : \"\",\n                        }}\n                        edge=\"end\"\n                        aria-label=\"comments\"\n                        onClick={() => handleShowPlane(drawing)}\n                      >\n                        <VisibilityIcon />\n                      </IconButton>\n                      {/* <IconButton\n                      edge=\"end\"\n                      aria-label=\"comments\"\n                      onClick={() => handleDeletePlane(drawing, index)}\n                    >\n                      <CloseIcon />\n                    </IconButton> */}\n                    </>\n                  }\n                >\n                  <ListItemButton\n                    role={undefined}\n                    dense\n                  //  onClick={() => handleShowElement(ifcClass.eids)}\n                  >\n                    {/* <ListItemIcon>\n                    </ListItemIcon> */}\n                    <ListItemText\n                      id={`checkbox-list-label-${index}`}\n                      primary={`${drawing.name}`}\n                    />\n                  </ListItemButton>\n                </ListItem>\n              ))}\n          </List>\n        )}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default DrawingList;\n\n\n//   const handleShowPlane = async (index) => {\n//     setActiveViewIndex(index);\n\n//     const current = drawings[index];\n//     console.log(\"current\", current);\n//     viewer.plans.goTo(0, current, true);\n//     //viewer.context.items.ifcModels.forEach(model => viewer.edges.toggle(`${model.modelID}`));\n\n//     // viewer.shadowDropper.shadows[0].root.visible = false;\n//     // viewer.filler.fills[0].visible = false;\n//   };\n\n\n//   const handleDeletePlane = () => {\n//     setActiveViewIndex();\n//     viewer.plans.exitPlanView(true);\n//   };\n\n//   const handleHideAllPlane = () => {\n//     viewer.clipper.active = !viewer.clipper.active;\n//     if (!viewer.clipper.active) {\n//       viewer.removeClippingPlane();\n//     }\n//   };\n\n//   const handleRemoveAllPlane = () => {\n//     // viewer.clipper.deleteAllPlanes();\n//     viewer.clipper.planes = [];\n//     setDrawings([]);\n//   };\n//   return (\n//     <Grid container>\n//       {/* <Grid item xs={6} style={{ textAlign: 'left' }}>\n//             <ButtonGroup\n//               className={classes.buttonGroup}\n//             >\n//               <Button\n//                 edge=\"end\"\n//                 aria-label=\"comments\"\n//                 onClick={handleAddPlane}\n//               >\n//                 <AddIcon />\n//               </Button>\n//             </ButtonGroup>\n//           </Grid>\n//           <Grid item xs={6} style={{ textAlign: 'right' }}>\n//             <ButtonGroup\n//               className={classes.buttonGroup}\n//             >\n//               <Button\n//                 edge=\"end\"\n//                 aria-label=\"comments\"\n//                 onClick={handleHideAllPlane}\n//               >\n//                 <VisibilityIcon />\n//               </Button>\n//               <Button\n//                 edge=\"end\"\n//                 aria-label=\"comments\"\n//                 onClick={handleRemoveAllPlane}\n//               >\n//                 <DeleteIcon />\n//               </Button>\n//             </ButtonGroup>\n//           </Grid> */}\n//       <Grid item xs={12}>\n//         {loading ? (\n//           <CircularProgress color=\"inherit\" />\n//         ) : (\n//           <List className={classes.list} disablePadding>\n//             <ListItem\n//               disablePadding\n//               secondaryAction={\n//                 <>\n//                   <IconButton edge=\"end\" aria-label=\"comments\">\n//                     <LayersClearIcon />\n//                   </IconButton>\n//                 </>\n//               }\n//               onClick={() => handleDeletePlane()}\n//             >\n//               <ListItemButton role={undefined} dense>\n//                 <ListItemText primary=\"Vue globale\" />\n//               </ListItemButton>\n//             </ListItem>\n\n//             {drawings.length > 0 &&\n//               drawings.map((drawing, index) => (\n//                 <ListItem\n//                   key={index}\n//                   disablePadding\n//                   className={\n//                     index === activeViewIndex ? classes.activePlan : \"\"\n//                   }\n//                   secondaryAction={\n//                     <>\n//                       {/* <IconButton\n//                       edge=\"end\"\n//                       aria-label=\"comments\"\n//                       onClick={() => handleDxfPlane(drawing, index)}\n//                     >\n//                       <DownloadIcon />\n//                     </IconButton> */}\n//                       <IconButton\n//                         // className={\n//                         //   index === activeViewIndex ? classes.activePlan : \"\"\n//                         // }\n//                         style={{\n//                           color: index === activeViewIndex ? \"#E6464D\" : \"\",\n//                         }}\n//                         edge=\"end\"\n//                         aria-label=\"comments\"\n//                       >\n//                         <VisibilityIcon />\n//                       </IconButton>\n//                       {/* <IconButton\n//                       edge=\"end\"\n//                       aria-label=\"comments\"\n//                       onClick={() => handleDeletePlane(drawing, index)}\n//                     >\n//                       <CloseIcon />\n//                     </IconButton> */}\n//                     </>\n//                   }\n//                   onClick={() => handleShowPlane(index)}\n//                 >\n//                   <ListItemButton\n//                     role={undefined}\n//                     dense\n//                     //  onClick={() => handleShowElement(ifcClass.eids)}\n//                   >\n//                     {/* <ListItemIcon>\n//                     </ListItemIcon> */}\n//                     <ListItemText\n//                       id={`checkbox-list-label-${index}`}\n//                       primary={`${drawing}`}\n//                       // onClick={() => handleShowPlane(index)}\n//                     />\n//                   </ListItemButton>\n//                 </ListItem>\n//               ))}\n//           </List>\n//         )}\n//       </Grid>\n//     </Grid>\n//   );\n// };\n\n// export default DrawingList;","import React, { useCallback, useEffect, useState } from 'react';\nimport {\n  makeStyles,\n  Fab\n} from \"@material-ui/core\";\nimport {\n  Grid,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemText,\n  CircularProgress,\n  TextField\n} from '@mui/material';\nimport CloseIcon from '@mui/icons-material/Close';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport Drawing from 'dxf-writer';\nimport { DxfParser } from 'dxf-parser';\nimport { Viewer } from 'three-dxf';\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardInfo: {\n    zIndex: 100,\n    width: \"100%\",\n    height: \"100%\",\n  },\n  cardContent: {\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: 'transparent',\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: '0px'\n  },\n  fab: {\n    backgroundColor: 'white'\n  }\n}));\n\n\nconst DxfViewer = ({\n  viewer\n}) => {\n  const classes = useStyles();\n\n  useEffect(() => {\n  }, []);\n\n  const handleUploadDxf = async (e) => {\n    const file = e.target.files[0];\n    let reader = new FileReader();\n    reader.readAsText(file);\n    console.log('dxf', e.target.files[0])\n    reader.onload = function () {\n      try {\n        const parser = new DxfParser();\n        const dxf = parser.parseSync(reader.result);\n        console.log('dxf', dxf)\n        let cadCanvas = new Viewer(dxf, document.getElementById('cad-view'), 500, 500);\n      } catch (err) {\n        return console.error(err.stack);\n      }\n    }\n    reader.onerror = function () {\n      console.log(reader.error);\n    };\n  }\n\n  return (\n    <Grid container>\n      <Grid item xs={12}>\n        <TextField\n          type=\"file\"\n          id=\"input\"\n          accept=\"dxf\"\n          onChange={handleUploadDxf}>Import DXF</TextField>\n      </Grid>\n      <Grid item xs={12}>\n        <div id=\"cad-view\">\n\n        </div>\n      </Grid>\n    </Grid>\n  )\n};\n\nexport default DxfViewer;","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab } from \"@material-ui/core\";\nimport {\n  Grid,\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  CircularProgress,\n  Tabs,\n  Tab,\n  Box,\n  Typography,\n} from \"@mui/material\";\nimport CropIcon from \"@mui/icons-material/Crop\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport MapIcon from \"@mui/icons-material/Map\";\nimport DownloadIcon from \"@mui/icons-material/Download\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport ControlCameraIcon from \"@mui/icons-material/ControlCamera\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport Drawing from \"dxf-writer\";\n\nimport DrawingList from \"./Scenes/DrawingList\";\nimport DxfViewer from \"./Scenes/DxfViewer\";\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"85%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n}));\n\nconst a11yProps = (index) => {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n};\n\nconst Drawings = ({ viewer, showDrawings, setShowDrawings }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [value, setValue] = useState(0);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n  const [plans, setPlans] = useState([]);\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    window.addEventListener(\"resize\", resizeListener);\n\n    return async () => {\n      handleDeletePlane();\n      window.removeEventListener(\"resize\", resizeListener);\n\n      for (let ifcPlan of plans) {\n        await viewer.plans.clipper.deletePlane(ifcPlan.plane);\n      }\n    };\n  }, [plans]);\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const handleDeletePlane = async () => {\n    await viewer.plans.exitPlanView();\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <MapIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Plans`}\n        subheader={`Liste des plans`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                viewer.clipper.active = false;\n                setShowDrawings(false);\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem\n                button\n                onClick={() => {\n                  viewer.clipper.active = false;\n                  setShowDrawings(false);\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent className={classes.cardContent}>\n        <Box sx={{ borderBottom: 1, borderColor: \"divider\" }}>\n          <Tabs\n            value={value}\n            onChange={handleChange}\n            aria-label=\"basic tabs example\"\n          >\n            <Tab label=\"Plans\" {...a11yProps(0)} />\n            {/* <Tab label=\"Visualiseur de DXF\" {...a11yProps(1)} /> */}\n          </Tabs>\n        </Box>\n        <TabPanel value={value} index={0}>\n          <DrawingList\n            viewer={viewer}\n            setPlans={setPlans}\n          />\n        </TabPanel>\n        {/* <TabPanel value={value} index={1}>\n          <DxfViewer viewer={viewer} />\n        </TabPanel> */}\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Drawings;\n\nconst TabPanel = (props) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ p: 3 }}>\n          <Typography>{children}</Typography>\n        </Box>\n      )}\n    </div>\n  );\n};\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { makeStyles, Fab } from \"@material-ui/core\";\nimport {\n  Grid,\n  Button,\n  ButtonGroup,\n  Card,\n  CardHeader,\n  CardContent,\n  Avatar,\n  IconButton,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  Badge,\n  ListItemText,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Popover,\n  CircularProgress,\n  Typography\n} from \"@mui/material\";\nimport CropIcon from \"@mui/icons-material/Crop\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport AddIcon from \"@mui/icons-material/Add\";\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\nimport ClearIcon from \"@mui/icons-material/Clear\";\nimport VisibilityIcon from \"@mui/icons-material/Visibility\";\nimport StraightenIcon from \"@mui/icons-material/Straighten\";\nimport VisibilityOffIcon from \"@mui/icons-material/VisibilityOff\";\nimport ControlCameraIcon from \"@mui/icons-material/ControlCamera\";\nimport FullscreenIcon from \"@mui/icons-material/Fullscreen\";\nimport FullscreenExitIcon from \"@mui/icons-material/FullscreenExit\";\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial';\nimport { ConeGeometry, LineBasicMaterial, LineDashedMaterial, MeshBasicMaterial, Vector3 } from 'three';\n\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  table: {\n    width: \"100%\",\n  },\n  cardExpanded: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 1000,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  card: {\n    position: \"absolute\",\n    top: \"0px\",\n    zIndex: 100,\n    left: \"0px\",\n    right: \"0px\",\n    opacity: \"0.95\",\n    width: ({ width }) => width,\n    height: ({ height }) => height,\n    maxWidth: window.innerWidth - 175,\n    maxHeight: window.innerHeight - 175,\n  },\n  cardContent: {\n    opacity: \"0.95\",\n    height: \"90%\",\n    overflowY: \"auto\",\n    overflowX: \"hidden\",\n    \"&::-webkit-scrollbar\": {\n      width: \"0.4em\",\n    },\n    \"&::-webkit-scrollbar-track\": {\n      \"-webkit-box-shadow\": \"inset 0 0 6px rgba(0,0,0,0.00)\",\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      backgroundColor: \"rgba(0,0,0,.1)\",\n      outline: \"0px solid slategrey\",\n    },\n  },\n  avatar: {\n    backgroundColor: \"transparent\",\n    width: theme.spacing(7),\n    height: theme.spacing(7),\n    // padding: '5px',\n    borderRadius: \"0px\",\n  },\n  fab: {\n    backgroundColor: \"white\",\n  },\n}));\n\nconst Measures = ({ viewer, showMeasures, setShowMeasures }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [measures, setMeasures] = useState([]);\n  const [allowMeasure, setAllowMeasure] = useState(false);\n  const [visibleMeasures, setVisibleMeasures] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [expandedView, setExpandedView] = useState(false);\n  const [viewWidth, setViewWidth] = useState(\"100%\");\n  const [viewHeight, setViewHeight] = useState(\"100%\");\n\n  const props = {\n    width: viewWidth,\n    height: viewHeight,\n  };\n\n  const classes = useStyles(props);\n\n  useEffect(() => {\n    const getWidth = () => window.innerWidth - 175;\n    const getHeight = () => window.innerHeight - 175;\n    const resizeListener = () => {\n      if (!expandedView) {\n        setViewWidth(getWidth());\n        setViewHeight(getHeight());\n      }\n    };\n    console.log('dimensions', viewer.dimensions.dimensions);\n    setMeasures(viewer.dimensions.dimensions);\n\n    let dimensionsActive = true;\n    viewer.dimensions.active = dimensionsActive;\n    viewer.dimensions.previewActive = dimensionsActive;\n    // viewer.dimensions.setArrow(0.1, 0.03);\n    // const coneGeometry = new ConeGeometry(radius, height);\n    // coneGeometry.translate(0, -height / 2, 0);\n    // coneGeometry.rotateX(-Math.PI / 2);\n    // viewer.dimensions.endpoint = coneGeometry;\n\n    viewer.dimensions.lineMaterial = new LineDashedMaterial({\n      color: 0x000000,\n      linewidth: 2,\n      depthTest: false,\n      dashSize: 0.1,\n      gapSize: 0.1\n    });\n\n    window.addEventListener(\"resize\", resizeListener);\n    window.addEventListener(\"mousemove\", handlePrePickIfcItem, false);\n    window.addEventListener(\"dblclick\", addMeasure, false);\n    // window.addEventListener(\"mouseup\", viewer.dimensions.cancelDrawing, false);\n    window.addEventListener(\"keydown\", handleControlMeasures, false);\n\n\n    return () => {\n      let dimensionsActive = false;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n\n      window.removeEventListener(\"resize\", resizeListener);\n      window.removeEventListener(\"mousemove\", handlePrePickIfcItem, false);\n      window.removeEventListener(\"dblclick\", addMeasure, false);\n      // window.removeEventListener(\"mouseup\", viewer.dimensions.cancelDrawing, false);\n      window.removeEventListener(\"keydown\", handleControlMeasures, false);\n    };\n  }, []);\n\n  const handlePrePickIfcItem = async () => {\n    await viewer.IFC.selector.prePickIfcItem();\n  }\n\n  const handleControlMeasures = (e) => {\n    if (e.code === \"Escape\") {\n      viewer.dimensions.cancelDrawing();\n    }\n    if (\n      e.code === \"Delete\" ||\n      e.code === \"Backspace\" ||\n      e.code === \"keyD\"\n    ) {\n      setShowMeasures(false);\n      viewer.dimensions.deleteAll();\n    }\n  }\n\n\n\n\n  const handleExpandView = (e) => {\n    const width = window.innerWidth - 175;\n    const height = window.innerHeight - 175;\n\n    if (!expandedView) {\n      setExpandedView(true);\n      setViewWidth(width);\n      setViewHeight(height);\n      setAnchorEl(null);\n    } else if (expandedView) {\n      setExpandedView(false);\n      setViewWidth(\"100%\");\n      setViewHeight(\"100%\");\n      setAnchorEl(null);\n    }\n  };\n\n  // useEffect(() => {\n  //   const getMeasures = async () => {\n  //     let dimensionsActive = true;\n  //     viewer.dimensions.active = dimensionsActive;\n  //     viewer.dimensions.previewActive = !dimensionsActive;\n  //     setVisibleMeasures(true);\n  //     setMeasures(viewer.dimensions.dimensions);\n  //   };\n  //   getMeasures();\n  // }, [measures]);\n\n  const addMeasure = async () => {\n    setLoading(true);\n    console.log('HELLoo')\n    let takeMeasure = !allowMeasure;\n    setAllowMeasure(takeMeasure);\n    if (takeMeasure) {\n      await viewer.dimensions.create();\n      setMeasures(viewer.dimensions.dimensions);\n    }\n    setLoading(false);\n  };\n\n  const customizePrePickItem = async () => {\n    const found = await viewer.IFC.selector.context.castRayIfc();\n    // This is more efficient than destroying and recreating the subset when the user hovers away\n    if (!found) {\n      viewer.IFC.selector.preselection.toggleVisibility(false);\n      return;\n    }\n    console.log('found', found)\n    await viewer.IFC.selector.preselection.pick(found);\n  }\n\n  const handleAddMeasure = async () => {\n    let dimensionsActive = false;\n    let takeMeasure = !allowMeasure;\n    setAllowMeasure(takeMeasure);\n    if (takeMeasure) {\n      dimensionsActive = true;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.dimensions.setArrow(0.1, 0.03);\n\n      viewer.dimensions.lineMaterial = new LineDashedMaterial({\n        color: 0x000000,\n        linewidth: 2,\n        depthTest: false,\n        dashSize: 0.1,\n        gapSize: 0.1\n      });\n      // viewer.dimensions.lineMaterial = new LineBasicMaterial({\n      //   color: 0x0000FF,\n      //   linewidth: 30,\n      //   linecap: 'round', //ignored by WebGLRenderer\n      //   linejoin: 'round' //ignored by WebGLRenderer\n      // });\n\n      // await viewer.IFC.unPrepickIfcItems();\n\n\n\n\n      // window.onmousemove = async () => dimensionsActive ? null : await viewer.IFC.prePickIfcItem();\n\n      window.onmousemove = async () => dimensionsActive ? null : await viewer.IFC.selector.prePickIfcItem();\n\n      window.onmousedown = addMeasure;\n      window.onmouseup = async () => dimensionsActive ? null : await viewer.dimensions.cancelDrawing();\n    } else {\n      dimensionsActive = false;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.IFC.unpickIfcItems();\n      window.removeEventListener(\"mousedown\", addMeasure, false);\n    }\n\n    window.onkeydown = (event) => {\n      if (event.code === \"Escape\") {\n        viewer.dimensions.cancelDrawing();\n        window.removeEventListener(\"mousedown\", addMeasure, false);\n      }\n      if (\n        event.code === \"Delete\" ||\n        event.code === \"Backspace\" ||\n        event.code === \"keyD\"\n      ) {\n        setShowMeasures(false);\n        viewer.dimensions.deleteAll();\n      }\n    };\n  };\n\n\n  const handleDeleteMeasure = async (measure, index) => {\n    setLoading(true);\n    // if (showMeasures) {\n    console.log('measure', measure);\n    console.log('dimensions', dimensions);\n    let dimensions = await viewer.dimensions.dimensions;\n    console.log('measure', measure);\n    console.log('dimensions', dimensions);\n    const selected = await dimensions.find(\n      (dimension) => dimension.textLabel.uuid === measure.textLabel.uuid\n    );\n    const measureIndex = await dimensions.findIndex(\n      (dimension) => dimension.textLabel.uuid === measure.textLabel.uuid\n    );\n    if (measureIndex > -1) {\n      const newMeasures = await dimensions.splice(measureIndex, 1);\n      await selected.removeFromScene();\n\n      // console.log('newMeasures', newMeasures);\n      setMeasures([...dimensions]);\n    }\n    // }\n    setLoading(false);\n  };\n\n  const handleMeasuresVisibility = () => {\n    let visilibity = !visibleMeasures;\n    setVisibleMeasures(visilibity);\n    viewer.dimensions.active = visilibity;\n  };\n\n  const handleRemoveAllMeasures = () => {\n    // viewer.clipper.deleteAllPlanes();\n    if (viewer.dimensions.dimensions.length > 0) {\n      viewer.dimensions.dimensions.forEach((dimension) =>\n        dimension.removeFromScene()\n      );\n    }\n    viewer.dimensions.dimensions = [];\n    setMeasures([]);\n  };\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  const id = open ? \"simple-popover\" : undefined;\n\n  return (\n    <Card className={expandedView ? classes.cardExpanded : classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar aria-label=\"recipe\" className={classes.avatar}>\n            <Fab size=\"small\" className={classes.fab}>\n              <StraightenIcon />\n            </Fab>\n          </Avatar>\n        }\n        title={`Outils de mesures`}\n        subheader={`Liste des mesures`}\n        action={\n          <div>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleExpandView}\n              size=\"small\"\n            >\n              {expandedView ? <FullscreenExitIcon /> : <FullscreenIcon />}\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={() => {\n                let dimensionsActive = false;\n                viewer.dimensions.active = dimensionsActive;\n                viewer.dimensions.previewActive = dimensionsActive;\n                // window.removeEventListener('dblclick', addClippingPlane, false);\n                setShowMeasures(false);\n              }}\n              size=\"small\"\n            >\n              <ClearIcon />\n            </IconButton>\n            <IconButton\n              aria-label=\"settings\"\n              aria-describedby={id}\n              onClick={handleClick}\n              size=\"small\"\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              id={id}\n              open={open}\n              anchorEl={anchorEl}\n              onClose={handleClose}\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"center\",\n              }}\n            >\n              <ListItem\n                button\n                onClick={() => {\n                  let dimensionsActive = false;\n                  viewer.dimensions.active = dimensionsActive;\n                  viewer.dimensions.previewActive = dimensionsActive;\n                  // window.removeEventListener('dblclick', addClippingPlane, false);\n                  setShowMeasures(false);\n                }}\n              >\n                <ListItemIcon>\n                  <ClearIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Fermer\" />\n              </ListItem>\n            </Popover>\n          </div>\n        }\n      />\n      <CardContent>\n        <Grid container spacing={2}>\n          {/* <Grid item xs={6} style={{ textAlign: \"left\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                style={{\n                  backgroundColor: `${allowMeasure ? \"lightGray\" : \"transparent\"\n                    }`,\n                }}\n                onClick={handleAddMeasure}\n              >\n                <AddIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid>\n          <Grid item xs={6} style={{ textAlign: \"right\" }}>\n            <ButtonGroup className={classes.buttonGroup}>\n              <Button\n                edge=\"end\"\n                aria-label=\"comments\"\n                onClick={handleRemoveAllMeasures}\n              >\n                <DeleteIcon />\n              </Button>\n            </ButtonGroup>\n          </Grid> */}\n          <Grid item xs={12}>\n            <Typography gutterBottom variant=\"title2\" component=\"div\">\n              Double-cliquer pour crer une mesure\n                  </Typography>\n          </Grid>\n          <Grid item xs={12}>\n            {loading ? (\n              <CircularProgress color=\"inherit\" />\n            ) : (\n              <List sx={{ width: \"100%\" }}>\n                {viewer.dimensions.dimensions.length > 0 &&\n                  viewer.dimensions.dimensions.map((measure, index) => (\n                    <ListItem\n                      key={index}\n                      secondaryAction={\n                        <>\n                          <IconButton\n                            edge=\"end\"\n                            aria-label=\"comments\"\n                            onClick={() => handleDeleteMeasure(measure, index)}\n                          >\n                            <CloseIcon />\n                          </IconButton>\n                        </>\n                      }\n                      disablePadding\n                    >\n                      <ListItemButton\n                        role={undefined}\n                        dense\n                      //  onClick={() => handleShowElement(ifcClass.eids)}\n                      >\n                        {/* <ListItemIcon>\n                    </ListItemIcon> */}\n                        <ListItemText\n                          id={`checkbox-list-label-${index}`}\n                          primary={`Mesure-${measure.textLabel.uuid}`}\n                        />\n                      </ListItemButton>\n                    </ListItem>\n                  ))}\n              </List>\n            )}\n          </Grid>\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Measures;\n","import { useEffect, useCallback, useState } from \"react\";\nimport Avatar from '@mui/material/Avatar';\nimport Divider from '@mui/material/Divider';\nimport Paper from '@mui/material/Paper';\nimport MenuList from '@mui/material/MenuList';\nimport MenuItem from '@mui/material/MenuItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport Typography from '@mui/material/Typography';\nimport ContentCut from '@mui/icons-material/ContentCut';\nimport ContentCopy from '@mui/icons-material/ContentCopy';\nimport ContentPaste from '@mui/icons-material/ContentPaste';\nimport LibraryAddIcon from '@mui/icons-material/LibraryAdd';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport ViewInArIcon from '@mui/icons-material/ViewInAr';\nimport Cloud from '@mui/icons-material/Cloud';\nimport useContextMenu from \"./ContextMenu.hooks\";\nimport OpenDthxLogo from './img/OpenDthxLogo.png';\nimport {\n  MeshLambertMaterial,\n  MeshBasicMaterial,\n  DoubleSide,\n  MeshPhysicalMaterial,\n  Mesh\n} from 'three';\n\nconst ContextMenu = ({\n  viewer,\n  showContextMenu,\n  meshMaterials,\n  setShowContextMenu,\n  setShowProperties,\n  setShowSpatialStructure,\n  handleShowMarketplace,\n  eids,\n  setEids,\n  subsets,\n  setSubsets\n}) => {\n  const [anchorPoint, setAnchorPoint] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    document.addEventListener(\"contextmenu\", handleContextMenu);\n    return () => {\n      document.removeEventListener(\"contextmenu\", handleContextMenu);\n    };\n  });\n\n  const handleContextMenu = (event) => {\n    console.log('eids', eids);\n    if (eids.length > 0) {\n      event.preventDefault();\n      setAnchorPoint({ x: event.pageX, y: event.pageY });\n      setShowContextMenu(true);\n    }\n  };\n\n  const handleShowProperties = async () => {\n    if (eids.length > 0) {\n      setShowProperties(true);\n      setShowContextMenu(false);\n    }\n  }\n\n  const handleGetAllItemsOfType = async () => {\n    if (eids.length > 0) {\n      const element = await viewer.IFC.getProperties(0, eids[0], false, false);\n      const elementsByType = await viewer.getAllItemsOfType(0, element.type, false, false);\n      const newEids = [...eids, ...elementsByType];\n      setEids(newEids);\n      await viewer.IFC.pickIfcItemsByID(0, newEids);\n      setShowContextMenu(false);\n    }\n  }\n\n  const handleAddProperties = async () => {\n    handleShowMarketplace('Open dthX');\n    setShowContextMenu(false);\n  }\n\n  const handleHideElement = async () => {\n    viewer.IFC.loader.ifcManager.removeFromSubset(\n      0,\n      eids,\n      'full-model-subset',\n    );\n  }\n\n\n  const handleIsolateElement = async () => {\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[0];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    )\n\n    const idsHidden = allIDs.reduce(function (acc, id) {\n      if (eids.indexOf(id) === -1) {\n        acc.push(id);\n      }\n      return acc;\n    }, []);\n\n    viewer.IFC.loader.ifcManager.removeFromSubset(\n      0,\n      idsHidden,\n      'full-model-subset',\n    );\n\n  }\n\n  const handleShowModel = async () => {\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[0];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    )\n\n    viewer.IFC.loader.ifcManager.createSubset({\n      modelID: ifcModel.modelID,\n      ids: allIDs,\n      applyBVH: true,\n      scene: ifcModel.parent,\n      removePrevious: true,\n      customID: 'full-model-subset',\n    });\n  }\n\n  return (\n    showContextMenu &&\n    <Paper sx={{ width: 250, maxWidth: '100%', top: anchorPoint.y, left: anchorPoint.x, position: 'absolute', opacity: '0.95' }}>\n      <MenuList>\n        <MenuItem\n          onClick={handleGetAllItemsOfType}\n        >\n          <ListItemIcon>\n            <LibraryAddIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Slection par Classe</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleIsolateElement}\n        >\n          <ListItemIcon>\n            <VisibilityIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Isoler</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleHideElement}\n        >\n          <ListItemIcon>\n            <VisibilityOffIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Cacher</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleShowModel}\n        >\n          <ListItemIcon>\n            <ViewInArIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Rtablir Modle</ListItemText>\n        </MenuItem>\n        {/* <MenuItem>\n          <ListItemIcon>\n            <ContentPaste fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Crer une tche</ListItemText>\n        </MenuItem> */}\n        <Divider />\n        <MenuItem\n          onClick={handleShowProperties}\n        >\n          <ListItemIcon>\n            <DescriptionIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText>Proprits</ListItemText>\n        </MenuItem>\n        <MenuItem\n          onClick={handleAddProperties}\n        >\n          <ListItemIcon>\n            <Avatar\n              aria-label=\"recipe\"\n              src={OpenDthxLogo}\n              style={{ width: '1em', height: 'auto' }}\n            // alt={application.name}\n            // title={application.name}\n            />\n          </ListItemIcon>\n          <ListItemText>Ajout Proprits</ListItemText>\n        </MenuItem>\n      </MenuList>\n    </Paper>\n  );\n\n};\n\nexport default ContextMenu;","import React, { useState } from 'react';\nimport { Rnd } from 'react-rnd';\nimport {\n  makeStyles\n} from \"@material-ui/core\";\n\n\nconst useStyles = makeStyles((theme) => ({\n  draggableCard: {\n    position: 'absolute',\n    marginTop: '1em',\n    display: \"flex\",\n    left: '5em',\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    // border: \"solid 1px #ddd\",\n    backgroundColor: \"red\",\n    zIndex: 100\n  }\n}));\n\n\nconst style = {\n  // position: 'fixed',\n  // marginTop: '1em',\n  // display: \"flex\",\n  // left: '-5em',\n  // alignItems: \"center\",\n  // justifyContent: \"center\",\n  // border: \"solid 1px #ddd\",\n  // background: \"#f0f0f0\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  zIndex: 100\n};\n\nconst DraggableCard = ({\n  children,\n  disableDragging,\n  width,\n  height\n}) => {\n  const classes = useStyles();\n\n  const [state, setState] = useState({\n    width: width ? width : 400,\n    height: height ? height : 400,\n    x: 80,\n    y: 20\n  });\n\n  return (\n    <Rnd\n      style={style}\n      // className={classes.draggableCard}\n      size={{ width: state.width, height: state.height }}\n      position={{ x: state.x, y: state.y }}\n      onDragStop={(e, d) => {\n        setState({ x: d.x, y: d.y });\n      }}\n      onResizeStop={(e, direction, ref, delta, position) => {\n        setState({\n          width: ref.style.width,\n          height: ref.style.height,\n          ...position\n        });\n      }}\n      disableDragging={disableDragging}\n    >\n      {children}\n    </Rnd>\n  );\n};\n\nexport default DraggableCard;\n","export const geometryTypes = new Set([\n  \"IfcCartesianPoint\",\n  \"IfcArbitraryClosedProfileDef\",\n  \"IfcDirection\",\n  \"IfcAxis2Placement3D\",\n  \"IfcAxis2Placement2D\",\n  \"IfcLocalPlacement\",\n  \"IfcShapeRepresentation\",\n  \"IfcRectangleProfileDef\",\n  \"IfcPolyline\",\n  \"IfcPlane\",\n  \"IfcExtrudedAreaSolid\",\n  \"IfcSurfaceStyleRendering\",\n  \"IfcSurfaceStyle\",\n  \"IfcPresentationStyleAssignment\",\n  \"IfcStyledRepresentation\",\n  \"IfcCartesianTransformationOperator3D\",\n  \"IfcColourRgb\",\n  \"IfcCartesianTransformationOperator3DNonUniform\",\n  \"IfcStyledItem\",\n  \"IfcCurveBoundedPlane\",\n  \"IfcConnectionSurfaceGeometry\",\n  \"IfcProductDefinitionShape\",\n  \"IfcGeometricRepresentationContext\",\n  \"IfcGeometricRepresentationSubcontext\",\n  \"IfcPolyLoop\",\n  \"IfcFaceOuterBound\",\n  \"IfcFace\",\n  \"IfcCartesianTransformationOperator3DnonUniform\",\n  \"IfcFaceBound\",\n  \"IfcClosedShell\",\n  \"IfcFacetedBrep\",\n  \"IfcRepresentationMap\",\n  \"IfcMappedItem\",\n  \"IfcRelFillsElement\",\n  \"IfcArbitraryProfileDefWithVoids\",\n  \"IfcCompositeCurve\",\n  \"IfcCompositeCurveSegment\",\n  \"IfcCircle\",\n  \"IfcEllipse\",\n  \"IfcCircleHollowProfileDef\",\n  \"IfcRectangleHollowProfileDef\",\n  \"IfcLine\",\n  \"IfcIShapeProfileDef\",\n  \"IfcGeometricRepresentationContext\",\n  \"IfcGeometricRepresentationSubContext\",\n  \"IfcCurveStyle\",\n  \"IfcDraughtingPreDefinedCurveFont\",\n  \"IfcGeometricSet\",\n  \"IfcCircleProfileDef\",\n  \"IfcPolygonalBoundedHalfSpace\",\n  \"IfcFaceBasedSurfaceModel\",\n  \"IfcConnectedFaceSet\",\n  \"IfcTrimmedCurve\",\n  \"IfcOpenShell\",\n  \"IfcShellBasedSurfaceModel\",\n  \"IfcHalfSpaceSolid\",\n  \"IfcBooleanClippingResult\",\n  \"IfcGeometricCurveSet\",\n  \"IfcCurveStyleFont\",\n  \"IfcCurveStyleFontPattern\"\n]);","class TriBim {\n  constructor() {\n    // super(data);\n    // this.data = data;\n    this.hello = \"Hello TriBim\";\n  }\n\n  sayHello() {\n    console.log('Hello toi');\n  }\n}\n\nexport default TriBim;","import React, { useEffect, useState, useRef, useCallback } from \"react\";\nimport * as WebIFC from \"web-ifc\";\n// import * as WebIFCThree from 'web-ifc-three';\nimport { IfcViewerAPI } from \"web-ifc-viewer\";\nimport Dropzone from \"react-dropzone\";\nimport {\n  Router,\n  Switch,\n  Route,\n  useLocation\n} from 'react-router-dom';\nimport {\n  Backdrop,\n  makeStyles,\n  CircularProgress,\n  Fab,\n  Grid,\n  Paper,\n  LinearProgress,\n  Box,\n  Typography\n} from '@material-ui/core';\nimport Alert from '@mui/material/Alert';\nimport FolderOpenOutlinedIcon from '@material-ui/icons/FolderOpenOutlined';\nimport CropIcon from '@material-ui/icons/Crop';\nimport PhotoCameraIcon from '@material-ui/icons/PhotoCamera';\nimport AccountTreeIcon from '@material-ui/icons/AccountTree';\nimport DescriptionIcon from '@material-ui/icons/Description';\nimport StraightenIcon from '@material-ui/icons/Straighten';\nimport AppsIcon from '@material-ui/icons/Apps';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport MapIcon from '@mui/icons-material/Map';\nimport ControlCameraIcon from '@mui/icons-material/ControlCamera';\nimport ArrowCircleUpIcon from '@mui/icons-material/ArrowCircleUp';\nimport GrainIcon from '@material-ui/icons/Grain';\nimport StorageIcon from '@material-ui/icons/Storage';\nimport MutltiSelectionIcon from '@mui/icons-material/ControlPointDuplicate';\nimport FactCheckIcon from '@mui/icons-material/FactCheck';\nimport Models from './Components/Models/Models';\nimport BcfDialog from './Components/BcfDialog/BcfDialog';\nimport Marketplace from './Components/Marketplace/Marketplace';\nimport SpatialStructure from './Components/SpatialStructure/SpatialStructure';\nimport Properties from './Components/Properties/Properties';\nimport Camera from './Components/Camera/Camera';\nimport Validation from './Components/Validation';\nimport Cuts from './Components/Cuts';\nimport Drawings from './Components/Drawings/Drawings';\nimport Measures from './Components/Measures/Measures';\nimport ContextMenu from './Components/ContextMenu';\nimport DraggableCard from './Components/DraggableCard/DraggableCard';\nimport { OrbitControlsGizmo } from \"./Utils/OrbitControlsGizmo\";\nimport {\n  IFCPROJECT,\n  IFCSPACE,\n  IFCOPENINGELEMENT,\n  IFCWALLSTANDARDCASE,\n  IFCWALL,\n  IFCSTAIR,\n  IFCCOLUMN,\n  IFCSLAB,\n  IFCROOF,\n  IFCSTRUCTURALCURVEMEMBER,\n  IFCSTRUCTURALANALYSISMODEL,\n  IFCSTRUCTURALSURFACEMEMBER,\n  IFCFOOTING,\n  IFCFURNISHINGELEMENT,\n  IFCRELDEFINESBYPROPERTIES,\n  IFCPROPERTYSET,\n  IFCPROPERTYSINGLEVALUE,\n} from \"web-ifc\";\n// import { exportDXF, exportPDF } from './Utils/dxf';\nimport Drawing from \"dxf-writer\";\nimport { jsPDF } from \"jspdf\";\nimport {\n  BoxGeometry,\n  MeshLambertMaterial,\n  Mesh,\n  Color,\n  DoubleSide,\n  MathUtils,\n  EdgesGeometry,\n  LineBasicMaterial,\n  MeshBasicMaterial,\n  Vector2,\n} from \"three\";\nimport { TransformControls } from \"three/examples/jsm/controls/TransformControls\";\nimport { HorizontalBlurShader } from \"three/examples/jsm/shaders/HorizontalBlurShader.js\";\nimport { VerticalBlurShader } from \"three/examples/jsm/shaders/VerticalBlurShader.js\";\nimport BIMLibrePng from './Images/BIM_Libre_site_ADB_transparent.png'\nimport ANCTPng from './Images/ANCT_Logo-MC_transparent.png'\nimport AgriboisValeurPng from './Images/Logo_AgriboisValeur_transparent.png'\nimport { UseIfcRenderer } from \"./IfcRenderer.hooks\";\nimport ToolTipsElem from \"../../Components/ToolTipsElem/ToolTipsElem.js\";\nimport animationClippedVue from \"./Images/animation-vue-de-coupe.gif\";\nimport animationMeasureTool from \"./Images/animation-outil-de-mesure.gif\";\nimport { ClippingEdges } from 'web-ifc-viewer/dist/components/display/clipping-planes/clipping-edges';\nimport { geometryTypes } from \"./Utils/geometry-types\";\nimport flatten from 'tree-flatten';\nimport axios from \"axios\";\n\nimport TriBim from './Utils/TriBim';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100vw\",\n    height: \"100vh\",\n    spacing: 0,\n    justify: \"space-around\",\n    margin: 0,\n    padding: 0,\n    flexGrow: 1,\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      backgroundColor: \"white\",\n    },\n    \"& .MuiContainer-maxWidthLg\": {\n      maxWidth: \"100%\",\n    },\n  },\n  infoLeftPannel: {\n    // marginTop: '1em',\n    left: \"1em\",\n    position: \"absolute\",\n    zIndex: 100,\n  },\n  infoRightPannel: {\n    // marginTop: '1em',\n    right: \"1em\",\n    position: \"absolute\",\n    zIndex: 100,\n  },\n  fab: {\n    margin: \"0.5em\",\n    backgroundColor: \"white\",\n  },\n}));\n\nconst {\n  REACT_APP_COMPANY,\n  REACT_APP_THIRD_PARTY_API,\n  REACT_APP_IDS_API_URL\n} = process.env;\n\nconst IfcRenderer = () => {\n  const classes = useStyles();\n  const dropzoneRef = useRef(null);\n  const [viewer, setViewer] = useState(null);\n  const [ifcModels, setIfcModels] = useState([]);\n  const [modelID, setModelID] = useState(-1);\n  const [transformControls, setTransformControls] = useState(null);\n  const [spatialStructures, setSpatialStructures] = useState([]);\n  const [element, setElement] = useState(null);\n  const [showBcfDialog, setShowBcfDialog] = useState(false);\n  const [showModels, setShowModels] = useState(false);\n  const [showMeasure, setShowMeasure] = useState(true);\n  const [showMarketplace, setShowMarketplace] = useState(false);\n  const [showSpatialStructure, setShowSpatialStructure] = useState(false);\n  const [showProperties, setShowProperties] = useState(false);\n  const [showContextMenu, setShowContextMenu] = useState(false);\n  const [showCamera, setShowCamera] = useState(false);\n  const [showCuts, setShowCuts] = useState(false);\n  const [showDrawings, setShowDrawings] = useState(false);\n  const [showMeasures, setShowMeasures] = useState(false);\n  const [showValidation, setShowValidation] = useState(false);\n  const [selectedElementID, setSelectedElementID] = useState(null);\n  const [specificApplication, setSpecificApplication] = useState(false);\n  const [percentageLoading, setPercentageLoading] = useState(0);\n  const [apiWebIfc, setApiWebIfc] = useState();\n  const [selectedElementId, setSelectedElementId] = useState(null);\n  const [eids, setEids] = useState([]);\n  const [subsets, setSubsets] = useState([]);\n  const [apiConnectors, setApiConnectors] = useState({\n    AxeoBim: false\n  });\n\n  const [state, setState] = useState({\n    loading: false,\n    loadingMessage: 'Chargement...',\n    alertStatus: true,\n    alertMessage: 'Connect',\n    bcfDialogOpen: false,\n    loaded: false,\n    loadingIfc: false,\n    openLeftView: false,\n    leftView: \"spatialStructure\",\n    viewer: '',\n    api: {},\n    models: {\n      value: 0,\n      list: [],\n      data: []\n    },\n    spatialStructures: {\n      value: {},\n      list: []\n    },\n    subsets: {\n      value: {},\n      list: []\n    },\n    search: {\n      value: '',\n      list: [],\n      data: []\n    },\n    jsonData: {\n      value: {},\n      list: []\n    }\n  });\n\n  const {\n    initIndexDB,\n    meshMaterials,\n    getModels,\n    addTransformControls,\n    getElementProperties,\n    addElementsNewProperties,\n    addGeometryToIfc,\n    editIfcModel,\n    handleCheckNetworkStatus,\n    handleGetJsonData,\n    handleModelValidation,\n    handleInitSubset\n  } = UseIfcRenderer({\n    eids,\n    setEids,\n    state,\n    setState\n  });\n\n  useEffect(() => {\n    async function init() {\n      const container = document.getElementById(\"viewer-container\");\n\n      const newViewer = new IfcViewerAPI({\n        container,\n        backgroundColor: new Color(0xffffff),\n      });\n\n      setState({\n        ...state,\n        loading: true,\n        viewer: newViewer\n      })\n      // newViewer.addAxes();\n      // newViewer.addGrid();\n      const ifcApi = new WebIFC.IfcAPI();\n      setApiWebIfc(ifcApi);\n\n      newViewer.IFC.setWasmPath(\"../../files/\");\n      newViewer.IFC.applyWebIfcConfig({\n        COORDINATE_TO_ORIGIN: true,\n        USE_FAST_BOOLS: false\n      });\n      newViewer.IFC.loader.ifcManager.useWebWorkers(\n        true,\n        \"../../files/IFCWorker.js\"\n      );\n\n      const db = await initIndexDB();\n      const allModels = await getModels(db);\n      console.log('allModels', allModels)\n\n      // const model = await newViewer.IFC.loadIfcUrl(allModels[0].file, false);\n\n\n      // const model = await newViewer.IFC.loadIfcUrl('../../files/Duplex.ifc');\n      // const newIfcModels = [...ifcModels, model];\n      // setIfcModels(newIfcModels);\n\n      // const models = newViewer.context.items.ifcModels;\n      // const pickableModels = newViewer.context.items.pickableIfcModels;\n\n      // const ifcModel = models[0];\n      // const scene = ifcModel.parent;\n      // const ids = Array.from(\n      //   new Set(ifcModel.geometry.attributes.expressID.array)\n      // )\n\n      // let subset = newViewer.IFC.loader.ifcManager.createSubset({\n      //   modelID: ifcModel.modelID,\n      //   ids: ids,\n      //   scene,\n      //   applyBH: true,\n      //   removePrevious: true,\n      //   customID: 'ALL MODEL'\n      // });\n\n      // let index = pickableModels.indexOf(ifcModel);\n      // if (index >= 0) pickableModels.splice(index);\n      // index = models.indexOf(ifcModel);\n      // if (index >= 0) models.splice(index)\n\n      // scene.remove(model);\n      // models.push(subset);\n\n      // console.log('model', model);\n\n      // // pickableModels.push(subset);\n      // model.position.set(10, 10, 10)\n      // subset.position.set(10, 10, 10)\n\n      //const newJsonData = await handleGetJsonData(newViewer, false);\n      // const newSpatialStructure = await newViewer.IFC.getSpatialStructure(\n      //   0,\n      //   false\n      // );\n      // const updateSpatialStructures = [\n      //   ...spatialStructures,\n      //   newSpatialStructure,\n      // ];\n\n      // setSpatialStructures(updateSpatialStructures);\n\n      // const data = await handleGetJsonData(newViewer, flatten(updateSpatialStructures[0], 'children'));\n      // console.log('data', data)\n      setState({\n        ...state,\n        loading: false,\n        // models: {\n        //   ...state.models,\n        //   data: [...data]\n        // },\n        // spatialStructures: {\n        //   value: { ...newSpatialStructure },\n        //   list: [...updateSpatialStructures]\n        // },\n      });\n\n      // newViewer.shadowDropper.darkness = 1.5;\n      // newViewer.clipper.active = true;\n      setViewer(newViewer);\n\n      await handleInitAxeoBim({\n        viewer: newViewer\n      });\n\n      await handleInitTracim({ viewer: newViewer });\n\n      handleCheckNetworkStatus();\n    }\n    init();\n  }, []);\n\n  const onDrop = async ({ files, viewer }) => {\n    if (files && viewer) {\n      setState({\n        ...state,\n        loading: true\n      });\n      // setViewer(null);\n      console.log('MODEL', files[0]);\n\n      viewer.IFC.loader.ifcManager.setOnProgress((event) => {\n        const percentage = Math.floor((event.loaded * 100) / event.total);\n        console.log(\"percentage\", percentage);\n        setPercentageLoading(percentage);\n        setState({\n          ...state,\n          loading: true,\n          loadingMessage: `Chargement de la gomtrie: ${percentage} %`\n        });\n      });\n\n      viewer.IFC.loader.ifcManager.parser.setupOptionalCategories({\n        [IFCSPACE]: true,\n        [IFCOPENINGELEMENT]: false,\n        [IFCSTRUCTURALANALYSISMODEL]: true,\n        [IFCSTRUCTURALSURFACEMEMBER]: true,\n        [IFCSTRUCTURALCURVEMEMBER]: true,\n      });\n\n      let model;\n      try {\n        model = await viewer.IFC.loadIfc(files[0], true, ifcOnLoadError);\n        // console.log('data', properties)\n      } catch (error) {\n        console.log('error:', error)\n        return\n      }\n\n\n      // model.material.forEach((mat) => (mat.side = 2));\n      // console.log(\"modelID\", model.modelID);\n      setModelID(model.modelID);\n\n      // await createFill({ modelID: model.modelID, viewer });\n      // const lineMaterial = new LineBasicMaterial({ color: 0x555555 });\n      // const baseMaterial = new MeshBasicMaterial({ color: 0xffffff, side: 2 });\n      // viewer.edges.create(\n      //   `${model.modelID}`,\n      //   model.modelID,\n      //   lineMaterial,\n      //   baseMaterial\n      // );\n\n      const newIfcModels = [...ifcModels, model];\n      setIfcModels(newIfcModels);\n\n      await handleInitSubset(viewer, 0);\n      // const properties = await viewer.IFC.properties.serializeAllProperties(model);\n      // console.log('properties', properties)\n      const properties = await viewer.IFC.properties.serializeAllProperties(model, undefined, (current, total) => {\n        const progress = current / total;\n        const formatted = Math.trunc(progress * 100);\n        console.log(formatted + '%');\n        setPercentageLoading(formatted);\n        setState({\n          ...state,\n          loading: true,\n          loadingMessage: `Chargement des donnes: ${formatted} %`\n        });\n      });\n      const file = new File(properties, 'properties');\n      const data = JSON.parse(await file.text());\n      console.log('data', data);\n      // model.position.set(10, 10, 10)\n      // await viewer.shadowDropper.renderShadow(model.modelID);\n\n      setState({\n        ...state,\n        loading: true,\n        loadingMessage: `Chargement: gnration de l'arborescence du projet`\n      });\n      const newSpatialStructure = await viewer.IFC.getSpatialStructure(\n        model.modelID,\n        true\n      );\n\n      setState({\n        ...state,\n        loading: true,\n        loadingMessage: `Chargement: fin de la gnration de l'arborescence du projet`\n      });\n\n      console.log(\"newSpatialStructure\", newSpatialStructure);\n      const updateSpatialStructures = [\n        ...spatialStructures,\n        newSpatialStructure,\n      ];\n      setSpatialStructures(updateSpatialStructures);\n      console.log(\"updateSpatialStructure\", updateSpatialStructures);\n\n      // const data = await handleGetJsonData(viewer, flatten(updateSpatialStructures[0], 'children'));\n      const tribim = new TriBim();\n\n      setState({\n        ...state,\n        loading: false,\n        api: tribim,\n        viewer: viewer,\n        models: {\n          ...state.models,\n          list: [...state.models.list, model],\n          data: [...state.models.data, data]\n        },\n        spatialStructures: {\n          value: { ...newSpatialStructure },\n          list: [...updateSpatialStructures]\n        }\n      });\n    }\n  };\n\n  let fills = [];\n  async function createFill({ modelID, viewer }) {\n    const wallsStandard = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCWALLSTANDARDCASE,\n      false\n    );\n    const walls = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCWALL,\n      false\n    );\n    const stairs = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCSTAIR,\n      false\n    );\n    const columns = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCCOLUMN,\n      false\n    );\n    const roofs = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCROOF,\n      false\n    );\n    const slabs = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelID,\n      IFCSLAB,\n      false\n    );\n    const ids = [\n      ...walls,\n      ...wallsStandard,\n      ...columns,\n      ...stairs,\n      ...slabs,\n      ...roofs,\n    ];\n    const material = new MeshBasicMaterial({ color: 0x555555 });\n    material.polygonOffset = true;\n    material.polygonOffsetFactor = 10;\n    material.polygonOffsetUnits = 1;\n    fills.push(viewer.filler.create(`${modelID}`, modelID, ids, material));\n  }\n\n  const handleInitAxeoBim = async ({ viewer }) => {\n    // Accs  AxeoBIM\n    const query = new URLSearchParams(window.location.search);\n    // const decodeQuery = decodeURI(query);\n    const code = query.get('code');\n    const state = query.get('state');\n\n    if (code && state) {\n      setState({\n        state,\n        loading: true\n      });\n      const accessToken = sessionStorage.getItem(\"axeobim_access_token\");\n      const refreshToken = sessionStorage.getItem(\"axeobim_refresh_token\");\n      const {\n        idDocument,\n        idEnvironnement,\n        access_token,\n        refresh_token,\n        // lock_token,\n        file\n      } = await handleGetAxeoBimModel({ code, state, accessToken, refreshToken });\n      sessionStorage.setItem(\"axeobim_access_token\", access_token);\n      sessionStorage.setItem(\"axeobim_refresh_token\", refresh_token);\n      // sessionStorage.setItem(\"axeobim_lock_token\", lock_token);\n      sessionStorage.setItem(\"axeobim_id_document\", idDocument);\n      sessionStorage.setItem(\"axeobim_id_environnement\", idEnvironnement);\n      const ifcBlob = new Blob([file], { type: 'text/plain' });\n      console.log('ifcBlob', ifcBlob)\n      const model = new File([ifcBlob], 'ifcFile');\n      console.log('model', model)\n      onDrop({ files: [model], viewer });\n      setState({\n        ...state,\n        loading: false\n      });\n      setApiConnectors({\n        ...apiConnectors,\n        AxeoBim: true\n      });\n    }\n  }\n\n  const handleInitTracim = async ({ viewer }) => {\n    // Accs  Tracim\n    const query = new URLSearchParams(window.location.search);\n\n    const content_id = query.get('content_id');\n    const space_id = query.get('space_id');\n    const user_id = query.get('user_id');\n\n    console.log('handleInitTracim Content ID:', content_id);\n    console.log('handleInitTracim Space ID:', space_id);\n    console.log('handleInitTracim User ID:', user_id);\n\n    if (content_id && space_id && user_id) {\n      setState({\n        state,\n        loading: true\n      });\n\n      try {\n        const resGetModel = await axios({\n          method: \"post\",\n          url: `${REACT_APP_THIRD_PARTY_API}/tracim/getModel`,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          data: {\n            space_id,\n            content_id,\n            user_id\n          }\n        })\n\n        console.log('Response :', resGetModel.data);\n        const file = resGetModel.data;\n        const ifcBlob = new Blob([file], { type: 'text/plain' });\n        console.log('ifcBlob', ifcBlob)\n        const model = new File([ifcBlob], 'ifcFile');\n        console.log('model', model)\n        onDrop({ files: [model], viewer });\n        setState({\n          ...state,\n          loading: false\n        });\n\n      } catch (error) {\n        console.error('err', error);\n        setState({\n          ...state,\n          loading: false,\n          alertStatus: false,\n          alertMessage: \"model loading failed\"\n        })\n      }\n    }\n  }\n\n  const handleGetAxeoBimModel = async ({ code, state, accessToken, refreshToken }) => {\n    try {\n      console.log('code', code)\n      const resGetModel = await axios({\n        method: \"post\",\n        url: `${REACT_APP_THIRD_PARTY_API}/axeobim/getModel`,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          code,\n          state,\n          accessToken,\n          refreshToken\n        }\n      })\n\n      const lockToken = sessionStorage.getItem(\"axeobim_lock_token\");\n      if (resGetModel.data && !lockToken) {\n        const {\n          idDocument,\n          idEnvironnement,\n          access_token,\n          refresh_token,\n        } = resGetModel.data;\n        console.log('LOCK')\n        const resLockModel = await axios({\n          method: \"post\",\n          url: `${REACT_APP_THIRD_PARTY_API}/axeobim/lockModel`,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          data: {\n            idDocument,\n            idEnvironnement,\n            accessToken: access_token,\n            refreshToken: refresh_token\n          }\n        });\n        sessionStorage.setItem(\"axeobim_lock_token\", resLockModel.data.lock_token);\n      }\n\n      setState({\n        ...state,\n        alertStatus: true,\n        alertMessage: 'Connect'\n      })\n\n      return resGetModel.data;\n      // const rawResponse = await fetch(files[0].link);\n      // sessionStorage.setItem(\"axeobim_access_token\", res.data.@);\n      // sessionStorage.setItem(\"axeobim_refresh_token\", res.data.refresh_token);\n      // sessionStorage.setItem(\"axeobim_token_type\", res.data.token_type);\n    } catch (err) {\n      console.log('err', err);\n      setState({\n        ...state,\n        loading: false,\n        alertStatus: false,\n        alertMessage: err.response.data.error\n      })\n    }\n  }\n\n  const handleUpdateAxeoBimModel = async () => {\n    try {\n      const accessToken = sessionStorage.getItem(\"axeobim_access_token\");\n      const refreshToken = sessionStorage.getItem(\"axeobim_refresh_token\");\n      const lockToken = sessionStorage.getItem(\"axeobim_lock_token\");\n      const idDocument = sessionStorage.getItem(\"axeobim_id_document\");\n      const idEnvironnement = sessionStorage.getItem(\"axeobim_id_environnement\");\n      const res = await axios({\n        method: \"put\",\n        url: `${REACT_APP_THIRD_PARTY_API}/axeobim/updateModel`,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          idDocument,\n          idEnvironnement,\n          accessToken,\n          refreshToken,\n          lockToken\n        }\n      })\n      console.log('res.data', res.data);\n    } catch (err) {\n      console.log('err', err)\n    }\n  }\n\n\n  const ifcOnLoadError = async (err) => {\n    alert(err.toString());\n  };\n\n  const select = (viewer, setModelID, modelID, expressID, pick = true) => {\n    if (pick) viewer.IFC.pickIfcItemsByID(modelID, expressID);\n    setModelID(modelID);\n  };\n\n  const handleClick = async (e) => {\n    if (showContextMenu) {\n      setShowContextMenu(false);\n    }\n\n    const found = await viewer.IFC.pickIfcItem(false, 1);\n\n    if (found == null || found == undefined) {\n      await viewer.IFC.unpickIfcItems();\n      if (eids.length > 0) {\n        setEids([]);\n      }\n\n      return;\n    }\n\n    setModelID(found.modelID);\n\n    if (e.shiftKey) {\n      const newEids = [...eids, found.id];\n      setEids(newEids);\n      select(viewer, setModelID, found.modelID, newEids, false);\n      await viewer.IFC.pickIfcItemsByID(0, newEids);\n    } else {\n      setEids([found.id]);\n      select(viewer, setModelID, found.modelID, [found.id], false);\n    }\n\n    setSelectedElementID(found.id);\n  };\n  const handleClickOpen = () => {\n    dropzoneRef.current.open();\n  };\n\n  const handleShowCuts = () => {\n    setShowCuts(!showCuts);\n  };\n\n  const handleShowDrawings = () => {\n    setShowDrawings(!showDrawings);\n  };\n\n  const handleShowMeasures = () => {\n    setShowMeasures(!showMeasures);\n  };\n\n  const handleShowModels = () => {\n    setShowModels(!showModels);\n  };\n\n  const handleCapture = () => {\n    const link = document.createElement(\"a\");\n    link.href = viewer.context.renderer.newScreenshot(\n      false,\n      undefined,\n      new Vector2(4000, 4000)\n    );\n    const date = new Date();\n    link.download = `capture-${date}.jpeg`;\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n  };\n\n  const handleMeasure = () => {\n    setShowMeasure(!showMeasure);\n    let dimensionsActive = false;\n    console.log(\"showMeasure\", showMeasure);\n    if (showMeasure) {\n      dimensionsActive = true;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.IFC.unPrepickIfcItems();\n      window.onmousemove = dimensionsActive ? null : viewer.IFC.prePickIfcItem;\n\n      window.onmousedown = () => {\n        viewer.dimensions.create();\n      };\n    } else {\n      dimensionsActive = false;\n      viewer.dimensions.active = dimensionsActive;\n      viewer.dimensions.previewActive = dimensionsActive;\n      viewer.IFC.unpickIfcItems();\n    }\n\n    window.onkeydown = (event) => {\n      if (event.code === \"Escape\") {\n        viewer.dimensions.cancelDrawing();\n      }\n      if (\n        event.code === \"Delete\" ||\n        event.code === \"Backspace\" ||\n        event.code === \"keyD\"\n      ) {\n        setShowMeasure(false);\n        viewer.dimensions.deleteAll();\n      }\n    };\n  };\n\n  const handleShowMarketplace = (specificApp) => {\n    setSpecificApplication(specificApp);\n    setShowMarketplace(!showMarketplace);\n  };\n\n  const handleShowSpatialStructure = () => {\n    setShowSpatialStructure(!showSpatialStructure);\n  };\n\n  const handleShowProperties = (selectedElemID) => {\n    console.log(\"selectedElemID\", selectedElemID);\n    if (selectedElemID) {\n      setSelectedElementID(selectedElemID);\n    }\n    setShowProperties(true);\n  };\n\n  const handleDownloadIfc = async () => {\n    setState({\n      ...state,\n      loading: true,\n      loadingMessage: \"Gnration de l'IFC...\"\n    });\n\n    const modelId = modelID ? modelID : 0;\n    // EXPORT FICHIER IFC\n    const ifcData = await viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n    console.log('ifcData', ifcData);\n    let ifcDataString = new TextDecoder().decode(ifcData);\n    // console.log('IFC STRING', ifcDataString);\n    let newIfcDataString = ifcDataString.replace(\n      \"FILE_NAME('no name', '', (''), (''), 'web-ifc-export');\",\n      \"FILE_NAME('0001','2011-09-07T12:40:02',(''),(''),'Autodesk Revit MEP 2011 - 1.0','20100326_1700 (Solibri IFC Optimizer)','');\"\n    );\n    console.log('newIfcDataString', newIfcDataString);\n    // console.log('IFC STRING', newIfcDataString);\n    var element = document.createElement(\"a\");\n    element.setAttribute(\n      \"href\",\n      \"data:text/plain;charset=utf-8,\" + encodeURIComponent(newIfcDataString)\n    );\n    element.setAttribute(\"download\", \"export.ifc\");\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n    setState({\n      ...state,\n      loading: false\n    });\n  };\n\n  const handleShowBcfDialog = () => {\n    setShowBcfDialog(!showBcfDialog);\n    // setState({\n    //   ...state,\n    //   bcfDialogOpen: true\n    // });\n  };\n\n  const handleCloseBcfDialog = () => {\n    setShowBcfDialog(false);\n    // setState({\n    //   ...state,\n    //   bcfDialogOpen: false\n    // });\n  };\n\n  const handleShowCamera = () => {\n    setShowCamera(!showCamera);\n  };\n\n  const handleShowValidation = () => {\n    setShowValidation(!showValidation);\n  };\n\n  const handleOpenViewpoint = (viewpoint) => {\n    viewer.currentViewpoint = viewpoint;\n  };\n\n  const handleRefreshPage = () => {\n    window.location.reload();\n  };\n\n  return (\n    <>\n      <Grid container>\n        <Grid item xs={2} className={classes.infoLeftPannel}>\n          {showMeasures && (\n            <DraggableCard>\n              <Measures\n                viewer={viewer}\n                showMeasures={showMeasures}\n                setShowMeasures={setShowMeasures}\n              />\n            </DraggableCard>\n          )}\n          {showModels && (\n            <DraggableCard>\n              <Models />\n            </DraggableCard>\n          )}\n          {showBcfDialog && (\n            <DraggableCard>\n              <BcfDialog\n                open={showBcfDialog}\n                onClose={handleCloseBcfDialog}\n                onOpenViewpoint={handleOpenViewpoint}\n              />\n            </DraggableCard>\n          )}\n          {showSpatialStructure && (\n            <DraggableCard width={700} height={600}>\n              <SpatialStructure\n                state={state}\n                setState={setState}\n                viewer={viewer}\n                handleShowSpatialStructure={handleShowSpatialStructure}\n                handleShowMarketplace={handleShowMarketplace}\n                handleShowProperties={handleShowProperties}\n                handleGetJsonData={handleGetJsonData}\n                eids={eids}\n                setEids={setEids}\n              />\n            </DraggableCard>\n          )}\n          {selectedElementID && showProperties && (\n            <DraggableCard>\n              <Properties\n                bimData={state}\n                setBimData={setState}\n                viewer={viewer}\n                element={element}\n                setShowProperties={setShowProperties}\n                selectedElementID={selectedElementID}\n                setSelectedElementID={setSelectedElementID}\n                handleShowMarketplace={handleShowMarketplace}\n                addElementsNewProperties={addElementsNewProperties}\n              />\n            </DraggableCard>\n          )}\n          {showMarketplace && (\n            <DraggableCard disableDragging={true} width={600} height={600}>\n              <Marketplace\n                bimData={state}\n                setBimData={setState}\n                viewer={viewer}\n                modelID={modelID}\n                handleShowMarketplace={handleShowMarketplace}\n                specificApplication={specificApplication}\n                setSpecificApplication={setSpecificApplication}\n                onDrop={onDrop}\n                eids={eids}\n                setEids={setEids}\n                addElementsNewProperties={addElementsNewProperties}\n                apiConnectors={apiConnectors}\n                setApiConnectors={setApiConnectors}\n              />\n            </DraggableCard>\n          )}\n          {showCamera && (\n            <DraggableCard>\n              <Camera\n                viewer={viewer}\n                showCamera={showCamera}\n                setShowCamera={setShowCamera}\n              />\n            </DraggableCard>\n          )}\n          {showCuts && (\n            <DraggableCard>\n              <Cuts\n                viewer={viewer}\n                showCuts={showCuts}\n                setShowCuts={setShowCuts}\n              />\n            </DraggableCard>\n          )}\n          {showDrawings && (\n            <DraggableCard>\n              <Drawings\n                viewer={viewer}\n                showDrawings={showDrawings}\n                setShowDrawings={setShowDrawings}\n              />\n            </DraggableCard>\n          )}\n          {showValidation && (\n            <DraggableCard >\n              <Validation\n                bimData={state}\n                setBimData={setState}\n                showValidation={showValidation}\n                setShowValidation={setShowValidation}\n              />\n            </DraggableCard>\n          )}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Importer IFC\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleClickOpen}\n            >\n              <FolderOpenOutlinedIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Arborescence du projet\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowSpatialStructure}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <AccountTreeIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title={\n                <p>\n                  Proprits:\n                  <br />\n                  cliquez sur un objet de votre maquette, puis sur cet icne\n                  pour accder  ses proprits\n                </p>\n              }\n              placement=\"right\"\n              className={classes.fab}\n              onClick={() => handleShowProperties()}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <DescriptionIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Place de march\"\n              placement=\"right\"\n              disabled={!state.alertStatus}\n              className={classes.fab}\n              onClick={() => handleShowMarketplace(\"home\")}\n            >\n              {/* <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowMarketplace}\n            > */}\n              <AppsIcon />\n              {/* </Fab> */}\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Systme de validation de l'IFC\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowValidation}\n            >\n              <FactCheckIcon />\n            </ToolTipsElem>\n          </Grid>*/}\n          {/* <Grid item xs={12}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowModels}\n            >\n              <StorageIcon />\n            </Fab >\n          </Grid >\n          <Grid item xs={12}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowBcfDialog}\n            >\n              BCF\n            </Fab>\n          </Grid> */}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              // title={\n              //   <div>\n              //     <p>\n              //       Outil de coupe :\n              //       <br />\n              //       1. Cliquez sur cet icne\n              //       <br />\n              //       2. Double-cliquez sur une surface, puis faites glisser les\n              //       flches\n              //     </p>\n              //     <img src={animationClippedVue} alt=\"animation\" />\n              //   </div>\n              // }\n              title=\"Coupes\"\n              placement=\"right\"\n              className={classes.fab}\n              // onClick={() => {\n              //   addGeometryToIfc({\n              //     viewer,\n              //     modelId: 0\n              //   })\n              // }}\n              onClick={handleShowCuts}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <CropIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Plans\"\n              // title={\n              //   <div>\n              //     <p>\n              //       Outil de coupe :\n              //       <br />\n              //       1. Cliquez sur cet icne\n              //       <br />\n              //       2. Double-cliquez sur une surface, puis faites glisser les\n              //       flches\n              //     </p>\n              //     <img src={animationClippedVue} alt=\"animation\" />\n              //   </div>\n              // }\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowDrawings}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <MapIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Camera\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowCamera}\n            >\n              <ControlCameraIcon />\n            </ToolTipsElem>\n          </Grid> */}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Outils de mesure\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleShowMeasures}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <StraightenIcon />\n            </ToolTipsElem>\n          </Grid>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Capture d'cran\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleCapture}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <PhotoCameraIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Systme de validation de l'IFC\"\n              placement=\"right\"\n              className={classes.fab}\n              disabled={!state.alertStatus}\n              onClick={handleShowValidation}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <FactCheckIcon />\n            </ToolTipsElem>\n          </Grid> */}\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Reinitialise la page\"\n              placement=\"right\"\n              className={classes.fab}\n              onClick={handleRefreshPage}\n              disabled={viewer?.context?.items?.ifcModels.length === 0}\n            >\n              <RefreshIcon />\n            </ToolTipsElem>\n          </Grid>\n\n\n        </Grid>\n        <Grid item xs={2} className={classes.infoRightPannel}>\n          <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Exporter IFC\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={handleDownloadIfc}\n            >\n              <GetAppIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Exporter IFC\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={handleUpdateAxeoBimModel}\n            >\n              <ArrowCircleUpIcon />\n            </ToolTipsElem>\n          </Grid> */}\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Modifications\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={handleModelValidation}\n            >\n              <StorageIcon />\n            </ToolTipsElem>\n          </Grid>  */}\n          {/* <Grid item xs={12}>\n            <ToolTipsElem\n              title=\"Exporter IFC\"\n              placement=\"bottom\"\n              className={classes.fab}\n              onClick={() => editIfcModel({\n                viewer,\n                modelId: 0,\n                expressIDs: [5498],\n                properties: [\n                  {\n                    property_name: 'Existing property',\n                    text_value: 'True',\n                    property_definition: 'deeeee',\n                    // unit: 'm',\n                    ifc_class: 'Pset_WallCommon',\n                    ifc_property_name: 'LoadBearing',\n                    ifc_factor_multiplicator: '',\n                    ifc_type: ''\n                  },\n                  {\n                    property_name: 'Existing Normalized Pset',\n                    text_value: 'value',\n                    property_definition: 'deeeee',\n                    // unit: 'm',\n                    ifc_class: 'Pset_WallCommon',\n                  },\n                  {\n                    property_name: 'New Normalized Pset',\n                    text_value: 'value',\n                    property_definition: 'deeeee',\n                    // unit: 'm',\n                    ifc_class: 'Pset_Stair'\n                  },\n                  {\n                    property_name: 'New property',\n                    text_value: 'value',\n                    property_definition: 'deeeee1',\n                    // unit: 'm',\n                    ifc_class: ''\n                  }\n                ]\n              })}\n            >\n              <ArrowCircleUpIcon />\n            </ToolTipsElem>\n          </Grid>\n          {/* <Grid item xs={12}>\n            <Fab\n              size=\"small\"\n              className={classes.fab}\n              onClick={handleShowStructuralAnalysis}\n            >\n              <GrainIcon />\n            </Fab >\n          </Grid > */}\n        </Grid>\n        <Grid item xs={10}>\n          <div\n            id=\"viewer-container\"\n            style={{\n              position: \"absolute\",\n              height: \"100%\",\n              width: \"100%\",\n              left: \"0\",\n              top: \"0\",\n            }}\n            onClick={handleClick}\n          />\n          <Dropzone ref={dropzoneRef} onDrop={files => onDrop({ files, viewer })}>\n            {({ getRootProps, getInputProps }) => (\n              <div {...getRootProps({ className: \"dropzone\" })}>\n                <input {...getInputProps()} accept=\".ifc\" />\n              </div>\n            )}\n          </Dropzone>\n        </Grid>\n      </Grid>\n      {state.alertStatus ?\n        <Alert severity=\"success\" sx={{ position: 'fixed', bottom: 0, left: 0, right: 0, width: '100%' }}\n          action={\n            <Grid container spacing={1}>\n              <Grid item xs={4} style={{ textAlign: 'right' }}>\n                <img src={ANCTPng} style={{ height: '2em', width: 'auto' }} />\n              </Grid>\n              <Grid item xs={4} style={{ textAlign: 'right' }}>\n                <img src={AgriboisValeurPng} style={{ height: '2em', width: 'auto' }} />\n              </Grid>\n              <Grid item xs={4} style={{ textAlign: 'right' }}>\n                <img src={BIMLibrePng} style={{ height: '2em', width: 'auto' }} />\n              </Grid>\n            </Grid>\n          }\n        >\n          {`${state.alertMessage}`}\n        </Alert >\n        :\n        <Alert severity=\"error\" sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }}>\n          {`${state.alertMessage}`}\n        </Alert>\n      }\n      <ContextMenu\n        viewer={viewer}\n        showContextMenu={showContextMenu}\n        meshMaterials={meshMaterials}\n        setShowContextMenu={setShowContextMenu}\n        setShowProperties={setShowProperties}\n        setShowSpatialStructure={setShowSpatialStructure}\n        handleShowMarketplace={handleShowMarketplace}\n        eids={eids}\n        setEids={setEids}\n        subsets={subsets}\n        setSubsets={setSubsets}\n      />\n      <Backdrop\n        style={{\n          zIndex: 200,\n          display: \"flex\",\n          alignItems: \"center\",\n          alignContent: \"center\",\n        }}\n        open={state.loading}\n      >\n        <Grid container spacing={2}>\n          <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n            <CircularProgress color=\"inherit\" style={{ color: 'white' }} />\n          </Grid>\n          <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n            <Typography gutterBottom variant=\"subtitle1\" component=\"div\" style={{ color: 'white' }}>\n              {`${state.loadingMessage}`}\n            </Typography>\n          </Grid>\n        </Grid>\n        {/* <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n          <CircularProgress color=\"inherit\" />\n        </Grid>\n        <Grid item xs={12} justify=\"center\" style={{ textAlign: 'center' }}>\n          <Typography gutterBottom variant=\"subtitle1\" component=\"div\">\n            {`${validation.message}`}\n          </Typography>\n        </Grid>\n        <CircularProgress color=\"inherit\" />\n        {`${percentageLoading} %`} */}\n      </Backdrop>\n    </>\n  );\n};\n\nexport default IfcRenderer;\n","import { useEffect, useState } from 'react';\nimport * as WebIFC from 'web-ifc';\nimport { IfcAPI } from \"web-ifc/web-ifc-api\";\nimport {\n  IFCBUILDINGSTOREY,\n  IFCPROJECT,\n  IFCSPACE,\n  IFCOPENINGELEMENT,\n  IFCWALLSTANDARDCASE,\n  IFCWALL,\n  IFCSTAIR,\n  IFCCOLUMN,\n  IFCSLAB,\n  IFCROOF,\n  IFCFOOTING,\n  IFCFURNISHINGELEMENT,\n  IFCOWNERHISTORY,\n  IFCRELDEFINESBYPROPERTIES,\n  IFCPROPERTYSET,\n  IFCPROPERTYSINGLEVALUE\n} from 'web-ifc';\nimport Dexie from \"dexie\";\nimport axios from \"axios\";\nimport {\n  BoxGeometry,\n  MeshLambertMaterial,\n  Mesh,\n  Color,\n  DoubleSide,\n  MathUtils,\n  EdgesGeometry,\n  LineBasicMaterial,\n  MeshBasicMaterial\n} from 'three';\nimport { TransformControls } from \"three/examples/jsm/controls/TransformControls\";\nimport { BuildModel } from './Utils/addColumns';\nimport { geometryTypes } from \"./Utils/geometry-types\";\n\nfunction UseIfcRenderer({\n  eids,\n  setEids,\n  state,\n  setState\n}) {\n  const [models, setModels] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const initIndexDB = async () => {\n    //set the database \n    const db = new Dexie(\"tribimDB\");\n    //create the database store\n    db.version(1).stores({\n      models: \"title, content, file\"\n    })\n    db.open().catch((err) => {\n      console.log(err.stack || err)\n    });\n\n    return db;\n  }\n\n\n  const meshMaterials = {\n    invisibleMaterial: new MeshLambertMaterial({\n      transparent: true,\n      opacity: 0,\n      color: 0x77aaff,\n      depthTest: false,\n      side: DoubleSide,\n    })\n  };\n\n  const getModels = async (db) => {\n    let allModels = await db.models.toArray();\n    console.log('allModels', allModels)\n    setModels(allModels);\n    return allModels;\n  }\n\n  const addTransformControls = (viewer) => {\n    const scene = viewer.IFC.context.scene.scene;\n    const renderer = viewer.IFC.context.renderer.renderer;\n    const camera = viewer.IFC.context.ifcCamera.activeCamera;\n    const orbitControls = viewer.IFC.context.ifcCamera.controls;\n    const item = new Mesh(\n      new BoxGeometry(1, 1, 1),\n      new MeshLambertMaterial({\n        color: 'red',\n        side: DoubleSide\n      })\n    );\n    scene.add(item);\n\n    const transformControls = new TransformControls(camera, renderer.domElement);\n    transformControls.addEventListener('change', function () {\n      renderer.render(scene, camera);\n    });\n    transformControls.addEventListener('dragging-changed', function (event) {\n      orbitControls.enabled = !event.value;\n    });\n\n    scene.add(transformControls);\n    transformControls.attach(item);\n\n    // if (event.code === \"KeyL\") {\n    //   transformControls.attach(item);\n    // }\n    // if (event.code === \"KeyP\") {\n    //   transformControls.detach(item);\n    // }\n    // if (event.code === 'KeyQ') {\n    //   transformControls.setSpace(transformControls.space === 'local' ? 'world' : 'local');\n    // }\n    // if (event.code === 'KeyShift') {\n    //   transformControls.setTranslationSnap(100);\n    //   transformControls.setRotationSnap(MathUtils.degToRad(15));\n    //   transformControls.setScaleSnap(0.25);\n    // }\n    // if (event.code === 'KeyT') {\n    //   transformControls.setMode('translate');\n    // }\n    // // if (event.code === 'KeyR') {\n    // //   transformControls.setMode('rotate');\n    // // }\n    // if (event.code === 'KeyS') {\n    //   transformControls.setMode('scale');\n    // }\n    // if (event.code === 'KeySpacebar') {\n    //   transformControls.enabled = !transformControls.enabled;\n    // }\n  }\n\n  const select = (viewer, setModelID, modelID, expressID, pick = true) => {\n    if (pick) viewer.IFC.pickIfcItemsByID(modelID, expressID);\n    setModelID(modelID);\n  }\n\n  const getElementProperties = async ({\n    viewer,\n    setModelID,\n    setElement\n  }) => {\n    const found = await viewer.IFC.pickIfcItem(true, 1);\n\n    if (found == null || found == undefined) {\n      await viewer.IFC.unpickIfcItems();\n      setEids([]);\n      return\n    };\n\n    setModelID(found.modelID);\n    setEids([found.id]);\n    console.log('eid', eids)\n    select(viewer, setModelID, found.modelID, found.id, false);\n    const elementProperties = await viewer.IFC.getProperties(found.modelID, found.id, true, true);\n    console.log(elementProperties);\n\n    const type = await viewer.IFC.loader.ifcManager.getIfcType(found.modelID, found.id);\n    console.log(type);\n\n    if (elementProperties.psets.length > 0) {\n      const psets = await Promise.all(elementProperties.psets.map(async (pset) => {\n        if (pset.HasProperties && pset.HasProperties.length > 0) {\n          const newPset = await Promise.all(pset.HasProperties.map(async (property) => {\n            const label = property.Name.value;\n            const value = property.NominalValue ? (property.NominalValue.value ? property.NominalValue.value : '') : '';\n            return {\n              label,\n              value\n            }\n          }));\n\n          return {\n            ...pset,\n            HasProperties: [...newPset]\n          }\n        }\n        if (pset.Quantities && pset.Quantities.length > 0) {\n          const newPset = await Promise.all(pset.Quantities.map(async (property) => {\n            const label = property.Name.value;\n            const value = property.NominalValue ? property.NominalValue.value : null;\n            return {\n              label,\n              value\n            }\n          }));\n\n          return {\n            ...pset,\n            HasProperties: [...newPset]\n          }\n        }\n        return {\n          ...pset,\n          HasProperties: []\n        }\n      }));\n      const elem = {\n        ...elementProperties,\n        type: type ? type : 'NO TYPE',\n        modelID: found.modelID,\n        psets\n      };\n\n      if (elem) {\n        setElement(elem);\n      }\n    }\n  }\n\n  function empty() {\n    return { type: 6 };\n  }\n  function str(v) {\n    return { type: 1, value: v };\n  }\n  function ref(v) {\n    return { type: 5, value: v }\n  }\n\n  function ifcLabel(v) {\n    return { type: 2, label: 'IFCLABEL', valueType: 1, value: v }\n  }\n\n  function ifcBoolean(v) {\n    return { type: 2, label: 'IFCBOOLEAN', valueType: 1, value: v }\n  }\n\n\n  function ifcText(v) {\n    return { type: 2, label: 'IFCTEXT', valueType: 1, value: v }\n  }\n\n  const handleGetJsonData = async (\n    viewer,\n    spatialStructure,\n    progress\n    // excludeGeometry\n  ) => {\n    // const data = {};\n    const data = [];\n    let count = 0\n    for (const item of spatialStructure) {\n      progress({\n        loading: true,\n        message: `Recherche: ${Math.round(count / spatialStructure.length * 100)} %`\n      });\n      count++;\n      const props = await viewer.IFC.getProperties(0, item.expressID, false, false);\n      // console.log('props', props)\n\n      data.push({\n        ...item,\n        ...props,\n        type: item.type\n      })\n    }\n    return data;\n  }\n\n\n  const addOrEditIfcPropertySingleValue = async ({\n    expressID,\n    type,\n    name,\n    description,\n    value,\n    unit,\n    property\n  }) => {\n    const getPropertyValue = (type, value) => {\n\n      if (value == null) {\n        return ifcText(`no value`);\n      } else {\n        switch (type) {\n          case 'IfcLabel':\n          case 'IfcText':\n            return ifcText(`${value}`);\n          case 'IfcBoolean':\n            return ifcBoolean(`${value}`);\n          default:\n            return ifcText(`${value}`);\n        }\n      }\n    }\n\n\n    let ifcPropertySingleValue = new WebIFC.IfcPropertySingleValue(\n      expressID,\n      type,\n      name ? str(`${name}`) : str(`no name`),\n      description ? str(`${description}`) : str(`${name}`),\n      // value ? ifcText(`${value}`) : ifcText(`no value`),\n      getPropertyValue(property.ifc_type, value),\n      unit ? str(`${unit}`) : empty(),\n      empty(),\n    );\n\n    let rawLineIfcPropertySingleValue = {\n      ID: ifcPropertySingleValue.expressID,\n      type: ifcPropertySingleValue.type,\n      arguments: ifcPropertySingleValue.ToTape()\n    };\n\n    return rawLineIfcPropertySingleValue;\n  }\n\n  const addOrEditIfcPropertySet = async ({\n    expressID,\n    type,\n    globalId,\n    ifcOwnerHistoryExpressID,\n    name,\n    description,\n    ifcPropertySingleValueExpressIDs\n  }) => {\n    let ifcPropertySet = new WebIFC.IfcPropertySet(\n      expressID,\n      type,\n      globalId ? globalId : empty(),\n      ifcOwnerHistoryExpressID ? ifcOwnerHistoryExpressID : empty(),\n      name ? name : empty(),\n      description ? description : empty(),\n      ifcPropertySingleValueExpressIDs\n    );\n\n    let rawLineIfcPropertySet = {\n      ID: ifcPropertySet.expressID,\n      type: ifcPropertySet.type,\n      arguments: ifcPropertySet.ToTape()\n    };\n\n    return rawLineIfcPropertySet;\n  }\n\n  const addOrEditIfcRelDefinesByProperties = async ({\n    expressID,\n    type,\n    globalId,\n    ifcOwnerHistoryExpressID,\n    name,\n    description,\n    elementsList,\n    ifcPropertySetExpressID\n  }) => {\n    let ifcRelDefinesByProperties = new WebIFC.IfcRelDefinesByProperties(\n      expressID,\n      type,\n      globalId ? globalId : empty(),\n      ifcOwnerHistoryExpressID ? ifcOwnerHistoryExpressID : empty(),\n      name ? name : empty(),\n      description ? description : empty(),\n      elementsList,\n      ifcPropertySetExpressID\n    );\n\n    let rawLineIfcRelDefinesByProperties = {\n      ID: ifcRelDefinesByProperties.expressID,\n      type: ifcRelDefinesByProperties.type,\n      arguments: ifcRelDefinesByProperties.ToTape()\n    };\n\n    return rawLineIfcRelDefinesByProperties;\n  }\n\n  // function DecodeIFCString(ifcString) {\n  //   const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/giu;\n  //   let resultString = ifcString;\n  //   let match = ifcUnicodeRegEx.exec(ifcString);\n  //   while (match) {\n  //     const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n  //     resultString = resultString.replace(match[0], unicodeChar);\n  //     match = ifcUnicodeRegEx.exec(ifcString);\n  //   }\n  //   return resultString;\n  // }\n\n\n  function DecodeIFCString(ifcString) {\n    const resultString = ifcString?.replace(/'/g, \"''\");\n    // const ifcUnicodeRegEx = /\\\\X2\\\\(.*?)\\\\X0\\\\/uig;\n    // let resultString = ifcString;\n    // let match = ifcUnicodeRegEx.exec(ifcString);\n    // while (match) {\n    //   const unicodeChar = String.fromCharCode(parseInt(match[1], 16));\n    //   resultString = resultString.replace(match[0], unicodeChar);\n    //   match = ifcUnicodeRegEx.exec(ifcString);\n    // }\n    return resultString;\n  }\n\n\n\n  const opendthxUpdateProperties = async ({\n    bimData,\n    setBimData,\n    viewer,\n    modelId,\n    expressIDs,\n    properties\n  }) => {\n    setState({\n      ...state,\n      loading: true,\n      loadingMessage: \"Dbut de l'enrichissement...\",\n      alertStatus: true,\n      alertMessage: \"Connect\"\n    });\n    console.log('bimBata', bimData.models)\n\n    const model = bimData.models.list[modelId];\n    const database = bimData.models.data[modelId];\n    const manager = await viewer.IFC.loader.ifcManager;\n    const allLines = await manager.ifcAPI.GetAllLines(modelId);\n    let maxExpressId = 0;\n    await Object.keys(allLines._data).forEach(index => {\n      maxExpressId = Math.max(maxExpressId, allLines._data[index])\n    });\n\n    const elementsList = await expressIDs.map(expressID => {\n      return ref(expressID);\n    });\n\n    const ifcOwnerHistory = await manager.getAllItemsOfType(\n      modelId,\n      IFCOWNERHISTORY,\n      false\n    );\n    const eidIfcOwnerHistory = (ifcOwnerHistory && ifcOwnerHistory.length > 0) ? ifcOwnerHistory[0] : 1;\n    // const newPsetOpendthXEids = [];\n    // const newPsetIFCEids = [];\n    // const rawLineIfcRelDefinesByPropertiesList = [];\n    // let propertySingleValueExpressId = maxExpressId + 1;\n\n    let count = 0;\n    const PsetSearch = 'Pset_opendthx';\n\n    // SUPPRESSION DES ELEMENTS DE LA LISTE AYANT DEJA UN PSET OPENDTHX\n    const relPsetIDs = await manager.getAllItemsOfType(0, IFCRELDEFINESBYPROPERTIES, false);\n    console.log('relPsetIDs', relPsetIDs)\n    console.log('relPsetIDs.length', relPsetIDs.length)\n    const t0 = new Date();\n    for (let relPsetID of relPsetIDs) {\n      // setState({\n      //   ...state,\n      //   loading: true,\n      //   loadingMessage: `Enrichissement: ${Math.round(count / relPsetIDs.length * 100)} %`\n      // });\n      count++;\n      // console.log('relPsetID', relPsetID)\n      const relPset = database[parseInt(relPsetID)];\n      console.log('relPset', relPset)\n      // const relPset = await manager.getItemProperties(0, relPsetID);\n      const relPsetRelatingPropertyDefinition = relPset.RelatingPropertyDefinition;\n\n      if (database[parseInt(relPsetRelatingPropertyDefinition)].Name === PsetSearch) {\n        const relPsetRelatedObjects = [...relPset.RelatedObjects];\n        let checkExpressID = false;\n        for (let expressID of expressIDs) {\n          const relPsetRelatedObjectIndex = relPsetRelatedObjects.findIndex(relPsetRelatedObject => relPsetRelatedObject === expressID);\n          if (relPsetRelatedObjectIndex > -1) {\n            checkExpressID = true;\n            relPsetRelatedObjects.splice(relPsetRelatedObjectIndex, 1);\n          }\n        }\n        if (checkExpressID) {\n          const newRelPset = await manager.getItemProperties(0, relPsetID);\n          newRelPset.RelatedObjects = relPsetRelatedObjects.map((relPsetRelatedObject) => {\n            return ref(relPsetRelatedObject);\n          });\n          await manager.ifcAPI.WriteLine(0, newRelPset);\n        }\n      }\n    }\n    const t1 = new Date();\n    let difference = t1.getTime() - t0.getTime();\n    let psetID;\n    console.log(`time spent step 1: ${difference / 1000}s`)\n\n    if (properties.length > 0) {\n      console.log('maxExpressId', maxExpressId)\n      let ifcPropertySingleValueEid = maxExpressId + 1;\n      console.log('ifcPropertySingleValueEid', ifcPropertySingleValueEid)\n      const newPsetOpendthXEids = [];\n      for (let property of properties) {\n        const eid = ifcPropertySingleValueEid++;\n        const rawLineIfcPropertySingleValue = await addOrEditIfcPropertySingleValue({\n          expressID: eid,\n          type: IFCPROPERTYSINGLEVALUE,\n          name: DecodeIFCString(property.ifc_property_name),\n          description: DecodeIFCString(property.property_definition),\n          value: property.text_value,\n          unit: property.unit,\n          property\n        });\n        await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySingleValue);\n        newPsetOpendthXEids.push(ref(eid));\n      }\n      console.log('newPsetOpendthXEids', newPsetOpendthXEids)\n      if (newPsetOpendthXEids.length > 0) {\n        const ifcPropertySetEid = ifcPropertySingleValueEid + 1;\n        psetID = ifcPropertySetEid;\n        const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n          expressID: ifcPropertySetEid,\n          type: IFCPROPERTYSET,\n          globalId: str(Math.random().toString(16).substr(2, 8)),\n          ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n          name: str('Pset_opendthx'),\n          ifcPropertySingleValueExpressIDs: newPsetOpendthXEids\n        });\n        await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n        const ifcRelDefinesByPropertiesEid = ifcPropertySetEid + 1;\n        console.log('ifcPropertySetEid', ifcPropertySetEid)\n        console.log('ifcRelDefinesByPropertiesEid', ifcRelDefinesByPropertiesEid)\n        const rawLineIfcRelDefinesByProperties = await addOrEditIfcRelDefinesByProperties({\n          expressID: ifcRelDefinesByPropertiesEid,\n          type: IFCRELDEFINESBYPROPERTIES,\n          globalId: str(Math.random().toString(16).substr(2, 8)),\n          ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n          name: empty(),\n          description: empty(),\n          elementsList: elementsList,\n          ifcPropertySetExpressID: ref(ifcPropertySetEid)\n        });\n\n        // rawLineIfcRelDefinesByPropertiesList.push(rawLineIfcRelDefinesByProperties);\n        await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcRelDefinesByProperties);\n\n      }\n    }\n\n    const newProperties = await viewer.IFC.properties.serializeAllProperties(model, undefined, (current, total) => {\n      const progress = current / total;\n      const formatted = Math.trunc(progress * 100);\n      setState({\n        ...state,\n        loading: true,\n        loadingMessage: `Chargement des donnes: ${formatted} %`\n      });\n    });\n    const file = new File(newProperties, 'properties');\n    const data = JSON.parse(await file.text());\n\n    const t2 = new Date();\n    difference = t2.getTime() - t1.getTime();\n    console.log(`time spent step 2: ${difference / 1000}s`)\n\n    setState({\n      ...state,\n      models: {\n        ...state.models,\n        data: [data]\n      },\n      loading: false,\n      alertStatus: true,\n      alertMessage: \"Enrichissement russi\"\n    });\n\n  }\n\n\n\n  const editIfcModel = async ({\n    viewer,\n    modelId,\n    expressIDs,\n    properties\n  }) => {\n    setState({\n      ...state,\n      loading: true,\n      loadingMessage: \"Dbut de l'enrichissement...\",\n      alertStatus: true,\n      alertMessage: \"Connect\"\n    });\n    // try {\n    const manager = await viewer.IFC.loader.ifcManager;\n    const allLines = await manager.ifcAPI.GetAllLines(modelId);\n    let maxExpressId = 0;\n    await Object.keys(allLines._data).forEach(index => {\n      maxExpressId = Math.max(maxExpressId, allLines._data[index])\n    });\n\n    const elementsList = await expressIDs.map(expressID => {\n      return ref(expressID);\n    });\n\n    const ifcOwnerHistory = await viewer.IFC.loader.ifcManager.getAllItemsOfType(\n      modelId,\n      IFCOWNERHISTORY,\n      false\n    );\n    const eidIfcOwnerHistory = (ifcOwnerHistory && ifcOwnerHistory.length > 0) ? ifcOwnerHistory[0] : 1;\n    const newPsetOpendthXEids = [];\n    const newPsetIFCEids = [];\n    const rawLineIfcRelDefinesByPropertiesList = [];\n    let propertySingleValueExpressId = maxExpressId + 1;\n\n    let count = 0;\n\n    // CREATION D'UNE BDD DE PROPERTIES ASSOCIE AU EXPRESSIDS\n    // for (let expressID of expressIDs) {\n    //   const psetList = {\n    //     'psetId': {\n    //       elemIds: \n    //     }\n    //   };\n\n    // }\n\n    if (properties.length > 0) {\n      // try {\n      for (let property of properties) {\n        setState({\n          ...state,\n          loading: true,\n          loadingMessage: `Enrichissement: ${Math.round(count / properties.length * 100)} %`\n        });\n        count++;\n        // Check if corresponding IfcPropertySet exists\n        let existingPsetList = [];\n        let existingPropertyList = [];\n\n        for (let expressID of expressIDs) {\n          const element = await viewer.IFC.getProperties(0, expressID, false, false);\n          await element.psets?.map(pset => {\n            pset.HasProperties?.forEach(prop => {\n              if (prop.Name?.value === property.ifc_property_name || prop.Name?.value === property.property_name) {\n                existingPropertyList.push(prop);\n              }\n            })\n          })\n\n          let existingPset = await element.psets?.find(pset => pset.Name?.value === property.ifc_class);\n\n          if (existingPset) {\n            existingPsetList.push(existingPset);\n          }\n        }\n\n        if (existingPropertyList.length > 0) {\n          const existingProperty = existingPropertyList[0];\n          const rawLineIfcPropertySingleValue = await addOrEditIfcPropertySingleValue({\n            expressID: existingProperty.expressID,\n            type: IFCPROPERTYSINGLEVALUE,\n            name: DecodeIFCString(existingProperty.Name.value),\n            description: DecodeIFCString(property.property_definition),\n            value: property.text_value,\n            unit: property.unit,\n            property\n          });\n\n          await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySingleValue);\n        } else {\n          propertySingleValueExpressId += 1;\n          // Add or Edit IfcPropertySingleValue\n          const ifcPropertySingleValueEid = propertySingleValueExpressId;\n          const rawLineIfcPropertySingleValue = await addOrEditIfcPropertySingleValue({\n            expressID: ifcPropertySingleValueEid,\n            type: IFCPROPERTYSINGLEVALUE,\n            name: DecodeIFCString(property.ifc_property_name),\n            description: DecodeIFCString(property.property_definition),\n            value: property.text_value,\n            unit: property.unit,\n            property\n          });\n\n          await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySingleValue);\n          if (existingPsetList.length > 0) {\n            const existingPset = existingPsetList[0];\n            const existingPsetPropertyEids = existingPset.HasProperties?.map(p => ref(p.expressID));\n            const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n              expressID: existingPset.expressID,\n              type: existingPset.type,\n              globalId: existingPset.GlobalId,\n              ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n              name: existingPset.Name,\n              description: existingPset.Description,\n              ifcPropertySingleValueExpressIDs: [...existingPsetPropertyEids, ref(ifcPropertySingleValueEid)]\n            })\n\n            await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n          } else if (property.ifc_class !== 'Pset_opendthx' && property.ifc_class !== '') {\n            propertySingleValueExpressId += 1;\n            const ifcPropertySetEid = propertySingleValueExpressId;\n            const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n              expressID: ifcPropertySetEid,\n              type: IFCPROPERTYSET,\n              globalId: str(Math.random().toString(16).substr(2, 8)),\n              ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n              name: str(property.ifc_class),\n              ifcPropertySingleValueExpressIDs: [ref(ifcPropertySingleValueEid)]\n            });\n\n            await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n\n            newPsetIFCEids.push(ref(ifcPropertySetEid));\n\n            propertySingleValueExpressId += 1;\n            const rawLineIfcRelDefinesByProperties = await addOrEditIfcRelDefinesByProperties({\n              expressID: propertySingleValueExpressId,\n              type: IFCRELDEFINESBYPROPERTIES,\n              globalId: str(Math.random().toString(16).substr(2, 8)),\n              ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n              name: empty(),\n              description: empty(),\n              elementsList: elementsList,\n              ifcPropertySetExpressID: ref(ifcPropertySetEid)\n            })\n            // rawLineIfcRelDefinesByPropertiesList.push(rawLineIfcRelDefinesByProperties);\n            await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcRelDefinesByProperties);\n\n          } else {\n            newPsetOpendthXEids.push(ref(ifcPropertySingleValueEid));\n          }\n        }\n\n      }\n      // } catch (e) {\n      //   setState({\n      //     ...state,\n      //     loading: false,\n      //     alertStatus: false,\n      //     alertMessage: \"Problme lors de l'enrichissement\"\n      //   });\n      // }\n    }\n\n\n    if (newPsetOpendthXEids.length > 0) {\n      propertySingleValueExpressId += 1;\n      const ifcPropertySetEid = propertySingleValueExpressId;\n      const rawLineIfcPropertySet = await addOrEditIfcPropertySet({\n        expressID: ifcPropertySetEid,\n        type: IFCPROPERTYSET,\n        globalId: str(Math.random().toString(16).substr(2, 8)),\n        ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n        name: str('Pset_opendthx'),\n        ifcPropertySingleValueExpressIDs: newPsetOpendthXEids\n      });\n\n      await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcPropertySet);\n\n      propertySingleValueExpressId += 1;\n      const rawLineIfcRelDefinesByProperties = await addOrEditIfcRelDefinesByProperties({\n        expressID: propertySingleValueExpressId,\n        type: IFCRELDEFINESBYPROPERTIES,\n        globalId: str(Math.random().toString(16).substr(2, 8)),\n        ifcOwnerHistoryExpressID: ref(eidIfcOwnerHistory),\n        name: empty(),\n        description: empty(),\n        elementsList: elementsList,\n        ifcPropertySetExpressID: ref(ifcPropertySetEid)\n      });\n\n      // rawLineIfcRelDefinesByPropertiesList.push(rawLineIfcRelDefinesByProperties);\n      await viewer.IFC.loader.ifcManager.state.api.WriteRawLineData(modelId, rawLineIfcRelDefinesByProperties);\n    }\n\n    setState({\n      ...state,\n      loading: false,\n      alertStatus: true,\n      alertMessage: \"Enrichissement russi\"\n    });\n\n\n    // } catch (e) {\n    //   setState({\n    //     ...state,\n    //     loading: false,\n    //     alertStatus: false,\n    //     alertMessage: \"Problme lors de l'enrichissement\"\n    //   });\n    // }\n\n  }\n\n  const addElementsNewProperties = async ({\n    bimData,\n    setBimData,\n    viewer,\n    modelID,\n    expressIDs,\n    properties\n  }) => {\n    const modelId = modelID ? modelID : 0;\n    console.log('ADD PROPERTY')\n    if (expressIDs && expressIDs.length > 0) {\n      if (properties.length > 0) {\n        opendthxUpdateProperties({\n          bimData,\n          setBimData,\n          viewer,\n          modelId,\n          expressIDs,\n          properties\n        })\n      }\n    }\n  }\n\n  const handleCheckNetworkStatus = () => {\n    function changeStatus() {\n      console.log('navigator.onLine', navigator.onLine)\n      setState({\n        ...state,\n        alertStatus: navigator.onLine,\n        alertMessage: navigator.onLine ? 'Connect' : 'Non connect'\n      });\n    }\n    window.addEventListener(\"online\", changeStatus);\n    window.addEventListener(\"offline\", changeStatus);\n    return () => {\n      window.removeEventListener(\"online\", changeStatus);\n      window.removeEventListener(\"offline\", changeStatus);\n    };\n  }\n\n  const handleModelValidation = async () => {\n    try {\n      const ifcData = await state.viewer.IFC.loader.ifcManager.state.api.ExportFileAsIFC(0);\n      const blobIfc = new Blob([ifcData], { type: 'text/plain' });\n      const ifcFile = new File([blobIfc], 'ifcFile.png');\n\n\n      const formData = new FormData();\n      formData.append('files', ifcFile);\n\n      axios.post(process.env.REACT_APP_API_URL, formData).then((value) => {\n        console.log('value.data', value.data)\n        return value.data;\n      })\n        .then(async ({ projectId }) => {\n          const logs = await axios.get(`${process.env.REACT_APP_API_URL}/log/${projectId}.json`)\n          console.log('logs', logs)\n        }).catch((error) => {\n          console.log('ERRORRR', error)\n        })\n\n      // res.status(200).send(response.data);\n    } catch (err) {\n      // return res.status(500).json({ error: err });\n    }\n  }\n\n  const handleInitSubset = async (viewer, modelID) => {\n    const models = viewer.context.items.ifcModels;\n    const ifcModel = models[modelID];\n    const allIDs = Array.from(\n      new Set(ifcModel.geometry.attributes.expressID.array)\n    );\n    const subset = getWholeSubset(viewer, ifcModel, allIDs);\n    replaceOriginalModelBySubset(viewer, ifcModel, subset);\n  }\n\n  function getWholeSubset(viewer, ifcModel, allIDs) {\n    return viewer.IFC.loader.ifcManager.createSubset({\n      modelID: ifcModel.modelID,\n      ids: allIDs,\n      applyBVH: true,\n      scene: ifcModel.parent,\n      removePrevious: true,\n      customID: 'full-model-subset',\n    });\n  }\n\n  function replaceOriginalModelBySubset(viewer, ifcModel, subset) {\n    const items = viewer.context.items;\n\n    items.pickableIfcModels = items.pickableIfcModels.filter(model => model !== ifcModel);\n    items.ifcModels = items.ifcModels.filter(model => model !== ifcModel);\n    ifcModel.removeFromParent();\n\n    items.ifcModels.push(subset);\n    items.pickableIfcModels.push(subset);\n  }\n\n\n  return {\n    models,\n    meshMaterials,\n    initIndexDB,\n    getModels,\n    addTransformControls,\n    getElementProperties,\n    addElementsNewProperties,\n    editIfcModel,\n    handleCheckNetworkStatus,\n    handleGetJsonData,\n    handleModelValidation,\n    handleInitSubset\n  }\n};\n\nexport {\n  UseIfcRenderer\n};","import React, { useMemo } from 'react';\nimport Helmet from 'react-helmet';\nimport {\n  Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport './App.css';\nimport history from './history';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport AppContainerElem from './Components/AppContainerElem';\nimport IfcRenderer from './Views/IfcRenderer/IfcRenderer';\nimport {\n  ListItem,\n  ListItemAvatar,\n  Avatar,\n  ListItemText,\n  Typography\n} from '@material-ui/core';\n\nconst Menu = {\n  MenuNavBar: [\n    { text: \"\", link: \"\", href: \"\", icon: \"\" }\n  ],\n  MenuSideBarSup: [\n    { text: \"BIM Viewer\", link: \"/\", href: \"\", icon: \"dashboard\" },\n  ],\n  MenuSideBarInf: [\n    // { text: \"Documentation\", link: \"\", href: \"https://www.tridyme.com/fr/documentation/fr/developpers/tridyme-webapp-kit-serverless\", icon: \"chrome_reader_mode\" },\n    { text: \"GitHub\", link: \"\", href: \"https://github.com/alliance-batiment/BIM-CiQo\", icon: \"code\" }\n  ]\n};\n\nconst {\n  REACT_APP_FAVICON,\n  REACT_APP_LOGO,\n  REACT_APP_COMPANY\n} = process.env;\n\n\nconst App = () => {\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n  const theme = useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: prefersDarkMode ? 'dark' : 'light',\n          primary: {\n            // light: will be calculated from palette.primary.main,\n            main: '#ffffff',\n            // dark: will be calculated from palette.primary.main,\n            // contrastText: will be calculated to contrast with palette.primary.main\n          },\n          secondary: {\n            //light: '#0066ff',\n            main: '#ff0000',\n            // dark: will be calculated from palette.secondary.main,\n            //contrastText: '#ffcc00',\n          },\n        },\n      }),\n    [prefersDarkMode],\n  );\n\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Helmet>\n        <title>{`${REACT_APP_COMPANY} | Applications`}</title>\n        <link rel=\"icon\" type=\"image/png\" href={`${REACT_APP_FAVICON}`} sizes=\"16x16\" />\n      </Helmet>\n      <Router history={history}>\n        <AppContainerElem\n          title={\n            <>\n              {/* {REACT_APP_COMPANY === 'VBMC' ? */}\n              <>\n                <img\n                  alt={`${REACT_APP_COMPANY}`}\n                  src={`${REACT_APP_LOGO}`}\n                  style={{ height: '2em', width: 'auto' }}\n                />\n              </>\n              {/* :\n                <ListItem>\n                  <ListItemAvatar>\n                    <Avatar\n                      alt={`${REACT_APP_COMPANY}`}\n                      src={`${REACT_APP_LOGO}`}\n                    />\n                  </ListItemAvatar>\n                  <ListItemText\n                  // style={{ fontSize: '2em' }}\n                  // primary={`TriBIM`}\n                  >\n                    <Typography\n                      style={{\n                        fontSize: '1.2em'\n                      }}\n                    >\n                      {`TriBIM`}\n                    </Typography>\n                  </ListItemText>\n                </ListItem>\n              } */}\n            </>\n          }\n          menu={Menu}\n        >\n          <Switch>\n            <Route exact path=\"/\" component={IfcRenderer} />\n            <Route exact path=\"/ifcrenderer\" component={IfcRenderer} />\n            <Route path=\"/link-from-tracim\" component={IfcRenderer} />\n          </Switch>\n        </AppContainerElem>\n      </Router>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 25671;\nmodule.exports = webpackEmptyContext;"],"names":["createBrowserHistory","title","classes","handleDrawerOpen","open","REACT_APP_VERSION","process","AppBar","position","className","clsx","appBar","appBarShift","Toolbar","IconButton","color","onClick","edge","menuButton","hide","Menu","Typography","variant","noWrap","style","right","margin","target","href","drawerWidth","useStyles","makeStyles","theme","root","display","transition","transitions","create","easing","sharp","duration","leavingScreen","width","marginLeft","easeOut","enteringScreen","marginRight","spacing","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","padding","mixins","toolbar","justifyContent","content","flexGrow","contentShift","PersistentDrawerLeft","menu","children","useTheme","React","setOpen","CssBaseline","Drawer","anchor","paper","direction","ChevronLeft","ChevronRight","Divider","List","MenuSideBarSup","map","item","index","Link","to","link","textDecoration","ListItem","button","ListItemIcon","Icon","icon","ListItemText","primary","text","MenuSideBarInf","Container","maxWidth","container","media","height","BcfDialog","onClose","onOpenViewpoint","useState","file","setFile","topics","setTopics","fitleredTopics","setFitleredTopics","useEffect","filter","t","viewpoints","length","handleOpenViewpoint","viewpoint","onDrop","useCallback","acceptedFiles","reader","BcfReader","read","console","log","useDropzone","accept","getRootProps","getInputProps","isDragActive","Dialog","fullWidth","disableBackdropClick","DialogTitle","DialogContent","Box","border","borderColor","borderRadius","Grid","topic","i","TopicCard","DialogActions","Button","defaultViewpointUrl","Card","CardActionArea","CardMedia","image","markup","CardContent","gutterBottom","component","description","backgroundColor","opacity","datBimTitle","textAlign","textTransform","createAccountLink","lostPasswordLink","handleSubmit","username","localStorage","getItem","email","setEmail","xs","noValidate","autoComplete","onSubmit","FormControl","TextField","id","label","name","value","onChange","event","type","rel","datBimCard","cursor","datBimCardTitle","loader","marginTop","openObjects","setBreadcrumbMap","handleNext","setActiveStep","portals","setPortals","portalsLoader","setPortalsLoader","getPortalList","axios","headers","sessionStorage","portalList","data","justify","CircularProgress","portal","lg","portal_id","portal_name","search","input","flex","iconButton","keyword","placeholder","onClickOne","onClickTwo","disabled","Paper","InputBase","inputProps","e","onKeyDown","key","preventDefault","ButtonGroup","Search","RotateLeft","selectedPortal","getobjectsSetsBySelectedClass","classListing","setClassListing","treeClassListLoader","setTreeClassListLoader","getTreeClassList","treeClassList","error","TreeView","defaultCollapseIcon","ExpandMore","defaultExpandIcon","defaultExpanded","sx","overflowY","renderTree","nodes","TreeItem","nodeId","Array","isArray","node","flexDirection","datBimCardActionArea","datBimCardContent","fontSize","fontWeight","datBimCardDesc","datBimCardImg","marginBottom","maxHeight","objectFit","noObjectSetsMessage","viewer","setSelectedObjectSet","setSelectedObjectSetName","eids","breadcrumbMap","objectsSetsList","setObjectsSetsList","objectsSetsListDefault","setObjectsSetsListDefault","objectsSetsListWithEIDS","setObjectsSetsListWithEIDS","searchInput","setSearchInput","objectsSetsListLoader","setObjectsSetsListLoader","getObjectsSetsList","getobjectsSetsBySelectedEids","getObjectsSets","objectsSets","classId","objectsSetsBySelectedClass","IFC","ifcManager","getIfcType","ifcClass","Promise","allSettled","treeClassListElement","class_reference_id","then","values","reduce","acc","status","push","getObjectsSetsByKeyWord","organizations","organizationProperty","method","url","organization_id","params","usedList","Breadcrumbs","separator","NavigateNext","slice","filtered","searchByObjectName","object_name","toLowerCase","includes","searchByOrganizationName","organization_name","searchBar","sm","object","object_id","src","img_ref","alt","CardActions","Chip","meta","Pagination","count","current_items","valuetext","isStaticProperty","property_type","property","propertyIndex","configureProperty","Input","text_value","format","Select","list_value","MenuItem","JSON","parse","TableContainer","Table","minWidth","TableBody","row","TableRow","cell","TableCell","scope","RadioGroup","FormControlLabel","control","Radio","marks","min_interval","max_interval","Slider","defaultValue","parseFloat","num_value","getAriaValueText","min","step","Math","pow","floor","log10","max","valueLabelDisplay","underline","borderBottom","datBimList","table","projectId","setLoader","objSelected","selectedObject","bimData","setBimData","modelID","addElementsNewProperties","setEids","handleShowMarketplace","setPropertyListDefault","properties","setProperties","allChecked","setAllChecked","useHistory","getPropertiesValues","dataProp","dataPropFilter","prop","property_visibility","dataWithCheckStatus","checked","temporaryFixProperties","data_type_name","newLink","replace","handleCheckedProperties","checkStatus","newPropertiesArr","inputValue","updatePorperty","newValues","toString","addElementsDatBimProperties","filteredProperties","updateProperties","response","expressIDs","TableHead","align","Checkbox","defaultChecked","property_name","property_definition","Tooltip","placement","Info","DefineTypeComponent","unit","datBIMColor","slider","isStaticSelector","selector_type","selector","selectorsRequest","setSelectorsRequest","getObjectsOfAdvancedSearch","value_min","value_max","selectedRangedValues","setSelectedRangedValues","setInputValue","selectorIndex","newSelectorRequest","checkExist","forEach","select","splice","props","onChangeCommitted","parseInt","selectors","selectorsLoader","resetSelectors","Accordion","AccordionSummary","expandIcon","AccordionDetails","selectedObjectSet","setSelectedObject","searchBarInput","setSearchBarInput","setSelectors","setSelectorsLoader","objectsLoader","setObjectsLoader","objectListing","setObjectListing","selectedObjectName","setSelectedObjectName","getSelectorsOfObjectSet","getObjectsOfSelectedObject","selectorsOfObjectSet","objectsOfAdvancedSearch","result","treeOfObjectSet","childRenderTree","renderedChildren","renderedChild","newCount","concat","getExpandedNodes","list","child","listing","tree","selectedObjectListing","zIndex","headerButton","navigationBar","bottom","modal","modalDatBim","palette","background","boxShadow","shadows","overflow","datBimFooterCard","datBimCardButton","accordionDetails","datBimIcon","useQontoStepIconStyles","active","circle","completed","QontoConnector","withStyles","alternativeLabel","top","left","line","borderTopWidth","StepConnector","s","activeStep","setSelectedPortal","selectedObjectSetName","message","validation","setValidation","init","steps","QontoStepIcon","Check","FormData","setItem","get","entry_mode","ip","lang","local_at","login","password","service","r","token","catch","handleDisconnect","prevActiveStep","KeyboardBackspace","PowerSettingsNew","Stepper","connector","Step","StepLabel","StepIconComponent","instructions","typeProperties","getStepContent","Alert","severity","img","DropBoxLogo","selectedApp","files","fetch","mode","rawResponse","ifcBlob","Blob","File","appKey","success","cancel","multiselect","extensions","CardHeader","avatar","Avatar","subheader","Badge","pill","arrow","Fab","size","REACT_APP_IDS_API_URL","openProperties","setSelectedApp","setLocked","lockProject","unlockProject","updateProject","apiInformation","setApiInformation","handleUpdateProject","state","api","ExportFileAsIFC","ifcData","ifcDataString","TextDecoder","decode","newIfcDataString","ifcFile","query","URLSearchParams","window","location","content_id","space_id","user_id","formData","append","res","UseTracim","locked","lockToken","secondaryAction","icons","FileUpload","disablePadding","heading","typography","pxToRem","fontWeightRegular","cardExpanded","innerWidth","innerHeight","card","cardContent","overflowX","outline","application","paddingTop","fab","applications","OpenDthxLogo","TracimLogo","specificApplication","apiConnectors","setApiConnectors","anchorEl","setAnchorEl","filteredData","setFilteredData","expandedView","setExpandedView","viewWidth","setViewWidth","viewHeight","setViewHeight","resizeListener","addEventListener","removeEventListener","Boolean","undefined","Apps","action","FullscreenExit","Fullscreen","Clear","currentTarget","MoreVert","Popover","anchorOrigin","vertical","horizontal","transformOrigin","dataList","newFilteredData","cardInfo","treeViewLabel","textOverflow","wordWrap","warp","treeViewCheckbox","treeView","buttonGroup","SearchData","handleShowProperties","handleGetJsonData","setChecked","selectedElements","setSelectedElements","loading","all","eid","getProperties","elementProperties","handleElementSelection","element","currentIndex","indexOf","newChecked","handleRemoveAllElements","unpickIfcItems","handleRemoveElement","newEids","expressID","pickIfcItemsByID","downloadFile","fileName","fileType","blob","a","document","createElement","download","URL","createObjectURL","clickEvt","MouseEvent","view","bubbles","cancelable","dispatchEvent","remove","handleExportToCsv","propertiesCsv","join","ifcElement","getModelID","psets","pset","HasProperties","elementName","Name","elementClass","globalID","GlobalId","psetName","propertyName","propertyValue","NominalValue","handleSearchData","flatten","spatialStructures","filteredEids","searchResult","searchEngine","keyWords","Description","ObjectType","some","keyWord","handleResetSearch","Delete","Download","itemCount","itemSize","stopPropagation","Close","ListItemButton","role","dense","memo","treeWalker","spatialStructure","toggleRow","vtree","refVisible","setRefVisible","treeInstance","useRef","setTimeout","current","recomputeTree","Node","isLeaf","nestingLevel","isOpen","exportNodeToCsv","ArrowDropDown","ArrowRight","getNodeData","structure","isOpenByDefault","parentMeta","ref","el","payload","originalStructureTree","hashMapTree","selected","expanded","loadingCursor","Error","hashMapSpatialStructures","hash","parentID","parentsIds","childrenIds","getChildNodes","nodeID","childNodes","traverseChildren","addExpandedNodes","recomputeToVtree","selectedItems","val","manageNodeSelection","oldSelectedItems","selectedTree","indexOfExistingItem","_","selectedItem","Set","highlightOnTreeView","mapSelected","useReducer","reducer","dispatch","refSelectedItems","selectedItemsIds","selectedIFCObject","loadTree","IFCLoader","familyTreeIds","selectedItemsUpdated","computeToTree","newVtree","toggleNode","deselectAllNodes","Tree","ifcModelsClasses","setIfcModelsClasses","newIfcModelsClasses","ifcClasses","WebIFC","toUpperCase","getAllItemsOfType","classEids","IfcIcons","handleShowElement","ids","badgeContent","class","MuiButtonBase","defaultProps","disableRipple","a11yProps","setState","handleShowSpatialStructure","setValue","AccountTree","Tabs","newValue","Tab","TabPanel","other","hidden","p","mapContainer","selectedElementID","setShowProperties","setSelectedElementID","setIfcElement","isLoading","setIsLoading","DecodeIFCString","ifcString","ifcUnicodeRegEx","resultString","match","exec","unicodeChar","String","fromCharCode","newPset","Unit","Prefix","Quantities","mats","elem","handleAddProperties","Add","md","PredefinedType","RegExp","test","linearProgress","baseStyle","borderWidth","borderStyle","setShowValidation","showValidation","useMemo","logs","setLogs","bimModel","setBimModel","progress","setProgress","context","items","ifcModels","models","timeoutIdentifier","handleModelValidation","poll","progressLoading","clearTimeout","blobIfc","analysis","alert","FactCheck","logsCsv","level","instance","time","LinearProgressWithLabel","mr","LinearProgress","round","showCuts","setShowCuts","setCuts","setLoading","clipper","addClippingPlane","createPlane","planes","plans","planLists","handleDeleteClippingPlane","cut","deletePlane","arrowBoundingBox","uuid","activePlan","setPlans","drawings","setDrawings","activeViewIndex","setActiveViewIndex","clippingMaterial","LineMaterial","MeshBasicMaterial","Drawing","IFCWINDOW","IFCPLATE","IFCMEMBER","IFCWALL","IFCWALLSTANDARDCASE","IFCSLAB","IFCDOOR","IFCFURNISHINGELEMENT","IFCSTAIR","IFCSTAIRFLIGHT","IFCRAILING","getDrawings","computeAllPlanViews","newPlans","Object","handleShowPlane","drawing","goTo","handleDeletePlane","exitPlanView","ViewInAr","Visibility","setShowDrawings","showDrawings","ifcPlan","plane","Map","setShowMeasures","showMeasures","setMeasures","allowMeasure","setAllowMeasure","dimensions","previewActive","lineMaterial","LineDashedMaterial","linewidth","depthTest","dashSize","gapSize","handlePrePickIfcItem","addMeasure","handleControlMeasures","prePickIfcItem","code","cancelDrawing","deleteAll","takeMeasure","handleDeleteMeasure","measure","find","dimension","textLabel","findIndex","measureIndex","removeFromScene","showContextMenu","setShowContextMenu","meshMaterials","setShowSpatialStructure","subsets","setSubsets","x","y","anchorPoint","setAnchorPoint","handleContextMenu","pageX","pageY","handleGetAllItemsOfType","elementsByType","handleHideElement","removeFromSubset","handleIsolateElement","ifcModel","allIDs","from","geometry","attributes","array","idsHidden","handleShowModel","createSubset","applyBVH","scene","parent","removePrevious","customID","MenuList","LibraryAdd","VisibilityOff","draggableCard","disableDragging","Rnd","onDragStop","d","onResizeStop","delta","TriBim","this","hello","infoLeftPannel","infoRightPannel","REACT_APP_THIRD_PARTY_API","dropzoneRef","setViewer","setIfcModels","setModelID","setSpatialStructures","showBcfDialog","setShowBcfDialog","showModels","showMarketplace","setShowMarketplace","showSpatialStructure","showProperties","showCamera","setShowCamera","setSpecificApplication","setPercentageLoading","setApiWebIfc","AxeoBim","loadingMessage","alertStatus","alertMessage","bcfDialogOpen","loaded","loadingIfc","openLeftView","leftView","jsonData","setModels","initIndexDB","db","Dexie","version","stores","err","stack","invisibleMaterial","MeshLambertMaterial","transparent","side","DoubleSide","getModels","toArray","allModels","getElementProperties","setElement","pickIfcItem","found","str","v","ifcText","valueType","addOrEditIfcPropertySingleValue","getPropertyValue","ifcPropertySingleValue","ifc_type","rawLineIfcPropertySingleValue","ID","arguments","ToTape","addOrEditIfcPropertySet","globalId","ifcOwnerHistoryExpressID","ifcPropertySingleValueExpressIDs","ifcPropertySet","rawLineIfcPropertySet","addOrEditIfcRelDefinesByProperties","elementsList","ifcPropertySetExpressID","ifcRelDefinesByProperties","rawLineIfcRelDefinesByProperties","opendthxUpdateProperties","modelId","model","database","manager","ifcAPI","GetAllLines","allLines","maxExpressId","keys","_data","IFCOWNERHISTORY","ifcOwnerHistory","eidIfcOwnerHistory","PsetSearch","IFCRELDEFINESBYPROPERTIES","relPsetIDs","t0","Date","relPsetID","relPset","relPsetRelatingPropertyDefinition","RelatingPropertyDefinition","relPsetRelatedObjects","RelatedObjects","checkExpressID","relPsetRelatedObjectIndex","relPsetRelatedObject","getItemProperties","newRelPset","WriteLine","t1","difference","getTime","ifcPropertySingleValueEid","newPsetOpendthXEids","IFCPROPERTYSINGLEVALUE","ifc_property_name","WriteRawLineData","ifcPropertySetEid","IFCPROPERTYSET","random","substr","ifcRelDefinesByPropertiesEid","serializeAllProperties","total","formatted","trunc","newProperties","t2","editIfcModel","newPsetIFCEids","propertySingleValueExpressId","existingPsetList","existingPropertyList","ifc_class","existingPset","existingProperty","existingPsetPropertyEids","handleInitSubset","subset","getWholeSubset","replaceOriginalModelBySubset","pickableIfcModels","removeFromParent","addTransformControls","renderer","camera","ifcCamera","activeCamera","orbitControls","controls","Mesh","BoxGeometry","add","transformControls","TransformControls","domElement","render","enabled","attach","handleCheckNetworkStatus","changeStatus","navigator","onLine","UseIfcRenderer","addGeometryToIfc","getElementById","newViewer","IfcViewerAPI","Color","ifcApi","setWasmPath","applyWebIfcConfig","COORDINATE_TO_ORIGIN","USE_FAST_BOOLS","useWebWorkers","handleInitAxeoBim","handleInitTracim","setOnProgress","percentage","parser","setupOptionalCategories","IFCSPACE","IFCOPENINGELEMENT","IFCSTRUCTURALANALYSISMODEL","IFCSTRUCTURALSURFACEMEMBER","IFCSTRUCTURALCURVEMEMBER","loadIfc","ifcOnLoadError","newIfcModels","getSpatialStructure","newSpatialStructure","updateSpatialStructures","tribim","accessToken","refreshToken","handleGetAxeoBimModel","idDocument","idEnvironnement","access_token","refresh_token","resGetModel","resLockModel","lock_token","pick","handleClick","shiftKey","specificApp","selectedElemID","handleDownloadIfc","setAttribute","encodeURIComponent","body","appendChild","click","removeChild","currentViewpoint","FolderOpenOutlined","Crop","Straighten","newScreenshot","Vector2","date","PhotoCamera","reload","Refresh","GetApp","ANCTPng","AgriboisValeurPng","BIMLibrePng","Backdrop","alignContent","MenuNavBar","REACT_APP_FAVICON","REACT_APP_LOGO","REACT_APP_COMPANY","prefersDarkMode","useMediaQuery","createMuiTheme","main","secondary","ThemeProvider","sizes","Router","history","Switch","Route","exact","path","IfcRenderer","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","origin","contentType","ready","unregister","checkValidServiceWorker","webpackEmptyContext","req","resolve","module","exports"],"sourceRoot":""}