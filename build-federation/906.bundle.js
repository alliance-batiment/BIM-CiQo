/*! For license information please see 906.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkciqo=self.webpackChunkciqo||[]).push([[906],{89873:function(t,e,n){n.d(e,{K:function(){return U}});var r=n(39544),i=n(54288),o=n(43045),a=n(54314),s=n(55248),l=n(58618),c=n(21324),u=n(56289),f=new u.Box3,h=new u.Vector3,p=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,a.Z)(this,n),(t=e.call(this)).type="LineSegmentsGeometry";return t.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),t.setAttribute("position",new u.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),t.setAttribute("uv",new u.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),t}return(0,s.Z)(n,[{key:"applyMatrix4",value:function(t){var e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),n.applyMatrix4(t),e.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"setPositions",value:function(t){var e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));var n=new u.InstancedInterleavedBuffer(e,6,1);return this.setAttribute("instanceStart",new u.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new u.InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}},{key:"setColors",value:function(t){var e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));var n=new u.InstancedInterleavedBuffer(e,6,1);return this.setAttribute("instanceColorStart",new u.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceColorEnd",new u.InterleavedBufferAttribute(n,3,3)),this}},{key:"fromWireframeGeometry",value:function(t){return this.setPositions(t.attributes.position.array),this}},{key:"fromEdgesGeometry",value:function(t){return this.setPositions(t.attributes.position.array),this}},{key:"fromMesh",value:function(t){return this.fromWireframeGeometry(new u.WireframeGeometry(t.geometry)),this}},{key:"fromLineSegments",value:function(t){var e=t.geometry;if(!e.isGeometry)return e.isBufferGeometry&&this.setPositions(e.attributes.position.array),this;console.error("THREE.LineSegmentsGeometry no longer supports Geometry. Use THREE.BufferGeometry instead.")}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new u.Box3);var t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),f.setFromBufferAttribute(e),this.boundingBox.union(f))}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new u.Sphere),null===this.boundingBox&&this.computeBoundingBox();var t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){var n=this.boundingSphere.center;this.boundingBox.getCenter(n);for(var r=0,i=0,o=t.count;i<o;i++)h.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(h)),h.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(h));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}},{key:"toJSON",value:function(){}},{key:"applyMatrix",value:function(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}]),n}(u.InstancedBufferGeometry);p.prototype.isLineSegmentsGeometry=!0;var d=n(26146),m=new u.Vector3,v=new u.Vector3,y=new u.Vector4,w=new u.Vector4,g=new u.Vector4,b=new u.Vector3,x=new u.Matrix4,S=new u.Line3,M=new u.Vector3,E=new u.Box3,P=new u.Sphere,_=new u.Vector4;function I(t,e,n,r){return _.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),_.multiplyScalar(1/_.w),_.x=n/r.width,_.y=n/r.height,_.applyMatrix4(t.projectionMatrixInverse),_.multiplyScalar(1/_.w),Math.abs(Math.max(_.x,_.y))}var A=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new d.Y({color:16777215*Math.random()});return(0,a.Z)(this,n),(t=e.call(this,r,i)).type="LineSegments2",t}return(0,s.Z)(n,[{key:"computeLineDistances",value:function(){for(var t=this.geometry,e=t.attributes.instanceStart,n=t.attributes.instanceEnd,r=new Float32Array(2*e.count),i=0,o=0,a=e.count;i<a;i++,o+=2)m.fromBufferAttribute(e,i),v.fromBufferAttribute(n,i),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+m.distanceTo(v);var s=new u.InstancedInterleavedBuffer(r,2,1);return t.setAttribute("instanceDistanceStart",new u.InterleavedBufferAttribute(s,1,0)),t.setAttribute("instanceDistanceEnd",new u.InterleavedBufferAttribute(s,1,1)),this}},{key:"raycast",value:function(t,e){null===t.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var n=void 0!==t.params.Line2&&t.params.Line2.threshold||0,r=t.ray,i=t.camera,o=i.projectionMatrix,a=this.matrixWorld,s=this.geometry,l=this.material,c=l.resolution,f=l.linewidth+n,h=s.attributes.instanceStart,p=s.attributes.instanceEnd,d=-i.near;null===s.boundingSphere&&s.computeBoundingSphere(),P.copy(s.boundingSphere).applyMatrix4(a);var m=I(i,Math.max(i.near,P.distanceToPoint(r.origin)),f,c);if(P.radius+=m,!1!==t.ray.intersectsSphere(P)){null===s.boundingBox&&s.computeBoundingBox(),E.copy(s.boundingBox).applyMatrix4(a);var v=I(i,Math.max(i.near,E.distanceToPoint(r.origin)),f,c);if(E.max.x+=v,E.max.y+=v,E.max.z+=v,E.min.x-=v,E.min.y-=v,E.min.z-=v,!1!==t.ray.intersectsBox(E)){r.at(1,g),g.w=1,g.applyMatrix4(i.matrixWorldInverse),g.applyMatrix4(o),g.multiplyScalar(1/g.w),g.x*=c.x/2,g.y*=c.y/2,g.z=0,b.copy(g),x.multiplyMatrices(i.matrixWorldInverse,a);for(var _=0,A=h.count;_<A;_++){if(y.fromBufferAttribute(h,_),w.fromBufferAttribute(p,_),y.w=1,w.w=1,y.applyMatrix4(x),w.applyMatrix4(x),!(y.z>d&&w.z>d)){if(y.z>d){var Z=y.z-w.z,U=(y.z-d)/Z;y.lerp(w,U)}else if(w.z>d){var D=w.z-y.z,B=(w.z-d)/D;w.lerp(y,B)}y.applyMatrix4(o),w.applyMatrix4(o),y.multiplyScalar(1/y.w),w.multiplyScalar(1/w.w),y.x*=c.x/2,y.y*=c.y/2,w.x*=c.x/2,w.y*=c.y/2,S.start.copy(y),S.start.z=0,S.end.copy(w),S.end.z=0;var L=S.closestPointToPointParameter(b,!0);S.at(L,M);var O=u.MathUtils.lerp(y.z,w.z,L),k=O>=-1&&O<=1,G=b.distanceTo(M)<.5*f;if(k&&G){S.start.fromBufferAttribute(h,_),S.end.fromBufferAttribute(p,_),S.start.applyMatrix4(a),S.end.applyMatrix4(a);var z=new u.Vector3,T=new u.Vector3;r.distanceSqToSegment(S.start,S.end,T,z),e.push({point:T,pointOnLine:z,distance:r.origin.distanceTo(T),object:this,face:null,faceIndex:_,uv:null,uv2:null})}}}}}}}]),n}(u.Mesh);A.prototype.isLineSegments2=!0;var Z=n(78041),U=function(){function t(e){(0,a.Z)(this,t),this.edges={},this.isVisible=!0,this.inverseMatrix=new u.Matrix4,this.localPlane=new u.Plane,this.tempLine=new u.Line3,this.tempVector=new u.Vector3,this.stylesInitialized=!1,this.clippingPlane=e}return(0,s.Z)(t,[{key:"visible",get:function(){return this.isVisible},set:function(e){this.isVisible=e,Object.values(this.edges).forEach((function(n){n.mesh.visible=e,e?t.context.getScene().add(n.mesh):n.mesh.removeFromParent()})),e&&this.updateEdges()}},{key:"dispose",value:function(){Object.values(this.edges).forEach((function(t){t.generatorGeometry.boundsTree&&t.generatorGeometry.disposeBoundsTree(),t.generatorGeometry.dispose(),t.mesh.geometry.boundsTree&&t.mesh.geometry.disposeBoundsTree(),t.mesh.geometry.dispose(),t.mesh.removeFromParent(),t.mesh=null})),this.edges=null,this.clippingPlane=null}},{key:"disposeStylesAndHelpers",value:function(){(t.basicEdges&&(t.basicEdges.removeFromParent(),t.basicEdges.geometry.dispose(),t.basicEdges=null,t.basicEdges=new u.LineSegments),t.context=null,t.ifc=null,t.edgesParent=void 0,t.styles)&&(Object.values(t.styles).forEach((function(t){t.ids.length=0,t.meshes.forEach((function(t){t.removeFromParent(),t.geometry.dispose(),t.geometry.boundsTree&&t.geometry.disposeBoundsTree(),Array.isArray(t.material)?t.material.forEach((function(t){return t.dispose()})):t.material.dispose()})),t.meshes.length=0,t.categories.length=0,t.material.dispose()})),t.styles=null,t.styles={})}},{key:"updateEdges",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.createDefaultIfcStyles){e.next=3;break}return e.next=3,this.updateIfcStyles();case 3:t.forceStyleUpdate&&this.updateSubsetsTranformation(),Object.keys(t.styles).forEach((function(t){try{n.drawEdges(t)}catch(e){console.error("error in drawing edges",e)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateStylesIfcGeometry",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n,r,o,a,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object.keys(t.styles),r=0;case 2:if(!(r<n.length)){e.next=19;break}o=n[r],a=t.styles[o],s=t.context.items.ifcModels,a.meshes.length=0,l=0;case 8:if(!(l<s.length)){e.next=16;break}return e.next=11,t.newSubset(o,s[l],a.categories);case 11:(c=e.sent)&&a.meshes.push(c);case 13:l++,e.next=8;break;case 16:r++,e.next=2;break;case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateSubsetsTranformation",value:function(){for(var e=Object.keys(t.styles),n=0;n<e.length;n++){var r=e[n];t.styles[r].meshes.forEach((function(e){var n=t.context.items.ifcModels.find((function(t){return t.modelID===e.modelID}));n&&(e.position.copy(n.position),e.rotation.copy(n.rotation),e.scale.copy(n.scale))}))}t.forceStyleUpdate=!1}},{key:"updateIfcStyles",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stylesInitialized){e.next=3;break}return e.next=3,this.createDefaultIfcStyles();case 3:if(!t.forceStyleUpdate){e.next=7;break}return e.next=6,this.updateStylesIfcGeometry();case 6:t.forceStyleUpdate=!1;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDefaultIfcStyles",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(t.styles).length){e.next=6;break}return e.next=3,t.newStyle("thick",[Z.IFCWALLSTANDARDCASE,Z.IFCWALL,Z.IFCSLAB,Z.IFCSTAIRFLIGHT,Z.IFCCOLUMN,Z.IFCBEAM,Z.IFCROOF,Z.IFCBUILDINGELEMENTPROXY,Z.IFCPROXY],new d.Y({color:0,linewidth:.0015}));case 3:return e.next=5,t.newStyle("thin",[Z.IFCWINDOW,Z.IFCPLATE,Z.IFCMEMBER,Z.IFCDOOR,Z.IFCFURNISHINGELEMENT,Z.IFCPROXY,Z.IFCBUILDINGELEMENTPROXY,Z.IFCFOOTING],new d.Y({color:3355443,linewidth:.001}));case 5:this.stylesInitialized=!0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"newThickEdges",value:function(e){var n=t.styles[e].material,r=new p,i=new A(r,n);return i.material.polygonOffset=!0,i.material.polygonOffsetFactor=-2,i.material.polygonOffsetUnits=1,i.renderOrder=3,i}},{key:"drawEdges",value:function(e){var n=this,r=t.styles[e];this.edges[e]||(this.edges[e]={generatorGeometry:t.newGeneratorGeometry(),mesh:this.newThickEdges(e)});var i=this.edges[e],o=0,a=i.generatorGeometry.attributes.position;(a.array.fill(0),r.meshes.filter((function(t){return t.geometry})).forEach((function(t){if(!t.geometry.boundsTree)throw new Error("Boundstree not found for clipping edges subset.");n.inverseMatrix.copy(t.matrixWorld).invert(),n.localPlane.copy(n.clippingPlane).applyMatrix4(n.inverseMatrix),t.geometry.boundsTree.shapecast({intersectsBounds:function(t){return n.localPlane.intersectsBox(t)},intersectsTriangle:function(e){var r=0;if(n.tempLine.start.copy(e.a),n.tempLine.end.copy(e.b),n.localPlane.intersectLine(n.tempLine,n.tempVector)){var i=n.tempVector.applyMatrix4(t.matrixWorld);a.setXYZ(o,i.x,i.y,i.z),r++,o++}if(n.tempLine.start.copy(e.b),n.tempLine.end.copy(e.c),n.localPlane.intersectLine(n.tempLine,n.tempVector)){var s=n.tempVector.applyMatrix4(t.matrixWorld);a.setXYZ(o,s.x,s.y,s.z),r++,o++}if(n.tempLine.start.copy(e.c),n.tempLine.end.copy(e.a),n.localPlane.intersectLine(n.tempLine,n.tempVector)){var l=n.tempVector.applyMatrix4(t.matrixWorld);a.setXYZ(o,l.x,l.y,l.z),r++,o++}2!==r&&(o-=r)}})})),i.mesh.geometry.setDrawRange(0,o),i.mesh.position.copy(this.clippingPlane.normal).multiplyScalar(1e-4),a.needsUpdate=!0,Number.isNaN(i.generatorGeometry.attributes.position.array[0]))||(t.basicEdges.geometry=i.generatorGeometry,i.mesh.geometry.fromLineSegments(t.basicEdges),(t.edgesParent||t.context.getScene()).add(i.mesh),t.context.renderer.postProduction.excludedItems.add(i.mesh))}}],[{key:"newGeneratorGeometry",value:function(){var t=new u.BufferGeometry,e=new u.BufferAttribute(new Float32Array(3e5),3,!1);return e.setUsage(u.DynamicDrawUsage),t.setAttribute("position",e),t}},{key:"newStyle",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o,a,s,l,c,u=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=u.length>2&&void 0!==u[2]?u[2]:t.defaultMaterial,a=[],s=t.context.items.ifcModels,l=0;case 4:if(!(l<s.length)){e.next=12;break}return e.next=7,t.newSubset(n,s[l],r);case 7:(c=e.sent)&&a.push(c);case 9:l++,e.next=4;break;case 12:o.clippingPlanes=t.context.getClippingPlanes(),t.styles[n]={ids:s.map((function(t){return t.modelID})),categories:r,material:o,meshes:a};case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"newStyleFromMesh",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r){var o,a,s=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=s.length>2&&void 0!==s[2]?s[2]:t.defaultMaterial,a=r.map((function(t){return t.modelID})),r.forEach((function(t){t.geometry.boundsTree||t.geometry.computeBoundsTree()})),o.clippingPlanes=t.context.getClippingPlanes(),t.styles[n]={ids:a,categories:[],material:o,meshes:r};case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"newSubset",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,r,o){var a,s,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.modelID,e.next=3,this.getItemIDs(a,o);case 3:if((s=e.sent).length){e.next=6;break}return e.abrupt("return",null);case 6:return l=this.ifc.loader.ifcManager,(c=s.length>0?l.createSubset({modelID:a,ids:s,customID:n,material:t.invisibleMaterial,removePrevious:!0,scene:t.context.getScene(),applyBVH:!0}):l.getSubset(a,t.invisibleMaterial,n)).position.copy(r.position),c.rotation.copy(r.rotation),c.scale.copy(r.scale),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getItemIDs",value:function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,n){var o,a,s,l;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],a=0;case 2:if(!(a<n.length)){t.next=10;break}return t.next=5,this.ifc.getAllItemsOfType(e,n[a],!1);case 5:s=t.sent,o.push.apply(o,(0,r.Z)(s));case 7:a++,t.next=2;break;case 10:return l=this.getVisibileItems(e),t.abrupt("return",o.filter((function(t){return l.has(t)})));case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getVisibileItems",value:function(t){var e=new Set,n=this.context.items.ifcModels.find((function(e){return e.modelID===t}));if(!n)throw new Error("IFC model was not found for computing clipping edges.");if(!n.geometry.index)throw new Error("Indices were not found for clipping edges.");return new Set(n.geometry.index.array).forEach((function(t){e.add(n.geometry.attributes.expressID.getX(t))})),e}}]),t}();U.styles={},U.forceStyleUpdate=!1,U.createDefaultIfcStyles=!0,U.edgesParent=null,U.invisibleMaterial=new u.MeshBasicMaterial({visible:!1}),U.defaultMaterial=new d.Y({color:0,linewidth:.001}),U.basicEdges=new u.LineSegments},96090:function(t,e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{Z:function(){return r}})},43045:function(t,e,n){function r(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,l,"next",t)}function l(t){r(a,i,o,s,l,"throw",t)}s(void 0)}))}}n.d(e,{Z:function(){return i}})},30070:function(t,e,n){n.d(e,{Z:function(){return i}});var r=n(48233);function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,r.Z)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}},21324:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(73246);var i=n(8073);function o(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=(0,r.Z)(t);if(e){var a=(0,r.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,i.Z)(this,n)}}},64081:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(73246);function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,r.Z)(t)););return t}function o(){return o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},o.apply(this,arguments)}},73246:function(t,e,n){function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,{Z:function(){return r}})},58618:function(t,e,n){function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}n.d(e,{Z:function(){return i}})},63931:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(2721);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},8073:function(t,e,n){n.d(e,{Z:function(){return o}});var r=n(70556),i=n(96090);function o(t,e){if(e&&("object"===(0,r.Z)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(t)}},54288:function(t,e,n){n.d(e,{Z:function(){return i}});var r=n(70556);function i(){i=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(A){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof p?e:p,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=u;var h={};function p(){}function d(){}function m(){}var v={};c(v,a,(function(){return this}));var y=Object.getPrototypeOf,w=y&&y(y(_([])));w&&w!==e&&n.call(w,a)&&(v=w);var g=m.prototype=p.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,s,l){var c=f(t[o],t,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==(0,r.Z)(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,l)}),(function(t){i("throw",t,s,l)})):e.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return i("throw",t,s,l)}))}l(c.arg)}var o;this._invoke=function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}}function S(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=f(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=m,c(g,"constructor",m),c(m,"constructor",d),d.displayName=c(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,l,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},b(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(g),c(g,l,"Generator"),c(g,a,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}},70556:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{Z:function(){return r}})},61193:function(t,e,n){n.d(e,{Ys:function(){return b}});var r=n(54314),i=n(55248),o=n(96090),a=n(64081),s=n(73246),l=n(58618),c=n(21324),u=n(56289),f=new u.Raycaster,h=new u.Vector3,p=new u.Vector3,d=new u.Quaternion,m={X:new u.Vector3(1,0,0),Y:new u.Vector3(0,1,0),Z:new u.Vector3(0,0,1)},v={type:"change"},y={type:"mouseDown"},w={type:"mouseUp",mode:null},g={type:"objectChange"},b=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(t,i){var a;(0,r.Z)(this,n),a=e.call(this),void 0===i&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),i=document),a.visible=!1,a.domElement=i,a.domElement.style.touchAction="none";var s=new F;a._gizmo=s,a.add(s);var l=new V;a._plane=l,a.add(l);var c=(0,o.Z)(a);function f(t,e){var n=e;Object.defineProperty(c,t,{get:function(){return void 0!==n?n:e},set:function(e){n!==e&&(n=e,l[t]=e,s[t]=e,c.dispatchEvent({type:t+"-changed",value:e}),c.dispatchEvent(v))}}),c[t]=e,l[t]=e,s[t]=e}f("camera",t),f("object",void 0),f("enabled",!0),f("axis",null),f("mode","translate"),f("translationSnap",null),f("rotationSnap",null),f("scaleSnap",null),f("space","world"),f("size",1),f("dragging",!1),f("showX",!0),f("showY",!0),f("showZ",!0);var h=new u.Vector3,p=new u.Vector3,d=new u.Quaternion,m=new u.Quaternion,y=new u.Vector3,w=new u.Quaternion,g=new u.Vector3,b=new u.Vector3,_=new u.Vector3,I=new u.Vector3;return f("worldPosition",h),f("worldPositionStart",p),f("worldQuaternion",d),f("worldQuaternionStart",m),f("cameraPosition",y),f("cameraQuaternion",w),f("pointStart",g),f("pointEnd",b),f("rotationAxis",_),f("rotationAngle",0),f("eye",I),a._offset=new u.Vector3,a._startNorm=new u.Vector3,a._endNorm=new u.Vector3,a._cameraScale=new u.Vector3,a._parentPosition=new u.Vector3,a._parentQuaternion=new u.Quaternion,a._parentQuaternionInv=new u.Quaternion,a._parentScale=new u.Vector3,a._worldScaleStart=new u.Vector3,a._worldQuaternionInv=new u.Quaternion,a._worldScale=new u.Vector3,a._positionStart=new u.Vector3,a._quaternionStart=new u.Quaternion,a._scaleStart=new u.Vector3,a._getPointer=x.bind((0,o.Z)(a)),a._onPointerDown=M.bind((0,o.Z)(a)),a._onPointerHover=S.bind((0,o.Z)(a)),a._onPointerMove=E.bind((0,o.Z)(a)),a._onPointerUp=P.bind((0,o.Z)(a)),a.domElement.addEventListener("pointerdown",a._onPointerDown),a.domElement.addEventListener("pointermove",a._onPointerHover),a.domElement.addEventListener("pointerup",a._onPointerUp),a}return(0,i.Z)(n,[{key:"updateMatrixWorld",value:function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),(0,a.Z)((0,s.Z)(n.prototype),"updateMatrixWorld",this).call(this,this)}},{key:"pointerHover",value:function(t){if(void 0!==this.object&&!0!==this.dragging){f.setFromCamera(t,this.camera);var e=_(this._gizmo.picker[this.mode],f);this.axis=e?e.object.name:null}}},{key:"pointerDown",value:function(t){if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){f.setFromCamera(t,this.camera);var e=_(this._plane,f,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,y.mode=this.mode,this.dispatchEvent(y)}}},{key:"pointerMove",value:function(t){var e=this.axis,n=this.mode,r=this.object,i=this.space;if("scale"===n?i="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(i="world"),void 0!==r&&null!==e&&!1!==this.dragging&&-1===t.button){f.setFromCamera(t,this.camera);var o=_(this._plane,f,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===i&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===i&&(r.position.applyQuaternion(d.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===i&&(r.parent&&r.position.add(h.setFromMatrixPosition(r.parent.matrixWorld)),-1!==e.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(h.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){var a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),p.set(a,a,a)}else h.copy(this.pointStart),p.copy(this.pointEnd),h.applyQuaternion(this._worldQuaternionInv),p.applyQuaternion(this._worldQuaternionInv),p.divide(h),-1===e.search("X")&&(p.x=1),-1===e.search("Y")&&(p.y=1),-1===e.search("Z")&&(p.z=1);r.scale.copy(this._scaleStart).multiply(p),this.scaleSnap&&(-1!==e.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);var s=20/this.worldPosition.distanceTo(h.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(h.copy(this.rotationAxis).cross(this.eye))*s):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(m[e]),h.copy(m[e]),"local"===i&&h.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(h.cross(this.eye).normalize())*s),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==e&&"XYZE"!==e?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(d.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(d.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(v),this.dispatchEvent(g)}}}},{key:"pointerUp",value:function(t){0===t.button&&(this.dragging&&null!==this.axis&&(w.mode=this.mode,this.dispatchEvent(w)),this.dragging=!1,this.axis=null)}},{key:"dispose",value:function(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}},{key:"attach",value:function(t){return this.object=t,this.visible=!0,this}},{key:"detach",value:function(){return this.object=void 0,this.visible=!1,this.axis=null,this}},{key:"getRaycaster",value:function(){return f}},{key:"getMode",value:function(){return this.mode}},{key:"setMode",value:function(t){this.mode=t}},{key:"setTranslationSnap",value:function(t){this.translationSnap=t}},{key:"setRotationSnap",value:function(t){this.rotationSnap=t}},{key:"setScaleSnap",value:function(t){this.scaleSnap=t}},{key:"setSize",value:function(t){this.size=t}},{key:"setSpace",value:function(t){this.space=t}},{key:"update",value:function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}]),n}(u.Object3D);function x(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};var e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}function S(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function M(t){this.enabled&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function E(t){this.enabled&&this.pointerMove(this._getPointer(t))}function P(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function _(t,e,n){for(var r=e.intersectObject(t,!0),i=0;i<r.length;i++)if(r[i].object.visible||n)return r[i];return!1}b.prototype.isTransformControls=!0;var I=new u.Euler,A=new u.Vector3(0,1,0),Z=new u.Vector3(0,0,0),U=new u.Matrix4,D=new u.Quaternion,B=new u.Quaternion,L=new u.Vector3,O=new u.Matrix4,k=new u.Vector3(1,0,0),G=new u.Vector3(0,1,0),z=new u.Vector3(0,0,1),T=new u.Vector3,j=new u.Vector3,C=new u.Vector3,F=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;(0,r.Z)(this,n),(t=e.call(this)).type="TransformControlsGizmo";var i=new u.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),o=new u.LineBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),a=i.clone();a.opacity=.15;var s=o.clone();s.opacity=.5;var l=i.clone();l.color.setHex(16711680);var c=i.clone();c.color.setHex(65280);var f=i.clone();f.color.setHex(255);var h=i.clone();h.color.setHex(16711680),h.opacity=.5;var p=i.clone();p.color.setHex(65280),p.opacity=.5;var d=i.clone();d.color.setHex(255),d.opacity=.5;var m=i.clone();m.opacity=.25;var v=i.clone();v.color.setHex(16776960),v.opacity=.25,i.clone().color.setHex(16776960);var y=i.clone();y.color.setHex(7895160);var w=new u.CylinderGeometry(0,.04,.1,12);w.translate(0,.05,0);var g=new u.BoxGeometry(.08,.08,.08);g.translate(0,.04,0);var b=new u.BufferGeometry;b.setAttribute("position",new u.Float32BufferAttribute([0,0,0,1,0,0],3));var x=new u.CylinderGeometry(.0075,.0075,.5,3);function S(t,e){var n=new u.TorusGeometry(t,.0075,3,64,e*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}x.translate(0,.25,0);var M={X:[[new u.Mesh(w,l),[.5,0,0],[0,0,-Math.PI/2]],[new u.Mesh(w,l),[-.5,0,0],[0,0,Math.PI/2]],[new u.Mesh(x,l),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new u.Mesh(w,c),[0,.5,0]],[new u.Mesh(w,c),[0,-.5,0],[Math.PI,0,0]],[new u.Mesh(x,c)]],Z:[[new u.Mesh(w,f),[0,0,.5],[Math.PI/2,0,0]],[new u.Mesh(w,f),[0,0,-.5],[-Math.PI/2,0,0]],[new u.Mesh(x,f),null,[Math.PI/2,0,0]]],XYZ:[[new u.Mesh(new u.OctahedronGeometry(.1,0),m.clone()),[0,0,0]]],XY:[[new u.Mesh(new u.BoxGeometry(.15,.15,.01),d.clone()),[.15,.15,0]]],YZ:[[new u.Mesh(new u.BoxGeometry(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new u.Mesh(new u.BoxGeometry(.15,.15,.01),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},E={X:[[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,.3,0]],[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new u.Mesh(new u.OctahedronGeometry(.2,0),a)]],XY:[[new u.Mesh(new u.BoxGeometry(.2,.2,.01),a),[.15,.15,0]]],YZ:[[new u.Mesh(new u.BoxGeometry(.2,.2,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new u.Mesh(new u.BoxGeometry(.2,.2,.01),a),[.15,0,.15],[-Math.PI/2,0,0]]]},P={START:[[new u.Mesh(new u.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],END:[[new u.Mesh(new u.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],DELTA:[[new u.Line(function(){var t=new u.BufferGeometry;return t.setAttribute("position",new u.Float32BufferAttribute([0,0,0,1,1,1],3)),t}(),s),null,null,null,"helper"]],X:[[new u.Line(b,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new u.Line(b,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new u.Line(b,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},_={XYZE:[[new u.Mesh(S(.5,1),y),null,[0,Math.PI/2,0]]],X:[[new u.Mesh(S(.5,.5),l)]],Y:[[new u.Mesh(S(.5,.5),c),null,[0,0,-Math.PI/2]]],Z:[[new u.Mesh(S(.5,.5),f),null,[0,Math.PI/2,0]]],E:[[new u.Mesh(S(.75,1),v),null,[0,Math.PI/2,0]]]},I={AXIS:[[new u.Line(b,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},A={XYZE:[[new u.Mesh(new u.SphereGeometry(.25,10,8),a)]],X:[[new u.Mesh(new u.TorusGeometry(.5,.1,4,24),a),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new u.Mesh(new u.TorusGeometry(.5,.1,4,24),a),[0,0,0],[Math.PI/2,0,0]]],Z:[[new u.Mesh(new u.TorusGeometry(.5,.1,4,24),a),[0,0,0],[0,0,-Math.PI/2]]],E:[[new u.Mesh(new u.TorusGeometry(.75,.1,2,24),a)]]},Z={X:[[new u.Mesh(g,l),[.5,0,0],[0,0,-Math.PI/2]],[new u.Mesh(x,l),[0,0,0],[0,0,-Math.PI/2]],[new u.Mesh(g,l),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new u.Mesh(g,c),[0,.5,0]],[new u.Mesh(x,c)],[new u.Mesh(g,c),[0,-.5,0],[0,0,Math.PI]]],Z:[[new u.Mesh(g,f),[0,0,.5],[Math.PI/2,0,0]],[new u.Mesh(x,f),[0,0,0],[Math.PI/2,0,0]],[new u.Mesh(g,f),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new u.Mesh(new u.BoxGeometry(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new u.Mesh(new u.BoxGeometry(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new u.Mesh(new u.BoxGeometry(.15,.15,.01),p),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new u.Mesh(new u.BoxGeometry(.1,.1,.1),m.clone())]]},U={X:[[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[.3,0,0],[0,0,-Math.PI/2]],[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,.3,0]],[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,-.3,0],[0,0,Math.PI]]],Z:[[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,0,.3],[Math.PI/2,0,0]],[new u.Mesh(new u.CylinderGeometry(.2,0,.6,4),a),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new u.Mesh(new u.BoxGeometry(.2,.2,.01),a),[.15,.15,0]]],YZ:[[new u.Mesh(new u.BoxGeometry(.2,.2,.01),a),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new u.Mesh(new u.BoxGeometry(.2,.2,.01),a),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new u.Mesh(new u.BoxGeometry(.2,.2,.2),a),[0,0,0]]]},D={X:[[new u.Line(b,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new u.Line(b,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new u.Line(b,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function B(t){var e=new u.Object3D;for(var n in t)for(var r=t[n].length;r--;){var i=t[n][r][0].clone(),o=t[n][r][1],a=t[n][r][2],s=t[n][r][3],l=t[n][r][4];i.name=n,i.tag=l,o&&i.position.set(o[0],o[1],o[2]),a&&i.rotation.set(a[0],a[1],a[2]),s&&i.scale.set(s[0],s[1],s[2]),i.updateMatrix();var c=i.geometry.clone();c.applyMatrix4(i.matrix),i.geometry=c,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),e.add(i)}return e}return t.gizmo={},t.picker={},t.helper={},t.add(t.gizmo.translate=B(M)),t.add(t.gizmo.rotate=B(_)),t.add(t.gizmo.scale=B(Z)),t.add(t.picker.translate=B(E)),t.add(t.picker.rotate=B(A)),t.add(t.picker.scale=B(U)),t.add(t.helper.translate=B(P)),t.add(t.helper.rotate=B(I)),t.add(t.helper.scale=B(D)),t.picker.translate.visible=!1,t.picker.rotate.visible=!1,t.picker.scale.visible=!1,t}return(0,i.Z)(n,[{key:"updateMatrixWorld",value:function(t){var e=this,r="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:B;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var i=[];i=(i=(i=i.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var o=function(t){var n=i[t];n.visible=!0,n.rotation.set(0,0,0),n.position.copy(e.worldPosition);var o=void 0;if(o=e.camera.isOrthographicCamera?(e.camera.top-e.camera.bottom)/e.camera.zoom:e.worldPosition.distanceTo(e.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*e.camera.fov/360)/e.camera.zoom,7),n.scale.set(1,1,1).multiplyScalar(o*e.size/4),"helper"===n.tag)return n.visible=!1,"AXIS"===n.name?(n.position.copy(e.worldPositionStart),n.visible=!!e.axis,"X"===e.axis&&(d.setFromEuler(I.set(0,0,0)),n.quaternion.copy(r).multiply(d),Math.abs(A.copy(k).applyQuaternion(r).dot(e.eye))>.9&&(n.visible=!1)),"Y"===e.axis&&(d.setFromEuler(I.set(0,0,Math.PI/2)),n.quaternion.copy(r).multiply(d),Math.abs(A.copy(G).applyQuaternion(r).dot(e.eye))>.9&&(n.visible=!1)),"Z"===e.axis&&(d.setFromEuler(I.set(0,Math.PI/2,0)),n.quaternion.copy(r).multiply(d),Math.abs(A.copy(z).applyQuaternion(r).dot(e.eye))>.9&&(n.visible=!1)),"XYZE"===e.axis&&(d.setFromEuler(I.set(0,Math.PI/2,0)),A.copy(e.rotationAxis),n.quaternion.setFromRotationMatrix(U.lookAt(Z,A,G)),n.quaternion.multiply(d),n.visible=e.dragging),"E"===e.axis&&(n.visible=!1)):"START"===n.name?(n.position.copy(e.worldPositionStart),n.visible=e.dragging):"END"===n.name?(n.position.copy(e.worldPosition),n.visible=e.dragging):"DELTA"===n.name?(n.position.copy(e.worldPositionStart),n.quaternion.copy(e.worldQuaternionStart),h.set(1e-10,1e-10,1e-10).add(e.worldPositionStart).sub(e.worldPosition).multiplyScalar(-1),h.applyQuaternion(e.worldQuaternionStart.clone().invert()),n.scale.copy(h),n.visible=e.dragging):(n.quaternion.copy(r),e.dragging?n.position.copy(e.worldPositionStart):n.position.copy(e.worldPosition),e.axis&&(n.visible=-1!==e.axis.search(n.name))),"continue";if(n.quaternion.copy(r),"translate"===e.mode||"scale"===e.mode){var a=.99;"X"===n.name&&Math.abs(A.copy(k).applyQuaternion(r).dot(e.eye))>a&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"Y"===n.name&&Math.abs(A.copy(G).applyQuaternion(r).dot(e.eye))>a&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"Z"===n.name&&Math.abs(A.copy(z).applyQuaternion(r).dot(e.eye))>a&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"XY"===n.name&&Math.abs(A.copy(z).applyQuaternion(r).dot(e.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"YZ"===n.name&&Math.abs(A.copy(k).applyQuaternion(r).dot(e.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),"XZ"===n.name&&Math.abs(A.copy(G).applyQuaternion(r).dot(e.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1)}else"rotate"===e.mode&&(D.copy(r),A.copy(e.eye).applyQuaternion(d.copy(r).invert()),-1!==n.name.search("E")&&n.quaternion.setFromRotationMatrix(U.lookAt(e.eye,Z,G)),"X"===n.name&&(d.setFromAxisAngle(k,Math.atan2(-A.y,A.z)),d.multiplyQuaternions(D,d),n.quaternion.copy(d)),"Y"===n.name&&(d.setFromAxisAngle(G,Math.atan2(A.x,A.z)),d.multiplyQuaternions(D,d),n.quaternion.copy(d)),"Z"===n.name&&(d.setFromAxisAngle(z,Math.atan2(A.y,A.x)),d.multiplyQuaternions(D,d),n.quaternion.copy(d)));n.visible=n.visible&&(-1===n.name.indexOf("X")||e.showX),n.visible=n.visible&&(-1===n.name.indexOf("Y")||e.showY),n.visible=n.visible&&(-1===n.name.indexOf("Z")||e.showZ),n.visible=n.visible&&(-1===n.name.indexOf("E")||e.showX&&e.showY&&e.showZ),n.material._color=n.material._color||n.material.color.clone(),n.material._opacity=n.material._opacity||n.material.opacity,n.material.color.copy(n.material._color),n.material.opacity=n.material._opacity,e.enabled&&e.axis&&(n.name===e.axis||e.axis.split("").some((function(t){return n.name===t})))&&(n.material.color.setHex(16776960),n.material.opacity=1)},l=0;l<i.length;l++)o(l);(0,a.Z)((0,s.Z)(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(u.Object3D);F.prototype.isTransformControlsGizmo=!0;var V=function(t){(0,l.Z)(n,t);var e=(0,c.Z)(n);function n(){var t;return(0,r.Z)(this,n),(t=e.call(this,new u.PlaneGeometry(1e5,1e5,2,2),new u.MeshBasicMaterial({visible:!1,wireframe:!0,side:u.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1}))).type="TransformControlsPlane",t}return(0,i.Z)(n,[{key:"updateMatrixWorld",value:function(t){var e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),T.copy(k).applyQuaternion("local"===e?this.worldQuaternion:B),j.copy(G).applyQuaternion("local"===e?this.worldQuaternion:B),C.copy(z).applyQuaternion("local"===e?this.worldQuaternion:B),A.copy(j),this.mode){case"translate":case"scale":switch(this.axis){case"X":A.copy(this.eye).cross(T),L.copy(T).cross(A);break;case"Y":A.copy(this.eye).cross(j),L.copy(j).cross(A);break;case"Z":A.copy(this.eye).cross(C),L.copy(C).cross(A);break;case"XY":L.copy(C);break;case"YZ":L.copy(T);break;case"XZ":A.copy(C),L.copy(j);break;case"XYZ":case"E":L.set(0,0,0)}break;default:L.set(0,0,0)}0===L.length()?this.quaternion.copy(this.cameraQuaternion):(O.lookAt(h.set(0,0,0),L,A),this.quaternion.setFromRotationMatrix(O)),(0,a.Z)((0,s.Z)(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(u.Mesh);V.prototype.isTransformControlsPlane=!0},26146:function(t,e,n){n.d(e,{Y:function(){return c}});var r=n(55248),i=n(54314),o=n(96090),a=n(58618),s=n(21324),l=n(56289);l.UniformsLib.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new l.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},l.ShaderLib.line={uniforms:l.UniformsUtils.merge([l.UniformsLib.common,l.UniformsLib.fog,l.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 offset;\n\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t}\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t#endif\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t// set the world position\n\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segements overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var c=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var r;return(0,i.Z)(this,n),r=e.call(this,{type:"LineMaterial",uniforms:l.UniformsUtils.clone(l.ShaderLib.line.uniforms),vertexShader:l.ShaderLib.line.vertexShader,fragmentShader:l.ShaderLib.line.fragmentShader,clipping:!0}),Object.defineProperties((0,o.Z)(r),{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){!0===t?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===t?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(t){Boolean(t)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===t?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),r.setValues(t),r}return(0,r.Z)(n)}(l.ShaderMaterial);c.prototype.isLineMaterial=!0},14490:function(t,e,n){n.d(e,{P:function(){return r}});var r={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float h;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"}},42900:function(t,e,n){n.d(e,{Z:function(){return r}});var r={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float v;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 sum = vec4( 0.0 );\n\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n\t\t\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"}},17548:function(t,e,n){n.d(e,{qf:function(){return i}});var r=n(56289);function i(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null!==t[0].index,i=new Set(Object.keys(t[0].attributes)),a=new Set(Object.keys(t[0].morphAttributes)),s={},l={},c=t[0].morphTargetsRelative,u=new r.BufferGeometry,f=0,h=0;h<t.length;++h){var p=t[h],d=0;if(n!==(null!==p.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var m in p.attributes){if(!i.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[m]&&(s[m]=[]),s[m].push(p.attributes[m]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(c!==p.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var v in p.morphAttributes){if(!a.has(v))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===l[v]&&(l[v]=[]),l[v].push(p.morphAttributes[v])}if(u.userData.mergedUserData=u.userData.mergedUserData||[],u.userData.mergedUserData.push(p.userData),e){var y=void 0;if(n)y=p.index.count;else{if(void 0===p.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;y=p.attributes.position.count}u.addGroup(f,y,h),f+=y}}if(n){for(var w=0,g=[],b=0;b<t.length;++b){for(var x=t[b].index,S=0;S<x.count;++S)g.push(x.getX(S)+w);w+=t[b].attributes.position.count}u.setIndex(g)}for(var M in s){var E=o(s[M]);if(!E)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+M+" attribute."),null;u.setAttribute(M,E)}for(var P in l){var _=l[P][0].length;if(0===_)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[P]=[];for(var I=0;I<_;++I){for(var A=[],Z=0;Z<l[P].length;++Z)A.push(l[P][Z][I]);var U=o(A);if(!U)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+P+" morphAttribute."),null;u.morphAttributes[P].push(U)}}return u}function o(t){for(var e,n,i,o=0,a=0;a<t.length;++a){var s=t[a];if(s.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=s.normalized),i!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;o+=s.array.length}for(var l=new e(o),c=0,u=0;u<t.length;++u)l.set(t[u].array,c),c+=t[u].array.length;return new r.BufferAttribute(l,n,i)}}}]);
//# sourceMappingURL=906.bundle.js.map