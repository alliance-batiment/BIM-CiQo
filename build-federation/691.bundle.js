/*! For license information please see 691.bundle.js.LICENSE.txt */
(self.webpackChunkciqo=self.webpackChunkciqo||[]).push([[691],{59711:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree");t.Z=a},89788:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=a},14873:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"}),"Apps");t.Z=a},78774:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");t.Z=a},90636:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");t.Z=a},8189:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");t.Z=a},37397:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=a},79883:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"}),"Crop");t.Z=a},98671:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}),"Description");t.Z=a},6486:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=a},93017:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"}),"FolderOpenOutlined");t.Z=a},47307:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"}),"GetApp");t.Z=a},321:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace");t.Z=a},17805:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.Z=a},7729:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.Z=a},42629:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");t.Z=a},74713:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement(i.Fragment,null,i.createElement("circle",{cx:"12",cy:"12",r:"3.2"}),i.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"PhotoCamera");t.Z=a},6359:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"}),"PowerSettingsNew");t.Z=a},11908:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeft");t.Z=a},39153:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=a},61862:function(e,t,r){"use strict";var n=r(64836),s=r(75263);t.Z=void 0;var i=s(r(92950)),a=(0,n(r(77301)).default)(i.createElement("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z"}),"Straighten");t.Z=a},77301:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(45634)},29378:function(e,t,r){"use strict";r.d(t,{Z:function(){return S}});var n=r(87462),s=r(45987),i=r(92950),a=r(5691),o=r.n(a),u=r(89762),h=r(93433),c=r(29439),l=r(41499);var f=r(6182),d=r(34035),p=r(62535),I=r(490),y=(0,I.Z)(i.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),E=(0,I.Z)(i.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),m=(0,I.Z)(i.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),v=(0,I.Z)(i.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),C=r(54798),T=i.forwardRef((function(e,t){var r=e.classes,a=e.className,u=e.color,h=void 0===u?"standard":u,c=e.component,l=e.disabled,f=void 0!==l&&l,I=e.page,T=e.selected,g=void 0!==T&&T,R=e.shape,F=void 0===R?"round":R,S=e.size,k=void 0===S?"medium":S,A=e.type,x=void 0===A?"page":A,M=e.variant,N=void 0===M?"text":M,O=(0,s.Z)(e,["classes","className","color","component","disabled","page","selected","shape","size","type","variant"]),w=("rtl"===(0,d.Z)().direction?{previous:v,next:m,last:y,first:E}:{previous:m,next:v,first:y,last:E})[x];return"start-ellipsis"===x||"end-ellipsis"===x?i.createElement("div",{ref:t,className:o()(r.root,r.ellipsis,f&&r.disabled,"medium"!==k&&r["size".concat((0,C.Z)(k))])},"\u2026"):i.createElement(p.Z,(0,n.Z)({ref:t,component:c,disabled:f,focusVisibleClassName:r.focusVisible,className:o()(r.root,r.page,r[N],r[F],a,"standard"!==h&&r["".concat(N).concat((0,C.Z)(h))],f&&r.disabled,g&&r.selected,"medium"!==k&&r["size".concat((0,C.Z)(k))])},O),"page"===x&&I,w?i.createElement(w,{className:r.icon}):null)})),g=(0,u.Z)((function(e){return{root:(0,n.Z)({},e.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:e.palette.text.primary}),page:{transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},"&$focusVisible":{backgroundColor:e.palette.action.focus},"&$selected":{backgroundColor:e.palette.action.selected,"&:hover, &$focusVisible":{backgroundColor:(0,f.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:1,color:e.palette.action.disabled,backgroundColor:e.palette.action.selected}},"&$disabled":{opacity:e.palette.action.disabledOpacity}},sizeSmall:{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px","& $icon":{fontSize:e.typography.pxToRem(18)}},sizeLarge:{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:e.typography.pxToRem(15),"& $icon":{fontSize:e.typography.pxToRem(22)}},textPrimary:{"&$selected":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}},"&$disabled":{color:e.palette.action.disabled}}},textSecondary:{"&$selected":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover, &$focusVisible":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}},"&$disabled":{color:e.palette.action.disabled}}},outlined:{border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$selected":{"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}}},outlinedPrimary:{"&$selected":{color:e.palette.primary.main,border:"1px solid ".concat((0,f.Fq)(e.palette.primary.main,.5)),backgroundColor:(0,f.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,f.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},outlinedSecondary:{"&$selected":{color:e.palette.secondary.main,border:"1px solid ".concat((0,f.Fq)(e.palette.secondary.main,.5)),backgroundColor:(0,f.Fq)(e.palette.secondary.main,e.palette.action.activatedOpacity),"&:hover, &$focusVisible":{backgroundColor:(0,f.Fq)(e.palette.secondary.main,e.palette.action.activatedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}},rounded:{borderRadius:e.shape.borderRadius},ellipsis:{height:"auto","&$disabled":{opacity:e.palette.action.disabledOpacity}},focusVisible:{},disabled:{},selected:{},icon:{fontSize:e.typography.pxToRem(20),margin:"0 -8px"}}}),{name:"MuiPaginationItem"})(T);function R(e,t,r){return"page"===e?"".concat(r?"":"Go to ","page ").concat(t):"Go to ".concat(e," page")}var F=i.forwardRef((function(e,t){e.boundaryCount;var r=e.classes,a=e.className,u=e.color,f=void 0===u?"standard":u,d=(e.count,e.defaultPage,e.disabled,e.getItemAriaLabel),p=void 0===d?R:d,I=(e.hideNextButton,e.hidePrevButton,e.onChange,e.page,e.renderItem),y=void 0===I?function(e){return i.createElement(g,e)}:I,E=e.shape,m=void 0===E?"round":E,v=(e.showFirstButton,e.showLastButton,e.siblingCount,e.size),C=void 0===v?"medium":v,T=e.variant,F=void 0===T?"text":T,S=(0,s.Z)(e,["boundaryCount","classes","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"]),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.boundaryCount,r=void 0===t?1:t,i=e.componentName,a=void 0===i?"usePagination":i,o=e.count,u=void 0===o?1:o,f=e.defaultPage,d=void 0===f?1:f,p=e.disabled,I=void 0!==p&&p,y=e.hideNextButton,E=void 0!==y&&y,m=e.hidePrevButton,v=void 0!==m&&m,C=e.onChange,T=e.page,g=e.showFirstButton,R=void 0!==g&&g,F=e.showLastButton,S=void 0!==F&&F,k=e.siblingCount,A=void 0===k?1:k,x=(0,s.Z)(e,["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"]),M=(0,l.Z)({controlled:T,default:d,name:a,state:"page"}),N=(0,c.Z)(M,2),O=N[0],w=N[1],b=function(e,t){T||w(t),C&&C(e,t)},L=function(e,t){var r=t-e+1;return Array.from({length:r},(function(t,r){return e+r}))},D=L(1,Math.min(r,u)),P=L(Math.max(u-r+1,r+1),u),_=Math.max(Math.min(O-A,u-r-2*A-1),r+2),Z=Math.min(Math.max(O+A,r+2*A+2),P[0]-2),U=[].concat((0,h.Z)(R?["first"]:[]),(0,h.Z)(v?[]:["previous"]),(0,h.Z)(D),(0,h.Z)(_>r+2?["start-ellipsis"]:r+1<u-r?[r+1]:[]),(0,h.Z)(L(_,Z)),(0,h.Z)(Z<u-r-1?["end-ellipsis"]:u-r>r?[u-r]:[]),(0,h.Z)(P),(0,h.Z)(E?[]:["next"]),(0,h.Z)(S?["last"]:[])),z=function(e){switch(e){case"first":return 1;case"previous":return O-1;case"next":return O+1;case"last":return u;default:return null}},Y=U.map((function(e){return"number"===typeof e?{onClick:function(t){b(t,e)},type:"page",page:e,selected:e===O,disabled:I,"aria-current":e===O?"true":void 0}:{onClick:function(t){b(t,z(e))},type:e,page:z(e),selected:!1,disabled:I||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?O>=u:O<=1)}}));return(0,n.Z)({items:Y},x)}((0,n.Z)({},e,{componentName:"Pagination"})),A=k.items;return i.createElement("nav",(0,n.Z)({"aria-label":"pagination navigation",className:o()(r.root,a),ref:t},S),i.createElement("ul",{className:r.ul},A.map((function(e,t){return i.createElement("li",{key:t},y((0,n.Z)({},e,{color:f,"aria-label":p(e.type,e.page,e.selected),shape:m,size:C,variant:F})))}))))})),S=(0,u.Z)({root:{},ul:{display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}},{name:"MuiPagination"})(F)},4314:function(e,t,r){"use strict";var n=r(87462),s=r(45987),i=r(92950),a=r(5691),o=r.n(a),u=r(34416),h=r(14921),c=r(6182),l=r(34035),f=r(89762),d=r(47793),p=r(35207),I=i.forwardRef((function(e,t){var r=e.children,a=e.classes,c=e.className,f=e.collapseIcon,I=e.endIcon,y=e.expandIcon,E=e.icon,m=e.label,v=e.nodeId,C=e.onClick,T=e.onLabelClick,g=e.onIconClick,R=e.onFocus,F=e.onKeyDown,S=e.onMouseDown,k=e.TransitionComponent,A=void 0===k?h.Z:k,x=e.TransitionProps,M=(0,s.Z)(e,["children","classes","className","collapseIcon","endIcon","expandIcon","icon","label","nodeId","onClick","onLabelClick","onIconClick","onFocus","onKeyDown","onMouseDown","TransitionComponent","TransitionProps"]),N=i.useContext(p.Z),O=N.icons,w=N.focus,b=N.focusFirstNode,L=N.focusLastNode,D=N.focusNextNode,P=N.focusPreviousNode,_=N.focusByFirstCharacter,Z=N.selectNode,U=N.selectRange,z=N.selectNextNode,Y=N.selectPreviousNode,G=N.rangeSelectToFirst,V=N.rangeSelectToLast,B=N.selectAllNodes,H=N.expandAllSiblings,W=N.toggleExpansion,j=N.isExpanded,q=N.isFocused,X=N.isSelected,J=N.isTabbable,K=N.multiSelect,$=N.getParent,Q=N.mapFirstChar,ee=N.addNodeToNodeMap,te=N.removeNodeFromNodeMap,re=i.useRef(null),ne=i.useRef(null),se=(0,d.Z)(re,t),ie=E,ae=Boolean(Array.isArray(r)?r.length:r),oe=!!j&&j(v),ue=!!q&&q(v),he=!!J&&J(v),ce=!!X&&X(v),le=O||{},fe=(0,l.Z)();ie||(ae?(ie=oe?f||le.defaultCollapseIcon:y||le.defaultExpandIcon)||(ie=le.defaultParentIcon):ie=I||le.defaultEndIcon);var de,pe=function(e){return ae&&(oe?D(v):W(e)),!0},Ie=function(e){if(oe)return W(e,v),!0;var t=$(v);return!!t&&(w(t),!0)};return i.useEffect((function(){if(ee){var e=[];i.Children.forEach(r,(function(t){i.isValidElement(t)&&t.props.nodeId&&e.push(t.props.nodeId)})),ee(v,e)}}),[r,v,ee]),i.useEffect((function(){if(te)return function(){te(v)}}),[v,te]),i.useEffect((function(){Q&&m&&Q(v,ne.current.textContent.substring(0,1).toLowerCase())}),[Q,v,m]),i.useEffect((function(){ue&&re.current.focus()}),[ue]),K?de=ce:ce&&(de=!0),i.createElement("li",(0,n.Z)({className:o()(a.root,c,oe&&a.expanded,ce&&a.selected),role:"treeitem",onKeyDown:function(e){var t=!1,r=e.key;if(!e.altKey&&e.currentTarget===e.target){var n,s=e.ctrlKey||e.metaKey;switch(r){case" ":re.current===e.currentTarget&&(t=K&&e.shiftKey?U(e,{end:v}):K?Z(e,v,!0):Z(e,v)),e.stopPropagation();break;case"Enter":re.current===e.currentTarget&&ae&&(W(e),t=!0),e.stopPropagation();break;case"ArrowDown":K&&e.shiftKey&&z(e,v),D(v),t=!0;break;case"ArrowUp":K&&e.shiftKey&&Y(e,v),P(v),t=!0;break;case"ArrowRight":t="rtl"===fe.direction?Ie(e):pe(e);break;case"ArrowLeft":t="rtl"===fe.direction?pe(e):Ie(e);break;case"Home":K&&s&&e.shiftKey&&G(e,v),b(),t=!0;break;case"End":K&&s&&e.shiftKey&&V(e,v),L(),t=!0;break;default:"*"===r?(H(e,v),t=!0):K&&s&&"a"===r.toLowerCase()?t=B(e):!s&&!e.shiftKey&&((n=r)&&1===n.length&&n.match(/\S/))&&(_(v,r),t=!0)}t&&(e.preventDefault(),e.stopPropagation()),F&&F(e)}},onFocus:function(e){ue||e.currentTarget!==e.target||w(v),R&&R(e)},"aria-expanded":ae?oe:null,"aria-selected":de,ref:se,tabIndex:he?0:-1},M),i.createElement("div",{className:a.content,onClick:function(e){ue||w(v);var t=K&&(e.shiftKey||e.ctrlKey||e.metaKey);!ae||e.defaultPrevented||t&&j(v)||W(e,v),t?e.shiftKey?U(e,{end:v}):Z(e,v,!0):Z(e,v),C&&C(e)},onMouseDown:function(e){(e.shiftKey||e.ctrlKey||e.metaKey)&&e.preventDefault(),S&&S(e)},ref:ne},i.createElement("div",{onClick:g,className:a.iconContainer},ie),i.createElement(u.Z,{onClick:T,component:"div",className:a.label},m)),r&&i.createElement(A,(0,n.Z)({unmountOnExit:!0,className:a.group,in:oe,component:"ul",role:"group"},x),r))}));t.Z=(0,f.Z)((function(e){return{root:{listStyle:"none",margin:0,padding:0,outline:0,WebkitTapHighlightColor:"transparent","&:focus > $content $label":{backgroundColor:e.palette.action.hover},"&$selected > $content $label":{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)},"&$selected > $content $label:hover, &$selected:focus > $content $label":{backgroundColor:(0,c.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},expanded:{},selected:{},group:{margin:0,padding:0,marginLeft:17},content:{width:"100%",display:"flex",alignItems:"center",cursor:"pointer"},iconContainer:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},label:{width:"100%",paddingLeft:4,position:"relative","&:hover":{backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}}}),{name:"MuiTreeItem"})(I)},57043:function(e,t,r){"use strict";var n=r(87462),s=r(29439),i=r(45987),a=r(92950),o=r(5691),u=r.n(o),h=r(89762),c=r(41499),l=r(35207);var f=function(e,t,r){for(var n=t;n<e.length;n+=1)if(r===e[n])return n;return-1},d=[],p=[],I=a.forwardRef((function(e,t){var r=e.children,o=e.classes,h=e.className,I=e.defaultCollapseIcon,y=e.defaultEndIcon,E=e.defaultExpanded,m=void 0===E?d:E,v=e.defaultExpandIcon,C=e.defaultParentIcon,T=e.defaultSelected,g=void 0===T?p:T,R=e.disableSelection,F=void 0!==R&&R,S=e.multiSelect,k=void 0!==S&&S,A=e.expanded,x=e.onNodeSelect,M=e.onNodeToggle,N=e.selected,O=(0,i.Z)(e,["children","classes","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disableSelection","multiSelect","expanded","onNodeSelect","onNodeToggle","selected"]),w=a.useState(null),b=w[0],L=w[1],D=a.useState(null),P=D[0],_=D[1],Z=a.useRef({}),U=a.useRef({}),z=a.useRef([]),Y=(0,c.Z)({controlled:A,default:m,name:"TreeView",state:"expanded"}),G=(0,s.Z)(Y,2),V=G[0],B=G[1],H=(0,c.Z)({controlled:N,default:g,name:"TreeView",state:"selected"}),W=(0,s.Z)(H,2),j=W[0],q=W[1],X=a.useCallback((function(e){return!!Array.isArray(V)&&-1!==V.indexOf(e)}),[V]),J=a.useCallback((function(e){return Array.isArray(j)?-1!==j.indexOf(e):j===e}),[j]),K=function(e){var t=z.current.indexOf(e);return-1!==t&&t+1<z.current.length?z.current[t+1]:null},$=function(e){var t=z.current.indexOf(e);return-1!==t&&t-1>=0?z.current[t-1]:null},Q=function(){return z.current[z.current.length-1]},ee=function(){return z.current[0]},te=function(e){e&&(L(e),_(e))},re=a.useRef(null),ne=a.useRef(!1),se=a.useRef([]),ie=function(e,t){var r=j,n=t.start,s=t.next,i=t.current;s&&i&&(-1===se.current.indexOf(i)&&(se.current=[]),ne.current?-1!==se.current.indexOf(s)?(r=r.filter((function(e){return e===n||e!==i})),se.current=se.current.filter((function(e){return e===n||e!==i}))):(r.push(s),se.current.push(s)):(r.push(s),se.current.push(i,s)),x&&x(e,r),q(r))},ae=function(e,t){var r=j,n=t.start,s=t.end;ne.current&&(r=j.filter((function(e){return-1===se.current.indexOf(e)})));var i=function(e,t){var r=z.current.indexOf(e),n=z.current.indexOf(t),s=Math.min(r,n),i=Math.max(r,n);return z.current.slice(s,i+1)}(n,s);se.current=i;var a=r.concat(i);a=a.filter((function(e,t){return a.indexOf(e)===t})),x&&x(e,a),q(a)},oe=function(e,t){var r=[];r=-1!==j.indexOf(t)?j.filter((function(e){return e!==t})):[t].concat(j),x&&x(e,r),q(r)},ue=function(e,t){var r=k?[t]:t;x&&x(e,r),q(r)},he=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.start,s=void 0===n?re.current:n,i=t.end,a=t.current;return r?ie(e,{start:s,next:i,current:a}):ae(e,{start:s,end:i}),ne.current=!0,!0},ce=a.useCallback((function(e){var t=Z.current[e],r=[];return t&&(r.push(e),t.children&&(r.concat(t.children),t.children.forEach((function(e){r.concat(ce(e))})))),r}),[]),le=a.useCallback((function(e){var t=(0,n.Z)({},U.current);e.forEach((function(e){t[e]&&delete t[e]})),U.current=t}),[]),fe=a.useCallback((function(e){var t=ce(e);le(t);var r=(0,n.Z)({},Z.current);t.forEach((function(e){var t=r[e];if(t){if(t.parent){var s=r[t.parent];if(s&&s.children){var i=s.children.filter((function(t){return t!==e}));r[t.parent]=(0,n.Z)({},s,{children:i})}}delete r[e]}})),Z.current=r,_((function(t){return t===e?null:t}))}),[ce,le]),de=a.useRef([]),pe=a.useState(!1),Ie=pe[0],ye=pe[1];a.useEffect((function(){var e=[];a.Children.forEach(r,(function(t){a.isValidElement(t)&&t.props.nodeId&&e.push(t.props.nodeId)})),function(e,t){if(e.length!==t.length)return!0;for(var r=0;r<e.length;r+=1)if(e[r]!==t[r])return!0;return!1}(de.current,e)&&(Z.current[-1]={parent:null,children:e},e.forEach((function(e,t){0===t&&L(e)})),z.current=Z.current[-1].children,de.current=e,ye(!0))}),[r]),a.useEffect((function(){Ie&&(z.current=function e(t){for(var r=[],n=0;n<t.length;n+=1){var s=t[n];r.push(s);var i=Z.current[s].children;X(s)&&i&&(r=r.concat(e(i)))}return r}(Z.current[-1].children))}),[V,Ie,X,r]);var Ee=function(){return!1};return a.createElement(l.Z.Provider,{value:{icons:{defaultCollapseIcon:I,defaultExpandIcon:v,defaultParentIcon:C,defaultEndIcon:y},focus:te,focusFirstNode:function(){return te(ee())},focusLastNode:function(){return te(Q())},focusNextNode:function(e){return te(K(e))},focusPreviousNode:function(e){return te($(e))},focusByFirstCharacter:function(e,t){var r,n,s=t.toLowerCase(),i=[],a=[];Object.keys(U.current).forEach((function(e){var t=U.current[e],r=Z.current[e];(!r.parent||X(r.parent))&&(i.push(e),a.push(t))})),(r=i.indexOf(e)+1)===Z.current.length&&(r=0),-1===(n=f(a,r,s))&&(n=f(a,0,s)),n>-1&&te(i[n])},expandAllSiblings:function(e,t){var r,n=Z.current[t],s=Z.current[n.parent];s?r=s.children.filter((function(e){return!X(e)})):r=Z.current[-1].children.filter((function(e){return!X(e)}));var i=V.concat(r);r.length>0&&(B(i),M&&M(e,i))},toggleExpansion:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;-1!==V.indexOf(r)?(t=V.filter((function(e){return e!==r})),L((function(e){var t=Z.current[e];return e&&(t&&t.parent?t.parent.id:null)===r?r:e}))):t=[r].concat(V),M&&M(e,t),B(t)},isExpanded:X,isFocused:function(e){return P===e},isSelected:J,selectNode:F?Ee:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!t&&(r?oe(e,t):ue(e,t),re.current=t,ne.current=!1,se.current=[],!0)},selectRange:F?Ee:he,selectNextNode:F?Ee:function(e,t){return he(e,{end:K(t),current:t},!0)},selectPreviousNode:F?Ee:function(e,t){return he(e,{end:$(t),current:t},!0)},rangeSelectToFirst:F?Ee:function(e,t){re.current||(re.current=t);var r=ne.current?re.current:t;return he(e,{start:r,end:ee()})},rangeSelectToLast:F?Ee:function(e,t){re.current||(re.current=t);var r=ne.current?re.current:t;return he(e,{start:r,end:Q()})},selectAllNodes:F?Ee:function(e){return he(e,{start:ee(),end:Q()})},isTabbable:function(e){return b===e},multiSelect:k,getParent:function(e){return Z.current[e].parent},mapFirstChar:function(e,t){U.current[e]=t},addNodeToNodeMap:function(e,t){var r=Z.current[e];Z.current[e]=(0,n.Z)({},r,{children:t,id:e}),t.forEach((function(t){var r=Z.current[t];Z.current[t]=(0,n.Z)({},r,{parent:e,id:t})}))},removeNodeFromNodeMap:fe}},a.createElement("ul",(0,n.Z)({role:"tree","aria-multiselectable":k,className:u()(o.root,h),ref:t},O),r))}));t.Z=(0,h.Z)({root:{padding:0,margin:0,listStyle:"none"}},{name:"MuiTreeView"})(I)},35207:function(e,t,r){"use strict";var n=r(92950),s=n.createContext({});t.Z=s},49346:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");t.Z=a},39005:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"m10 17 5-5-5-5v10z"}),"ArrowRight");t.Z=a},47497:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=a},5508:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=a},76826:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M17 15h2V7c0-1.1-.9-2-2-2H9v2h8v8zM7 17V1H5v4H1v2h4v10c0 1.1.9 2 2 2h10v4h2v-4h4v-2H7z"}),"Crop");t.Z=a},15391:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=a},68298:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}),"Description");t.Z=a},73070:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");t.Z=a},72996:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM10 17H5v-2h5v2zm0-4H5v-2h5v2zm0-4H5V7h5v2zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42L14.82 15z"}),"FactCheck");t.Z=a},70594:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload");t.Z=a},71535:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");t.Z=a},17123:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}),"FullscreenExit");t.Z=a},21811:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.Z=a},53711:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"}),"LibraryAdd");t.Z=a},65100:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"}),"Map");t.Z=a},54379:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.Z=a},59221:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.Z=a},6606:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2v8z"}),"Straighten");t.Z=a},7745:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"m18.25 7.6-5.5-3.18c-.46-.27-1.04-.27-1.5 0L5.75 7.6c-.46.27-.75.76-.75 1.3v6.35c0 .54.29 1.03.75 1.3l5.5 3.18c.46.27 1.04.27 1.5 0l5.5-3.18c.46-.27.75-.76.75-1.3V8.9c0-.54-.29-1.03-.75-1.3zM7 14.96v-4.62l4 2.32v4.61l-4-2.31zm5-4.03L8 8.61l4-2.31 4 2.31-4 2.32zm1 6.34v-4.61l4-2.32v4.62l-4 2.31zM7 2H3.5C2.67 2 2 2.67 2 3.5V7h2V4h3V2zm10 0h3.5c.83 0 1.5.67 1.5 1.5V7h-2V4h-3V2zM7 22H3.5c-.83 0-1.5-.67-1.5-1.5V17h2v3h3v2zm10 0h3.5c.83 0 1.5-.67 1.5-1.5V17h-2v3h-3v2z"}),"ViewInAr");t.Z=a},33867:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.Z=a},43767:function(e,t,r){"use strict";var n=r(64836);t.Z=void 0;var s=n(r(57609)),i=r(22855),a=(0,s.default)((0,i.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");t.Z=a},57609:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=r(4452)},80681:function(e,t,r){(e=r.nmd(e)).exports=function(){"use strict";var t,r;function n(){return t.apply(null,arguments)}function s(e){t=e}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function h(e){return void 0===e}function c(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var r,n=[],s=e.length;for(r=0;r<s;++r)n.push(t(e[r],r));return n}function d(e,t){for(var r in t)o(t,r)&&(e[r]=t[r]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,r,n){return jr(e,t,r,n,!0).utc()}function I(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(e){return null==e._pf&&(e._pf=I()),e._pf}function E(e){if(null==e._isValid){var t=y(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function m(e){var t=p(NaN);return null!=e?d(y(t),e):y(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){var t,r=Object(this),n=r.length>>>0;for(t=0;t<n;t++)if(t in r&&e.call(this,r[t],t,r))return!0;return!1};var v=n.momentProperties=[],C=!1;function T(e,t){var r,n,s,i=v.length;if(h(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),h(t._i)||(e._i=t._i),h(t._f)||(e._f=t._f),h(t._l)||(e._l=t._l),h(t._strict)||(e._strict=t._strict),h(t._tzm)||(e._tzm=t._tzm),h(t._isUTC)||(e._isUTC=t._isUTC),h(t._offset)||(e._offset=t._offset),h(t._pf)||(e._pf=y(t)),h(t._locale)||(e._locale=t._locale),i>0)for(r=0;r<i;r++)h(s=t[n=v[r]])||(e[n]=s);return e}function g(e){T(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===C&&(C=!0,n.updateOffset(this),C=!1)}function R(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function F(e){!1===n.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var r=!0;return d((function(){if(null!=n.deprecationHandler&&n.deprecationHandler(null,e),r){var s,i,a,u=[],h=arguments.length;for(i=0;i<h;i++){if(s="","object"===typeof arguments[i]){for(a in s+="\n["+i+"] ",arguments[0])o(arguments[0],a)&&(s+=a+": "+arguments[0][a]+", ");s=s.slice(0,-2)}else s=arguments[i];u.push(s)}F(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)}),t)}var k,A={};function x(e,t){null!=n.deprecationHandler&&n.deprecationHandler(e,t),A[e]||(F(t),A[e]=!0)}function M(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function N(e){var t,r;for(r in e)o(e,r)&&(M(t=e[r])?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(e,t){var r,n=d({},e);for(r in t)o(t,r)&&(a(e[r])&&a(t[r])?(n[r]={},d(n[r],e[r]),d(n[r],t[r])):null!=t[r]?n[r]=t[r]:delete n[r]);for(r in e)o(e,r)&&!o(t,r)&&a(e[r])&&(n[r]=d({},n[r]));return n}function w(e){null!=e&&this.set(e)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null,k=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)o(e,t)&&r.push(t);return r};var b={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return M(n)?n.call(t,r):n}function D(e,t,r){var n=""+Math.abs(e),s=t-n.length;return(e>=0?r?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var P=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,_=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Z={},U={};function z(e,t,r,n){var s=n;"string"===typeof n&&(s=function(){return this[n]()}),e&&(U[e]=s),t&&(U[t[0]]=function(){return D(s.apply(this,arguments),t[1],t[2])}),r&&(U[r]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function Y(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,r,n=e.match(P);for(t=0,r=n.length;t<r;t++)U[n[t]]?n[t]=U[n[t]]:n[t]=Y(n[t]);return function(t){var s,i="";for(s=0;s<r;s++)i+=M(n[s])?n[s].call(t,e):n[s];return i}}function V(e,t){return e.isValid()?(t=B(t,e.localeData()),Z[t]=Z[t]||G(t),Z[t](e)):e.localeData().invalidDate()}function B(e,t){var r=5;function n(e){return t.longDateFormat(e)||e}for(_.lastIndex=0;r>=0&&_.test(e);)e=e.replace(_,n),_.lastIndex=0,r-=1;return e}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function W(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(P).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var j="Invalid date";function q(){return this._invalidDate}var X="%d",J=/\d{1,2}/;function K(e){return this._ordinal.replace("%d",e)}var $={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Q(e,t,r,n){var s=this._relativeTime[r];return M(s)?s(e,t,r,n):s.replace(/%d/i,e)}function ee(e,t){var r=this._relativeTime[e>0?"future":"past"];return M(r)?r(t):r.replace(/%s/i,t)}var te={};function re(e,t){var r=e.toLowerCase();te[r]=te[r+"s"]=te[t]=e}function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function se(e){var t,r,n={};for(r in e)o(e,r)&&(t=ne(r))&&(n[t]=e[r]);return n}var ie={};function ae(e,t){ie[e]=t}function oe(e){var t,r=[];for(t in e)o(e,t)&&r.push({unit:t,priority:ie[t]});return r.sort((function(e,t){return e.priority-t.priority})),r}function ue(e){return e%4===0&&e%100!==0||e%400===0}function he(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function ce(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=he(t)),r}function le(e,t){return function(r){return null!=r?(de(this,e,r),n.updateOffset(this,t),this):fe(this,e)}}function fe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function de(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&ue(e.year())&&1===e.month()&&29===e.date()?(r=ce(r),e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Qe(r,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function pe(e){return M(this[e=ne(e)])?this[e]():this}function Ie(e,t){if("object"===typeof e){var r,n=oe(e=se(e)),s=n.length;for(r=0;r<s;r++)this[n[r].unit](e[n[r].unit])}else if(M(this[e=ne(e)]))return this[e](t);return this}var ye,Ee=/\d/,me=/\d\d/,ve=/\d{3}/,Ce=/\d{4}/,Te=/[+-]?\d{6}/,ge=/\d\d?/,Re=/\d\d\d\d?/,Fe=/\d\d\d\d\d\d?/,Se=/\d{1,3}/,ke=/\d{1,4}/,Ae=/[+-]?\d{1,6}/,xe=/\d+/,Me=/[+-]?\d+/,Ne=/Z|[+-]\d\d:?\d\d/gi,Oe=/Z|[+-]\d\d(?::?\d\d)?/gi,we=/[+-]?\d+(\.\d{1,3})?/,be=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Le(e,t,r){ye[e]=M(t)?t:function(e,n){return e&&r?r:t}}function De(e,t){return o(ye,e)?ye[e](t._strict,t._locale):new RegExp(Pe(e))}function Pe(e){return _e(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,r,n,s){return t||r||n||s})))}function _e(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}ye={};var Ze={};function Ue(e,t){var r,n,s=t;for("string"===typeof e&&(e=[e]),c(t)&&(s=function(e,r){r[t]=ce(e)}),n=e.length,r=0;r<n;r++)Ze[e[r]]=s}function ze(e,t){Ue(e,(function(e,r,n,s){n._w=n._w||{},t(e,n._w,n,s)}))}function Ye(e,t,r){null!=t&&o(Ze,e)&&Ze[e](t,r._a,r,e)}var Ge,Ve=0,Be=1,He=2,We=3,je=4,qe=5,Xe=6,Je=7,Ke=8;function $e(e,t){return(e%t+t)%t}function Qe(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=$e(t,12);return e+=(t-r)/12,1===r?ue(e)?29:28:31-r%7%2}Ge=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},z("M",["MM",2],"Mo",(function(){return this.month()+1})),z("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),z("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),re("month","M"),ae("month",8),Le("M",ge),Le("MM",ge,me),Le("MMM",(function(e,t){return t.monthsShortRegex(e)})),Le("MMMM",(function(e,t){return t.monthsRegex(e)})),Ue(["M","MM"],(function(e,t){t[Be]=ce(e)-1})),Ue(["MMM","MMMM"],(function(e,t,r,n){var s=r._locale.monthsParse(e,n,r._strict);null!=s?t[Be]=s:y(r).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,nt=be,st=be;function it(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||rt).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone}function at(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[rt.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ot(e,t,r){var n,s,i,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=p([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(s=Ge.call(this._shortMonthsParse,a))?s:null:-1!==(s=Ge.call(this._longMonthsParse,a))?s:null:"MMM"===t?-1!==(s=Ge.call(this._shortMonthsParse,a))||-1!==(s=Ge.call(this._longMonthsParse,a))?s:null:-1!==(s=Ge.call(this._longMonthsParse,a))||-1!==(s=Ge.call(this._shortMonthsParse,a))?s:null}function ut(e,t,r){var n,s,i;if(this._monthsParseExact)return ot.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(s=p([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),r||this._monthsParse[n]||(i="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(r&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function ht(e,t){var r;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=ce(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),Qe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function ct(e){return null!=e?(ht(this,e),n.updateOffset(this,!0),this):fe(this,"Month")}function lt(){return Qe(this.year(),this.month())}function ft(e){return this._monthsParseExact?(o(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=nt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function dt(e){return this._monthsParseExact?(o(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=st),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,r,n=[],s=[],i=[];for(t=0;t<12;t++)r=p([2e3,t]),n.push(this.monthsShort(r,"")),s.push(this.months(r,"")),i.push(this.months(r,"")),i.push(this.monthsShort(r,""));for(n.sort(e),s.sort(e),i.sort(e),t=0;t<12;t++)n[t]=_e(n[t]),s[t]=_e(s[t]);for(t=0;t<24;t++)i[t]=_e(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function It(e){return ue(e)?366:365}z("Y",0,0,(function(){var e=this.year();return e<=9999?D(e,4):"+"+e})),z(0,["YY",2],0,(function(){return this.year()%100})),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),re("year","y"),ae("year",1),Le("Y",Me),Le("YY",ge,me),Le("YYYY",ke,Ce),Le("YYYYY",Ae,Te),Le("YYYYYY",Ae,Te),Ue(["YYYYY","YYYYYY"],Ve),Ue("YYYY",(function(e,t){t[Ve]=2===e.length?n.parseTwoDigitYear(e):ce(e)})),Ue("YY",(function(e,t){t[Ve]=n.parseTwoDigitYear(e)})),Ue("Y",(function(e,t){t[Ve]=parseInt(e,10)})),n.parseTwoDigitYear=function(e){return ce(e)+(ce(e)>68?1900:2e3)};var yt=le("FullYear",!0);function Et(){return ue(this.year())}function mt(e,t,r,n,s,i,a){var o;return e<100&&e>=0?(o=new Date(e+400,t,r,n,s,i,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,r,n,s,i,a),o}function vt(e){var t,r;return e<100&&e>=0?((r=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ct(e,t,r){var n=7+t-r;return-(7+vt(e,0,n).getUTCDay()-t)%7+n-1}function Tt(e,t,r,n,s){var i,a,o=1+7*(t-1)+(7+r-n)%7+Ct(e,n,s);return o<=0?a=It(i=e-1)+o:o>It(e)?(i=e+1,a=o-It(e)):(i=e,a=o),{year:i,dayOfYear:a}}function gt(e,t,r){var n,s,i=Ct(e.year(),t,r),a=Math.floor((e.dayOfYear()-i-1)/7)+1;return a<1?n=a+Rt(s=e.year()-1,t,r):a>Rt(e.year(),t,r)?(n=a-Rt(e.year(),t,r),s=e.year()+1):(s=e.year(),n=a),{week:n,year:s}}function Rt(e,t,r){var n=Ct(e,t,r),s=Ct(e+1,t,r);return(It(e)-n+s)/7}function Ft(e){return gt(e,this._week.dow,this._week.doy).week}z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),re("week","w"),re("isoWeek","W"),ae("week",5),ae("isoWeek",5),Le("w",ge),Le("ww",ge,me),Le("W",ge),Le("WW",ge,me),ze(["w","ww","W","WW"],(function(e,t,r,n){t[n.substr(0,1)]=ce(e)}));var St={dow:0,doy:6};function kt(){return this._week.dow}function At(){return this._week.doy}function xt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Mt(e){var t=gt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Nt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Ot(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function wt(e,t){return e.slice(t,7).concat(e.slice(0,t))}z("d",0,"do","day"),z("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),z("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),z("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),re("day","d"),re("weekday","e"),re("isoWeekday","E"),ae("day",11),ae("weekday",11),ae("isoWeekday",11),Le("d",ge),Le("e",ge),Le("E",ge),Le("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Le("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Le("dddd",(function(e,t){return t.weekdaysRegex(e)})),ze(["dd","ddd","dddd"],(function(e,t,r,n){var s=r._locale.weekdaysParse(e,n,r._strict);null!=s?t.d=s:y(r).invalidWeekday=e})),ze(["d","e","E"],(function(e,t,r,n){t[n]=ce(e)}));var bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Lt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Dt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pt=be,_t=be,Zt=be;function Ut(e,t){var r=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?wt(r,this._week.dow):e?r[e.day()]:r}function zt(e){return!0===e?wt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Yt(e){return!0===e?wt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Gt(e,t,r){var n,s,i,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=p([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(s=Ge.call(this._weekdaysParse,a))?s:null:"ddd"===t?-1!==(s=Ge.call(this._shortWeekdaysParse,a))?s:null:-1!==(s=Ge.call(this._minWeekdaysParse,a))?s:null:"dddd"===t?-1!==(s=Ge.call(this._weekdaysParse,a))||-1!==(s=Ge.call(this._shortWeekdaysParse,a))||-1!==(s=Ge.call(this._minWeekdaysParse,a))?s:null:"ddd"===t?-1!==(s=Ge.call(this._shortWeekdaysParse,a))||-1!==(s=Ge.call(this._weekdaysParse,a))||-1!==(s=Ge.call(this._minWeekdaysParse,a))?s:null:-1!==(s=Ge.call(this._minWeekdaysParse,a))||-1!==(s=Ge.call(this._weekdaysParse,a))||-1!==(s=Ge.call(this._shortWeekdaysParse,a))?s:null}function Vt(e,t,r){var n,s,i;if(this._weekdaysParseExact)return Gt.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(s=p([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(r&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(r&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function Bt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Nt(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Ot(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function jt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Pt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function qt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=_t),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Jt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Zt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Jt(){function e(e,t){return t.length-e.length}var t,r,n,s,i,a=[],o=[],u=[],h=[];for(t=0;t<7;t++)r=p([2e3,1]).day(t),n=_e(this.weekdaysMin(r,"")),s=_e(this.weekdaysShort(r,"")),i=_e(this.weekdays(r,"")),a.push(n),o.push(s),u.push(i),h.push(n),h.push(s),h.push(i);a.sort(e),o.sort(e),u.sort(e),h.sort(e),this._weekdaysRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Kt(){return this.hours()%12||12}function $t(){return this.hours()||24}function Qt(e,t){z(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function er(e,t){return t._meridiemParse}function tr(e){return"p"===(e+"").toLowerCase().charAt(0)}z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Kt),z("k",["kk",2],0,$t),z("hmm",0,0,(function(){return""+Kt.apply(this)+D(this.minutes(),2)})),z("hmmss",0,0,(function(){return""+Kt.apply(this)+D(this.minutes(),2)+D(this.seconds(),2)})),z("Hmm",0,0,(function(){return""+this.hours()+D(this.minutes(),2)})),z("Hmmss",0,0,(function(){return""+this.hours()+D(this.minutes(),2)+D(this.seconds(),2)})),Qt("a",!0),Qt("A",!1),re("hour","h"),ae("hour",13),Le("a",er),Le("A",er),Le("H",ge),Le("h",ge),Le("k",ge),Le("HH",ge,me),Le("hh",ge,me),Le("kk",ge,me),Le("hmm",Re),Le("hmmss",Fe),Le("Hmm",Re),Le("Hmmss",Fe),Ue(["H","HH"],We),Ue(["k","kk"],(function(e,t,r){var n=ce(e);t[We]=24===n?0:n})),Ue(["a","A"],(function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e})),Ue(["h","hh"],(function(e,t,r){t[We]=ce(e),y(r).bigHour=!0})),Ue("hmm",(function(e,t,r){var n=e.length-2;t[We]=ce(e.substr(0,n)),t[je]=ce(e.substr(n)),y(r).bigHour=!0})),Ue("hmmss",(function(e,t,r){var n=e.length-4,s=e.length-2;t[We]=ce(e.substr(0,n)),t[je]=ce(e.substr(n,2)),t[qe]=ce(e.substr(s)),y(r).bigHour=!0})),Ue("Hmm",(function(e,t,r){var n=e.length-2;t[We]=ce(e.substr(0,n)),t[je]=ce(e.substr(n))})),Ue("Hmmss",(function(e,t,r){var n=e.length-4,s=e.length-2;t[We]=ce(e.substr(0,n)),t[je]=ce(e.substr(n,2)),t[qe]=ce(e.substr(s))}));var rr=/[ap]\.?m?\.?/i,nr=le("Hours",!0);function sr(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var ir,ar={calendar:b,longDateFormat:H,invalidDate:j,ordinal:X,dayOfMonthOrdinalParse:J,relativeTime:$,months:et,monthsShort:tt,week:St,weekdays:bt,weekdaysMin:Dt,weekdaysShort:Lt,meridiemParse:rr},or={},ur={};function hr(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function cr(e){return e?e.toLowerCase().replace("_","-"):e}function lr(e){for(var t,r,n,s,i=0;i<e.length;){for(t=(s=cr(e[i]).split("-")).length,r=(r=cr(e[i+1]))?r.split("-"):null;t>0;){if(n=dr(s.slice(0,t).join("-")))return n;if(r&&r.length>=t&&hr(s,r)>=t-1)break;t--}i++}return ir}function fr(e){return null!=e.match("^[^/\\\\]*$")}function dr(t){var r=null;if(void 0===or[t]&&e&&e.exports&&fr(t))try{r=ir._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),pr(r)}catch(n){or[t]=null}return or[t]}function pr(e,t){var r;return e&&((r=h(t)?Er(e):Ir(e,t))?ir=r:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ir._abbr}function Ir(e,t){if(null!==t){var r,n=ar;if(t.abbr=e,null!=or[e])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=or[e]._config;else if(null!=t.parentLocale)if(null!=or[t.parentLocale])n=or[t.parentLocale]._config;else{if(null==(r=dr(t.parentLocale)))return ur[t.parentLocale]||(ur[t.parentLocale]=[]),ur[t.parentLocale].push({name:e,config:t}),null;n=r._config}return or[e]=new w(O(n,t)),ur[e]&&ur[e].forEach((function(e){Ir(e.name,e.config)})),pr(e),or[e]}return delete or[e],null}function yr(e,t){if(null!=t){var r,n,s=ar;null!=or[e]&&null!=or[e].parentLocale?or[e].set(O(or[e]._config,t)):(null!=(n=dr(e))&&(s=n._config),t=O(s,t),null==n&&(t.abbr=e),(r=new w(t)).parentLocale=or[e],or[e]=r),pr(e)}else null!=or[e]&&(null!=or[e].parentLocale?(or[e]=or[e].parentLocale,e===pr()&&pr(e)):null!=or[e]&&delete or[e]);return or[e]}function Er(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ir;if(!i(e)){if(t=dr(e))return t;e=[e]}return lr(e)}function mr(){return k(or)}function vr(e){var t,r=e._a;return r&&-2===y(e).overflow&&(t=r[Be]<0||r[Be]>11?Be:r[He]<1||r[He]>Qe(r[Ve],r[Be])?He:r[We]<0||r[We]>24||24===r[We]&&(0!==r[je]||0!==r[qe]||0!==r[Xe])?We:r[je]<0||r[je]>59?je:r[qe]<0||r[qe]>59?qe:r[Xe]<0||r[Xe]>999?Xe:-1,y(e)._overflowDayOfYear&&(t<Ve||t>He)&&(t=He),y(e)._overflowWeeks&&-1===t&&(t=Je),y(e)._overflowWeekday&&-1===t&&(t=Ke),y(e).overflow=t),e}var Cr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gr=/Z|[+-]\d\d(?::?\d\d)?/,Rr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Fr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Sr=/^\/?Date\((-?\d+)/i,kr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ar={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function xr(e){var t,r,n,s,i,a,o=e._i,u=Cr.exec(o)||Tr.exec(o),h=Rr.length,c=Fr.length;if(u){for(y(e).iso=!0,t=0,r=h;t<r;t++)if(Rr[t][1].exec(u[1])){s=Rr[t][0],n=!1!==Rr[t][2];break}if(null==s)return void(e._isValid=!1);if(u[3]){for(t=0,r=c;t<r;t++)if(Fr[t][1].exec(u[3])){i=(u[2]||" ")+Fr[t][0];break}if(null==i)return void(e._isValid=!1)}if(!n&&null!=i)return void(e._isValid=!1);if(u[4]){if(!gr.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=s+(i||"")+(a||""),zr(e)}else e._isValid=!1}function Mr(e,t,r,n,s,i){var a=[Nr(e),tt.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(s,10)];return i&&a.push(parseInt(i,10)),a}function Nr(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Or(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function wr(e,t,r){return!e||Lt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(y(r).weekdayMismatch=!0,r._isValid=!1,!1)}function br(e,t,r){if(e)return Ar[e];if(t)return 0;var n=parseInt(r,10),s=n%100;return(n-s)/100*60+s}function Lr(e){var t,r=kr.exec(Or(e._i));if(r){if(t=Mr(r[4],r[3],r[2],r[5],r[6],r[7]),!wr(r[1],t,e))return;e._a=t,e._tzm=br(r[8],r[9],r[10]),e._d=vt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function Dr(e){var t=Sr.exec(e._i);null===t?(xr(e),!1===e._isValid&&(delete e._isValid,Lr(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:n.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Pr(e,t,r){return null!=e?e:null!=t?t:r}function _r(e){var t=new Date(n.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Zr(e){var t,r,n,s,i,a=[];if(!e._d){for(n=_r(e),e._w&&null==e._a[He]&&null==e._a[Be]&&Ur(e),null!=e._dayOfYear&&(i=Pr(e._a[Ve],n[Ve]),(e._dayOfYear>It(i)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),r=vt(i,0,e._dayOfYear),e._a[Be]=r.getUTCMonth(),e._a[He]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=n[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[We]&&0===e._a[je]&&0===e._a[qe]&&0===e._a[Xe]&&(e._nextDay=!0,e._a[We]=0),e._d=(e._useUTC?vt:mt).apply(null,a),s=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[We]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==s&&(y(e).weekdayMismatch=!0)}}function Ur(e){var t,r,n,s,i,a,o,u,h;null!=(t=e._w).GG||null!=t.W||null!=t.E?(i=1,a=4,r=Pr(t.GG,e._a[Ve],gt(qr(),1,4).year),n=Pr(t.W,1),((s=Pr(t.E,1))<1||s>7)&&(u=!0)):(i=e._locale._week.dow,a=e._locale._week.doy,h=gt(qr(),i,a),r=Pr(t.gg,e._a[Ve],h.year),n=Pr(t.w,h.week),null!=t.d?((s=t.d)<0||s>6)&&(u=!0):null!=t.e?(s=t.e+i,(t.e<0||t.e>6)&&(u=!0)):s=i),n<1||n>Rt(r,i,a)?y(e)._overflowWeeks=!0:null!=u?y(e)._overflowWeekday=!0:(o=Tt(r,n,s,i,a),e._a[Ve]=o.year,e._dayOfYear=o.dayOfYear)}function zr(e){if(e._f!==n.ISO_8601)if(e._f!==n.RFC_2822){e._a=[],y(e).empty=!0;var t,r,s,i,a,o,u,h=""+e._i,c=h.length,l=0;for(u=(s=B(e._f,e._locale).match(P)||[]).length,t=0;t<u;t++)i=s[t],(r=(h.match(De(i,e))||[])[0])&&((a=h.substr(0,h.indexOf(r))).length>0&&y(e).unusedInput.push(a),h=h.slice(h.indexOf(r)+r.length),l+=r.length),U[i]?(r?y(e).empty=!1:y(e).unusedTokens.push(i),Ye(i,r,e)):e._strict&&!r&&y(e).unusedTokens.push(i);y(e).charsLeftOver=c-l,h.length>0&&y(e).unusedInput.push(h),e._a[We]<=12&&!0===y(e).bigHour&&e._a[We]>0&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[We]=Yr(e._locale,e._a[We],e._meridiem),null!==(o=y(e).era)&&(e._a[Ve]=e._locale.erasConvertYear(o,e._a[Ve])),Zr(e),vr(e)}else Lr(e);else xr(e)}function Yr(e,t,r){var n;return null==r?t:null!=e.meridiemHour?e.meridiemHour(t,r):null!=e.isPM?((n=e.isPM(r))&&t<12&&(t+=12),n||12!==t||(t=0),t):t}function Gr(e){var t,r,n,s,i,a,o=!1,u=e._f.length;if(0===u)return y(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<u;s++)i=0,a=!1,t=T({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],zr(t),E(t)&&(a=!0),i+=y(t).charsLeftOver,i+=10*y(t).unusedTokens.length,y(t).score=i,o?i<n&&(n=i,r=t):(null==n||i<n||a)&&(n=i,r=t,a&&(o=!0));d(e,r||t)}function Vr(e){if(!e._d){var t=se(e._i),r=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Zr(e)}}function Br(e){var t=new g(vr(Hr(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Hr(e){var t=e._i,r=e._f;return e._locale=e._locale||Er(e._l),null===t||void 0===r&&""===t?m({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),R(t)?new g(vr(t)):(l(t)?e._d=t:i(r)?Gr(e):r?zr(e):Wr(e),E(e)||(e._d=null),e))}function Wr(e){var t=e._i;h(t)?e._d=new Date(n.now()):l(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Dr(e):i(t)?(e._a=f(t.slice(0),(function(e){return parseInt(e,10)})),Zr(e)):a(t)?Vr(e):c(t)?e._d=new Date(t):n.createFromInputFallback(e)}function jr(e,t,r,n,s){var o={};return!0!==t&&!1!==t||(n=t,t=void 0),!0!==r&&!1!==r||(n=r,r=void 0),(a(e)&&u(e)||i(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=r,o._i=e,o._f=t,o._strict=n,Br(o)}function qr(e,t,r,n){return jr(e,t,r,n,!1)}n.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),n.ISO_8601=function(){},n.RFC_2822=function(){};var Xr=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qr.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),Jr=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=qr.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}));function Kr(e,t){var r,n;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return qr();for(r=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r}function $r(){return Kr("isBefore",[].slice.call(arguments,0))}function Qr(){return Kr("isAfter",[].slice.call(arguments,0))}var en=function(){return Date.now?Date.now():+new Date},tn=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rn(e){var t,r,n=!1,s=tn.length;for(t in e)if(o(e,t)&&(-1===Ge.call(tn,t)||null!=e[t]&&isNaN(e[t])))return!1;for(r=0;r<s;++r)if(e[tn[r]]){if(n)return!1;parseFloat(e[tn[r]])!==ce(e[tn[r]])&&(n=!0)}return!0}function nn(){return this._isValid}function sn(){return xn(NaN)}function an(e){var t=se(e),r=t.year||0,n=t.quarter||0,s=t.month||0,i=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,h=t.second||0,c=t.millisecond||0;this._isValid=rn(t),this._milliseconds=+c+1e3*h+6e4*u+1e3*o*60*60,this._days=+a+7*i,this._months=+s+3*n+12*r,this._data={},this._locale=Er(),this._bubble()}function on(e){return e instanceof an}function un(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function hn(e,t,r){var n,s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),a=0;for(n=0;n<s;n++)(r&&e[n]!==t[n]||!r&&ce(e[n])!==ce(t[n]))&&a++;return a+i}function cn(e,t){z(e,0,0,(function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+D(~~(e/60),2)+t+D(~~e%60,2)}))}cn("Z",":"),cn("ZZ",""),Le("Z",Oe),Le("ZZ",Oe),Ue(["Z","ZZ"],(function(e,t,r){r._useUTC=!0,r._tzm=fn(Oe,e)}));var ln=/([\+\-]|\d\d)/gi;function fn(e,t){var r,n,s=(t||"").match(e);return null===s?null:0===(n=60*(r=((s[s.length-1]||[])+"").match(ln)||["-",0,0])[1]+ce(r[2]))?0:"+"===r[0]?n:-n}function dn(e,t){var r,s;return t._isUTC?(r=t.clone(),s=(R(e)||l(e)?e.valueOf():qr(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+s),n.updateOffset(r,!1),r):qr(e).local()}function pn(e){return-Math.round(e._d.getTimezoneOffset())}function In(e,t,r){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=fn(Oe,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(s=pn(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?bn(this,xn(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:pn(this)}function yn(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function En(e){return this.utcOffset(0,e)}function mn(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pn(this),"m")),this}function vn(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=fn(Ne,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Cn(e){return!!this.isValid()&&(e=e?qr(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Tn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function gn(){if(!h(this._isDSTShifted))return this._isDSTShifted;var e,t={};return T(t,this),(t=Hr(t))._a?(e=t._isUTC?p(t._a):qr(t._a),this._isDSTShifted=this.isValid()&&hn(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Rn(){return!!this.isValid()&&!this._isUTC}function Fn(){return!!this.isValid()&&this._isUTC}function Sn(){return!!this.isValid()&&this._isUTC&&0===this._offset}n.updateOffset=function(){};var kn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,An=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function xn(e,t){var r,n,s,i=e,a=null;return on(e)?i={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(i={},t?i[t]=+e:i.milliseconds=+e):(a=kn.exec(e))?(r="-"===a[1]?-1:1,i={y:0,d:ce(a[He])*r,h:ce(a[We])*r,m:ce(a[je])*r,s:ce(a[qe])*r,ms:ce(un(1e3*a[Xe]))*r}):(a=An.exec(e))?(r="-"===a[1]?-1:1,i={y:Mn(a[2],r),M:Mn(a[3],r),w:Mn(a[4],r),d:Mn(a[5],r),h:Mn(a[6],r),m:Mn(a[7],r),s:Mn(a[8],r)}):null==i?i={}:"object"===typeof i&&("from"in i||"to"in i)&&(s=On(qr(i.from),qr(i.to)),(i={}).ms=s.milliseconds,i.M=s.months),n=new an(i),on(e)&&o(e,"_locale")&&(n._locale=e._locale),on(e)&&o(e,"_isValid")&&(n._isValid=e._isValid),n}function Mn(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Nn(e,t){var r={};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function On(e,t){var r;return e.isValid()&&t.isValid()?(t=dn(t,e),e.isBefore(t)?r=Nn(e,t):((r=Nn(t,e)).milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function wn(e,t){return function(r,n){var s;return null===n||isNaN(+n)||(x(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=r,r=n,n=s),bn(this,xn(r,n),e),this}}function bn(e,t,r,s){var i=t._milliseconds,a=un(t._days),o=un(t._months);e.isValid()&&(s=null==s||s,o&&ht(e,fe(e,"Month")+o*r),a&&de(e,"Date",fe(e,"Date")+a*r),i&&e._d.setTime(e._d.valueOf()+i*r),s&&n.updateOffset(e,a||o))}xn.fn=an.prototype,xn.invalid=sn;var Ln=wn(1,"add"),Dn=wn(-1,"subtract");function Pn(e){return"string"===typeof e||e instanceof String}function _n(e){return R(e)||l(e)||Pn(e)||c(e)||Un(e)||Zn(e)||null===e||void 0===e}function Zn(e){var t,r,n=a(e)&&!u(e),s=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],h=i.length;for(t=0;t<h;t+=1)r=i[t],s=s||o(e,r);return n&&s}function Un(e){var t=i(e),r=!1;return t&&(r=0===e.filter((function(t){return!c(t)&&Pn(e)})).length),t&&r}function zn(e){var t,r,n=a(e)&&!u(e),s=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<i.length;t+=1)r=i[t],s=s||o(e,r);return n&&s}function Yn(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function Gn(e,t){1===arguments.length&&(arguments[0]?_n(arguments[0])?(e=arguments[0],t=void 0):zn(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||qr(),s=dn(r,this).startOf("day"),i=n.calendarFormat(this,s)||"sameElse",a=t&&(M(t[i])?t[i].call(this,r):t[i]);return this.format(a||this.localeData().calendar(i,this,qr(r)))}function Vn(){return new g(this)}function Bn(e,t){var r=R(e)?e:qr(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())}function Hn(e,t){var r=R(e)?e:qr(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())}function Wn(e,t,r,n){var s=R(e)?e:qr(e),i=R(t)?t:qr(t);return!!(this.isValid()&&s.isValid()&&i.isValid())&&("("===(n=n||"()")[0]?this.isAfter(s,r):!this.isBefore(s,r))&&(")"===n[1]?this.isBefore(i,r):!this.isAfter(i,r))}function jn(e,t){var r,n=R(e)?e:qr(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))}function qn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Xn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Jn(e,t,r){var n,s,i;if(!this.isValid())return NaN;if(!(n=dn(e,this)).isValid())return NaN;switch(s=6e4*(n.utcOffset()-this.utcOffset()),t=ne(t)){case"year":i=Kn(this,n)/12;break;case"month":i=Kn(this,n);break;case"quarter":i=Kn(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-s)/864e5;break;case"week":i=(this-n-s)/6048e5;break;default:i=this-n}return r?i:he(i)}function Kn(e,t){if(e.date()<t.date())return-Kn(t,e);var r=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(r,"months");return-(r+(t-n<0?(t-n)/(n-e.clone().add(r-1,"months")):(t-n)/(e.clone().add(r+1,"months")-n)))||0}function $n(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qn(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?V(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",V(r,"Z")):V(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function es(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,r,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",n=i+'[")]',this.format(e+t+r+n)}function ts(e){e||(e=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var t=V(this,e);return this.localeData().postformat(t)}function rs(e,t){return this.isValid()&&(R(e)&&e.isValid()||qr(e).isValid())?xn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ns(e){return this.from(qr(),e)}function ss(e,t){return this.isValid()&&(R(e)&&e.isValid()||qr(e).isValid())?xn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function is(e){return this.to(qr(),e)}function as(e){var t;return void 0===e?this._locale._abbr:(null!=(t=Er(e))&&(this._locale=t),this)}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var os=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function us(){return this._locale}var hs=1e3,cs=60*hs,ls=60*cs,fs=3506328*ls;function ds(e,t){return(e%t+t)%t}function ps(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-fs:new Date(e,t,r).valueOf()}function Is(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-fs:Date.UTC(e,t,r)}function ys(e){var t,r;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(r=this._isUTC?Is:ps,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ds(t+(this._isUTC?0:this.utcOffset()*cs),ls);break;case"minute":t=this._d.valueOf(),t-=ds(t,cs);break;case"second":t=this._d.valueOf(),t-=ds(t,hs)}return this._d.setTime(t),n.updateOffset(this,!0),this}function Es(e){var t,r;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(r=this._isUTC?Is:ps,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=ls-ds(t+(this._isUTC?0:this.utcOffset()*cs),ls)-1;break;case"minute":t=this._d.valueOf(),t+=cs-ds(t,cs)-1;break;case"second":t=this._d.valueOf(),t+=hs-ds(t,hs)-1}return this._d.setTime(t),n.updateOffset(this,!0),this}function ms(){return this._d.valueOf()-6e4*(this._offset||0)}function vs(){return Math.floor(this.valueOf()/1e3)}function Cs(){return new Date(this.valueOf())}function Ts(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function gs(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Rs(){return this.isValid()?this.toISOString():null}function Fs(){return E(this)}function Ss(){return d({},y(this))}function ks(){return y(this).overflow}function As(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function xs(e,t){var r,s,i,a=this._eras||Er("en")._eras;for(r=0,s=a.length;r<s;++r)switch("string"===typeof a[r].since&&(i=n(a[r].since).startOf("day"),a[r].since=i.valueOf()),typeof a[r].until){case"undefined":a[r].until=1/0;break;case"string":i=n(a[r].until).startOf("day").valueOf(),a[r].until=i.valueOf()}return a}function Ms(e,t,r){var n,s,i,a,o,u=this.eras();for(e=e.toUpperCase(),n=0,s=u.length;n<s;++n)if(i=u[n].name.toUpperCase(),a=u[n].abbr.toUpperCase(),o=u[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[n];break;case"NNNN":if(i===e)return u[n];break;case"NNNNN":if(o===e)return u[n]}else if([i,a,o].indexOf(e)>=0)return u[n]}function Ns(e,t){var r=e.since<=e.until?1:-1;return void 0===t?n(e.since).year():n(e.since).year()+(t-e.offset)*r}function Os(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until)return n[e].name;if(n[e].until<=r&&r<=n[e].since)return n[e].name}return""}function ws(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until)return n[e].narrow;if(n[e].until<=r&&r<=n[e].since)return n[e].narrow}return""}function bs(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e){if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until)return n[e].abbr;if(n[e].until<=r&&r<=n[e].since)return n[e].abbr}return""}function Ls(){var e,t,r,s,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e)if(r=i[e].since<=i[e].until?1:-1,s=this.clone().startOf("day").valueOf(),i[e].since<=s&&s<=i[e].until||i[e].until<=s&&s<=i[e].since)return(this.year()-n(i[e].since).year())*r+i[e].offset;return this.year()}function Ds(e){return o(this,"_erasNameRegex")||Gs.call(this),e?this._erasNameRegex:this._erasRegex}function Ps(e){return o(this,"_erasAbbrRegex")||Gs.call(this),e?this._erasAbbrRegex:this._erasRegex}function _s(e){return o(this,"_erasNarrowRegex")||Gs.call(this),e?this._erasNarrowRegex:this._erasRegex}function Zs(e,t){return t.erasAbbrRegex(e)}function Us(e,t){return t.erasNameRegex(e)}function zs(e,t){return t.erasNarrowRegex(e)}function Ys(e,t){return t._eraYearOrdinalRegex||xe}function Gs(){var e,t,r=[],n=[],s=[],i=[],a=this.eras();for(e=0,t=a.length;e<t;++e)n.push(_e(a[e].name)),r.push(_e(a[e].abbr)),s.push(_e(a[e].narrow)),i.push(_e(a[e].name)),i.push(_e(a[e].abbr)),i.push(_e(a[e].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+n.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}function Vs(e,t){z(0,[e,e.length],0,t)}function Bs(e){return Js.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Hs(e){return Js.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ws(){return Rt(this.year(),1,4)}function js(){return Rt(this.isoWeekYear(),1,4)}function qs(){var e=this.localeData()._week;return Rt(this.year(),e.dow,e.doy)}function Xs(){var e=this.localeData()._week;return Rt(this.weekYear(),e.dow,e.doy)}function Js(e,t,r,n,s){var i;return null==e?gt(this,n,s).year:(t>(i=Rt(e,n,s))&&(t=i),Ks.call(this,e,t,r,n,s))}function Ks(e,t,r,n,s){var i=Tt(e,t,r,n,s),a=vt(i.year,0,i.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function $s(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}z("N",0,0,"eraAbbr"),z("NN",0,0,"eraAbbr"),z("NNN",0,0,"eraAbbr"),z("NNNN",0,0,"eraName"),z("NNNNN",0,0,"eraNarrow"),z("y",["y",1],"yo","eraYear"),z("y",["yy",2],0,"eraYear"),z("y",["yyy",3],0,"eraYear"),z("y",["yyyy",4],0,"eraYear"),Le("N",Zs),Le("NN",Zs),Le("NNN",Zs),Le("NNNN",Us),Le("NNNNN",zs),Ue(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,r,n){var s=r._locale.erasParse(e,n,r._strict);s?y(r).era=s:y(r).invalidEra=e})),Le("y",xe),Le("yy",xe),Le("yyy",xe),Le("yyyy",xe),Le("yo",Ys),Ue(["y","yy","yyy","yyyy"],Ve),Ue(["yo"],(function(e,t,r,n){var s;r._locale._eraYearOrdinalRegex&&(s=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Ve]=r._locale.eraYearOrdinalParse(e,s):t[Ve]=parseInt(e,10)})),z(0,["gg",2],0,(function(){return this.weekYear()%100})),z(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Vs("gggg","weekYear"),Vs("ggggg","weekYear"),Vs("GGGG","isoWeekYear"),Vs("GGGGG","isoWeekYear"),re("weekYear","gg"),re("isoWeekYear","GG"),ae("weekYear",1),ae("isoWeekYear",1),Le("G",Me),Le("g",Me),Le("GG",ge,me),Le("gg",ge,me),Le("GGGG",ke,Ce),Le("gggg",ke,Ce),Le("GGGGG",Ae,Te),Le("ggggg",Ae,Te),ze(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,r,n){t[n.substr(0,2)]=ce(e)})),ze(["gg","GG"],(function(e,t,r,s){t[s]=n.parseTwoDigitYear(e)})),z("Q",0,"Qo","quarter"),re("quarter","Q"),ae("quarter",7),Le("Q",Ee),Ue("Q",(function(e,t){t[Be]=3*(ce(e)-1)})),z("D",["DD",2],"Do","date"),re("date","D"),ae("date",9),Le("D",ge),Le("DD",ge,me),Le("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ue(["D","DD"],He),Ue("Do",(function(e,t){t[He]=ce(e.match(ge)[0])}));var Qs=le("Date",!0);function ei(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}z("DDD",["DDDD",3],"DDDo","dayOfYear"),re("dayOfYear","DDD"),ae("dayOfYear",4),Le("DDD",Se),Le("DDDD",ve),Ue(["DDD","DDDD"],(function(e,t,r){r._dayOfYear=ce(e)})),z("m",["mm",2],0,"minute"),re("minute","m"),ae("minute",14),Le("m",ge),Le("mm",ge,me),Ue(["m","mm"],je);var ti=le("Minutes",!1);z("s",["ss",2],0,"second"),re("second","s"),ae("second",15),Le("s",ge),Le("ss",ge,me),Ue(["s","ss"],qe);var ri,ni,si=le("Seconds",!1);for(z("S",0,0,(function(){return~~(this.millisecond()/100)})),z(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),z(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),z(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),z(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),z(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),z(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),re("millisecond","ms"),ae("millisecond",16),Le("S",Se,Ee),Le("SS",Se,me),Le("SSS",Se,ve),ri="SSSS";ri.length<=9;ri+="S")Le(ri,xe);function ii(e,t){t[Xe]=ce(1e3*("0."+e))}for(ri="S";ri.length<=9;ri+="S")Ue(ri,ii);function ai(){return this._isUTC?"UTC":""}function oi(){return this._isUTC?"Coordinated Universal Time":""}ni=le("Milliseconds",!1),z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var ui=g.prototype;function hi(e){return qr(1e3*e)}function ci(){return qr.apply(null,arguments).parseZone()}function li(e){return e}ui.add=Ln,ui.calendar=Gn,ui.clone=Vn,ui.diff=Jn,ui.endOf=Es,ui.format=ts,ui.from=rs,ui.fromNow=ns,ui.to=ss,ui.toNow=is,ui.get=pe,ui.invalidAt=ks,ui.isAfter=Bn,ui.isBefore=Hn,ui.isBetween=Wn,ui.isSame=jn,ui.isSameOrAfter=qn,ui.isSameOrBefore=Xn,ui.isValid=Fs,ui.lang=os,ui.locale=as,ui.localeData=us,ui.max=Jr,ui.min=Xr,ui.parsingFlags=Ss,ui.set=Ie,ui.startOf=ys,ui.subtract=Dn,ui.toArray=Ts,ui.toObject=gs,ui.toDate=Cs,ui.toISOString=Qn,ui.inspect=es,"undefined"!==typeof Symbol&&null!=Symbol.for&&(ui[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ui.toJSON=Rs,ui.toString=$n,ui.unix=vs,ui.valueOf=ms,ui.creationData=As,ui.eraName=Os,ui.eraNarrow=ws,ui.eraAbbr=bs,ui.eraYear=Ls,ui.year=yt,ui.isLeapYear=Et,ui.weekYear=Bs,ui.isoWeekYear=Hs,ui.quarter=ui.quarters=$s,ui.month=ct,ui.daysInMonth=lt,ui.week=ui.weeks=xt,ui.isoWeek=ui.isoWeeks=Mt,ui.weeksInYear=qs,ui.weeksInWeekYear=Xs,ui.isoWeeksInYear=Ws,ui.isoWeeksInISOWeekYear=js,ui.date=Qs,ui.day=ui.days=Bt,ui.weekday=Ht,ui.isoWeekday=Wt,ui.dayOfYear=ei,ui.hour=ui.hours=nr,ui.minute=ui.minutes=ti,ui.second=ui.seconds=si,ui.millisecond=ui.milliseconds=ni,ui.utcOffset=In,ui.utc=En,ui.local=mn,ui.parseZone=vn,ui.hasAlignedHourOffset=Cn,ui.isDST=Tn,ui.isLocal=Rn,ui.isUtcOffset=Fn,ui.isUtc=Sn,ui.isUTC=Sn,ui.zoneAbbr=ai,ui.zoneName=oi,ui.dates=S("dates accessor is deprecated. Use date instead.",Qs),ui.months=S("months accessor is deprecated. Use month instead",ct),ui.years=S("years accessor is deprecated. Use year instead",yt),ui.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",yn),ui.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",gn);var fi=w.prototype;function di(e,t,r,n){var s=Er(),i=p().set(n,t);return s[r](i,e)}function pi(e,t,r){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return di(e,t,r,"month");var n,s=[];for(n=0;n<12;n++)s[n]=di(e,n,r,"month");return s}function Ii(e,t,r,n){"boolean"===typeof e?(c(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,c(t)&&(r=t,t=void 0),t=t||"");var s,i=Er(),a=e?i._week.dow:0,o=[];if(null!=r)return di(t,(r+a)%7,n,"day");for(s=0;s<7;s++)o[s]=di(t,(s+a)%7,n,"day");return o}function yi(e,t){return pi(e,t,"months")}function Ei(e,t){return pi(e,t,"monthsShort")}function mi(e,t,r){return Ii(e,t,r,"weekdays")}function vi(e,t,r){return Ii(e,t,r,"weekdaysShort")}function Ci(e,t,r){return Ii(e,t,r,"weekdaysMin")}fi.calendar=L,fi.longDateFormat=W,fi.invalidDate=q,fi.ordinal=K,fi.preparse=li,fi.postformat=li,fi.relativeTime=Q,fi.pastFuture=ee,fi.set=N,fi.eras=xs,fi.erasParse=Ms,fi.erasConvertYear=Ns,fi.erasAbbrRegex=Ps,fi.erasNameRegex=Ds,fi.erasNarrowRegex=_s,fi.months=it,fi.monthsShort=at,fi.monthsParse=ut,fi.monthsRegex=dt,fi.monthsShortRegex=ft,fi.week=Ft,fi.firstDayOfYear=At,fi.firstDayOfWeek=kt,fi.weekdays=Ut,fi.weekdaysMin=Yt,fi.weekdaysShort=zt,fi.weekdaysParse=Vt,fi.weekdaysRegex=jt,fi.weekdaysShortRegex=qt,fi.weekdaysMinRegex=Xt,fi.isPM=tr,fi.meridiem=sr,pr("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===ce(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),n.lang=S("moment.lang is deprecated. Use moment.locale instead.",pr),n.langData=S("moment.langData is deprecated. Use moment.localeData instead.",Er);var Ti=Math.abs;function gi(){var e=this._data;return this._milliseconds=Ti(this._milliseconds),this._days=Ti(this._days),this._months=Ti(this._months),e.milliseconds=Ti(e.milliseconds),e.seconds=Ti(e.seconds),e.minutes=Ti(e.minutes),e.hours=Ti(e.hours),e.months=Ti(e.months),e.years=Ti(e.years),this}function Ri(e,t,r,n){var s=xn(t,r);return e._milliseconds+=n*s._milliseconds,e._days+=n*s._days,e._months+=n*s._months,e._bubble()}function Fi(e,t){return Ri(this,e,t,1)}function Si(e,t){return Ri(this,e,t,-1)}function ki(e){return e<0?Math.floor(e):Math.ceil(e)}function Ai(){var e,t,r,n,s,i=this._milliseconds,a=this._days,o=this._months,u=this._data;return i>=0&&a>=0&&o>=0||i<=0&&a<=0&&o<=0||(i+=864e5*ki(Mi(o)+a),a=0,o=0),u.milliseconds=i%1e3,e=he(i/1e3),u.seconds=e%60,t=he(e/60),u.minutes=t%60,r=he(t/60),u.hours=r%24,a+=he(r/24),o+=s=he(xi(a)),a-=ki(Mi(s)),n=he(o/12),o%=12,u.days=a,u.months=o,u.years=n,this}function xi(e){return 4800*e/146097}function Mi(e){return 146097*e/4800}function Ni(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,r=this._months+xi(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(Mi(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Oi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*ce(this._months/12):NaN}function wi(e){return function(){return this.as(e)}}var bi=wi("ms"),Li=wi("s"),Di=wi("m"),Pi=wi("h"),_i=wi("d"),Zi=wi("w"),Ui=wi("M"),zi=wi("Q"),Yi=wi("y");function Gi(){return xn(this)}function Vi(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Bi(e){return function(){return this.isValid()?this._data[e]:NaN}}var Hi=Bi("milliseconds"),Wi=Bi("seconds"),ji=Bi("minutes"),qi=Bi("hours"),Xi=Bi("days"),Ji=Bi("months"),Ki=Bi("years");function $i(){return he(this.days()/7)}var Qi=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ta(e,t,r,n,s){return s.relativeTime(t||1,!!r,e,n)}function ra(e,t,r,n){var s=xn(e).abs(),i=Qi(s.as("s")),a=Qi(s.as("m")),o=Qi(s.as("h")),u=Qi(s.as("d")),h=Qi(s.as("M")),c=Qi(s.as("w")),l=Qi(s.as("y")),f=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||a<=1&&["m"]||a<r.m&&["mm",a]||o<=1&&["h"]||o<r.h&&["hh",o]||u<=1&&["d"]||u<r.d&&["dd",u];return null!=r.w&&(f=f||c<=1&&["w"]||c<r.w&&["ww",c]),(f=f||h<=1&&["M"]||h<r.M&&["MM",h]||l<=1&&["y"]||["yy",l])[2]=t,f[3]=+e>0,f[4]=n,ta.apply(null,f)}function na(e){return void 0===e?Qi:"function"===typeof e&&(Qi=e,!0)}function sa(e,t){return void 0!==ea[e]&&(void 0===t?ea[e]:(ea[e]=t,"s"===e&&(ea.ss=t-1),!0))}function ia(e,t){if(!this.isValid())return this.localeData().invalidDate();var r,n,s=!1,i=ea;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(s=e),"object"===typeof t&&(i=Object.assign({},ea,t),null!=t.s&&null==t.ss&&(i.ss=t.s-1)),n=ra(this,!s,i,r=this.localeData()),s&&(n=r.pastFuture(+this,n)),r.postformat(n)}var aa=Math.abs;function oa(e){return(e>0)-(e<0)||+e}function ua(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r,n,s,i,a,o,u=aa(this._milliseconds)/1e3,h=aa(this._days),c=aa(this._months),l=this.asSeconds();return l?(e=he(u/60),t=he(e/60),u%=60,e%=60,r=he(c/12),c%=12,n=u?u.toFixed(3).replace(/\.?0+$/,""):"",s=l<0?"-":"",i=oa(this._months)!==oa(l)?"-":"",a=oa(this._days)!==oa(l)?"-":"",o=oa(this._milliseconds)!==oa(l)?"-":"",s+"P"+(r?i+r+"Y":"")+(c?i+c+"M":"")+(h?a+h+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+n+"S":"")):"P0D"}var ha=an.prototype;return ha.isValid=nn,ha.abs=gi,ha.add=Fi,ha.subtract=Si,ha.as=Ni,ha.asMilliseconds=bi,ha.asSeconds=Li,ha.asMinutes=Di,ha.asHours=Pi,ha.asDays=_i,ha.asWeeks=Zi,ha.asMonths=Ui,ha.asQuarters=zi,ha.asYears=Yi,ha.valueOf=Oi,ha._bubble=Ai,ha.clone=Gi,ha.get=Vi,ha.milliseconds=Hi,ha.seconds=Wi,ha.minutes=ji,ha.hours=qi,ha.days=Xi,ha.weeks=$i,ha.months=Ji,ha.years=Ki,ha.humanize=ia,ha.toISOString=ua,ha.toString=ua,ha.toJSON=ua,ha.locale=as,ha.localeData=us,ha.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ua),ha.lang=os,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Le("x",Me),Le("X",we),Ue("X",(function(e,t,r){r._d=new Date(1e3*parseFloat(e))})),Ue("x",(function(e,t,r){r._d=new Date(ce(e))})),n.version="2.29.4",s(qr),n.fn=ui,n.min=$r,n.max=Qr,n.now=en,n.utc=p,n.unix=hi,n.months=yi,n.isDate=l,n.locale=pr,n.invalid=m,n.duration=xn,n.isMoment=R,n.weekdays=mi,n.parseZone=ci,n.localeData=Er,n.isDuration=on,n.monthsShort=Ei,n.weekdaysMin=Ci,n.defineLocale=Ir,n.updateLocale=yr,n.locales=mr,n.weekdaysShort=vi,n.normalizeUnits=ne,n.relativeTimeRounding=na,n.relativeTimeThreshold=sa,n.calendarFormat=Yn,n.prototype=ui,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n}()},40376:function(e,t,r){"use strict";r.d(t,{F:function(){return lt}});var n=r(30070),s=r(54288),i=r(43045),a=r(2721),o=r(63931),u=r(54314),h=r(55248),c=r(96090),l=r(58618),f=r(21324),d=r(78041),p=r(56289),I=r(17548),y=r(26663),E="IfcManager is null!",m=function(e){(0,l.Z)(r,e);var t=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=t.apply(this,arguments)).modelID=r.modelIdCounter++,e.ifcManager=null,e.mesh=(0,c.Z)(e),e}return(0,h.Z)(r,[{key:"setIFCManager",value:function(e){this.ifcManager=e}},{key:"setWasmPath",value:function(e){if(null===this.ifcManager)throw new Error(E);this.ifcManager.setWasmPath(e)}},{key:"close",value:function(e){if(null===this.ifcManager)throw new Error(E);this.ifcManager.close(this.modelID,e)}},{key:"getExpressId",value:function(e,t){if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getExpressId(e,t)}},{key:"getAllItemsOfType",value:function(e,t){if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getAllItemsOfType(this.modelID,e,t)}},{key:"getItemProperties",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getItemProperties(this.modelID,e,t)}},{key:"getPropertySets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getPropertySets(this.modelID,e,t)}},{key:"getTypeProperties",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getTypeProperties(this.modelID,e,t)}},{key:"getIfcType",value:function(e){if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getIfcType(this.modelID,e)}},{key:"getSpatialStructure",value:function(){if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getSpatialStructure(this.modelID)}},{key:"getSubset",value:function(e){if(null===this.ifcManager)throw new Error(E);return this.ifcManager.getSubset(this.modelID,e)}},{key:"removeSubset",value:function(e,t){if(null===this.ifcManager)throw new Error(E);this.ifcManager.removeSubset(this.modelID,e,t)}},{key:"createSubset",value:function(e){if(null===this.ifcManager)throw new Error(E);var t=(0,o.Z)((0,o.Z)({},e),{},{modelID:this.modelID});return this.ifcManager.createSubset(t)}}],[{key:"dispose",value:function(){r.modelIdCounter=0}}]),r}(p.Mesh);m.modelIdCounter=0;var v,C,T=function(){function e(t,r){var n;(0,u.Z)(this,e),this.state=t,this.BVH=r,this.loadedModels=0,this.optionalCategories=(n={},(0,a.Z)(n,d.IFCSPACE,!0),(0,a.Z)(n,d.IFCOPENINGELEMENT,!1),n),this.geometriesByMaterials={},this.loadingState={total:0,current:0,step:.1},this.currentWebIfcID=-1,this.currentModelID=-1}return(0,h.Z)(e,[{key:"setupOptionalCategories",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.optionalCategories=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parse",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.state.api.wasmModule){e.next=3;break}return e.next=3,this.state.api.Init();case 3:return e.next=5,this.newIfcModel(t);case 5:if(this.loadedModels++,!r){e.next=9;break}return e.next=9,this.state.api.SetGeometryTransformation(this.currentWebIfcID,r);case 9:return e.abrupt("return",this.loadAllGeometry(this.currentWebIfcID));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAndClearErrors",value:function(e){}},{key:"notifyProgress",value:function(e,t){this.state.onProgress&&this.state.onProgress({loaded:e,total:t})}},{key:"newIfcModel",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint8Array(t),e.next=3,this.state.api.OpenModel(r,this.state.webIfcSettings);case 3:this.currentWebIfcID=e.sent,this.currentModelID=this.state.useJSON?this.loadedModels:this.currentWebIfcID,this.state.models[this.currentModelID]={modelID:this.currentModelID,mesh:{},types:{},jsonData:{}};case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAllGeometry",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addOptionalCategories(t),e.next=3,this.initializeLoadingState(t);case 3:return this.state.api.StreamAllMeshes(t,(function(e){o.updateLoadingState(),o.streamMesh(t,e)})),this.notifyLoadingEnded(),r=[],n=[],Object.keys(this.geometriesByMaterials).forEach((function(e){var t=o.geometriesByMaterials[e].geometries,s=(0,I.qf)(t);n.push(o.geometriesByMaterials[e].material),r.push(s)})),i=(0,I.qf)(r,!0),this.cleanUpGeometryMemory(r),this.BVH&&this.BVH.applyThreeMeshBVH(i),a=new m(i,n),this.state.models[this.currentModelID].mesh=a,e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeLoadingState",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.api.GetLineIDsWithType(t,d.IFCPRODUCTDEFINITIONSHAPE);case 2:r=e.sent,this.loadingState.total=r.size(),this.loadingState.current=0,this.loadingState.step=.1;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"notifyLoadingEnded",value:function(){this.notifyProgress(this.loadingState.total,this.loadingState.total)}},{key:"updateLoadingState",value:function(){if(Math.min(this.loadingState.current++,this.loadingState.total)/this.loadingState.total>=this.loadingState.step){var e=Math.ceil(this.loadingState.total*this.loadingState.step);this.notifyProgress(e,this.loadingState.total),this.loadingState.step+=.1}}},{key:"addOptionalCategories",value:function(e){var t=this,r=[];for(var n in this.optionalCategories)if(this.optionalCategories.hasOwnProperty(n)){var s=parseInt(n);this.optionalCategories[s]&&r.push(s)}this.state.api.StreamAllMeshesWithTypes(this.currentWebIfcID,r,(function(r){t.streamMesh(e,r)}))}},{key:"streamMesh",value:function(e,t){for(var r=t.geometries,n=r.size(),s=0;s<n;s++){var i=r.get(s),a=this.getPlacedGeometry(e,t.expressID,i),o=a.geometry.applyMatrix4(a.matrix);this.storeGeometryByMaterial(i.color,o)}}},{key:"getPlacedGeometry",value:function(e,t,r){var n=this.getBufferGeometry(e,t,r),s=new p.Mesh(n);return s.matrix=this.getMeshMatrix(r.flatTransformation),s.matrixAutoUpdate=!1,s}},{key:"getBufferGeometry",value:function(e,t,r){var n=this.state.api.GetGeometry(e,r.geometryExpressID),s=this.state.api.GetVertexArray(n.GetVertexData(),n.GetVertexDataSize()),i=this.state.api.GetIndexArray(n.GetIndexData(),n.GetIndexDataSize()),a=this.ifcGeometryToBuffer(t,s,i);return n.delete(),a}},{key:"storeGeometryByMaterial",value:function(e,t){var r="".concat(e.x).concat(e.y).concat(e.z).concat(e.w);if(this.geometriesByMaterials[r])this.geometriesByMaterials[r].geometries.push(t);else{var n=new p.Color(e.x,e.y,e.z),s=new p.MeshLambertMaterial({color:n,side:p.DoubleSide});s.transparent=1!==e.w,s.transparent&&(s.opacity=e.w),this.geometriesByMaterials[r]={material:s,geometries:[t]}}}},{key:"getMeshMatrix",value:function(e){var t=new p.Matrix4;return t.fromArray(e),t}},{key:"ifcGeometryToBuffer",value:function(e,t,r){for(var n=new p.BufferGeometry,s=new Float32Array(t.length/2),i=new Float32Array(t.length/2),a=new Uint32Array(t.length/6),o=0;o<t.length;o+=6)s[o/2]=t[o],s[o/2+1]=t[o+1],s[o/2+2]=t[o+2],i[o/2]=t[o+3],i[o/2+1]=t[o+4],i[o/2+2]=t[o+5],a[o/6]=e;return n.setAttribute("position",new p.BufferAttribute(s,3)),n.setAttribute("normal",new p.BufferAttribute(i,3)),n.setAttribute("expressID",new p.BufferAttribute(a,1)),n.setIndex(new p.BufferAttribute(r,1)),n}},{key:"cleanUpGeometryMemory",value:function(e){var t=this;e.forEach((function(e){return e.dispose()})),Object.keys(this.geometriesByMaterials).forEach((function(e){var r=t.geometriesByMaterials[e];r.geometries.forEach((function(e){return e.dispose()})),r.geometries=[],r.material=null})),this.geometriesByMaterials={}}}]),e}(),g=function(){function e(t){(0,u.Z)(this,e),this.state=t,this.map={}}return(0,h.Z)(e,[{key:"generateGeometryIndexMap",value:function(e){if(!this.map[e]){var t,r=this.getGeometry(e),s=this.newItemsMap(e,r),i=(0,n.Z)(r.groups);try{for(i.s();!(t=i.n()).done;){var a=t.value;this.fillItemsWithGroupInfo(a,r,s)}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getSubsetID",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT",n=e,s=t?t.uuid:"DEFAULT";return"".concat(n," - ").concat(s," - ").concat(r)}},{key:"dispose",value:function(){Object.values(this.map).forEach((function(e){e.indexCache=null,e.map=null})),this.map=null}},{key:"getGeometry",value:function(e){var t=this.state.models[e].mesh.geometry;if(!t)throw new Error("Model without geometry.");if(!t.index)throw new Error("Geometry must be indexed");return t}},{key:"newItemsMap",value:function(e,t){var r=t.index.array;return this.map[e]={indexCache:r.slice(0,t.index.array.length),map:new Map},this.map[e]}},{key:"fillItemsWithGroupInfo",value:function(e,t,r){for(var n=-1,s=e.materialIndex,i=e.start,a=i+e.count-1,o=-1,u=-1,h=i;h<=a;h++){var c=t.index.array[h],l=t.attributes.expressID.array[c];if(-1===n&&(n=l,o=h),h===a){this.getMaterialStore(r.map,l,s).push(o,a);break}if(n!==l)u=h-1,this.getMaterialStore(r.map,n,s).push(o,u),n=l,o=h}}},{key:"getMaterialStore",value:function(e,t,r){void 0===e.get(t)&&e.set(t,{});var n=e.get(t);if(void 0===n)throw new Error("Geometry map generation error");return void 0===n[r]&&(n[r]=[]),n[r]}}]),e}(),R=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,null,[{key:"getAllIndicesOfGroup",value:function(t,r,s,i){var a,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=[],h=(0,n.Z)(r);try{for(h.s();!(a=h.n()).done;){var c=a.value,l=i.map.get(c);if(l){var f=l[s];f&&e.getIndexChunk(f,u,s,i,o)}}}catch(d){h.e(d)}finally{h.f()}return u}},{key:"getIndexChunk",value:function(e,t,r,n,s){for(var i=e.length/2,a=0;a<i;a++)for(var o=2*a,u=e[o],h=e[o+1],c=u;c<=h;c++)s?t.push(n.indexCache[c]):(t[r]||(t[r]=[]),t[r].push(n.indexCache[c]))}}]),e}(),F=function(){function e(t,r,n,s){(0,u.Z)(this,e),this.state=t,this.items=r,this.subsets=n,this.BVH=s,this.tempIndex=[]}return(0,h.Z)(e,[{key:"createSubset",value:function(e,t){var r=this;this.items.map[e.modelID]||this.items.generateGeometryIndexMap(e.modelID),this.subsets[t]||this.initializeSubset(e,t),this.filterIndices(e,t),this.constructSubsetByMaterial(e,t),e.ids.forEach((function(e){return r.subsets[t].ids.add(e)})),this.subsets[t].mesh.geometry.setIndex(this.tempIndex),this.tempIndex.length=0;var n=this.subsets[t].mesh;return e.applyBVH&&this.BVH.applyThreeMeshBVH(n.geometry),e.scene&&e.scene.add(n),this.subsets[t].mesh}},{key:"dispose",value:function(){this.tempIndex=[]}},{key:"initializeSubset",value:function(e,t){var r=this.state.models[e.modelID].mesh,n=new p.BufferGeometry;this.initializeSubsetAttributes(n,r),e.material||this.initializeSubsetGroups(n,r);var s=new p.Mesh(n,e.material||r.material);s.modelID=e.modelID;var i=Boolean(e.applyBVH);this.subsets[t]={ids:new Set,mesh:s,bvh:i},r.add(s)}},{key:"initializeSubsetAttributes",value:function(e,t){e.setAttribute("position",t.geometry.attributes.position),e.setAttribute("normal",t.geometry.attributes.normal),e.setAttribute("expressID",t.geometry.attributes.expressID),e.setIndex([])}},{key:"initializeSubsetGroups",value:function(e,t){e.groups=JSON.parse(JSON.stringify(t.geometry.groups)),this.resetGroups(e)}},{key:"filterIndices",value:function(e,t){var r=this.subsets[t].mesh.geometry;if(e.removePrevious)return r.setIndex([]),void this.resetGroups(r);var n=r.index.array,s=this.subsets[t].ids;e.ids=e.ids.filter((function(e){return!s.has(e)})),this.tempIndex=Array.from(n)}},{key:"constructSubsetByMaterial",value:function(e,t){for(var r=this.state.models[e.modelID].mesh,n={count:0},s=0;s<r.geometry.groups.length;s++)this.insertNewIndices(e,t,s,n)}},{key:"insertNewIndices",value:function(e,t,r,n){var s=this,i=this.items.map[e.modelID],a=R.getAllIndicesOfGroup(e.modelID,e.ids,r,i);e.material?a.forEach((function(e){return s.tempIndex.push(e)})):this.insertIndicesAtGroup(t,a,r,n)}},{key:"insertIndicesAtGroup",value:function(e,t,r,n){var s=this.getCurrentGroup(e,r);s.start+=n.count;var i=s.start+s.count;if(n.count+=t.length,t.length>0){var a=i,o=this.tempIndex.slice(0,a),u=this.tempIndex.slice(a);this.tempIndex=Array.prototype.concat.apply([],[o,t,u]),s.count+=t.length}}},{key:"getCurrentGroup",value:function(e,t){return this.subsets[e].mesh.geometry.groups[t]}},{key:"resetGroups",value:function(e){e.groups.forEach((function(e){e.start=0,e.count=0}))}}]),e}(),S=function(){function e(t,r){(0,u.Z)(this,e),this.subsets={},this.state=t,this.items=new g(t),this.BVH=r,this.subsetCreator=new F(t,this.items,this.subsets,this.BVH)}return(0,h.Z)(e,[{key:"getAllSubsets",value:function(){return this.subsets}},{key:"getSubset",value:function(e,t,r){var n=this.getSubsetID(e,t,r);return this.subsets[n].mesh}},{key:"removeSubset",value:function(e,t,r){var n=this.getSubsetID(e,t,r),s=this.subsets[n];s&&(s.mesh.parent&&s.mesh.removeFromParent(),s.mesh.geometry.attributes={},s.mesh.geometry.index=null,s.mesh.geometry.dispose(),s.mesh.geometry=null,delete this.subsets[n])}},{key:"createSubset",value:function(e){var t=this.getSubsetID(e.modelID,e.material,e.customID);return this.subsetCreator.createSubset(e,t)}},{key:"removeFromSubset",value:function(e,t,r,n){var s=this.getSubsetID(e,n,r);if(this.subsets[s]){var i=this.subsets[s].ids;return t.forEach((function(e){i.has(e)&&i.delete(e)})),this.createSubset({modelID:e,removePrevious:!0,material:n,customID:r,applyBVH:this.subsets[s].bvh,ids:Array.from(i),scene:this.subsets[s].mesh.parent})}}},{key:"clearSubset",value:function(e,t,r){var n=this.getSubsetID(e,r,t);this.subsets[n]&&(this.subsets[n].ids.clear(),this.getSubset(e,r,t).geometry.setIndex([]))}},{key:"dispose",value:function(){this.items.dispose(),this.subsetCreator.dispose(),Object.values(this.subsets).forEach((function(e){e.ids=null,e.mesh.removeFromParent();var t=e.mesh.material;Array.isArray(t)?t.forEach((function(e){return e.dispose()})):t.dispose(),e.mesh.geometry.index=null,e.mesh.geometry.dispose();var r=e.mesh.geometry;r.disposeBoundsTree&&r.disposeBoundsTree(),e.mesh=null})),this.subsets=null}},{key:"getSubsetID",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT",n=e,s=t?t.uuid:"DEFAULT";return"".concat(n," - ").concat(s," - ").concat(r)}}]),e}(),k={aggregates:{name:d.IFCRELAGGREGATES,relating:"RelatingObject",related:"RelatedObjects",key:"children"},spatial:{name:d.IFCRELCONTAINEDINSPATIALSTRUCTURE,relating:"RelatingStructure",related:"RelatedElements",key:"children"},psets:{name:d.IFCRELDEFINESBYPROPERTIES,relating:"RelatingPropertyDefinition",related:"RelatedObjects",key:"hasPsets"},materials:{name:d.IFCRELASSOCIATESMATERIAL,relating:"RelatingMaterial",related:"RelatedObjects",key:"hasMaterial"},type:{name:d.IFCRELDEFINESBYTYPE,relating:"RelatingType",related:"RelatedObjects",key:"hasType"}},A=function(){function e(t){(0,u.Z)(this,e),this.state=t}return(0,h.Z)(e,[{key:"getPropertySets",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,this.getProperty(t,r,n,k.psets);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTypeProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,this.getProperty(t,r,n,k.type);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMaterialsProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.next=3,this.getProperty(t,r,n,k.materials);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSpatialNode",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n,i){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChildren(t,r,n,k.aggregates,i);case 2:return e.next=4,this.getChildren(t,r,n,k.spatial,i);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,s){return e.apply(this,arguments)}}()},{key:"getChildren",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n,i,a){var u,h,c,l,f,d,p;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=(u=n[r.expressID])){e.next=3;break}return e.abrupt("return");case 3:h=i.key,c=[],l=0;case 6:if(!(l<u.length)){e.next=20;break}if(f=u[l],d=this.newNode(t,f),!a){e.next=14;break}return e.next=12,this.getItemProperties(t,d.expressID);case 12:p=e.sent,d=(0,o.Z)((0,o.Z)({},p),d);case 14:return e.next=16,this.getSpatialNode(t,d,n,a);case 16:c.push(d);case 17:l++,e.next=6;break;case 20:r[h]=c;case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,n,s,i){return e.apply(this,arguments)}}()},{key:"newNode",value:function(e,t){return{expressID:t,type:this.getNodeType(e,t),children:[]}}},{key:"getSpatialTreeChunks",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,this.getChunks(t,r,k.aggregates);case 3:return e.next=5,this.getChunks(t,r,k.spatial);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveChunk",value:function(e,t,r){var n=r[t.relating].value,s=r[t.related].map((function(e){return e.value}));void 0==e[n]?e[n]=s:e[n]=e[n].concat(s)}},{key:"getRelated",value:function(e,t,r){var n=e[t.relating];if(!n)return console.warn("The object with ID ".concat(e.expressID," has a broken reference."));Array.isArray(n)?n.forEach((function(e){return r.push(e.value)})):r.push(n.value)}},{key:"getProperty",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>2&&void 0!==n[2]&&n[2],n.length>3?n[3]:void 0;case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getChunks",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getItemProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>2&&void 0!==n[2]&&n[2];case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNodeType",value:function(e,t){}}],[{key:"isRelated",value:function(e,t,r){var n=t[r.related];return Array.isArray(n)?n.map((function(e){return e.value})).includes(e):n.value===e}},{key:"newIfcProject",value:function(e){return{expressID:e,type:"IFCPROJECT",children:[]}}}]),e}(),x={103090709:"IFCPROJECT",4097777520:"IFCSITE",4031249490:"IFCBUILDING",3124254112:"IFCBUILDINGSTOREY",3856911033:"IFCSPACE",1674181508:"IFCANNOTATION",25142252:"IFCCONTROLLER",32344328:"IFCBOILER",76236018:"IFCLAMP",90941305:"IFCPUMP",177149247:"IFCAIRTERMINALBOX",182646315:"IFCFLOWINSTRUMENT",263784265:"IFCFURNISHINGELEMENT",264262732:"IFCELECTRICGENERATOR",277319702:"IFCAUDIOVISUALAPPLIANCE",310824031:"IFCPIPEFITTING",331165859:"IFCSTAIR",342316401:"IFCDUCTFITTING",377706215:"IFCMECHANICALFASTENER",395920057:"IFCDOOR",402227799:"IFCELECTRICMOTOR",413509423:"IFCSYSTEMFURNITUREELEMENT",484807127:"IFCEVAPORATOR",486154966:"IFCWINDOWSTANDARDCASE",629592764:"IFCLIGHTFIXTURE",630975310:"IFCUNITARYCONTROLELEMENT",635142910:"IFCCABLECARRIERFITTING",639361253:"IFCCOIL",647756555:"IFCFASTENER",707683696:"IFCFLOWSTORAGEDEVICE",738039164:"IFCPROTECTIVEDEVICE",753842376:"IFCBEAM",812556717:"IFCTANK",819412036:"IFCFILTER",843113511:"IFCCOLUMN",862014818:"IFCELECTRICDISTRIBUTIONBOARD",900683007:"IFCFOOTING",905975707:"IFCCOLUMNSTANDARDCASE",926996030:"IFCVOIDINGFEATURE",979691226:"IFCREINFORCINGBAR",987401354:"IFCFLOWSEGMENT",1003880860:"IFCELECTRICTIMECONTROL",1051757585:"IFCCABLEFITTING",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",1073191201:"IFCMEMBER",1095909175:"IFCBUILDINGELEMENTPROXY",1156407060:"IFCPLATESTANDARDCASE",1162798199:"IFCSWITCHINGDEVICE",1329646415:"IFCSHADINGDEVICE",1335981549:"IFCDISCRETEACCESSORY",1360408905:"IFCDUCTSILENCER",1404847402:"IFCSTACKTERMINAL",1426591983:"IFCFIRESUPPRESSIONTERMINAL",1437502449:"IFCMEDICALDEVICE",1509553395:"IFCFURNITURE",1529196076:"IFCSLAB",1620046519:"IFCTRANSPORTELEMENT",1634111441:"IFCAIRTERMINAL",1658829314:"IFCENERGYCONVERSIONDEVICE",1677625105:"IFCCIVILELEMENT",1687234759:"IFCPILE",1904799276:"IFCELECTRICAPPLIANCE",1911478936:"IFCMEMBERSTANDARDCASE",1945004755:"IFCDISTRIBUTIONELEMENT",1973544240:"IFCCOVERING",1999602285:"IFCSPACEHEATER",2016517767:"IFCROOF",2056796094:"IFCAIRTOAIRHEATRECOVERY",2058353004:"IFCFLOWCONTROLLER",2068733104:"IFCHUMIDIFIER",2176052936:"IFCJUNCTIONBOX",2188021234:"IFCFLOWMETER",2223149337:"IFCFLOWTERMINAL",2262370178:"IFCRAILING",2272882330:"IFCCONDENSER",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",2320036040:"IFCREINFORCINGMESH",2347447852:"IFCTENDONANCHOR",2391383451:"IFCVIBRATIONISOLATOR",2391406946:"IFCWALL",2474470126:"IFCMOTORCONNECTION",2769231204:"IFCVIRTUALELEMENT",2814081492:"IFCENGINE",2906023776:"IFCBEAMSTANDARDCASE",2938176219:"IFCBURNER",2979338954:"IFCBUILDINGELEMENTPART",3024970846:"IFCRAMP",3026737570:"IFCTUBEBUNDLE",3027962421:"IFCSLABSTANDARDCASE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3053780830:"IFCSANITARYTERMINAL",3079942009:"IFCOPENINGSTANDARDCASE",3087945054:"IFCALARM",3101698114:"IFCSURFACEFEATURE",3127900445:"IFCSLABELEMENTEDCASE",3132237377:"IFCFLOWMOVINGDEVICE",3171933400:"IFCPLATE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",3242481149:"IFCDOORSTANDARDCASE",3283111854:"IFCRAMPFLIGHT",3296154744:"IFCCHIMNEY",3304561284:"IFCWINDOW",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3319311131:"IFCHEATEXCHANGER",3415622556:"IFCFAN",3420628829:"IFCSOLARDEVICE",3493046030:"IFCGEOGRAPHICELEMENT",3495092785:"IFCCURTAINWALL",3508470533:"IFCFLOWTREATMENTDEVICE",3512223829:"IFCWALLSTANDARDCASE",3518393246:"IFCDUCTSEGMENT",3571504051:"IFCCOMPRESSOR",3588315303:"IFCOPENINGELEMENT",3612865200:"IFCPIPESEGMENT",3640358203:"IFCCOOLINGTOWER",3651124850:"IFCPROJECTIONELEMENT",3694346114:"IFCOUTLET",3747195512:"IFCEVAPORATIVECOOLER",3758799889:"IFCCABLECARRIERSEGMENT",3824725483:"IFCTENDON",3825984169:"IFCTRANSFORMER",3902619387:"IFCCHILLER",4074379575:"IFCDAMPER",4086658281:"IFCSENSOR",4123344466:"IFCELEMENTASSEMBLY",4136498852:"IFCCOOLEDBEAM",4156078855:"IFCWALLELEMENTEDCASE",4175244083:"IFCINTERCEPTOR",4207607924:"IFCVALVE",4217484030:"IFCCABLESEGMENT",4237592921:"IFCWASTETERMINAL",4252922144:"IFCSTAIRFLIGHT",4278956645:"IFCFLOWFITTING",4288193352:"IFCACTUATOR",4292641817:"IFCUNITARYEQUIPMENT",3009204131:"IFCGRID"},M=function(e){(0,l.Z)(r,e);var t=(0,f.Z)(r);function r(){return(0,u.Z)(this,r),t.apply(this,arguments)}return(0,h.Z)(r,[{key:"getItemProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],e.abrupt("return",this.state.api.GetLine(t,r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSpatialStructure",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,n){var i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSpatialTreeChunks(t);case 2:return i=e.sent,e.next=5,this.state.api.GetLineIDsWithType(t,d.IFCPROJECT);case 5:return a=e.sent,o=a.get(0),u=r.newIfcProject(o),e.next=10,this.getSpatialNode(t,u,i,n);case 10:return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAllItemsOfType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){var i,a,o,u,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],e.next=3,this.state.api.GetLineIDsWithType(t,r);case 3:for(a=e.sent,o=0;o<a.size();o++)i.push(a.get(o));if(n){e.next=7;break}return e.abrupt("return",i);case 7:u=[],h=0;case 9:if(!(h<i.length)){e.next=18;break}return e.t0=u,e.next=13,this.state.api.GetLine(t,i[h]);case 13:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 15:h++,e.next=9;break;case 18:return e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getProperty",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i,a,o,u,h=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>2&&void 0!==h[2]&&h[2],i=h.length>3?h[3]:void 0,e.next=4,this.getAllRelatedItemsOfType(t,r,i);case 4:a=e.sent,o=[],u=0;case 7:if(!(u<a.length)){e.next=16;break}return e.t0=o,e.next=11,this.state.api.GetLine(t,a[u],n);case 11:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 13:u++,e.next=7;break;case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNodeType",value:function(e,t){var r=this.state.models[e].types[t];return x[r]}},{key:"getChunks",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){var i,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.api.GetLineIDsWithType(t,n.name);case 2:i=e.sent,a=0;case 4:if(!(a<i.size())){e.next=12;break}return e.next=7,this.state.api.GetLine(t,i.get(a),!1);case 7:o=e.sent,this.saveChunk(r,n,o);case 9:a++,e.next=4;break;case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getAllRelatedItemsOfType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){var i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.api.GetLineIDsWithType(t,n.name);case 2:i=e.sent,a=[],o=0;case 5:if(!(o<i.size())){e.next=14;break}return e.next=8,this.state.api.GetLine(t,i.get(o));case 8:u=e.sent,A.isRelated(r,u,n)&&this.getRelated(u,n,a);case 11:o++,e.next=5;break;case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(A),N={3821786052:"IFCACTIONREQUEST",2296667514:"IFCACTOR",3630933823:"IFCACTORROLE",4288193352:"IFCACTUATOR",2874132201:"IFCACTUATORTYPE",618182010:"IFCADDRESS",1635779807:"IFCADVANCEDBREP",2603310189:"IFCADVANCEDBREPWITHVOIDS",3406155212:"IFCADVANCEDFACE",1634111441:"IFCAIRTERMINAL",177149247:"IFCAIRTERMINALBOX",1411407467:"IFCAIRTERMINALBOXTYPE",3352864051:"IFCAIRTERMINALTYPE",2056796094:"IFCAIRTOAIRHEATRECOVERY",1871374353:"IFCAIRTOAIRHEATRECOVERYTYPE",3087945054:"IFCALARM",3001207471:"IFCALARMTYPE",325726236:"IFCALIGNMENT",749761778:"IFCALIGNMENT2DHORIZONTAL",3199563722:"IFCALIGNMENT2DHORIZONTALSEGMENT",2483840362:"IFCALIGNMENT2DSEGMENT",3379348081:"IFCALIGNMENT2DVERSEGCIRCULARARC",3239324667:"IFCALIGNMENT2DVERSEGLINE",4263986512:"IFCALIGNMENT2DVERSEGPARABOLICARC",53199957:"IFCALIGNMENT2DVERTICAL",2029264950:"IFCALIGNMENT2DVERTICALSEGMENT",3512275521:"IFCALIGNMENTCURVE",1674181508:"IFCANNOTATION",669184980:"IFCANNOTATIONFILLAREA",639542469:"IFCAPPLICATION",411424972:"IFCAPPLIEDVALUE",130549933:"IFCAPPROVAL",3869604511:"IFCAPPROVALRELATIONSHIP",3798115385:"IFCARBITRARYCLOSEDPROFILEDEF",1310608509:"IFCARBITRARYOPENPROFILEDEF",2705031697:"IFCARBITRARYPROFILEDEFWITHVOIDS",3460190687:"IFCASSET",3207858831:"IFCASYMMETRICISHAPEPROFILEDEF",277319702:"IFCAUDIOVISUALAPPLIANCE",1532957894:"IFCAUDIOVISUALAPPLIANCETYPE",4261334040:"IFCAXIS1PLACEMENT",3125803723:"IFCAXIS2PLACEMENT2D",2740243338:"IFCAXIS2PLACEMENT3D",1967976161:"IFCBSPLINECURVE",2461110595:"IFCBSPLINECURVEWITHKNOTS",2887950389:"IFCBSPLINESURFACE",167062518:"IFCBSPLINESURFACEWITHKNOTS",753842376:"IFCBEAM",2906023776:"IFCBEAMSTANDARDCASE",819618141:"IFCBEAMTYPE",4196446775:"IFCBEARING",3649138523:"IFCBEARINGTYPE",616511568:"IFCBLOBTEXTURE",1334484129:"IFCBLOCK",32344328:"IFCBOILER",231477066:"IFCBOILERTYPE",3649129432:"IFCBOOLEANCLIPPINGRESULT",2736907675:"IFCBOOLEANRESULT",4037036970:"IFCBOUNDARYCONDITION",1136057603:"IFCBOUNDARYCURVE",1560379544:"IFCBOUNDARYEDGECONDITION",3367102660:"IFCBOUNDARYFACECONDITION",1387855156:"IFCBOUNDARYNODECONDITION",2069777674:"IFCBOUNDARYNODECONDITIONWARPING",1260505505:"IFCBOUNDEDCURVE",4182860854:"IFCBOUNDEDSURFACE",2581212453:"IFCBOUNDINGBOX",2713105998:"IFCBOXEDHALFSPACE",644574406:"IFCBRIDGE",963979645:"IFCBRIDGEPART",4031249490:"IFCBUILDING",3299480353:"IFCBUILDINGELEMENT",2979338954:"IFCBUILDINGELEMENTPART",39481116:"IFCBUILDINGELEMENTPARTTYPE",1095909175:"IFCBUILDINGELEMENTPROXY",1909888760:"IFCBUILDINGELEMENTPROXYTYPE",1950629157:"IFCBUILDINGELEMENTTYPE",3124254112:"IFCBUILDINGSTOREY",1177604601:"IFCBUILDINGSYSTEM",2938176219:"IFCBURNER",2188180465:"IFCBURNERTYPE",2898889636:"IFCCSHAPEPROFILEDEF",635142910:"IFCCABLECARRIERFITTING",395041908:"IFCCABLECARRIERFITTINGTYPE",3758799889:"IFCCABLECARRIERSEGMENT",3293546465:"IFCCABLECARRIERSEGMENTTYPE",1051757585:"IFCCABLEFITTING",2674252688:"IFCCABLEFITTINGTYPE",4217484030:"IFCCABLESEGMENT",1285652485:"IFCCABLESEGMENTTYPE",3999819293:"IFCCAISSONFOUNDATION",3203706013:"IFCCAISSONFOUNDATIONTYPE",1123145078:"IFCCARTESIANPOINT",574549367:"IFCCARTESIANPOINTLIST",1675464909:"IFCCARTESIANPOINTLIST2D",2059837836:"IFCCARTESIANPOINTLIST3D",59481748:"IFCCARTESIANTRANSFORMATIONOPERATOR",3749851601:"IFCCARTESIANTRANSFORMATIONOPERATOR2D",3486308946:"IFCCARTESIANTRANSFORMATIONOPERATOR2DNONUNIFORM",3331915920:"IFCCARTESIANTRANSFORMATIONOPERATOR3D",1416205885:"IFCCARTESIANTRANSFORMATIONOPERATOR3DNONUNIFORM",3150382593:"IFCCENTERLINEPROFILEDEF",3902619387:"IFCCHILLER",2951183804:"IFCCHILLERTYPE",3296154744:"IFCCHIMNEY",2197970202:"IFCCHIMNEYTYPE",2611217952:"IFCCIRCLE",2937912522:"IFCCIRCLEHOLLOWPROFILEDEF",1383045692:"IFCCIRCLEPROFILEDEF",1062206242:"IFCCIRCULARARCSEGMENT2D",1677625105:"IFCCIVILELEMENT",3893394355:"IFCCIVILELEMENTTYPE",747523909:"IFCCLASSIFICATION",647927063:"IFCCLASSIFICATIONREFERENCE",2205249479:"IFCCLOSEDSHELL",639361253:"IFCCOIL",2301859152:"IFCCOILTYPE",776857604:"IFCCOLOURRGB",3285139300:"IFCCOLOURRGBLIST",3264961684:"IFCCOLOURSPECIFICATION",843113511:"IFCCOLUMN",905975707:"IFCCOLUMNSTANDARDCASE",300633059:"IFCCOLUMNTYPE",3221913625:"IFCCOMMUNICATIONSAPPLIANCE",400855858:"IFCCOMMUNICATIONSAPPLIANCETYPE",2542286263:"IFCCOMPLEXPROPERTY",3875453745:"IFCCOMPLEXPROPERTYTEMPLATE",3732776249:"IFCCOMPOSITECURVE",15328376:"IFCCOMPOSITECURVEONSURFACE",2485617015:"IFCCOMPOSITECURVESEGMENT",1485152156:"IFCCOMPOSITEPROFILEDEF",3571504051:"IFCCOMPRESSOR",3850581409:"IFCCOMPRESSORTYPE",2272882330:"IFCCONDENSER",2816379211:"IFCCONDENSERTYPE",2510884976:"IFCCONIC",370225590:"IFCCONNECTEDFACESET",1981873012:"IFCCONNECTIONCURVEGEOMETRY",2859738748:"IFCCONNECTIONGEOMETRY",45288368:"IFCCONNECTIONPOINTECCENTRICITY",2614616156:"IFCCONNECTIONPOINTGEOMETRY",2732653382:"IFCCONNECTIONSURFACEGEOMETRY",775493141:"IFCCONNECTIONVOLUMEGEOMETRY",1959218052:"IFCCONSTRAINT",3898045240:"IFCCONSTRUCTIONEQUIPMENTRESOURCE",2185764099:"IFCCONSTRUCTIONEQUIPMENTRESOURCETYPE",1060000209:"IFCCONSTRUCTIONMATERIALRESOURCE",4105962743:"IFCCONSTRUCTIONMATERIALRESOURCETYPE",488727124:"IFCCONSTRUCTIONPRODUCTRESOURCE",1525564444:"IFCCONSTRUCTIONPRODUCTRESOURCETYPE",2559216714:"IFCCONSTRUCTIONRESOURCE",2574617495:"IFCCONSTRUCTIONRESOURCETYPE",3419103109:"IFCCONTEXT",3050246964:"IFCCONTEXTDEPENDENTUNIT",3293443760:"IFCCONTROL",25142252:"IFCCONTROLLER",578613899:"IFCCONTROLLERTYPE",2889183280:"IFCCONVERSIONBASEDUNIT",2713554722:"IFCCONVERSIONBASEDUNITWITHOFFSET",4136498852:"IFCCOOLEDBEAM",335055490:"IFCCOOLEDBEAMTYPE",3640358203:"IFCCOOLINGTOWER",2954562838:"IFCCOOLINGTOWERTYPE",1785450214:"IFCCOORDINATEOPERATION",1466758467:"IFCCOORDINATEREFERENCESYSTEM",3895139033:"IFCCOSTITEM",1419761937:"IFCCOSTSCHEDULE",602808272:"IFCCOSTVALUE",1973544240:"IFCCOVERING",1916426348:"IFCCOVERINGTYPE",3295246426:"IFCCREWRESOURCE",1815067380:"IFCCREWRESOURCETYPE",2506170314:"IFCCSGPRIMITIVE3D",2147822146:"IFCCSGSOLID",539742890:"IFCCURRENCYRELATIONSHIP",3495092785:"IFCCURTAINWALL",1457835157:"IFCCURTAINWALLTYPE",2601014836:"IFCCURVE",2827736869:"IFCCURVEBOUNDEDPLANE",2629017746:"IFCCURVEBOUNDEDSURFACE",1186437898:"IFCCURVESEGMENT2D",3800577675:"IFCCURVESTYLE",1105321065:"IFCCURVESTYLEFONT",2367409068:"IFCCURVESTYLEFONTANDSCALING",3510044353:"IFCCURVESTYLEFONTPATTERN",1213902940:"IFCCYLINDRICALSURFACE",4074379575:"IFCDAMPER",3961806047:"IFCDAMPERTYPE",3426335179:"IFCDEEPFOUNDATION",1306400036:"IFCDEEPFOUNDATIONTYPE",3632507154:"IFCDERIVEDPROFILEDEF",1765591967:"IFCDERIVEDUNIT",1045800335:"IFCDERIVEDUNITELEMENT",2949456006:"IFCDIMENSIONALEXPONENTS",32440307:"IFCDIRECTION",1335981549:"IFCDISCRETEACCESSORY",2635815018:"IFCDISCRETEACCESSORYTYPE",1945343521:"IFCDISTANCEEXPRESSION",1052013943:"IFCDISTRIBUTIONCHAMBERELEMENT",1599208980:"IFCDISTRIBUTIONCHAMBERELEMENTTYPE",562808652:"IFCDISTRIBUTIONCIRCUIT",1062813311:"IFCDISTRIBUTIONCONTROLELEMENT",2063403501:"IFCDISTRIBUTIONCONTROLELEMENTTYPE",1945004755:"IFCDISTRIBUTIONELEMENT",3256556792:"IFCDISTRIBUTIONELEMENTTYPE",3040386961:"IFCDISTRIBUTIONFLOWELEMENT",3849074793:"IFCDISTRIBUTIONFLOWELEMENTTYPE",3041715199:"IFCDISTRIBUTIONPORT",3205830791:"IFCDISTRIBUTIONSYSTEM",1154170062:"IFCDOCUMENTINFORMATION",770865208:"IFCDOCUMENTINFORMATIONRELATIONSHIP",3732053477:"IFCDOCUMENTREFERENCE",395920057:"IFCDOOR",2963535650:"IFCDOORLININGPROPERTIES",1714330368:"IFCDOORPANELPROPERTIES",3242481149:"IFCDOORSTANDARDCASE",526551008:"IFCDOORSTYLE",2323601079:"IFCDOORTYPE",445594917:"IFCDRAUGHTINGPREDEFINEDCOLOUR",4006246654:"IFCDRAUGHTINGPREDEFINEDCURVEFONT",342316401:"IFCDUCTFITTING",869906466:"IFCDUCTFITTINGTYPE",3518393246:"IFCDUCTSEGMENT",3760055223:"IFCDUCTSEGMENTTYPE",1360408905:"IFCDUCTSILENCER",2030761528:"IFCDUCTSILENCERTYPE",3900360178:"IFCEDGE",476780140:"IFCEDGECURVE",1472233963:"IFCEDGELOOP",1904799276:"IFCELECTRICAPPLIANCE",663422040:"IFCELECTRICAPPLIANCETYPE",862014818:"IFCELECTRICDISTRIBUTIONBOARD",2417008758:"IFCELECTRICDISTRIBUTIONBOARDTYPE",3310460725:"IFCELECTRICFLOWSTORAGEDEVICE",3277789161:"IFCELECTRICFLOWSTORAGEDEVICETYPE",264262732:"IFCELECTRICGENERATOR",1534661035:"IFCELECTRICGENERATORTYPE",402227799:"IFCELECTRICMOTOR",1217240411:"IFCELECTRICMOTORTYPE",1003880860:"IFCELECTRICTIMECONTROL",712377611:"IFCELECTRICTIMECONTROLTYPE",1758889154:"IFCELEMENT",4123344466:"IFCELEMENTASSEMBLY",2397081782:"IFCELEMENTASSEMBLYTYPE",1623761950:"IFCELEMENTCOMPONENT",2590856083:"IFCELEMENTCOMPONENTTYPE",1883228015:"IFCELEMENTQUANTITY",339256511:"IFCELEMENTTYPE",2777663545:"IFCELEMENTARYSURFACE",1704287377:"IFCELLIPSE",2835456948:"IFCELLIPSEPROFILEDEF",1658829314:"IFCENERGYCONVERSIONDEVICE",2107101300:"IFCENERGYCONVERSIONDEVICETYPE",2814081492:"IFCENGINE",132023988:"IFCENGINETYPE",3747195512:"IFCEVAPORATIVECOOLER",3174744832:"IFCEVAPORATIVECOOLERTYPE",484807127:"IFCEVAPORATOR",3390157468:"IFCEVAPORATORTYPE",4148101412:"IFCEVENT",211053100:"IFCEVENTTIME",4024345920:"IFCEVENTTYPE",297599258:"IFCEXTENDEDPROPERTIES",4294318154:"IFCEXTERNALINFORMATION",3200245327:"IFCEXTERNALREFERENCE",1437805879:"IFCEXTERNALREFERENCERELATIONSHIP",1209101575:"IFCEXTERNALSPATIALELEMENT",2853485674:"IFCEXTERNALSPATIALSTRUCTUREELEMENT",2242383968:"IFCEXTERNALLYDEFINEDHATCHSTYLE",1040185647:"IFCEXTERNALLYDEFINEDSURFACESTYLE",3548104201:"IFCEXTERNALLYDEFINEDTEXTFONT",477187591:"IFCEXTRUDEDAREASOLID",2804161546:"IFCEXTRUDEDAREASOLIDTAPERED",2556980723:"IFCFACE",2047409740:"IFCFACEBASEDSURFACEMODEL",1809719519:"IFCFACEBOUND",803316827:"IFCFACEOUTERBOUND",3008276851:"IFCFACESURFACE",807026263:"IFCFACETEDBREP",3737207727:"IFCFACETEDBREPWITHVOIDS",24185140:"IFCFACILITY",1310830890:"IFCFACILITYPART",4219587988:"IFCFAILURECONNECTIONCONDITION",3415622556:"IFCFAN",346874300:"IFCFANTYPE",647756555:"IFCFASTENER",2489546625:"IFCFASTENERTYPE",2827207264:"IFCFEATUREELEMENT",2143335405:"IFCFEATUREELEMENTADDITION",1287392070:"IFCFEATUREELEMENTSUBTRACTION",738692330:"IFCFILLAREASTYLE",374418227:"IFCFILLAREASTYLEHATCHING",315944413:"IFCFILLAREASTYLETILES",819412036:"IFCFILTER",1810631287:"IFCFILTERTYPE",1426591983:"IFCFIRESUPPRESSIONTERMINAL",4222183408:"IFCFIRESUPPRESSIONTERMINALTYPE",2652556860:"IFCFIXEDREFERENCESWEPTAREASOLID",2058353004:"IFCFLOWCONTROLLER",3907093117:"IFCFLOWCONTROLLERTYPE",4278956645:"IFCFLOWFITTING",3198132628:"IFCFLOWFITTINGTYPE",182646315:"IFCFLOWINSTRUMENT",4037862832:"IFCFLOWINSTRUMENTTYPE",2188021234:"IFCFLOWMETER",3815607619:"IFCFLOWMETERTYPE",3132237377:"IFCFLOWMOVINGDEVICE",1482959167:"IFCFLOWMOVINGDEVICETYPE",987401354:"IFCFLOWSEGMENT",1834744321:"IFCFLOWSEGMENTTYPE",707683696:"IFCFLOWSTORAGEDEVICE",1339347760:"IFCFLOWSTORAGEDEVICETYPE",2223149337:"IFCFLOWTERMINAL",2297155007:"IFCFLOWTERMINALTYPE",3508470533:"IFCFLOWTREATMENTDEVICE",3009222698:"IFCFLOWTREATMENTDEVICETYPE",900683007:"IFCFOOTING",1893162501:"IFCFOOTINGTYPE",263784265:"IFCFURNISHINGELEMENT",4238390223:"IFCFURNISHINGELEMENTTYPE",1509553395:"IFCFURNITURE",1268542332:"IFCFURNITURETYPE",3493046030:"IFCGEOGRAPHICELEMENT",4095422895:"IFCGEOGRAPHICELEMENTTYPE",987898635:"IFCGEOMETRICCURVESET",3448662350:"IFCGEOMETRICREPRESENTATIONCONTEXT",2453401579:"IFCGEOMETRICREPRESENTATIONITEM",4142052618:"IFCGEOMETRICREPRESENTATIONSUBCONTEXT",3590301190:"IFCGEOMETRICSET",3009204131:"IFCGRID",852622518:"IFCGRIDAXIS",178086475:"IFCGRIDPLACEMENT",2706460486:"IFCGROUP",812098782:"IFCHALFSPACESOLID",3319311131:"IFCHEATEXCHANGER",1251058090:"IFCHEATEXCHANGERTYPE",2068733104:"IFCHUMIDIFIER",1806887404:"IFCHUMIDIFIERTYPE",1484403080:"IFCISHAPEPROFILEDEF",3905492369:"IFCIMAGETEXTURE",3570813810:"IFCINDEXEDCOLOURMAP",2571569899:"IFCINDEXEDPOLYCURVE",178912537:"IFCINDEXEDPOLYGONALFACE",2294589976:"IFCINDEXEDPOLYGONALFACEWITHVOIDS",1437953363:"IFCINDEXEDTEXTUREMAP",2133299955:"IFCINDEXEDTRIANGLETEXTUREMAP",4175244083:"IFCINTERCEPTOR",3946677679:"IFCINTERCEPTORTYPE",3113134337:"IFCINTERSECTIONCURVE",2391368822:"IFCINVENTORY",3741457305:"IFCIRREGULARTIMESERIES",3020489413:"IFCIRREGULARTIMESERIESVALUE",2176052936:"IFCJUNCTIONBOX",4288270099:"IFCJUNCTIONBOXTYPE",572779678:"IFCLSHAPEPROFILEDEF",3827777499:"IFCLABORRESOURCE",428585644:"IFCLABORRESOURCETYPE",1585845231:"IFCLAGTIME",76236018:"IFCLAMP",1051575348:"IFCLAMPTYPE",2655187982:"IFCLIBRARYINFORMATION",3452421091:"IFCLIBRARYREFERENCE",4162380809:"IFCLIGHTDISTRIBUTIONDATA",629592764:"IFCLIGHTFIXTURE",1161773419:"IFCLIGHTFIXTURETYPE",1566485204:"IFCLIGHTINTENSITYDISTRIBUTION",1402838566:"IFCLIGHTSOURCE",125510826:"IFCLIGHTSOURCEAMBIENT",2604431987:"IFCLIGHTSOURCEDIRECTIONAL",4266656042:"IFCLIGHTSOURCEGONIOMETRIC",1520743889:"IFCLIGHTSOURCEPOSITIONAL",3422422726:"IFCLIGHTSOURCESPOT",1281925730:"IFCLINE",3092502836:"IFCLINESEGMENT2D",388784114:"IFCLINEARPLACEMENT",1154579445:"IFCLINEARPOSITIONINGELEMENT",2624227202:"IFCLOCALPLACEMENT",1008929658:"IFCLOOP",1425443689:"IFCMANIFOLDSOLIDBREP",3057273783:"IFCMAPCONVERSION",2347385850:"IFCMAPPEDITEM",1838606355:"IFCMATERIAL",1847130766:"IFCMATERIALCLASSIFICATIONRELATIONSHIP",3708119e3:"IFCMATERIALCONSTITUENT",2852063980:"IFCMATERIALCONSTITUENTSET",760658860:"IFCMATERIALDEFINITION",2022407955:"IFCMATERIALDEFINITIONREPRESENTATION",248100487:"IFCMATERIALLAYER",3303938423:"IFCMATERIALLAYERSET",1303795690:"IFCMATERIALLAYERSETUSAGE",1847252529:"IFCMATERIALLAYERWITHOFFSETS",2199411900:"IFCMATERIALLIST",2235152071:"IFCMATERIALPROFILE",164193824:"IFCMATERIALPROFILESET",3079605661:"IFCMATERIALPROFILESETUSAGE",3404854881:"IFCMATERIALPROFILESETUSAGETAPERING",552965576:"IFCMATERIALPROFILEWITHOFFSETS",3265635763:"IFCMATERIALPROPERTIES",853536259:"IFCMATERIALRELATIONSHIP",1507914824:"IFCMATERIALUSAGEDEFINITION",2597039031:"IFCMEASUREWITHUNIT",377706215:"IFCMECHANICALFASTENER",2108223431:"IFCMECHANICALFASTENERTYPE",1437502449:"IFCMEDICALDEVICE",1114901282:"IFCMEDICALDEVICETYPE",1073191201:"IFCMEMBER",1911478936:"IFCMEMBERSTANDARDCASE",3181161470:"IFCMEMBERTYPE",3368373690:"IFCMETRIC",2998442950:"IFCMIRROREDPROFILEDEF",2706619895:"IFCMONETARYUNIT",2474470126:"IFCMOTORCONNECTION",977012517:"IFCMOTORCONNECTIONTYPE",1918398963:"IFCNAMEDUNIT",3888040117:"IFCOBJECT",219451334:"IFCOBJECTDEFINITION",3701648758:"IFCOBJECTPLACEMENT",2251480897:"IFCOBJECTIVE",4143007308:"IFCOCCUPANT",590820931:"IFCOFFSETCURVE",3388369263:"IFCOFFSETCURVE2D",3505215534:"IFCOFFSETCURVE3D",2485787929:"IFCOFFSETCURVEBYDISTANCES",2665983363:"IFCOPENSHELL",3588315303:"IFCOPENINGELEMENT",3079942009:"IFCOPENINGSTANDARDCASE",4251960020:"IFCORGANIZATION",1411181986:"IFCORGANIZATIONRELATIONSHIP",643959842:"IFCORIENTATIONEXPRESSION",1029017970:"IFCORIENTEDEDGE",144952367:"IFCOUTERBOUNDARYCURVE",3694346114:"IFCOUTLET",2837617999:"IFCOUTLETTYPE",1207048766:"IFCOWNERHISTORY",2529465313:"IFCPARAMETERIZEDPROFILEDEF",2519244187:"IFCPATH",1682466193:"IFCPCURVE",2382730787:"IFCPERFORMANCEHISTORY",3566463478:"IFCPERMEABLECOVERINGPROPERTIES",3327091369:"IFCPERMIT",2077209135:"IFCPERSON",101040310:"IFCPERSONANDORGANIZATION",3021840470:"IFCPHYSICALCOMPLEXQUANTITY",2483315170:"IFCPHYSICALQUANTITY",2226359599:"IFCPHYSICALSIMPLEQUANTITY",1687234759:"IFCPILE",1158309216:"IFCPILETYPE",310824031:"IFCPIPEFITTING",804291784:"IFCPIPEFITTINGTYPE",3612865200:"IFCPIPESEGMENT",4231323485:"IFCPIPESEGMENTTYPE",597895409:"IFCPIXELTEXTURE",2004835150:"IFCPLACEMENT",603570806:"IFCPLANARBOX",1663979128:"IFCPLANAREXTENT",220341763:"IFCPLANE",3171933400:"IFCPLATE",1156407060:"IFCPLATESTANDARDCASE",4017108033:"IFCPLATETYPE",2067069095:"IFCPOINT",4022376103:"IFCPOINTONCURVE",1423911732:"IFCPOINTONSURFACE",2924175390:"IFCPOLYLOOP",2775532180:"IFCPOLYGONALBOUNDEDHALFSPACE",2839578677:"IFCPOLYGONALFACESET",3724593414:"IFCPOLYLINE",3740093272:"IFCPORT",1946335990:"IFCPOSITIONINGELEMENT",3355820592:"IFCPOSTALADDRESS",759155922:"IFCPREDEFINEDCOLOUR",2559016684:"IFCPREDEFINEDCURVEFONT",3727388367:"IFCPREDEFINEDITEM",3778827333:"IFCPREDEFINEDPROPERTIES",3967405729:"IFCPREDEFINEDPROPERTYSET",1775413392:"IFCPREDEFINEDTEXTFONT",677532197:"IFCPRESENTATIONITEM",2022622350:"IFCPRESENTATIONLAYERASSIGNMENT",1304840413:"IFCPRESENTATIONLAYERWITHSTYLE",3119450353:"IFCPRESENTATIONSTYLE",2417041796:"IFCPRESENTATIONSTYLEASSIGNMENT",2744685151:"IFCPROCEDURE",569719735:"IFCPROCEDURETYPE",2945172077:"IFCPROCESS",4208778838:"IFCPRODUCT",673634403:"IFCPRODUCTDEFINITIONSHAPE",2095639259:"IFCPRODUCTREPRESENTATION",3958567839:"IFCPROFILEDEF",2802850158:"IFCPROFILEPROPERTIES",103090709:"IFCPROJECT",653396225:"IFCPROJECTLIBRARY",2904328755:"IFCPROJECTORDER",3843373140:"IFCPROJECTEDCRS",3651124850:"IFCPROJECTIONELEMENT",2598011224:"IFCPROPERTY",986844984:"IFCPROPERTYABSTRACTION",871118103:"IFCPROPERTYBOUNDEDVALUE",1680319473:"IFCPROPERTYDEFINITION",148025276:"IFCPROPERTYDEPENDENCYRELATIONSHIP",4166981789:"IFCPROPERTYENUMERATEDVALUE",3710013099:"IFCPROPERTYENUMERATION",2752243245:"IFCPROPERTYLISTVALUE",941946838:"IFCPROPERTYREFERENCEVALUE",1451395588:"IFCPROPERTYSET",3357820518:"IFCPROPERTYSETDEFINITION",492091185:"IFCPROPERTYSETTEMPLATE",3650150729:"IFCPROPERTYSINGLEVALUE",110355661:"IFCPROPERTYTABLEVALUE",3521284610:"IFCPROPERTYTEMPLATE",1482703590:"IFCPROPERTYTEMPLATEDEFINITION",738039164:"IFCPROTECTIVEDEVICE",2295281155:"IFCPROTECTIVEDEVICETRIPPINGUNIT",655969474:"IFCPROTECTIVEDEVICETRIPPINGUNITTYPE",1842657554:"IFCPROTECTIVEDEVICETYPE",3219374653:"IFCPROXY",90941305:"IFCPUMP",2250791053:"IFCPUMPTYPE",2044713172:"IFCQUANTITYAREA",2093928680:"IFCQUANTITYCOUNT",931644368:"IFCQUANTITYLENGTH",2090586900:"IFCQUANTITYSET",3252649465:"IFCQUANTITYTIME",2405470396:"IFCQUANTITYVOLUME",825690147:"IFCQUANTITYWEIGHT",2262370178:"IFCRAILING",2893384427:"IFCRAILINGTYPE",3024970846:"IFCRAMP",3283111854:"IFCRAMPFLIGHT",2324767716:"IFCRAMPFLIGHTTYPE",1469900589:"IFCRAMPTYPE",1232101972:"IFCRATIONALBSPLINECURVEWITHKNOTS",683857671:"IFCRATIONALBSPLINESURFACEWITHKNOTS",2770003689:"IFCRECTANGLEHOLLOWPROFILEDEF",3615266464:"IFCRECTANGLEPROFILEDEF",2798486643:"IFCRECTANGULARPYRAMID",3454111270:"IFCRECTANGULARTRIMMEDSURFACE",3915482550:"IFCRECURRENCEPATTERN",2433181523:"IFCREFERENCE",4021432810:"IFCREFERENT",3413951693:"IFCREGULARTIMESERIES",1580146022:"IFCREINFORCEMENTBARPROPERTIES",3765753017:"IFCREINFORCEMENTDEFINITIONPROPERTIES",979691226:"IFCREINFORCINGBAR",2572171363:"IFCREINFORCINGBARTYPE",3027567501:"IFCREINFORCINGELEMENT",964333572:"IFCREINFORCINGELEMENTTYPE",2320036040:"IFCREINFORCINGMESH",2310774935:"IFCREINFORCINGMESHTYPE",160246688:"IFCRELAGGREGATES",3939117080:"IFCRELASSIGNS",1683148259:"IFCRELASSIGNSTOACTOR",2495723537:"IFCRELASSIGNSTOCONTROL",1307041759:"IFCRELASSIGNSTOGROUP",1027710054:"IFCRELASSIGNSTOGROUPBYFACTOR",4278684876:"IFCRELASSIGNSTOPROCESS",2857406711:"IFCRELASSIGNSTOPRODUCT",205026976:"IFCRELASSIGNSTORESOURCE",1865459582:"IFCRELASSOCIATES",4095574036:"IFCRELASSOCIATESAPPROVAL",919958153:"IFCRELASSOCIATESCLASSIFICATION",2728634034:"IFCRELASSOCIATESCONSTRAINT",982818633:"IFCRELASSOCIATESDOCUMENT",3840914261:"IFCRELASSOCIATESLIBRARY",2655215786:"IFCRELASSOCIATESMATERIAL",826625072:"IFCRELCONNECTS",1204542856:"IFCRELCONNECTSELEMENTS",3945020480:"IFCRELCONNECTSPATHELEMENTS",4201705270:"IFCRELCONNECTSPORTTOELEMENT",3190031847:"IFCRELCONNECTSPORTS",2127690289:"IFCRELCONNECTSSTRUCTURALACTIVITY",1638771189:"IFCRELCONNECTSSTRUCTURALMEMBER",504942748:"IFCRELCONNECTSWITHECCENTRICITY",3678494232:"IFCRELCONNECTSWITHREALIZINGELEMENTS",3242617779:"IFCRELCONTAINEDINSPATIALSTRUCTURE",886880790:"IFCRELCOVERSBLDGELEMENTS",2802773753:"IFCRELCOVERSSPACES",2565941209:"IFCRELDECLARES",2551354335:"IFCRELDECOMPOSES",693640335:"IFCRELDEFINES",1462361463:"IFCRELDEFINESBYOBJECT",4186316022:"IFCRELDEFINESBYPROPERTIES",307848117:"IFCRELDEFINESBYTEMPLATE",781010003:"IFCRELDEFINESBYTYPE",3940055652:"IFCRELFILLSELEMENT",279856033:"IFCRELFLOWCONTROLELEMENTS",427948657:"IFCRELINTERFERESELEMENTS",3268803585:"IFCRELNESTS",1441486842:"IFCRELPOSITIONS",750771296:"IFCRELPROJECTSELEMENT",1245217292:"IFCRELREFERENCEDINSPATIALSTRUCTURE",4122056220:"IFCRELSEQUENCE",366585022:"IFCRELSERVICESBUILDINGS",3451746338:"IFCRELSPACEBOUNDARY",3523091289:"IFCRELSPACEBOUNDARY1STLEVEL",1521410863:"IFCRELSPACEBOUNDARY2NDLEVEL",1401173127:"IFCRELVOIDSELEMENT",478536968:"IFCRELATIONSHIP",816062949:"IFCREPARAMETRISEDCOMPOSITECURVESEGMENT",1076942058:"IFCREPRESENTATION",3377609919:"IFCREPRESENTATIONCONTEXT",3008791417:"IFCREPRESENTATIONITEM",1660063152:"IFCREPRESENTATIONMAP",2914609552:"IFCRESOURCE",2943643501:"IFCRESOURCEAPPROVALRELATIONSHIP",1608871552:"IFCRESOURCECONSTRAINTRELATIONSHIP",2439245199:"IFCRESOURCELEVELRELATIONSHIP",1042787934:"IFCRESOURCETIME",1856042241:"IFCREVOLVEDAREASOLID",3243963512:"IFCREVOLVEDAREASOLIDTAPERED",4158566097:"IFCRIGHTCIRCULARCONE",3626867408:"IFCRIGHTCIRCULARCYLINDER",2016517767:"IFCROOF",2781568857:"IFCROOFTYPE",2341007311:"IFCROOT",2778083089:"IFCROUNDEDRECTANGLEPROFILEDEF",448429030:"IFCSIUNIT",3053780830:"IFCSANITARYTERMINAL",1768891740:"IFCSANITARYTERMINALTYPE",1054537805:"IFCSCHEDULINGTIME",2157484638:"IFCSEAMCURVE",2042790032:"IFCSECTIONPROPERTIES",4165799628:"IFCSECTIONREINFORCEMENTPROPERTIES",1862484736:"IFCSECTIONEDSOLID",1290935644:"IFCSECTIONEDSOLIDHORIZONTAL",1509187699:"IFCSECTIONEDSPINE",4086658281:"IFCSENSOR",1783015770:"IFCSENSORTYPE",1329646415:"IFCSHADINGDEVICE",4074543187:"IFCSHADINGDEVICETYPE",867548509:"IFCSHAPEASPECT",3982875396:"IFCSHAPEMODEL",4240577450:"IFCSHAPEREPRESENTATION",4124623270:"IFCSHELLBASEDSURFACEMODEL",3692461612:"IFCSIMPLEPROPERTY",3663146110:"IFCSIMPLEPROPERTYTEMPLATE",4097777520:"IFCSITE",1529196076:"IFCSLAB",3127900445:"IFCSLABELEMENTEDCASE",3027962421:"IFCSLABSTANDARDCASE",2533589738:"IFCSLABTYPE",2609359061:"IFCSLIPPAGECONNECTIONCONDITION",3420628829:"IFCSOLARDEVICE",1072016465:"IFCSOLARDEVICETYPE",723233188:"IFCSOLIDMODEL",3856911033:"IFCSPACE",1999602285:"IFCSPACEHEATER",1305183839:"IFCSPACEHEATERTYPE",3812236995:"IFCSPACETYPE",1412071761:"IFCSPATIALELEMENT",710998568:"IFCSPATIALELEMENTTYPE",2706606064:"IFCSPATIALSTRUCTUREELEMENT",3893378262:"IFCSPATIALSTRUCTUREELEMENTTYPE",463610769:"IFCSPATIALZONE",2481509218:"IFCSPATIALZONETYPE",451544542:"IFCSPHERE",4015995234:"IFCSPHERICALSURFACE",1404847402:"IFCSTACKTERMINAL",3112655638:"IFCSTACKTERMINALTYPE",331165859:"IFCSTAIR",4252922144:"IFCSTAIRFLIGHT",1039846685:"IFCSTAIRFLIGHTTYPE",338393293:"IFCSTAIRTYPE",682877961:"IFCSTRUCTURALACTION",3544373492:"IFCSTRUCTURALACTIVITY",2515109513:"IFCSTRUCTURALANALYSISMODEL",1179482911:"IFCSTRUCTURALCONNECTION",2273995522:"IFCSTRUCTURALCONNECTIONCONDITION",1004757350:"IFCSTRUCTURALCURVEACTION",4243806635:"IFCSTRUCTURALCURVECONNECTION",214636428:"IFCSTRUCTURALCURVEMEMBER",2445595289:"IFCSTRUCTURALCURVEMEMBERVARYING",2757150158:"IFCSTRUCTURALCURVEREACTION",3136571912:"IFCSTRUCTURALITEM",1807405624:"IFCSTRUCTURALLINEARACTION",2162789131:"IFCSTRUCTURALLOAD",385403989:"IFCSTRUCTURALLOADCASE",3478079324:"IFCSTRUCTURALLOADCONFIGURATION",1252848954:"IFCSTRUCTURALLOADGROUP",1595516126:"IFCSTRUCTURALLOADLINEARFORCE",609421318:"IFCSTRUCTURALLOADORRESULT",2668620305:"IFCSTRUCTURALLOADPLANARFORCE",2473145415:"IFCSTRUCTURALLOADSINGLEDISPLACEMENT",1973038258:"IFCSTRUCTURALLOADSINGLEDISPLACEMENTDISTORTION",1597423693:"IFCSTRUCTURALLOADSINGLEFORCE",1190533807:"IFCSTRUCTURALLOADSINGLEFORCEWARPING",2525727697:"IFCSTRUCTURALLOADSTATIC",3408363356:"IFCSTRUCTURALLOADTEMPERATURE",530289379:"IFCSTRUCTURALMEMBER",1621171031:"IFCSTRUCTURALPLANARACTION",2082059205:"IFCSTRUCTURALPOINTACTION",734778138:"IFCSTRUCTURALPOINTCONNECTION",1235345126:"IFCSTRUCTURALPOINTREACTION",3689010777:"IFCSTRUCTURALREACTION",2986769608:"IFCSTRUCTURALRESULTGROUP",3657597509:"IFCSTRUCTURALSURFACEACTION",1975003073:"IFCSTRUCTURALSURFACECONNECTION",3979015343:"IFCSTRUCTURALSURFACEMEMBER",2218152070:"IFCSTRUCTURALSURFACEMEMBERVARYING",603775116:"IFCSTRUCTURALSURFACEREACTION",2830218821:"IFCSTYLEMODEL",3958052878:"IFCSTYLEDITEM",3049322572:"IFCSTYLEDREPRESENTATION",148013059:"IFCSUBCONTRACTRESOURCE",4095615324:"IFCSUBCONTRACTRESOURCETYPE",2233826070:"IFCSUBEDGE",2513912981:"IFCSURFACE",699246055:"IFCSURFACECURVE",2028607225:"IFCSURFACECURVESWEPTAREASOLID",3101698114:"IFCSURFACEFEATURE",2809605785:"IFCSURFACEOFLINEAREXTRUSION",4124788165:"IFCSURFACEOFREVOLUTION",2934153892:"IFCSURFACEREINFORCEMENTAREA",1300840506:"IFCSURFACESTYLE",3303107099:"IFCSURFACESTYLELIGHTING",1607154358:"IFCSURFACESTYLEREFRACTION",1878645084:"IFCSURFACESTYLERENDERING",846575682:"IFCSURFACESTYLESHADING",1351298697:"IFCSURFACESTYLEWITHTEXTURES",626085974:"IFCSURFACETEXTURE",2247615214:"IFCSWEPTAREASOLID",1260650574:"IFCSWEPTDISKSOLID",1096409881:"IFCSWEPTDISKSOLIDPOLYGONAL",230924584:"IFCSWEPTSURFACE",1162798199:"IFCSWITCHINGDEVICE",2315554128:"IFCSWITCHINGDEVICETYPE",2254336722:"IFCSYSTEM",413509423:"IFCSYSTEMFURNITUREELEMENT",1580310250:"IFCSYSTEMFURNITUREELEMENTTYPE",3071757647:"IFCTSHAPEPROFILEDEF",985171141:"IFCTABLE",2043862942:"IFCTABLECOLUMN",531007025:"IFCTABLEROW",812556717:"IFCTANK",5716631:"IFCTANKTYPE",3473067441:"IFCTASK",1549132990:"IFCTASKTIME",2771591690:"IFCTASKTIMERECURRING",3206491090:"IFCTASKTYPE",912023232:"IFCTELECOMADDRESS",3824725483:"IFCTENDON",2347447852:"IFCTENDONANCHOR",3081323446:"IFCTENDONANCHORTYPE",3663046924:"IFCTENDONCONDUIT",2281632017:"IFCTENDONCONDUITTYPE",2415094496:"IFCTENDONTYPE",2387106220:"IFCTESSELLATEDFACESET",901063453:"IFCTESSELLATEDITEM",4282788508:"IFCTEXTLITERAL",3124975700:"IFCTEXTLITERALWITHEXTENT",1447204868:"IFCTEXTSTYLE",1983826977:"IFCTEXTSTYLEFONTMODEL",2636378356:"IFCTEXTSTYLEFORDEFINEDFONT",1640371178:"IFCTEXTSTYLETEXTMODEL",280115917:"IFCTEXTURECOORDINATE",1742049831:"IFCTEXTURECOORDINATEGENERATOR",2552916305:"IFCTEXTUREMAP",1210645708:"IFCTEXTUREVERTEX",3611470254:"IFCTEXTUREVERTEXLIST",1199560280:"IFCTIMEPERIOD",3101149627:"IFCTIMESERIES",581633288:"IFCTIMESERIESVALUE",1377556343:"IFCTOPOLOGICALREPRESENTATIONITEM",1735638870:"IFCTOPOLOGYREPRESENTATION",1935646853:"IFCTOROIDALSURFACE",3825984169:"IFCTRANSFORMER",1692211062:"IFCTRANSFORMERTYPE",2595432518:"IFCTRANSITIONCURVESEGMENT2D",1620046519:"IFCTRANSPORTELEMENT",2097647324:"IFCTRANSPORTELEMENTTYPE",2715220739:"IFCTRAPEZIUMPROFILEDEF",2916149573:"IFCTRIANGULATEDFACESET",1229763772:"IFCTRIANGULATEDIRREGULARNETWORK",3593883385:"IFCTRIMMEDCURVE",3026737570:"IFCTUBEBUNDLE",1600972822:"IFCTUBEBUNDLETYPE",1628702193:"IFCTYPEOBJECT",3736923433:"IFCTYPEPROCESS",2347495698:"IFCTYPEPRODUCT",3698973494:"IFCTYPERESOURCE",427810014:"IFCUSHAPEPROFILEDEF",180925521:"IFCUNITASSIGNMENT",630975310:"IFCUNITARYCONTROLELEMENT",3179687236:"IFCUNITARYCONTROLELEMENTTYPE",4292641817:"IFCUNITARYEQUIPMENT",1911125066:"IFCUNITARYEQUIPMENTTYPE",4207607924:"IFCVALVE",728799441:"IFCVALVETYPE",1417489154:"IFCVECTOR",2799835756:"IFCVERTEX",2759199220:"IFCVERTEXLOOP",1907098498:"IFCVERTEXPOINT",1530820697:"IFCVIBRATIONDAMPER",3956297820:"IFCVIBRATIONDAMPERTYPE",2391383451:"IFCVIBRATIONISOLATOR",3313531582:"IFCVIBRATIONISOLATORTYPE",2769231204:"IFCVIRTUALELEMENT",891718957:"IFCVIRTUALGRIDINTERSECTION",926996030:"IFCVOIDINGFEATURE",2391406946:"IFCWALL",4156078855:"IFCWALLELEMENTEDCASE",3512223829:"IFCWALLSTANDARDCASE",1898987631:"IFCWALLTYPE",4237592921:"IFCWASTETERMINAL",1133259667:"IFCWASTETERMINALTYPE",3304561284:"IFCWINDOW",336235671:"IFCWINDOWLININGPROPERTIES",512836454:"IFCWINDOWPANELPROPERTIES",486154966:"IFCWINDOWSTANDARDCASE",1299126871:"IFCWINDOWSTYLE",4009809668:"IFCWINDOWTYPE",4088093105:"IFCWORKCALENDAR",1028945134:"IFCWORKCONTROL",4218914973:"IFCWORKPLAN",3342526732:"IFCWORKSCHEDULE",1236880293:"IFCWORKTIME",2543172580:"IFCZSHAPEPROFILEDEF",1033361043:"IFCZONE"},O=function(e){(0,l.Z)(r,e);var t=(0,f.Z)(r);function r(){return(0,u.Z)(this,r),t.apply(this,arguments)}return(0,h.Z)(r,[{key:"getItemProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>2&&void 0!==n[2]&&n[2],e.abrupt("return",(0,o.Z)({},this.state.models[t].jsonData[r]));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSpatialStructure",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,n){var i,a,u,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSpatialTreeChunks(t);case 2:return i=e.sent,e.next=5,this.getAllItemsOfType(t,d.IFCPROJECT,!1);case 5:return a=e.sent,u=a[0],h=r.newIfcProject(u),e.next=10,this.getSpatialNode(t,h,i,n);case 10:return e.abrupt("return",(0,o.Z)({},h));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAllItemsOfType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){var i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.state.models[t].jsonData,a=N[r]){e.next=4;break}throw new Error("Type not found: ".concat(r));case 4:return e.abrupt("return",this.filterItemsByType(i,a,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getProperty",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i,a,o,u=this,h=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>2&&void 0!==h[2]&&h[2],i=h.length>3?h[3]:void 0,e.next=4,this.getAllRelatedItemsOfType(t,r,i);case 4:return a=e.sent,o=this.getItemsByID(t,a),n&&o.forEach((function(e){return u.getReferencesRecursively(t,e)})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNodeType",value:function(e,t){return this.state.models[e].jsonData[t].type}},{key:"getChunks",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){var i=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllItemsOfType(t,n.name,!0);case 2:e.sent.forEach((function(e){i.saveChunk(r,n,e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"filterItemsByType",value:function(e,t,r){var n=[];return Object.keys(e).forEach((function(s){var i=parseInt(s);e[i].type.toUpperCase()===t&&n.push(r?(0,o.Z)({},e[i]):i)})),n}},{key:"getAllRelatedItemsOfType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,n,i){var a,o,u=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllItemsOfType(t,i.name,!0);case 2:return a=e.sent,o=[],a.forEach((function(e){r.isRelated(n,e,i)&&u.getRelated(e,i,o)})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getItemsByID",value:function(e,t){var r=this.state.models[e].jsonData,n=[];return t.forEach((function(e){return n.push((0,o.Z)({},r[e]))})),n}},{key:"getReferencesRecursively",value:function(e,t){if(void 0!=t)for(var r=Object.keys(t),n=0;n<r.length;n++){var s=r[n];this.getJSONItem(e,t,s)}}},{key:"getJSONItem",value:function(e,t,r){if(Array.isArray(t[r]))return this.getMultipleJSONItems(e,t,r);t[r]&&5===t[r].type&&(t[r]=this.getItemsByID(e,[t[r].value])[0],this.getReferencesRecursively(e,t[r]))}},{key:"getMultipleJSONItems",value:function(e,t,r){var n=this;t[r]=t[r].map((function(t){return 5===t.type&&(t=n.getItemsByID(e,[t.value])[0],n.getReferencesRecursively(e,t)),t}))}}]),r}(A),w=function(){function e(t){(0,u.Z)(this,e),this.state=t,this.webIfcProps=new M(t),this.jsonProps=new O(t),this.currentProps=this.webIfcProps}return(0,h.Z)(e,[{key:"getExpressId",value:function(e,t){if(!e.index)throw new Error("Geometry does not have index information.");var r=e.index.array;return e.attributes.expressID.getX(r[3*t])}},{key:"getItemProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],this.updateCurrentProps(),e.abrupt("return",this.currentProps.getItemProperties(t,r,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAllItemsOfType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateCurrentProps(),e.abrupt("return",this.currentProps.getAllItemsOfType(t,r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getPropertySets",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],this.updateCurrentProps(),e.abrupt("return",this.currentProps.getPropertySets(t,r,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTypeProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],this.updateCurrentProps(),e.abrupt("return",this.currentProps.getTypeProperties(t,r,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMaterialsProperties",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]&&i[2],this.updateCurrentProps(),e.abrupt("return",this.currentProps.getMaterialsProperties(t,r,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSpatialStructure",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateCurrentProps(),!this.state.useJSON&&r&&console.warn("Including properties in getSpatialStructure with the JSON workflow disabled can lead to poor performance."),e.next=4,this.currentProps.getSpatialStructure(t,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateCurrentProps",value:function(){this.currentProps=this.state.useJSON?this.jsonProps:this.webIfcProps}}]),e}(),b=function(){function e(t){(0,u.Z)(this,e),this.state=t,this.state=t}return(0,h.Z)(e,[{key:"getAllTypes",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=(0,s.Z)().keys(this.state.models);case 1:if((e.t1=e.t0()).done){e.next=10;break}if(r=e.t1.value,!this.state.models.hasOwnProperty(r)){e.next=8;break}if(n=this.state.models[r].types,0!=Object.keys(n).length){e.next=8;break}return e.next=8,this.getAllTypesOfModel(parseInt(r),t);case 8:e.next=1;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllTypesOfModel",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i,a,o,u,h,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},i=Object.keys(x).map((function(e){return parseInt(e)})),a=0;case 3:if(!(a<i.length)){e.next=13;break}return o=i[a],e.next=7,this.state.api.GetLineIDsWithType(t,o);case 7:for(u=e.sent,h=u.size(),c=0;c<h;c++)n[u.get(c)]=o;case 10:a++,e.next=3;break;case 13:if(!this.state.worker.active||!r){e.next=16;break}return e.next=16,r.workerState.updateModelStateTypes(t,n);case 16:this.state.models[t].types=n;case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),L=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,[{key:"initializeMeshBVH",value:function(e,t,r){this.computeBoundsTree=e,this.disposeBoundsTree=t,this.acceleratedRaycast=r,this.setupThreeMeshBVH()}},{key:"applyThreeMeshBVH",value:function(e){this.computeBoundsTree&&e.computeBoundsTree()}},{key:"setupThreeMeshBVH",value:function(){this.computeBoundsTree&&this.disposeBoundsTree&&this.acceleratedRaycast&&(p.BufferGeometry.prototype.computeBoundsTree=this.computeBoundsTree,p.BufferGeometry.prototype.disposeBoundsTree=this.disposeBoundsTree,p.Mesh.prototype.raycast=this.acceleratedRaycast)}}]),e}();!function(e){e.updateStateUseJson="updateStateUseJson",e.updateStateWebIfcSettings="updateStateWebIfcSettings",e.updateModelStateTypes="updateModelStateTypes",e.updateModelStateJsonData="updateModelStateJsonData",e.loadJsonDataFromWorker="loadJsonDataFromWorker",e.dispose="dispose",e.Close="Close",e.DisposeWebIfc="DisposeWebIfc",e.Init="Init",e.OpenModel="OpenModel",e.CreateModel="CreateModel",e.ExportFileAsIFC="ExportFileAsIFC",e.GetGeometry="GetGeometry",e.GetLine="GetLine",e.GetAndClearErrors="GetAndClearErrors",e.WriteLine="WriteLine",e.FlattenLine="FlattenLine",e.GetRawLineData="GetRawLineData",e.WriteRawLineData="WriteRawLineData",e.GetLineIDsWithType="GetLineIDsWithType",e.GetAllLines="GetAllLines",e.SetGeometryTransformation="SetGeometryTransformation",e.GetCoordinationMatrix="GetCoordinationMatrix",e.GetVertexArray="GetVertexArray",e.GetIndexArray="GetIndexArray",e.getSubArray="getSubArray",e.CloseModel="CloseModel",e.StreamAllMeshes="StreamAllMeshes",e.StreamAllMeshesWithTypes="StreamAllMeshesWithTypes",e.IsModelOpen="IsModelOpen",e.LoadAllGeometry="LoadAllGeometry",e.GetFlatMesh="GetFlatMesh",e.SetWasmPath="SetWasmPath",e.parse="parse",e.setupOptionalCategories="setupOptionalCategories",e.getExpressId="getExpressId",e.initializeProperties="initializeProperties",e.getAllItemsOfType="getAllItemsOfType",e.getItemProperties="getItemProperties",e.getMaterialsProperties="getMaterialsProperties",e.getPropertySets="getPropertySets",e.getSpatialStructure="getSpatialStructure",e.getTypeProperties="getTypeProperties"}(v||(v={})),function(e){e.workerState="workerState",e.webIfc="webIfc",e.properties="properties",e.parser="parser"}(C||(C={}));var D,P=function(){function e(t){var r=this;(0,u.Z)(this,e),this._data={},this._size=t.size,Object.keys(t).filter((function(e){return-1===e.indexOf("size")})).map((function(e){return parseInt(e)})).forEach((function(e){return r._data[e]=t[e]}))}return(0,h.Z)(e,[{key:"size",value:function(){return this._size}},{key:"get",value:function(e){return this._data[e]}}]),e}(),_=function(){function e(t){(0,u.Z)(this,e),this._GetVertexData=t.GetVertexData,this._GetVertexDataSize=t.GetVertexDataSize,this._GetIndexData=t.GetIndexData,this._GetIndexDataSize=t.GetIndexDataSize}return(0,h.Z)(e,[{key:"GetVertexData",value:function(){return this._GetVertexData}},{key:"GetVertexDataSize",value:function(){return this._GetVertexDataSize}},{key:"GetIndexData",value:function(){return this._GetIndexData}},{key:"GetIndexDataSize",value:function(){return this._GetIndexDataSize}}]),e}(),Z=(0,h.Z)((function e(t,r){(0,u.Z)(this,e),this.expressID=r.expressID,this.geometries=t.reconstructVector(r.geometries)})),U=function(){function e(t,r){var n=this;(0,u.Z)(this,e),this._data={},this._size=r.size,Object.keys(r).filter((function(e){return-1===e.indexOf("size")})).map((function(e){return parseInt(e)})).forEach((function(e){return n._data[e]=t.reconstructFlatMesh(r[e])}))}return(0,h.Z)(e,[{key:"size",value:function(){return this._size}},{key:"get",value:function(e){return this._data[e]}}]),e}(),z=(0,h.Z)((function e(t){(0,u.Z)(this,e),this.color=[t.color.r,t.color.g,t.color.b],this.opacity=t.opacity,this.transparent=t.transparent})),Y=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,null,[{key:"new",value:function(e){return new p.MeshLambertMaterial({color:new p.Color(e.color[0],e.color[1],e.color[2]),opacity:e.opacity,transparent:e.transparent,side:p.DoubleSide})}}]),e}(),G=(0,h.Z)((function e(t){var r,n,s,i;(0,u.Z)(this,e),this.position=(null===(r=t.attributes.position)||void 0===r?void 0:r.array)||[],this.normal=(null===(n=t.attributes.normal)||void 0===n?void 0:n.array)||[],this.expressID=(null===(s=t.attributes.expressID)||void 0===s?void 0:s.array)||[],this.index=(null===(i=t.index)||void 0===i?void 0:i.array)||[],this.groups=t.groups})),V=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,null,[{key:"new",value:function(t){var r=new p.BufferGeometry;return e.set(r,"expressID",new Uint32Array(t.expressID),1),e.set(r,"position",new Float32Array(t.position),3),e.set(r,"normal",new Float32Array(t.normal),3),r.setIndex(Array.from(t.index)),r.groups=t.groups,r}},{key:"set",value:function(e,t,r,n){r.length>0&&e.setAttribute(t,new p.BufferAttribute(r,n))}}]),e}(),B=(0,h.Z)((function e(t){var r=this;(0,u.Z)(this,e),this.materials=[],this.modelID=t.modelID,this.geometry=new G(t.geometry),Array.isArray(t.material)?t.material.forEach((function(e){r.materials.push(new z(e))})):this.materials.push(new z(t.material))})),H=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,null,[{key:"new",value:function(t){var r=new m;return r.modelID=t.modelID,r.geometry=V.new(t.geometry),e.getMaterials(t,r),r}},{key:"getMaterials",value:function(e,t){t.material=[];var r=t.material;e.materials.forEach((function(e){r.push(Y.new(e))}))}}]),e}(),W=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,[{key:"serializeVector",value:function(e){for(var t=e.size(),r={size:t},n=0;n<t;n++)r[n]=e.get(n);return r}},{key:"reconstructVector",value:function(e){return new P(e)}},{key:"serializeIfcGeometry",value:function(e){return{GetVertexData:e.GetVertexData(),GetVertexDataSize:e.GetVertexDataSize(),GetIndexData:e.GetIndexData(),GetIndexDataSize:e.GetIndexDataSize()}}},{key:"reconstructIfcGeometry",value:function(e){return new _(e)}},{key:"serializeFlatMesh",value:function(e){return{expressID:e.expressID,geometries:this.serializeVector(e.geometries)}}},{key:"reconstructFlatMesh",value:function(e){return new Z(this,e)}},{key:"serializeFlatMeshVector",value:function(e){for(var t=e.size(),r={size:t},n=0;n<t;n++){var s=e.get(n);r[n]=this.serializeFlatMesh(s)}return r}},{key:"reconstructFlatMeshVector",value:function(e){return new U(this,e)}},{key:"serializeIfcModel",value:function(e){return new B(e)}},{key:"reconstructIfcModel",value:function(e){return H.new(e)}}]),e}(),j=function(){function e(t){(0,u.Z)(this,e),this.handler=t,this.API=C.properties}return(0,h.Z)(e,[{key:"getExpressId",value:function(e,t){if(!e.index)throw new Error("Geometry does not have index information.");var r=e.index.array;return e.attributes.expressID.getX(r[3*t])}},{key:"getAllItemsOfType",value:function(e,t,r){return this.handler.request(this.API,v.getAllItemsOfType,{modelID:e,type:t,verbose:r})}},{key:"getItemProperties",value:function(e,t,r){return this.handler.request(this.API,v.getItemProperties,{modelID:e,elementID:t,recursive:r})}},{key:"getMaterialsProperties",value:function(e,t,r){return this.handler.request(this.API,v.getMaterialsProperties,{modelID:e,elementID:t,recursive:r})}},{key:"getPropertySets",value:function(e,t,r){return this.handler.request(this.API,v.getPropertySets,{modelID:e,elementID:t,recursive:r})}},{key:"getTypeProperties",value:function(e,t,r){return this.handler.request(this.API,v.getTypeProperties,{modelID:e,elementID:t,recursive:r})}},{key:"getSpatialStructure",value:function(e,t){return this.handler.request(this.API,v.getSpatialStructure,{modelID:e,includeProperties:t})}}]),e}(),q=function(){function e(t,r){(0,u.Z)(this,e),this.handler=t,this.serializer=r,this.API=C.webIfc}return(0,h.Z)(e,[{key:"Init",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wasmModule=!0,e.abrupt("return",this.handler.request(this.API,v.Init));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"OpenModel",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.OpenModel,{data:t,settings:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"CreateModel",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.CreateModel,{settings:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ExportFileAsIFC",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.ExportFileAsIFC,{modelID:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetGeometry",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.serializeHandlers[this.handler.requestID]=function(e){return n.serializer.reconstructIfcGeometry(e)},e.abrupt("return",this.handler.request(this.API,v.GetGeometry,{modelID:t,geometryExpressID:r}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"GetLine",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.GetLine,{modelID:t,expressID:r,flatten:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"GetAndClearErrors",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.serializeHandlers[this.handler.requestID]=function(e){return r.serializer.reconstructVector(e)},e.abrupt("return",this.handler.request(this.API,v.GetAndClearErrors,{modelID:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"WriteLine",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.WriteLine,{modelID:t,lineObject:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"FlattenLine",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.FlattenLine,{modelID:t,line:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"GetRawLineData",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.GetRawLineData,{modelID:t,expressID:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"WriteRawLineData",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.WriteRawLineData,{modelID:t,data:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"GetLineIDsWithType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.serializeHandlers[this.handler.requestID]=function(e){return n.serializer.reconstructVector(e)},e.abrupt("return",this.handler.request(this.API,v.GetLineIDsWithType,{modelID:t,type:r}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"GetAllLines",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.serializeHandlers[this.handler.requestID]=function(e){return r.serializer.reconstructVector(e)},e.abrupt("return",this.handler.request(this.API,v.GetAllLines,{modelID:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"SetGeometryTransformation",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.SetGeometryTransformation,{modelID:t,transformationMatrix:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"GetCoordinationMatrix",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.GetCoordinationMatrix,{modelID:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetVertexArray",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.GetVertexArray,{ptr:t,size:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"GetIndexArray",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.GetIndexArray,{ptr:t,size:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSubArray",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.getSubArray,{heap:t,startPtr:r,sizeBytes:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"CloseModel",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.CloseModel,{modelID:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"StreamAllMeshes",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.callbackHandlers[this.handler.requestID]={action:r,serializer:this.serializer.reconstructFlatMesh},e.abrupt("return",this.handler.request(this.API,v.StreamAllMeshes,{modelID:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"StreamAllMeshesWithTypes",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.callbackHandlers[this.handler.requestID]={action:n,serializer:this.serializer.reconstructFlatMesh},e.abrupt("return",this.handler.request(this.API,v.StreamAllMeshesWithTypes,{modelID:t,types:r}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"IsModelOpen",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.IsModelOpen,{modelID:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"LoadAllGeometry",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.serializeHandlers[this.handler.requestID]=function(e){return r.serializer.reconstructFlatMeshVector(e)},e.abrupt("return",this.handler.request(this.API,v.LoadAllGeometry,{modelID:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"GetFlatMesh",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.serializeHandlers[this.handler.requestID]=function(e){return n.serializer.reconstructFlatMesh(e)},e.abrupt("return",this.handler.request(this.API,v.GetFlatMesh,{modelID:t,expressID:r}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"SetWasmPath",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.SetWasmPath,{path:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),X=function(){function e(t){(0,u.Z)(this,e),this.handler=t,this.API=C.workerState,this.state=this.handler.state}return(0,h.Z)(e,[{key:"updateStateUseJson",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.useJSON,e.abrupt("return",this.handler.request(this.API,v.updateStateUseJson,{useJson:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateStateWebIfcSettings",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.webIfcSettings,e.abrupt("return",this.handler.request(this.API,v.updateStateWebIfcSettings,{webIfcSettings:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateModelStateTypes",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.updateModelStateTypes,{modelID:t,types:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateModelStateJsonData",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.updateModelStateJsonData,{modelID:t,jsonData:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"loadJsonDataFromWorker",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler.request(this.API,v.loadJsonDataFromWorker,{modelID:t,path:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();!function(e){e[e.transferIfcModel=0]="transferIfcModel",e[e.transferIndividualItems=1]="transferIndividualItems"}(D||(D={}));var J=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,[{key:"save",value:function(){var t=(0,i.Z)((0,s.Z)().mark((function t(r,n){var i,a=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.openOrCreateDB(n),this.createSchema(i,n),t.abrupt("return",new Promise((function(e,t){i.onsuccess=function(){return a.saveItem(r,i,n,e)}})));case 3:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=(0,i.Z)((0,s.Z)().mark((function t(r){var n,i=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.openOrCreateDB(r),t.abrupt("return",new Promise((function(e,t){n.onsuccess=function(){return i.loadItem(n,r,e)}})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"createSchema",value:function(e,t){e.onupgradeneeded=function(){e.result.createObjectStore(t.toString(),{keyPath:"id"})}}},{key:"saveItem",value:function(t,r,n,s){var i=e.getDBItems(r,n),a=i.db,o=i.tx,u=i.store;t.id=n,u.put(t),o.oncomplete=function(){return e.closeDB(a,o,s)}}},{key:"loadItem",value:function(t,r,n){var s=e.getDBItems(t,r),i=s.db,a=s.tx,o=s.store.get(r),u=function(){delete o.result.id,n(o.result)};a.oncomplete=function(){return e.closeDB(i,a,u)}}}],[{key:"getDBItems",value:function(e,t){var r=e.result,n=r.transaction(t.toString(),"readwrite"),s=n.objectStore(t.toString());return{db:r,tx:n,store:s}}},{key:"openOrCreateDB",value:function(e){return indexedDB.open(e.toString(),1)}},{key:"closeDB",value:function(e,t,r){e.close(),r("success")}}]),e}(),K=function(){function e(t,r,n,s){var i;(0,u.Z)(this,e),this.handler=t,this.serializer=r,this.BVH=n,this.IDB=s,this.optionalCategories=(i={},(0,a.Z)(i,d.IFCSPACE,!0),(0,a.Z)(i,d.IFCOPENINGELEMENT,!1),i),this.API=C.parser}return(0,h.Z)(e,[{key:"setupOptionalCategories",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.optionalCategories=t,e.abrupt("return",this.handler.request(this.API,v.setupOptionalCategories,{config:t}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parse",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.handler.onprogressHandlers[this.handler.requestID]=function(e){n.handler.state.onProgress&&n.handler.state.onProgress(e)},this.handler.serializeHandlers[this.handler.requestID]=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.updateState(t.modelID),e.abrupt("return",n.getModel());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",this.handler.request(this.API,v.parse,{buffer:t,coordinationMatrix:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAndClearErrors",value:function(e){}},{key:"updateState",value:function(e){this.handler.state.models[e]={modelID:e,mesh:{},types:{},jsonData:{}}}},{key:"getModel",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.IDB.load(D.transferIfcModel);case 2:return t=e.sent,r=this.serializer.reconstructIfcModel(t),this.BVH.applyThreeMeshBVH(r.geometry),this.handler.state.models[r.modelID].mesh=r,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),$=function(){function e(t,r){var n=this;(0,u.Z)(this,e),this.state=t,this.BVH=r,this.requestID=0,this.rejectHandlers={},this.resolveHandlers={},this.serializeHandlers={},this.callbackHandlers={},this.onprogressHandlers={},this.serializer=new W,this.IDB=new J,this.workerPath=this.state.worker.path,this.ifcWorker=new Worker(this.workerPath),this.ifcWorker.onmessage=function(e){return n.handleResponse(e)},this.properties=new j(this),this.parser=new K(this,this.serializer,this.BVH,this.IDB),this.webIfc=new q(this,this.serializer),this.workerState=new X(this)}return(0,h.Z)(e,[{key:"request",value:function(e,t,r){var n=this,s={worker:e,action:t,args:r,id:this.requestID,result:void 0,onProgress:!1};return new Promise((function(e,t){n.resolveHandlers[n.requestID]=e,n.rejectHandlers[n.requestID]=t,n.requestID++,n.ifcWorker.postMessage(s)}))}},{key:"terminate",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(C.workerState,v.dispose);case 2:return e.next=4,this.request(C.webIfc,v.DisposeWebIfc);case 4:this.ifcWorker.terminate();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Close",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request(C.webIfc,v.Close);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleResponse",value:function(e){var t=e.data;t.onProgress?this.resolveOnProgress(t):(this.callHandlers(t),delete this.resolveHandlers[t.id],delete this.rejectHandlers[t.id],delete this.onprogressHandlers[t.id])}},{key:"callHandlers",value:function(e){try{this.resolveSerializations(e),this.resolveCallbacks(e),this.resolveHandlers[e.id](e.result)}catch(t){this.rejectHandlers[e.id](t)}}},{key:"resolveOnProgress",value:function(e){this.onprogressHandlers[e.id]&&(e.result=this.onprogressHandlers[e.id](e.result))}},{key:"resolveSerializations",value:function(e){this.serializeHandlers[e.id]&&(e.result=this.serializeHandlers[e.id](e.result),delete this.serializeHandlers[e.id])}},{key:"resolveCallbacks",value:function(e){if(this.callbackHandlers[e.id]){var t=e.result;this.callbackHandlers[e.id].serializer&&(t=this.callbackHandlers[e.id].serializer(e.result)),this.callbackHandlers[e.id].action(t)}}}]),e}(),Q=function(){function e(t){(0,u.Z)(this,e),this.state=t}return(0,h.Z)(e,[{key:"dispose",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(this.state.models).forEach((function(e){var r=t.state.models[parseInt(e,10)];r.mesh.removeFromParent();var n=r.mesh.geometry;n.disposeBoundsTree&&n.disposeBoundsTree(),n.dispose(),Array.isArray(r.mesh.material)?r.mesh.material.forEach((function(e){return e.dispose()})):r.mesh.material.dispose(),r.mesh=null,r.types=null,r.jsonData=null})),this.state.api=null,this.state.models=null;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ee=function(){function e(t){(0,u.Z)(this,e),this.state=t,this.map={}}return(0,h.Z)(e,[{key:"getMapping",value:function(){this.map=this.reverseElementMapping(N)}},{key:"releaseMapping",value:function(){this.map={}}},{key:"reverseElementMapping",value:function(e){var t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}},{key:"isA",value:function(e,t){var r=!1;return t?(N[e.type]===t.toUpperCase()&&(r=!0),r):N[e.type]}},{key:"byId",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.state.api.GetLine(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"idsByType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.getMapping(),e.next=3,this.state.api.GetLineIDsWithType(t,Number(this.map[r.toUpperCase()]));case 3:return n=e.sent,this.releaseMapping(),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"byType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.idsByType(t,r);case 2:if(null===(n=e.sent)){e.next=17;break}this.getMapping(),i=[],a=0;case 7:if(!(a<n.size())){e.next=15;break}return e.next=10,this.byId(t,n.get(a));case 10:o=e.sent,i.push(o);case 12:a++,e.next=7;break;case 15:return this.releaseMapping(),e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),te=function(){function e(t){(0,u.Z)(this,e),this.state=t,this.isLoaded=!1,this.workPlans={},this.workSchedules={},this.workCalendars={},this.workTimes={},this.recurrencePatterns={},this.timePeriods={},this.tasks={},this.taskTimes={},this.lagTimes={},this.sequences={},this.utils=new ee(this.state)}return(0,h.Z)(e,[{key:"load",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadTasks(t);case 2:return e.next=4,this.loadWorkSchedules(t);case 4:return e.next=6,this.loadWorkCalendars(t);case 6:return e.next=8,this.loadWorkTimes(t);case 8:return e.next=10,this.loadTimePeriods(t);case 10:this.isLoaded=!0;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWorkSchedules",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcWorkSchedule");case 2:for(r=e.sent,n=0;n<r.length;n++)i=r[n],this.workSchedules[i.expressID]={Id:i.expressID,Name:i.Name.value,Description:i.Description?i.Description.value:"",Creators:[],CreationDate:i.CreationDate?i.CreationDate.value:"",StartTime:i.StartTime?i.StartTime.value:"",FinishTime:i.FinishTime?i.FinishTime.value:"",TotalFloat:i.TotalFloat?i.TotalFloat.value:"",RelatedObjects:[]};this.loadWorkScheduleRelatedObjects(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWorkScheduleRelatedObjects",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcRelAssignsToControl");case 2:r=e.sent,n=0;case 4:if(!(n<r.length)){e.next=14;break}return i=r[n],e.next=8,this.utils.byId(t,i.RelatingControl.value);case 8:if(a=e.sent,o=i.RelatedObjects,this.utils.isA(a,"IfcWorkSchedule"))for(u=0;u<o.length;u++)this.workSchedules[a.expressID].RelatedObjects.push(o[u].value);case 11:n++,e.next=4;break;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTasks",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcTask");case 2:r=e.sent,n=0;case 4:if(!(n<r.length)){e.next=33;break}if(i=r[n],e.t0=i.expressID,e.t1=i.Name?i.Name.value:"",e.t2=i.PredefinedType?i.PredefinedType.value:"",!i.TaskTime){e.next=15;break}return e.next=12,this.utils.byId(t,i.TaskTime.value);case 12:e.t3=e.sent,e.next=16;break;case 15:e.t3="";case 16:e.t4=e.t3,e.t5=i.Identification?i.Identification.value:"",e.t6=i.IsMilestone?i.IsMilestone.value:"",e.t7=[],e.t8=[],e.t9=[],e.t10=[],e.t11=[],e.t12=[],e.t13=[],e.t14=[],e.t15=[],e.t16=[],this.tasks[i.expressID]={Id:e.t0,Name:e.t1,PredefinedType:e.t2,TaskTime:e.t4,Identification:e.t5,IsMilestone:e.t6,IsPredecessorTo:e.t7,IsSucessorFrom:e.t8,Inputs:e.t9,Resources:e.t10,Outputs:e.t11,Controls:e.t12,Nests:e.t13,IsNestedBy:e.t14,OperatesOn:e.t15,HasAssignmentsWorkCalendars:e.t16};case 30:n++,e.next=4;break;case 33:return e.next=35,this.loadTaskSequence(t);case 35:return e.next=37,this.loadTaskOutputs(t);case 37:return e.next=39,this.loadTaskNesting(t);case 39:return e.next=41,this.loadTaskOperations(t);case 41:return e.next=43,this.loadAssignementsWorkCalendar(t);case 43:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTaskSequence",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.idsByType(t,"IfcRelSequence");case 2:r=e.sent,n=0;case 4:if(!(n<r.size())){e.next=17;break}if(0===(i=r.get(n))){e.next=14;break}return e.next=9,this.utils.byId(t,i);case 9:a=e.sent,o=a.RelatedProcess.value,u=a.RelatingProcess.value,this.tasks[u].IsPredecessorTo.push(a.expressID),this.tasks[o].IsSucessorFrom.push(a.expressID);case 14:n++,e.next=4;break;case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTaskOutputs",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcRelAssignsToProduct");case 2:r=e.sent,n=0;case 4:if(!(n<r.length)){e.next=17;break}return i=r[n],e.next=8,this.utils.byId(t,i.RelatedObjects[0].value);case 8:if(a=e.sent,!this.utils.isA(a,"IfcTask")){e.next=14;break}return e.next=12,this.utils.byId(t,i.RelatingProduct.value);case 12:o=e.sent,this.tasks[a.expressID].Outputs.push(o.expressID);case 14:n++,e.next=4;break;case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTaskNesting",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcRelNests");case 2:r=e.sent,n=0;case 4:if(!(n<r.length)){e.next=13;break}return i=r[n],e.next=8,this.utils.byId(t,i.RelatingObject.value);case 8:if(a=e.sent,this.utils.isA(a,"IfcTask"))for(o=i.RelatedObjects,u=0;u<o.length;u++)this.tasks[a.expressID].IsNestedBy.push(o[u].value),this.tasks[o[u].value].Nests.push(a.expressID);case 10:n++,e.next=4;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTaskOperations",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcRelAssignsToProcess");case 2:r=e.sent,n=0;case 4:if(!(n<r.length)){e.next=13;break}return i=r[n],e.next=8,this.utils.byId(t,i.RelatingProcess.value);case 8:if(a=e.sent,this.utils.isA(a,"IfcTask"))for(o=i.RelatedObjects,u=0;u<o.length;u++)this.tasks[a.expressID].OperatesOn.push(o[u].value);case 10:n++,e.next=4;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAssignementsWorkCalendar",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a,o,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcRelAssignsToControl");case 2:r=e.sent,n=0;case 4:if(!(n<r.length)){e.next=13;break}return i=r[n],e.next=8,this.utils.byId(t,i.RelatingControl.value);case 8:if(a=e.sent,this.utils.isA(a,"IfcWorkCalendar"))for(o=i.RelatedObjects,u=0;u<o.length;u++)this.tasks[o[u].value].HasAssignmentsWorkCalendars.push(a.expressID);case 10:n++,e.next=4;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWorkCalendars",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcWorkCalendar");case 2:for(r=e.sent,n=0;n<r.length;n++)i=r[n],a={Id:i.expressID,Name:i.Name?i.Name.value:"",Description:i.Description?i.Description.value:"",WorkingTimes:i.WorkingTimes?i.WorkingTimes:[],ExceptionTimes:i.ExceptionTimes?i.ExceptionTimes:[]},this.workCalendars[i.expressID]=a;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadWorkTimes",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcWorkTime");case 2:r=e.sent,n=0;case 4:if(!(n<r.length)){e.next=22;break}if(i=r[n],e.t0=i.Name?i.Name.value:"",!i.RecurrencePattern){e.next=13;break}return e.next=10,this.utils.byId(t,i.RecurrencePattern.value);case 10:e.t1=e.sent,e.next=14;break;case 13:e.t1="";case 14:e.t2=e.t1,e.t3=i.Start?new Date(i.Start.value):"",e.t4=i.Finish?new Date(i.Finish.value):"",a={Name:e.t0,RecurrencePattern:e.t2,Start:e.t3,Finish:e.t4},this.workTimes[i.expressID]=a;case 19:n++,e.next=4;break;case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTimePeriods",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils.byType(t,"IfcTimePeriod");case 2:for(r=e.sent,n=0;n<r.length;n++)i=r[n],a={StartTime:i.StartTime?new Date(i.StartTime.value):"",EndTime:i.EndTime?new Date(i.EndTime.value):""},this.timePeriods[i.expressID]=a;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),re=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,null,[{key:"merge",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=[],i=[],a=(0,n.Z)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value,u=this.mergeGeomsOfSameMaterial(o,r);s.push(u),i.push(u.index.count)}}catch(c){a.e(c)}finally{a.f()}var h=(0,I.qf)(s);return this.setupMaterialGroups(i,h),this.cleanUp(s),h}},{key:"mergeGltfMeshes",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new p.BufferGeometry,n=t[0].geometry.attributes,this.getMeshesAttributes(r,n),this.getMeshesIndices(r,t),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMeshesAttributes",value:function(e,t){e.setAttribute("blockID",t._blockid),e.setAttribute("position",t.position),e.setAttribute("normal",t.normal),e.groups=[]}},{key:"getMeshesIndices",value:function(e,t){var r,s={index:0,material:0},i=[],a=(0,n.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.geometry.index;this.getIndicesOfMesh(u,i),this.getMeshGroup(e,s,u),this.cleanUpMesh(o)}}catch(h){a.e(h)}finally{a.f()}e.setIndex(i)}},{key:"getMeshGroup",value:function(e,t,r){e.groups.push({start:t.index,count:r.count,materialIndex:t.material++}),t.index+=r.count}},{key:"cleanUpMesh",value:function(e){e.geometry.setIndex([]),e.geometry.attributes={},e.geometry.dispose()}},{key:"getIndicesOfMesh",value:function(e,t){var r,s=(0,n.Z)(e.array);try{for(s.s();!(r=s.n()).done;){var i=r.value;t.push(i)}}catch(a){s.e(a)}finally{s.f()}}},{key:"cleanUp",value:function(e){e.forEach((function(e){return e.dispose()})),e.length=0}},{key:"setupMaterialGroups",value:function(e,t){var r,s=0,i=0,a=(0,n.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u={start:s,count:o,materialIndex:i++};t.groups.push(u),s+=o}}catch(h){a.e(h)}finally{a.f()}}},{key:"mergeGeomsOfSameMaterial",value:function(e,t){this.checkAllGeometriesAreIndexed(e),t&&this.splitByBlocks(e);var r=(0,I.qf)(e);return this.cleanUp(e),r}},{key:"splitByBlocks",value:function(e){var t,r=0,s=(0,n.Z)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value,a=i.attributes.position.count,o=new Uint8Array(a).fill(r++);i.setAttribute("blockID",new p.BufferAttribute(o,1))}}catch(u){s.e(u)}finally{s.f()}}},{key:"checkAllGeometriesAreIndexed",value:function(e){var t,r=(0,n.Z)(e);try{for(r.s();!(t=r.n()).done;){if(!t.value.index)throw new Error("All geometries must be indexed!")}}catch(s){r.e(s)}finally{r.f()}}}]),e}(),ne=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,t),this.x=e,this.y=r,this.z=n,this.w=s}return(0,h.Z)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,r=this.y,n=this.z,s=this.w,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n+i[12]*s,this.y=i[1]*t+i[5]*r+i[9]*n+i[13]*s,this.z=i[2]*t+i[6]*r+i[10]*n+i[14]*s,this.w=i[3]*t+i[7]*r+i[11]*n+i[15]*s,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,r,n,s,i=.01,a=.1,o=e.elements,u=o[0],h=o[4],c=o[8],l=o[1],f=o[5],d=o[9],p=o[2],I=o[6],y=o[10];if(Math.abs(h-l)<i&&Math.abs(c-p)<i&&Math.abs(d-I)<i){if(Math.abs(h+l)<a&&Math.abs(c+p)<a&&Math.abs(d+I)<a&&Math.abs(u+f+y-3)<a)return this.set(1,0,0,0),this;t=Math.PI;var E=(u+1)/2,m=(f+1)/2,v=(y+1)/2,C=(h+l)/4,T=(c+p)/4,g=(d+I)/4;return E>m&&E>v?E<i?(r=0,n=.707106781,s=.707106781):(n=C/(r=Math.sqrt(E)),s=T/r):m>v?m<i?(r=.707106781,n=0,s=.707106781):(r=C/(n=Math.sqrt(m)),s=g/n):v<i?(r=.707106781,n=.707106781,s=0):(r=T/(s=Math.sqrt(v)),n=g/s),this.set(r,n,s,t),this}var R=Math.sqrt((I-d)*(I-d)+(c-p)*(c-p)+(l-h)*(l-h));return Math.abs(R)<.001&&(R=1),this.x=(I-d)/R,this.y=(c-p)/R,this.z=(l-h)/R,this.w=Math.acos((u+f+y-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:(0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);ne.prototype.isVector4=!0;for(var se=0;se<256;se++)se.toString(16);function ie(e,t,r){return Math.max(t,Math.min(r,e))}function ae(e,t,r){return(1-r)*e+r*t}var oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;(0,u.Z)(this,e),this._x=t,this._y=r,this._z=n,this._w=s}return(0,h.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,s=e._z,i=e._order,a=Math.cos,o=Math.sin,u=a(r/2),h=a(n/2),c=a(s/2),l=o(r/2),f=o(n/2),d=o(s/2);switch(i){case"XYZ":this._x=l*h*c+u*f*d,this._y=u*f*c-l*h*d,this._z=u*h*d+l*f*c,this._w=u*h*c-l*f*d;break;case"YXZ":this._x=l*h*c+u*f*d,this._y=u*f*c-l*h*d,this._z=u*h*d-l*f*c,this._w=u*h*c+l*f*d;break;case"ZXY":this._x=l*h*c-u*f*d,this._y=u*f*c+l*h*d,this._z=u*h*d+l*f*c,this._w=u*h*c-l*f*d;break;case"ZYX":this._x=l*h*c-u*f*d,this._y=u*f*c+l*h*d,this._z=u*h*d-l*f*c,this._w=u*h*c+l*f*d;break;case"YZX":this._x=l*h*c+u*f*d,this._y=u*f*c+l*h*d,this._z=u*h*d-l*f*c,this._w=u*h*c-l*f*d;break;case"XZY":this._x=l*h*c-u*f*d,this._y=u*f*c-l*h*d,this._z=u*h*d+l*f*c,this._w=u*h*c+l*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+i)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,r=t[0],n=t[4],s=t[8],i=t[1],a=t[5],o=t[9],u=t[2],h=t[6],c=t[10],l=r+a+c;if(l>0){var f=.5/Math.sqrt(l+1);this._w=.25/f,this._x=(h-o)*f,this._y=(s-u)*f,this._z=(i-n)*f}else if(r>a&&r>c){var d=2*Math.sqrt(1+r-a-c);this._w=(h-o)/d,this._x=.25*d,this._y=(n+i)/d,this._z=(s+u)/d}else if(a>c){var p=2*Math.sqrt(1+a-r-c);this._w=(s-u)/p,this._x=(n+i)/p,this._y=.25*p,this._z=(o+h)/p}else{var I=2*Math.sqrt(1+c-r-a);this._w=(i-n)/I,this._x=(s+u)/I,this._y=(o+h)/I,this._z=.25*I}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(ie(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var r=e._x,n=e._y,s=e._z,i=e._w,a=t._x,o=t._y,u=t._z,h=t._w;return this._x=r*h+i*a+n*u-s*o,this._y=n*h+i*o+s*a-r*u,this._z=s*h+i*u+r*o-n*a,this._w=i*h-r*a-n*o-s*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,s=this._z,i=this._w,a=i*e._w+r*e._x+n*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=i,this._x=r,this._y=n,this._z=s,this;var o=1-a*a;if(o<=Number.EPSILON){var u=1-t;return this._w=u*i+t*this._w,this._x=u*r+t*this._x,this._y=u*n+t*this._y,this._z=u*s+t*this._z,this.normalize(),this._onChangeCallback(),this}var h=Math.sqrt(o),c=Math.atan2(h,a),l=Math.sin((1-t)*c)/h,f=Math.sin(t*c)/h;return this._w=i*l+this._w*f,this._x=r*l+this._x*f,this._y=n*l+this._y*f,this._z=s*l+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,r){this.copy(e).slerp(t,r)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(n),r*Math.sin(s),r*Math.cos(s),t*Math.sin(n))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,r,n){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,n)}},{key:"slerpFlat",value:function(e,t,r,n,s,i,a){var o=r[n+0],u=r[n+1],h=r[n+2],c=r[n+3],l=s[i+0],f=s[i+1],d=s[i+2],p=s[i+3];if(0===a)return e[t+0]=o,e[t+1]=u,e[t+2]=h,void(e[t+3]=c);if(1===a)return e[t+0]=l,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||o!==l||u!==f||h!==d){var I=1-a,y=o*l+u*f+h*d+c*p,E=y>=0?1:-1,m=1-y*y;if(m>Number.EPSILON){var v=Math.sqrt(m),C=Math.atan2(v,y*E);I=Math.sin(I*C)/v,a=Math.sin(a*C)/v}var T=a*E;if(o=o*I+l*T,u=u*I+f*T,h=h*I+d*T,c=c*I+p*T,I===1-a){var g=1/Math.sqrt(o*o+u*u+h*h+c*c);o*=g,u*=g,h*=g,c*=g}}e[t]=o,e[t+1]=u,e[t+2]=h,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,r,n,s,i){var a=r[n],o=r[n+1],u=r[n+2],h=r[n+3],c=s[i],l=s[i+1],f=s[i+2],d=s[i+3];return e[t]=a*d+h*c+o*f-u*l,e[t+1]=o*d+h*l+u*c-a*f,e[t+2]=u*d+h*f+a*l-o*c,e[t+3]=h*d-a*c-o*l-u*f,e}}]),e}();oe.prototype.isQuaternion=!0;var ue=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,u.Z)(this,t),this.x=e,this.y=r,this.z=n}return(0,h.Z)(t,[{key:"set",value:function(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ce.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(ce.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,r=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*n,this.y=s[1]*t+s[4]*r+s[7]*n,this.z=s[2]*t+s[5]*r+s[8]*n,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,r=this.y,n=this.z,s=e.elements,i=1/(s[3]*t+s[7]*r+s[11]*n+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*n+s[12])*i,this.y=(s[1]*t+s[5]*r+s[9]*n+s[13])*i,this.z=(s[2]*t+s[6]*r+s[10]*n+s[14])*i,this}},{key:"applyQuaternion",value:function(e){var t=this.x,r=this.y,n=this.z,s=e.x,i=e.y,a=e.z,o=e.w,u=o*t+i*n-a*r,h=o*r+a*t-s*n,c=o*n+s*r-i*t,l=-s*t-i*r-a*n;return this.x=u*o+l*-s+h*-a-c*-i,this.y=h*o+l*-i+c*-s-u*-a,this.z=c*o+l*-a+u*-i-h*-s,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,r=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*n,this.y=s[1]*t+s[5]*r+s[9]*n,this.z=s[2]*t+s[6]*r+s[10]*n,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var r=e.x,n=e.y,s=e.z,i=t.x,a=t.y,o=t.z;return this.x=n*o-s*a,this.y=s*i-r*o,this.z=r*a-n*i,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}},{key:"projectOnPlane",value:function(e){return he.copy(this).projectOnVector(e),this.sub(he)}},{key:"reflect",value:function(e){return this.sub(he.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var r=this.dot(e)/t;return Math.acos(ie(r,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,r){var n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-Math.pow(e,2));return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}},{key:e,value:(0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);ue.prototype.isVector3=!0;var he=new ue,ce=new oe,le=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,u.Z)(this,t),this.x=e,this.y=r}return(0,h.Z)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var r=Math.cos(t),n=Math.sin(t),s=this.x-e.x,i=this.y-e.y;return this.x=s*r-i*n+e.x,this.y=s*n+i*r+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:(0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(Symbol.iterator);le.prototype.isVector2=!0;var fe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},de={h:0,s:0,l:0},pe={h:0,s:0,l:0};function Ie(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}function ye(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ee(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var me=function(){function e(t,r,n){return(0,u.Z)(this,e),void 0===r&&void 0===n?this.set(t):this.setRGB(t,r,n)}return(0,h.Z)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,r){return this.r=e,this.g=t,this.b=r,this}},{key:"setHSL",value:function(e,t,r){var n;if(e=(e%(n=1)+n)%n,t=ie(t,0,1),r=ie(r,0,1),0===t)this.r=this.g=this.b=r;else{var s=r<=.5?r*(1+t):r+t-r*t,i=2*r-s;this.r=Ie(i,s,e+1/3),this.g=Ie(i,s,e),this.b=Ie(i,s,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var n,s=r[1],i=r[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){var a=parseFloat(n[1])/360,o=parseInt(n[2],10)/100,u=parseInt(n[3],10)/100;return t(n[4]),this.setHSL(a,o,u)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){var h=r[1],c=h.length;if(3===c)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=fe[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=ye(e.r),this.g=ye(e.g),this.b=ye(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Ee(e.r),this.g=Ee(e.g),this.b=Ee(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,r,n=this.r,s=this.g,i=this.b,a=Math.max(n,s,i),o=Math.min(n,s,i),u=(o+a)/2;if(o===a)t=0,r=0;else{var h=a-o;switch(r=u<=.5?h/(a+o):h/(2-a-o),a){case n:t=(s-i)/h+(s<i?6:0);break;case s:t=(i-n)/h+2;break;case i:t=(n-s)/h+4}t/=6}return e.h=t,e.s=r,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,r){return this.getHSL(de),de.h+=e,de.s+=t,de.l+=r,this.setHSL(de.h,de.s,de.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(de),e.getHSL(pe);var r=ae(de.h,pe.h,t),n=ae(de.s,pe.s,t),s=ae(de.l,pe.l,t);return this.setHSL(r,n,s),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();me.NAMES=fe,me.prototype.isColor=!0,me.prototype.r=1,me.prototype.g=1,me.prototype.b=1;var ve=new ue,Ce=new le,Te=function(){function e(t,r,n){if((0,u.Z)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}return(0,h.Z)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,s=this.itemSize;n<s;n++)this.array[e+n]=t.array[r+n];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,r=0,n=0,s=e.length;n<s;n++){var i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),i=new me),t[r++]=i.r,t[r++]=i.g,t[r++]=i.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,r=0,n=0,s=e.length;n<s;n++){var i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),i=new le),t[r++]=i.x,t[r++]=i.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,r=0,n=0,s=e.length;n<s;n++){var i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),i=new ue),t[r++]=i.x,t[r++]=i.y,t[r++]=i.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,r=0,n=0,s=e.length;n<s;n++){var i=e[n];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),i=new ne),t[r++]=i.x,t[r++]=i.y,t[r++]=i.z,t[r++]=i.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,r=this.count;t<r;t++)Ce.fromBufferAttribute(this,t),Ce.applyMatrix3(e),this.setXY(t,Ce.x,Ce.y);else if(3===this.itemSize)for(var n=0,s=this.count;n<s;n++)ve.fromBufferAttribute(this,n),ve.applyMatrix3(e),this.setXYZ(n,ve.x,ve.y,ve.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,r=this.count;t<r;t++)ve.x=this.getX(t),ve.y=this.getY(t),ve.z=this.getZ(t),ve.applyMatrix4(e),this.setXYZ(t,ve.x,ve.y,ve.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,r=this.count;t<r;t++)ve.x=this.getX(t),ve.y=this.getY(t),ve.z=this.getZ(t),ve.applyNormalMatrix(e),this.setXYZ(t,ve.x,ve.y,ve.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,r=this.count;t<r;t++)ve.x=this.getX(t),ve.y=this.getY(t),ve.z=this.getZ(t),ve.transformDirection(e),this.setXYZ(t,ve.x,ve.y,ve.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}},{key:"setXYZ",value:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this}},{key:"setXYZW",value:function(e,t,r,n,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=s,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();Te.prototype.isBufferAttribute=!0,function(e){(0,l.Z)(r,e);var t=(0,f.Z)(r);function r(e,n,s){return(0,u.Z)(this,r),t.call(this,new Uint16Array(e),n,s)}return(0,h.Z)(r)}(Te).prototype.isFloat16BufferAttribute=!0;var ge=function(){function e(){(0,u.Z)(this,e),this.pluginCallbacks=[],this.register((function(e){return new Ke(e)})),this.register((function(e){return new $e(e)})),this.register((function(e){return new Qe(e)})),this.register((function(e){return new tt(e)})),this.register((function(e){return new rt(e)})),this.register((function(e){return new et(e)}))}return(0,h.Z)(e,[{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,r,n){"object"===typeof r&&(console.warn("THREE.GLTFExporter: parse() expects options as the fourth argument now."),n=r);for(var s=new Je,i=[],a=0,o=this.pluginCallbacks.length;a<o;a++)i.push(this.pluginCallbacks[a](s));s.setPlugins(i),s.write(e,t,n).catch(r)}},{key:"parseAsync",value:function(e,t){var r=this;return new Promise((function(n,s){r.parse(e,n,s,t)}))}}]),e}(),Re=0,Fe=1,Se=2,ke=3,Ae=4,xe=5121,Me=5123,Ne=5126,Oe=5125,we=34962,be=34963,Le=9728,De=9729,Pe=9984,_e=9985,Ze=9986,Ue=9987,ze=33071,Ye=33648,Ge=10497,Ve={};Ve[p.NearestFilter]=Le,Ve[p.NearestMipmapNearestFilter]=Pe,Ve[p.NearestMipmapLinearFilter]=Ze,Ve[p.LinearFilter]=De,Ve[p.LinearMipmapNearestFilter]=_e,Ve[p.LinearMipmapLinearFilter]=Ue,Ve[p.ClampToEdgeWrapping]=ze,Ve[p.RepeatWrapping]=Ge,Ve[p.MirroredRepeatWrapping]=Ye;var Be={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"};function He(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))}function We(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0,n=e.length;r<n;r++){var s=e.charCodeAt(r);t[r]=s>255?32:s}return t.buffer}function je(e){return 4*Math.ceil(e/4)}function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=je(e.byteLength);if(r!==e.byteLength){var n=new Uint8Array(r);if(n.set(new Uint8Array(e)),0!==t)for(var s=e.byteLength;s<r;s++)n[s]=t;return n.buffer}return e}var Xe=null,Je=function(){function e(){(0,u.Z)(this,e),this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}return(0,h.Z)(e,[{key:"setPlugins",value:function(e){this.plugins=e}},{key:"write",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r,n){var i,a,o,u,h,c,l,f;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),e.next=5,Promise.all(this.pending);case 5:a=(i=this).buffers,o=i.json,n=i.options,u=i.extensionsUsed,h=new Blob(a,{type:"application/octet-stream"}),(c=Object.keys(u)).length>0&&(o.extensionsUsed=c),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=h.size),!0===n.binary?((l=new window.FileReader).readAsArrayBuffer(h),l.onloadend=function(){var e=qe(l.result),t=new DataView(new ArrayBuffer(8));t.setUint32(0,e.byteLength,!0),t.setUint32(4,5130562,!0);var n=qe(We(JSON.stringify(o)),32),s=new DataView(new ArrayBuffer(8));s.setUint32(0,n.byteLength,!0),s.setUint32(4,1313821514,!0);var i=new ArrayBuffer(12),a=new DataView(i);a.setUint32(0,1179937895,!0),a.setUint32(4,2,!0);var u=12+s.byteLength+n.byteLength+t.byteLength+e.byteLength;a.setUint32(8,u,!0);var h=new Blob([i,s,n,t,e],{type:"application/octet-stream"}),c=new window.FileReader;c.readAsArrayBuffer(h),c.onloadend=function(){r(c.result)}}):o.buffers&&o.buffers.length>0?((f=new window.FileReader).readAsDataURL(h),f.onloadend=function(){var e=f.result;o.buffers[0].uri=e,r(o)}):r(o);case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"serializeUserData",value:function(e,t){if(0!==Object.keys(e.userData).length){var r=this.options,n=this.extensionsUsed;try{var s=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&s.gltfExtensions){for(var i in void 0===t.extensions&&(t.extensions={}),s.gltfExtensions)t.extensions[i]=s.gltfExtensions[i],n[i]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(a){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+a.message)}}}},{key:"getUID",value:function(e){return this.uids.has(e)||this.uids.set(e,this.uid++),this.uids.get(e)}},{key:"isNormalizedNormalAttribute",value:function(e){if(this.cache.attributesNormalized.has(e))return!1;for(var t=new p.Vector3,r=0,n=e.count;r<n;r++)if(Math.abs(t.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}},{key:"createNormalizedNormalAttribute",value:function(e){var t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);for(var r=e.clone(),n=new p.Vector3,s=0,i=r.count;s<i;s++)n.fromBufferAttribute(r,s),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),r.setXYZ(s,n.x,n.y,n.z);return t.attributesNormalized.set(e,r),r}},{key:"applyTextureTransform",value:function(e,t){var r=!1,n={};0===t.offset.x&&0===t.offset.y||(n.offset=t.offset.toArray(),r=!0),0!==t.rotation&&(n.rotation=t.rotation,r=!0),1===t.repeat.x&&1===t.repeat.y||(n.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=n,this.extensionsUsed.KHR_texture_transform=!0)}},{key:"processBuffer",value:function(e){var t=this.json,r=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),r.push(e),0}},{key:"processBufferView",value:function(e,t,r,n,s){var i,a=this.json;a.bufferViews||(a.bufferViews=[]),i=t===xe?1:t===Me?2:4;for(var o=je(n*e.itemSize*i),u=new DataView(new ArrayBuffer(o)),h=0,c=r;c<r+n;c++)for(var l=0;l<e.itemSize;l++){var f=void 0;e.itemSize>4?f=e.array[c*e.itemSize+l]:0===l?f=e.getX(c):1===l?f=e.getY(c):2===l?f=e.getZ(c):3===l&&(f=e.getW(c)),t===Ne?u.setFloat32(h,f,!0):t===Oe?u.setUint32(h,f,!0):t===Me?u.setUint16(h,f,!0):t===xe&&u.setUint8(h,f),h+=i}var d={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:o};return void 0!==s&&(d.target=s),s===we&&(d.byteStride=e.itemSize*i),this.byteOffset+=o,a.bufferViews.push(d),{id:a.bufferViews.length-1,byteLength:0}}},{key:"processBufferViewImage",value:function(e){var t=this,r=t.json;return r.bufferViews||(r.bufferViews=[]),new Promise((function(n){var s=new window.FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){var e=qe(s.result),i={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,n(r.bufferViews.push(i)-1)}}))}},{key:"processAccessor",value:function(e,t,r,n){var s,i=this.options,a=this.json;if(e.array.constructor===Float32Array)s=Ne;else if(e.array.constructor===Uint32Array)s=Oe;else if(e.array.constructor===Uint16Array)s=Me;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");s=xe}if(void 0===r&&(r=0),void 0===n&&(n=e.count),i.truncateDrawRange&&void 0!==t&&null===t.index){var o=r+n,u=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;r=Math.max(r,t.drawRange.start),(n=Math.min(o,u)-r)<0&&(n=0)}if(0===n)return null;var h,c=function(e,t,r){for(var n={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},s=t;s<t+r;s++)for(var i=0;i<e.itemSize;i++){var a=void 0;e.itemSize>4?a=e.array[s*e.itemSize+i]:0===i?a=e.getX(s):1===i?a=e.getY(s):2===i?a=e.getZ(s):3===i&&(a=e.getW(s)),n.min[i]=Math.min(n.min[i],a),n.max[i]=Math.max(n.max[i],a)}return n}(e,r,n);void 0!==t&&(h=e===t.index?be:we);var l=this.processBufferView(e,s,r,n,h),f={bufferView:l.id,byteOffset:l.byteOffset,componentType:s,count:n,max:c.max,min:c.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(f.normalized=!0),a.accessors||(a.accessors=[]),a.accessors.push(f)-1}},{key:"processImage",value:function(e,t,r){var n=this,s=n.cache,i=n.json,a=n.options,o=n.pending;s.images.has(e)||s.images.set(e,{});var u=s.images.get(e),h=t===p.RGBAFormat?"image/png":"image/jpeg",c=h+":flipY/"+r.toString();if(void 0!==u[c])return u[c];i.images||(i.images=[]);var l={mimeType:h};if(a.embedImages){var f=Xe=Xe||document.createElement("canvas");f.width=Math.min(e.width,a.maxTextureSize),f.height=Math.min(e.height,a.maxTextureSize);var d=f.getContext("2d");if(!0===r&&(d.translate(0,f.height),d.scale(1,-1)),"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)d.drawImage(e,0,0,f.width,f.height);else{t!==p.RGBAFormat&&t!==p.RGBFormat&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>a.maxTextureSize||e.height>a.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);var I=new Uint8ClampedArray(e.height*e.width*4);if(t===p.RGBAFormat)for(var y=0;y<I.length;y+=4)I[y+0]=e.data[y+0],I[y+1]=e.data[y+1],I[y+2]=e.data[y+2],I[y+3]=e.data[y+3];else for(var E=0,m=0;E<I.length;E+=4,m+=3)I[E+0]=e.data[m+0],I[E+1]=e.data[m+1],I[E+2]=e.data[m+2],I[E+3]=255;d.putImageData(new ImageData(I,e.width,e.height),0,0)}!0===a.binary?o.push(new Promise((function(e){f.toBlob((function(t){n.processBufferViewImage(t).then((function(t){l.bufferView=t,e()}))}),h)}))):l.uri=f.toDataURL(h)}else l.uri=e.src;var v=i.images.push(l)-1;return u[c]=v,v}},{key:"processSampler",value:function(e){var t=this.json;t.samplers||(t.samplers=[]);var r={magFilter:Ve[e.magFilter],minFilter:Ve[e.minFilter],wrapS:Ve[e.wrapS],wrapT:Ve[e.wrapT]};return t.samplers.push(r)-1}},{key:"processTexture",value:function(e){var t=this.cache,r=this.json;if(t.textures.has(e))return t.textures.get(e);r.textures||(r.textures=[]);var n={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY)};e.name&&(n.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,n)}));var s=r.textures.push(n)-1;return t.textures.set(e,s),s}},{key:"processMaterial",value:function(e){var t=this.cache,r=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;r.materials||(r.materials=[]);var n={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var s=e.color.toArray().concat([e.opacity]);if(He(s,[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(n.pbrMetallicRoughness.metallicFactor=e.metalness,n.pbrMetallicRoughness.roughnessFactor=e.roughness):(n.pbrMetallicRoughness.metallicFactor=.5,n.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){var i={index:this.processTexture(e.metalnessMap)};this.applyTextureTransform(i,e.metalnessMap),n.pbrMetallicRoughness.metallicRoughnessTexture=i}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){var a={index:this.processTexture(e.map)};this.applyTextureTransform(a,e.map),n.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){var o=e.emissive.clone().multiplyScalar(e.emissiveIntensity),u=Math.max(o.r,o.g,o.b);if(u>1&&(o.multiplyScalar(1/u),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),u>0&&(n.emissiveFactor=o.toArray()),e.emissiveMap){var h={index:this.processTexture(e.emissiveMap)};this.applyTextureTransform(h,e.emissiveMap),n.emissiveTexture=h}}if(e.normalMap){var c={index:this.processTexture(e.normalMap)};e.normalScale&&1!==e.normalScale.x&&(c.scale=e.normalScale.x),this.applyTextureTransform(c,e.normalMap),n.normalTexture=c}if(e.aoMap){var l={index:this.processTexture(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(l.strength=e.aoMapIntensity),this.applyTextureTransform(l,e.aoMap),n.occlusionTexture=l}e.transparent?n.alphaMode="BLEND":e.alphaTest>0&&(n.alphaMode="MASK",n.alphaCutoff=e.alphaTest),e.side===p.DoubleSide&&(n.doubleSided=!0),""!==e.name&&(n.name=e.name),this.serializeUserData(e,n),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,n)}));var f=r.materials.push(n)-1;return t.materials.set(e,f),f}},{key:"processMesh",value:function(e){var t=this.cache,r=this.json,n=[e.geometry.uuid];if(Array.isArray(e.material))for(var s=0,i=e.material.length;s<i;s++)n.push(e.material[s].uuid);else n.push(e.material.uuid);var a=n.join(":");if(t.meshes.has(a))return t.meshes.get(a);var o,u=e.geometry;if(o=e.isLineSegments?Fe:e.isLineLoop?Se:e.isLine?ke:e.isPoints?Re:e.material.wireframe?Fe:Ae,!0!==u.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");var h={},c={},l=[],f=[],d={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},I=u.getAttribute("normal");void 0===I||this.isNormalizedNormalAttribute(I)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),u.setAttribute("normal",this.createNormalizedNormalAttribute(I)));var y=null;for(var E in u.attributes)if("morph"!==E.substr(0,5)){var m=u.attributes[E];E=d[E]||E.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(E)||(E="_"+E),t.attributes.has(this.getUID(m)))c[E]=t.attributes.get(this.getUID(m));else{y=null;var v=m.array;"JOINTS_0"!==E||v instanceof Uint16Array||v instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),y=new p.BufferAttribute(new Uint16Array(v),m.itemSize,m.normalized));var C=this.processAccessor(y||m,u);null!==C&&(c[E]=C,t.attributes.set(this.getUID(m),C))}}if(void 0!==I&&u.setAttribute("normal",I),0===Object.keys(c).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var T=[],g=[],R={};if(void 0!==e.morphTargetDictionary)for(var F in e.morphTargetDictionary)R[e.morphTargetDictionary[F]]=F;for(var S=0;S<e.morphTargetInfluences.length;++S){var k={},A=!1;for(var x in u.morphAttributes)if("position"===x||"normal"===x){var M=u.morphAttributes[x][S],N=x.toUpperCase(),O=u.attributes[x];if(t.attributes.has(this.getUID(M)))k[N]=t.attributes.get(this.getUID(M));else{var w=M.clone();if(!u.morphTargetsRelative)for(var b=0,L=M.count;b<L;b++)w.setXYZ(b,M.getX(b)-O.getX(b),M.getY(b)-O.getY(b),M.getZ(b)-O.getZ(b));k[N]=this.processAccessor(w,u),t.attributes.set(this.getUID(O),k[N])}}else A||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),A=!0);f.push(k),T.push(e.morphTargetInfluences[S]),void 0!==e.morphTargetDictionary&&g.push(R[S])}h.weights=T,g.length>0&&(h.extras={},h.extras.targetNames=g)}var D=Array.isArray(e.material);if(D&&0===u.groups.length)return null;for(var P=D?e.material:[e.material],_=D?u.groups:[{materialIndex:0,start:void 0,count:void 0}],Z=0,U=_.length;Z<U;Z++){var z={mode:o,attributes:c};if(this.serializeUserData(u,z),f.length>0&&(z.targets=f),null!==u.index){var Y=this.getUID(u.index);void 0===_[Z].start&&void 0===_[Z].count||(Y+=":"+_[Z].start+":"+_[Z].count),t.attributes.has(Y)?z.indices=t.attributes.get(Y):(z.indices=this.processAccessor(u.index,u,_[Z].start,_[Z].count),t.attributes.set(Y,z.indices)),null===z.indices&&delete z.indices}var G=this.processMaterial(P[_[Z].materialIndex]);null!==G&&(z.material=G),l.push(z)}h.primitives=l,r.meshes||(r.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,h)}));var V=r.meshes.push(h)-1;return t.meshes.set(a,V),V}},{key:"processCamera",value:function(e){var t=this.json;t.cameras||(t.cameras=[]);var r=e.isOrthographicCamera,n={type:r?"orthographic":"perspective"};return r?n.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:n.perspective={aspectRatio:e.aspect,yfov:p.MathUtils.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(n.name=e.type),t.cameras.push(n)-1}},{key:"processAnimation",value:function(e,t){var r=this.json,n=this.nodeMap;r.animations||(r.animations=[]);for(var s=(e=ge.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,i=[],a=[],o=0;o<s.length;++o){var u=s[o],h=p.PropertyBinding.parseTrackName(u.name),c=p.PropertyBinding.findNode(t,h.nodeName),l=Be[h.propertyName];if("bones"===h.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(h.objectIndex):void 0),!c||!l)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',u.name),null;var f=u.values.length/u.times.length;l===Be.morphTargetInfluences&&(f/=c.morphTargetInfluences.length);var d=void 0;!0===u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(d="CUBICSPLINE",f/=3):d=u.getInterpolation()===p.InterpolateDiscrete?"STEP":"LINEAR",a.push({input:this.processAccessor(new p.BufferAttribute(u.times,1)),output:this.processAccessor(new p.BufferAttribute(u.values,f)),interpolation:d}),i.push({sampler:a.length-1,target:{node:n.get(c),path:l}})}return r.animations.push({name:e.name||"clip_"+r.animations.length,samplers:a,channels:i}),r.animations.length-1}},{key:"processSkin",value:function(e){var t=this.json,r=this.nodeMap,n=t.nodes[r.get(e)],s=e.skeleton;if(void 0===s)return null;var i=e.skeleton.bones[0];if(void 0===i)return null;for(var a=[],o=new Float32Array(16*s.bones.length),u=new p.Matrix4,h=0;h<s.bones.length;++h)a.push(r.get(s.bones[h])),u.copy(s.boneInverses[h]),u.multiply(e.bindMatrix).toArray(o,16*h);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new p.BufferAttribute(o,16)),joints:a,skeleton:r.get(i)}),n.skin=t.skins.length-1}},{key:"processNode",value:function(e){var t=this.json,r=this.options,n=this.nodeMap;t.nodes||(t.nodes=[]);var s={};if(r.trs){var i=e.quaternion.toArray(),a=e.position.toArray(),o=e.scale.toArray();He(i,[0,0,0,1])||(s.rotation=i),He(a,[0,0,0])||(s.translation=a),He(o,[1,1,1])||(s.scale=o)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===He(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(s.matrix=e.matrix.elements);if(""!==e.name&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){var u=this.processMesh(e);null!==u&&(s.mesh=u)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){for(var h=[],c=0,l=e.children.length;c<l;c++){var f=e.children[c];if(f.visible||!1===r.onlyVisible){var d=this.processNode(f);null!==d&&h.push(d)}}h.length>0&&(s.children=h)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,s)}));var p=t.nodes.push(s)-1;return n.set(e,p),p}},{key:"processScene",value:function(e){var t=this.json,r=this.options;t.scenes||(t.scenes=[],t.scene=0);var n={};""!==e.name&&(n.name=e.name),t.scenes.push(n);for(var s=[],i=0,a=e.children.length;i<a;i++){var o=e.children[i];if(o.visible||!1===r.onlyVisible){var u=this.processNode(o);null!==u&&s.push(u)}}s.length>0&&(n.nodes=s),this.serializeUserData(e,n)}},{key:"processObjects",value:function(e){var t=new p.Scene;t.name="AuxScene";for(var r=0;r<e.length;r++)t.children.push(e[r]);this.processScene(t)}},{key:"processInput",value:function(e){var t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));for(var r=[],n=0;n<e.length;n++)e[n]instanceof p.Scene?this.processScene(e[n]):r.push(e[n]);r.length>0&&this.processObjects(r);for(var s=0;s<this.skins.length;++s)this.processSkin(this.skins[s]);for(var i=0;i<t.animations.length;++i)this.processAnimation(t.animations[i],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}},{key:"_invokeAll",value:function(e){for(var t=0,r=this.plugins.length;t<r;t++)e(this.plugins[t])}}]),e}(),Ke=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_lights_punctual"}return(0,h.Z)(e,[{key:"writeNode",value:function(e,t){if(e.isLight)if(e.isDirectionalLight||e.isPointLight||e.isSpotLight){var r=this.writer,n=r.json,s=r.extensionsUsed,i={};e.name&&(i.name=e.name),i.color=e.color.toArray(),i.intensity=e.intensity,e.isDirectionalLight?i.type="directional":e.isPointLight?(i.type="point",e.distance>0&&(i.range=e.distance)):e.isSpotLight&&(i.type="spot",e.distance>0&&(i.range=e.distance),i.spot={},i.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,i.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(n.extensions=n.extensions||{},n.extensions[this.name]={lights:[]},s[this.name]=!0);var a=n.extensions[this.name].lights;a.push(i),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}else console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e)}}]),e}(),$e=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_unlit"}return(0,h.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshBasicMaterial){var r=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}}]),e}(),Qe=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_pbrSpecularGlossiness"}return(0,h.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isGLTFSpecularGlossinessMaterial){var r=this.writer,n=r.extensionsUsed,s={};t.pbrMetallicRoughness.baseColorFactor&&(s.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);var i=[1,1,1];if(e.specular.toArray(i,0),s.specularFactor=i,s.glossinessFactor=e.glossiness,t.pbrMetallicRoughness.baseColorTexture&&(s.diffuseTexture=t.pbrMetallicRoughness.baseColorTexture),e.specularMap){var a={index:r.processTexture(e.specularMap)};r.applyTextureTransform(a,e.specularMap),s.specularGlossinessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,n[this.name]=!0}}}]),e}(),et=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_clearcoat"}return(0,h.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial){var r=this.writer,n=r.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){var i={index:r.processTexture(e.clearcoatMap)};r.applyTextureTransform(i,e.clearcoatMap),s.clearcoatTexture=i}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){var a={index:r.processTexture(e.clearcoatRoughnessMap)};r.applyTextureTransform(a,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=a}if(e.clearcoatNormalMap){var o={index:r.processTexture(e.clearcoatNormalMap)};r.applyTextureTransform(o,e.clearcoatNormalMap),s.clearcoatNormalTexture=o}t.extensions=t.extensions||{},t.extensions[this.name]=s,n[this.name]=!0}}}]),e}(),tt=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_transmission"}return(0,h.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var r=this.writer,n=r.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){var i={index:r.processTexture(e.transmissionMap)};r.applyTextureTransform(i,e.transmissionMap),s.transmissionTexture=i}t.extensions=t.extensions||{},t.extensions[this.name]=s,n[this.name]=!0}}}]),e}(),rt=function(){function e(t){(0,u.Z)(this,e),this.writer=t,this.name="KHR_materials_volume"}return(0,h.Z)(e,[{key:"writeMaterial",value:function(e,t){if(e.isMeshPhysicalMaterial&&0!==e.transmission){var r=this.writer,n=r.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){var i={index:r.processTexture(e.thicknessMap)};r.applyTextureTransform(i,e.thicknessMap),s.thicknessTexture=i}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,n[this.name]=!0}}}]),e}();ge.Utils={insertKeyframe:function(e,t){var r,n=.001,s=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),a=new e.ValueBufferType(e.values.length+s),o=e.createInterpolant(new e.ValueBufferType(s));if(0===e.times.length){i[0]=t;for(var u=0;u<s;u++)a[u]=0;r=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<n)return 0;i[0]=t,i.set(e.times,1),a.set(o.evaluate(t),0),a.set(e.values,s),r=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<n)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),a.set(e.values,0),a.set(o.evaluate(t),e.values.length),r=i.length-1}else for(var h=0;h<e.times.length;h++){if(Math.abs(e.times[h]-t)<n)return h;if(e.times[h]<t&&e.times[h+1]>t){i.set(e.times.slice(0,h+1),0),i[h+1]=t,i.set(e.times.slice(h+1),h+2),a.set(e.values.slice(0,(h+1)*s),0),a.set(o.evaluate(t),(h+1)*s),a.set(e.values.slice((h+1)*s),(h+2)*s),r=h+1;break}}return e.times=i,e.values=a,r},mergeMorphTargetTracks:function(e,t){for(var r=[],n={},s=e.tracks,i=0;i<s.length;++i){var a=s[i],o=p.PropertyBinding.parseTrackName(a.name),u=p.PropertyBinding.findNode(t,o.nodeName);if("morphTargetInfluences"===o.propertyName&&void 0!==o.propertyIndex){if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(a=a.clone()).setInterpolation(p.InterpolateLinear)}var h=u.morphTargetInfluences.length,c=u.morphTargetDictionary[o.propertyIndex];if(void 0===c)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);var l=void 0;if(void 0!==n[u.uuid]){var f=a.createInterpolant(new a.ValueBufferType(1));l=n[u.uuid];for(var d=0;d<l.times.length;d++)l.values[d*h+c]=f.evaluate(l.times[d]);for(var I=0;I<a.times.length;I++){var y=this.insertKeyframe(l,a.times[I]);l.values[y*h+c]=a.values[I]}}else{for(var E=new((l=a.clone()).ValueBufferType)(h*l.times.length),m=0;m<l.times.length;m++)E[m*h+c]=l.values[m];l.name=(o.nodeName||"")+".morphTargetInfluences",l.values=E,n[u.uuid]=l,r.push(l)}}else r.push(a)}return e.tracks=r,e}};var nt=function(e){(0,l.Z)(r,e);var t=(0,f.Z)(r);function r(e,n,s){var i;return(0,u.Z)(this,r),(i=t.call(this,e,n,s)).elementCount=0,i.exportOptions={trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,maxTextureSize:0},i.exporter=new ge,i.material=r.newMaterialArray(n),i.geometry=i.newFragmentGeometry(e),i}return(0,h.Z)(r,[{key:"export",value:function(){var e=this,t=this;return new Promise((function(r){e.exporter.parse(t,(function(e){return r(e)}),e.exportOptions)}))}},{key:"newFragmentGeometry",value:function(e){if(!e.index)throw new Error("The geometry must be indexed!");if(!e.attributes.blockID){var t=e.attributes.position.count,n=new Uint16Array(t);n.fill(this.elementCount++),e.attributes.blockID=new Te(n,1)}var s=e.index.count;return r.initializeGroups(e,s),e}}],[{key:"initializeGroups",value:function(e,t){e.groups.length||e.groups.push({start:0,count:t,materialIndex:0})}},{key:"newMaterialArray",value:function(e){return Array.isArray(e)||(e=[e]),e}}]),r}(p.InstancedMesh),st=function(){function e(t){(0,u.Z)(this,e),this.indices=e.initializeBlocks(t),this.generateGeometryIndexMap(t)}return(0,h.Z)(e,[{key:"generateGeometryIndexMap",value:function(e){var t,r=e.mesh.geometry,s=(0,n.Z)(r.groups);try{for(s.s();!(t=s.n()).done;){var i=t.value;this.fillBlocksMapWithGroupInfo(i,r)}}catch(a){s.e(a)}finally{s.f()}}},{key:"getSubsetID",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT",n=e,s=t?t.uuid:"DEFAULT";return"".concat(n," - ").concat(s," - ").concat(r)}},{key:"dispose",value:function(){this.indices=null}},{key:"fillBlocksMapWithGroupInfo",value:function(e,t){for(var r=-1,n=e.materialIndex,s=e.start,i=s+e.count-1,a=-1,o=-1,u=s;u<=i;u++){var h=t.index.array[u],c=t.attributes.blockID.array[h];if(-1===r&&(r=c,a=u),u===i){this.getMaterialStore(c,n).push(a,i);break}if(r!==c)o=u-1,this.getMaterialStore(r,n).push(a,o),r=c,a=u}}},{key:"getMaterialStore",value:function(e,t){void 0===this.indices.map.get(e)&&this.indices.map.set(e,{});var r=this.indices.map.get(e);if(void 0===r)throw new Error("Geometry map generation error");return void 0===r[t]&&(r[t]=[]),r[t]}}],[{key:"initializeBlocks",value:function(e){var t=e.mesh.geometry;return{indexCache:t.index.array.slice(0,t.index.array.length),map:new Map}}}]),e}(),it=function(){function e(t){(0,u.Z)(this,e),this.fragment=t,this.tempIndex=[],this.blocksMap=new st(t),this.initializeSubsetGroups(t);var r=t.mesh.geometry.attributes.blockID.array;this.visibleIds=new Set(r),this.ids=new Set(r),this.add(Array.from(this.ids),!0)}return(0,h.Z)(e,[{key:"count",get:function(){return this.ids.size}},{key:"reset",value:function(){this.add(Array.from(this.ids),!0)}},{key:"add",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.filterIndices(r);var n=e.filter((function(e){return!t.visibleIds.has(e)}));this.constructSubsetByMaterial(e),n.forEach((function(e){return t.visibleIds.add(e)})),this.fragment.mesh.geometry.setIndex(this.tempIndex),this.tempIndex.length=0}},{key:"remove",value:function(e){var t=this;e.forEach((function(e){return t.visibleIds.has(e)&&t.visibleIds.delete(e)}));var r=Array.from(this.visibleIds);this.add(r,!0)}},{key:"dispose",value:function(){this.blocksMap.dispose(),this.tempIndex=[],this.visibleIds.clear(),this.visibleIds=null,this.ids.clear(),this.ids=null}},{key:"initializeSubsetGroups",value:function(e){var t=e.mesh.geometry;t.groups=JSON.parse(JSON.stringify(t.groups)),this.resetGroups(t)}},{key:"filterIndices",value:function(e){var t=this.fragment.mesh.geometry;e?(t.setIndex([]),this.resetGroups(t)):this.tempIndex=Array.from(t.index.array)}},{key:"constructSubsetByMaterial",value:function(e){for(var t=this.fragment.mesh.geometry.groups.length,r={count:0},n=0;n<t;n++)this.insertNewIndices(e,n,r)}},{key:"insertNewIndices",value:function(e,t,r){var n=this.getAllIndicesOfGroup(e,t);this.insertIndicesAtGroup(n,t,r)}},{key:"insertIndicesAtGroup",value:function(e,t,r){var n=this.getCurrentGroup(t);n.start+=r.count;var s=n.start+n.count;if(r.count+=e.length,e.length>0){var i=s,a=this.tempIndex.slice(0,i),o=this.tempIndex.slice(i);this.tempIndex=Array.prototype.concat.apply([],[a,e,o]),n.count+=e.length}}},{key:"getCurrentGroup",value:function(e){return this.fragment.mesh.geometry.groups[e]}},{key:"resetGroups",value:function(e){e.groups.forEach((function(e){e.start=0,e.count=0}))}},{key:"getAllIndicesOfGroup",value:function(e,t){var r,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[],a=(0,n.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=this.blocksMap.indices.map.get(o);if(u){var h=u[t];h&&this.getIndexChunk(h,i,t,s)}}}catch(c){a.e(c)}finally{a.f()}return i}},{key:"getIndexChunk",value:function(e,t,r,n){for(var s=e.length/2,i=0;i<s;i++)for(var a=2*i,o=e[a],u=e[a+1],h=o;h<=u;h++)n?t.push(this.blocksMap.indices.indexCache[h]):(t[r]||(t[r]=[]),t[r].push(this.blocksMap.indices.indexCache[h]))}}]),e}(),at=function(){function e(){(0,u.Z)(this,e)}return(0,h.Z)(e,null,[{key:"apply",value:function(t){e.initialized||(p.BufferGeometry.prototype.computeBoundsTree=y.computeBoundsTree,p.BufferGeometry.prototype.disposeBoundsTree=y.disposeBoundsTree,p.Mesh.prototype.raycast=y.acceleratedRaycast,e.initialized=!0),t.boundsTree||t.computeBoundsTree()}},{key:"dispose",value:function(e){e.disposeBoundsTree()}}]),e}();at.initialized=!1;var ot=function(){function e(t,r,n){(0,u.Z)(this,e),this.fragments={},this.items=[],this.hiddenInstances={},this.mesh=new nt(t,r,n),this.id=this.mesh.uuid,this.capacity=n,this.blocks=new it(this),at.apply(t)}return(0,h.Z)(e,[{key:"dispose",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.items=null,e&&(this.mesh.material.forEach((function(e){return e.dispose()})),at.dispose(this.mesh.geometry),this.mesh.geometry.dispose()),this.mesh.dispose(),this.mesh=null,this.disposeNestedFragments()}},{key:"getItemID",value:function(e,t){var r=this.getItemIndex(e,t);return this.items[r]}},{key:"getInstanceAndBlockID",value:function(e){var t=this.items.indexOf(e);return{instanceID:this.getInstanceIDFromIndex(t),blockID:t%this.blocks.count}}},{key:"getVertexBlockID",value:function(e,t){return e.attributes.blockID.array[t]}},{key:"getItemData",value:function(e){var t=this.items.indexOf(e);return{instanceID:Math.ceil(t/this.blocks.count),blockID:t%this.blocks.count}}},{key:"getInstance",value:function(e,t){return this.mesh.getMatrixAt(e,t)}},{key:"setInstance",value:function(e,t){this.checkIfInstanceExist(e),this.mesh.setMatrixAt(e,t.transform),this.mesh.instanceMatrix.needsUpdate=!0,t.ids&&this.saveItemsInMap(t.ids,e)}},{key:"addInstances",value:function(e){this.resizeCapacityIfNeeded(e.length);var t=this.mesh.count;this.mesh.count+=e.length;for(var r=0;r<e.length;r++)this.setInstance(t+r,e[r])}},{key:"removeInstances",value:function(e){this.mesh.count<=1?this.clear():(this.deleteAndRearrangeInstances(e),this.mesh.count-=e.length,this.mesh.instanceMatrix.needsUpdate=!0)}},{key:"clear",value:function(){this.mesh.clear(),this.mesh.count=0,this.items=[]}},{key:"addFragment",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mesh.material,n=this.initializeGeometry();r===this.mesh.material&&this.copyGroups(n);var s=new e(n,r,this.capacity);return s.mesh.applyMatrix4(this.mesh.matrix),s.mesh.updateMatrix(),this.fragments[t]=s,this.fragments[t]}},{key:"removeFragment",value:function(e){var t=this.fragments[e];t&&(t.dispose(!1),delete this.fragments[e])}},{key:"resetVisibility",value:function(){if(this.blocks.count>1)this.blocks.reset();else{var e=Object.keys(this.hiddenInstances).map((function(e){return parseInt(e,10)}));this.makeInstancesVisible(e),this.hiddenInstances={}}}},{key:"setVisibility",value:function(e,t){this.blocks.count>1?(this.toggleBlockVisibility(t,e),this.mesh.geometry.disposeBoundsTree(),at.apply(this.mesh.geometry)):this.toggleInstanceVisibility(t,e)}},{key:"resize",value:function(e){var t,r=this.createFragmentMeshWithNewSize(e);this.capacity=e;var n=this.mesh;null===(t=n.parent)||void 0===t||t.add(r),n.removeFromParent(),this.mesh=r,n.dispose()}},{key:"export",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t,r,n,i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mesh.export();case 2:return t=e.sent,r=new File([new Blob([t])],"".concat(this.id,".glb")),n={matrices:Array.from(this.mesh.instanceMatrix.array),ids:this.items},i=JSON.stringify(n),a=new File([new Blob([i])],"".concat(this.id,".json")),e.abrupt("return",{geometry:r,data:a});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"copyGroups",value:function(e){e.groups=[];var t,r=(0,n.Z)(this.mesh.geometry.groups);try{for(r.s();!(t=r.n()).done;){var s=t.value;e.groups.push((0,o.Z)({},s))}}catch(i){r.e(i)}finally{r.f()}}},{key:"initializeGeometry",value:function(){var e=new p.BufferGeometry;return e.setAttribute("position",this.mesh.geometry.attributes.position),e.setAttribute("normal",this.mesh.geometry.attributes.normal),e.setAttribute("blockID",this.mesh.geometry.attributes.blockID),e.setIndex(Array.from(this.mesh.geometry.index.array)),e}},{key:"saveItemsInMap",value:function(e,t){this.checkBlockNumberValid(e);var r,s=0,i=(0,n.Z)(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=this.getItemIndex(t,s);this.items[o]=a,s++}}catch(u){i.e(u)}finally{i.f()}}},{key:"resizeCapacityIfNeeded",value:function(e){var t=e+this.mesh.count;t>this.capacity&&this.resize(t)}},{key:"createFragmentMeshWithNewSize",value:function(e){var t=new nt(this.mesh.geometry,this.mesh.material,e);return t.count=this.mesh.count,t}},{key:"disposeNestedFragments",value:function(){for(var e=Object.values(this.fragments),t=0;t<e.length;t++)e[t].dispose();this.fragments={}}},{key:"checkBlockNumberValid",value:function(e){if(e.length>this.blocks.count)throw new Error("You passed more items (".concat(e.length,") than blocks in this instance (").concat(this.blocks.count,")"))}},{key:"checkIfInstanceExist",value:function(e){if(e>this.mesh.count)throw new Error("The given index (".concat(e,") exceeds the instances in this fragment (").concat(this.mesh.count,")"))}},{key:"deleteAndRearrangeInstances",value:function(e){var t,r=[],s=(0,n.Z)(e);try{for(s.s();!(t=s.n()).done;){var i=t.value,a=this.deleteAndRearrange(i);a&&r.push(a)}}catch(c){s.e(c)}finally{s.f()}var o,u=(0,n.Z)(e);try{for(u.s();!(o=u.n()).done;){var h=o.value;delete this.hiddenInstances[h]}}catch(c){u.e(c)}finally{u.f()}return r}},{key:"deleteAndRearrange",value:function(e){var t=this.items.indexOf(e);if(-1===t)return null;this.mesh.count--;var r=t===this.mesh.count,n=this.getInstanceIDFromIndex(t),s=new p.Matrix4,i=new p.Matrix4;if(this.mesh.getMatrixAt(n,i),r)return this.items.pop(),{ids:[e],transform:i};var a=this.mesh.count;return this.items[t]=this.items[a],this.items.pop(),this.mesh.getMatrixAt(a,s),this.mesh.setMatrixAt(n,s),this.mesh.instanceMatrix.needsUpdate=!0,{ids:[e],transform:i}}},{key:"getItemIndex",value:function(e,t){return e*this.blocks.count+t}},{key:"getInstanceIDFromIndex",value:function(e){return Math.trunc(e/this.blocks.count)}},{key:"toggleInstanceVisibility",value:function(e,t){e?this.makeInstancesVisible(t):this.makeInstancesInvisible(t)}},{key:"makeInstancesInvisible",value:function(e){e=this.filterHiddenItems(e,!1);var t,r=this.deleteAndRearrangeInstances(e),s=(0,n.Z)(r);try{for(s.s();!(t=s.n()).done;){var i=t.value;i.ids&&(this.hiddenInstances[i.ids[0]]=i)}}catch(a){s.e(a)}finally{s.f()}}},{key:"makeInstancesVisible",value:function(e){var t=[];e=this.filterHiddenItems(e,!0);var r,s=(0,n.Z)(e);try{for(s.s();!(r=s.n()).done;){var i=r.value;t.push(this.hiddenInstances[i]),delete this.hiddenInstances[i]}}catch(a){s.e(a)}finally{s.f()}this.addInstances(t)}},{key:"filterHiddenItems",value:function(e,t){var r=Object.keys(this.hiddenInstances).map((function(e){return parseInt(e,10)}));return e.filter((function(e){return t?r.includes(e):!r.includes(e)}))}},{key:"toggleBlockVisibility",value:function(e,t){var r=this,n=t.map((function(e){return r.getInstanceAndBlockID(e).blockID}));e?this.blocks.add(n,!1):this.blocks.remove(n)}}]),e}(),ut=function(e){(0,l.Z)(r,e);var t=(0,f.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=t.apply(this,arguments)).fragments=[],e}return(0,h.Z)(r)}(m),ht=function(){function e(t,r,n,s){var i;(0,u.Z)(this,e),this.state=t,this.properties=r,this.types=n,this.BVH=s,this.instancedCategories=new Set,this.splitByFloors=!0,this.splitByCategory=!0,this.loadedModels=0,this.optionalCategories=(i={},(0,a.Z)(i,d.IFCSPACE,!0),(0,a.Z)(i,d.IFCOPENINGELEMENT,!1),i),this.items={},this.materials={},this.loadingState={total:0,current:0,step:.1},this.currentWebIfcID=-1,this.currentModelID=-1}return(0,h.Z)(e,[{key:"setupOptionalCategories",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.optionalCategories=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parse",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.state.api.wasmModule){e.next=3;break}return e.next=3,this.state.api.Init();case 3:return e.next=5,this.newIfcModel(t);case 5:if(this.loadedModels++,!r){e.next=9;break}return e.next=9,this.state.api.SetGeometryTransformation(this.currentWebIfcID,r);case 9:return e.next=11,this.loadAllGeometry(this.currentWebIfcID);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAndClearErrors",value:function(e){}},{key:"notifyProgress",value:function(e,t){this.state.onProgress&&this.state.onProgress({loaded:e,total:t})}},{key:"newIfcModel",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Uint8Array(t),e.next=3,this.state.api.OpenModel(r,this.state.webIfcSettings);case 3:this.currentWebIfcID=e.sent,this.currentModelID=this.state.useJSON?this.loadedModels:this.currentWebIfcID,this.state.models[this.currentModelID]={modelID:this.currentModelID,mesh:{},types:{},jsonData:{}};case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAllGeometry",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,i,a,o,u,h,c,l,f,I,y,E,m,v,C,T,g,R,F,S,k,A,x,M,O,w,b,L,D,P,_,Z,U,z,Y,G,V,B,H,W,j,q,X,J,K,$,Q,ee,te,ne,se,ie,ae,oe,ue,he,ce,le,fe,de,pe,Ie,ye,Ee,me,ve,Ce,Te,ge,Re,Fe=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.addOptionalCategories(t),e.next=3,this.initializeLoadingState(t);case 3:if(this.instancedCategories.add(d.IFCFURNISHINGELEMENT),this.instancedCategories.add(d.IFCWINDOW),this.instancedCategories.add(d.IFCDOOR),this.state.api.StreamAllMeshes(t,(function(e){Fe.updateLoadingState(),Fe.streamMesh(t,e)})),!this.splitByCategory||!this.types){e.next=10;break}return e.next=10,this.types.getAllTypes();case 10:if(r=[],i={},!this.splitByFloors||!this.properties){e.next=38;break}return e.next=15,this.properties.getSpatialStructure(t);case 15:a=e.sent,o=a.children[0].children[0].children,u=(0,n.Z)(o),e.prev=18,u.s();case 20:if((h=u.n()).done){e.next=30;break}return c=h.value,e.next=24,this.properties.getItemProperties(t,c.expressID,!1);case 24:l=e.sent,r.push(l),f=(0,n.Z)(c.children);try{for(f.s();!(I=f.n()).done;)if(y=I.value,i[y.expressID]=c.expressID,y.children.length){E=(0,n.Z)(y.children);try{for(E.s();!(m=E.n()).done;)v=m.value,i[v.expressID]=c.expressID}catch(Se){E.e(Se)}finally{E.f()}}}catch(Se){f.e(Se)}finally{f.f()}case 28:e.next=20;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(18),u.e(e.t0);case 35:return e.prev=35,u.f(),e.finish(35);case 38:for(C=new ut,T=Object.values(this.items),g={},R=0,F=T;R<F.length;R++)if(S=F[R],k=S.instances.length,A=S.instances[0].id,x=this.state.models[0].types[A],!(1===k)||this.instancedCategories.has(x)){for(M=Object.keys(S.geometriesByMaterial).map((function(e){return Fe.materials[e]})),O=Object.values(S.geometriesByMaterial),w=re.merge(O),b=new ot(w,M,k),L=0;L<k;L++)D=S.instances[L],b.setInstance(L,{ids:[D.id],transform:D.matrix});C.fragments.push(b),C.add(b.mesh)}else for(P in S.geometriesByMaterial){_=S.instances[0].id,Z=this.splitByCategory?this.state.models[t].types[_]:-1,g[Z]||(g[Z]={}),U=this.splitByFloors?i[_]:-1,g[Z][U]||(g[Z][U]={}),g[Z][U][P]||(g[Z][U][P]=[]),z=S.geometriesByMaterial[P],Y=S.instances[0],G=(0,n.Z)(z);try{for(G.s();!(V=G.n()).done;)(B=V.value).userData.id=_,g[Z][U][P].push(B),B.applyMatrix4(Y.matrix)}catch(Se){G.e(Se)}finally{G.f()}}e.t1=(0,s.Z)().keys(g);case 43:if((e.t2=e.t1()).done){e.next=73;break}H=e.t2.value,e.t3=(0,s.Z)().keys(g[H]);case 46:if((e.t4=e.t3()).done){e.next=71;break}if(W=e.t4.value,j=parseInt(H),(q=parseInt(W))&&j){e.next=52;break}return e.abrupt("continue",46);case 52:for(X=Object.keys(g[j][q]).map((function(e){return Fe.materials[e]})),J=Object.values(g[j][q]),K=0,$=new Set,Q=0,ee=J;Q<ee.length;Q++){te=ee[Q],ne=(0,n.Z)(te);try{for(ne.s();!(se=ne.n()).done;)ie=se.value,K+=ie.attributes.position.count,$.add(ie.userData.id)}catch(Se){ne.e(Se)}finally{ne.f()}}for(ae=new Uint32Array(K),oe=new Map,ue=0,he=0,ce=0,le=J;ce<le.length;ce++){fe=le[ce],de=(0,n.Z)(fe);try{for(de.s();!(pe=de.n()).done;)Ie=pe.value,oe.has(Ie.userData.id)||oe.set(Ie.userData.id,he++),ye=Ie.attributes.position.count,Ee=oe.get(Ie.userData.id),ae.fill(Ee,ue,ue+ye),ue+=ye}catch(Se){de.e(Se)}finally{de.f()}}(me=re.merge(J)).setAttribute("blockID",new p.BufferAttribute(ae,1)),ve=new ot(me,X,1),Ce=Array.from($),ve.setInstance(0,{ids:Ce,transform:new p.Matrix4}),C.fragments.push(ve),C.add(ve.mesh),e.next=46;break;case 71:e.next=43;break;case 73:for(C.levelRelationships=i,C.allTypes=N,C.itemTypes=this.state.models[t].types,C.floorsProperties=r,Te=0,ge=T;Te<ge.length;Te++)(Re=ge[Te]).geometriesByMaterial=null,Re.instances=null,Re.referenceMatrix=null;return this.items={},this.materials={},this.notifyLoadingEnded(),this.state.models[this.currentModelID].mesh=C,e.abrupt("return",C);case 83:case"end":return e.stop()}}),e,this,[[18,32,35,38]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeLoadingState",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.api.GetLineIDsWithType(t,d.IFCPRODUCTDEFINITIONSHAPE);case 2:r=e.sent,this.loadingState.total=r.size(),this.loadingState.current=0,this.loadingState.step=.1;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"notifyLoadingEnded",value:function(){this.notifyProgress(this.loadingState.total,this.loadingState.total)}},{key:"updateLoadingState",value:function(){if(Math.min(this.loadingState.current++,this.loadingState.total)/this.loadingState.total>=this.loadingState.step){var e=Math.ceil(this.loadingState.total*this.loadingState.step);this.notifyProgress(e,this.loadingState.total),this.loadingState.step+=.1}}},{key:"addOptionalCategories",value:function(e){var t=this,r=[];for(var n in this.optionalCategories)if(this.optionalCategories.hasOwnProperty(n)){var s=parseInt(n);this.optionalCategories[s]&&r.push(s)}this.state.api.StreamAllMeshesWithTypes(this.currentWebIfcID,r,(function(r){t.streamMesh(e,r)}))}},{key:"streamMesh",value:function(e,t){for(var r=t.geometries,n=r.size(),s="",i=new p.Matrix4,a=!0,o={},u=0;u<n;u++){s+=r.get(u).geometryExpressID}if(this.items[s]){var h=this.items[s].referenceMatrix,c=r.get(0),l=this.getMeshMatrix(c.flatTransformation);l.multiply(h),this.items[s].instances.push({id:t.expressID,matrix:l})}else{for(var f=0;f<n;f++){var d=r.get(f),I=this.getBufferGeometry(e,d);if(!I)return;var y=this.getMeshMatrix(d.flatTransformation);if(I.applyMatrix4(y),a)i=(new p.Matrix4).copy(y).invert(),a=!1;var E=d.color,m="".concat(E.x).concat(E.y).concat(E.z).concat(E.w);this.materials[m]||(this.materials[m]=new p.MeshLambertMaterial({color:new p.Color(E.x,E.y,E.z),transparent:1!==E.w,opacity:E.w})),o[m]?o[m].push(I):o[m]=[I]}this.items[s]={instances:[{id:t.expressID,matrix:new p.Matrix4}],geometriesByMaterial:o,referenceMatrix:i}}}},{key:"getBufferGeometry",value:function(e,t){var r=this.state.api.GetGeometry(e,t.geometryExpressID),n=this.state.api.GetVertexArray(r.GetVertexData(),r.GetVertexDataSize());if(!n.length)return null;var s=this.state.api.GetIndexArray(r.GetIndexData(),r.GetIndexDataSize());if(!s.length)return null;var i=this.ifcGeometryToBuffer(n,s);return r.delete(),i}},{key:"getMeshMatrix",value:function(e){var t=new p.Matrix4;return t.fromArray(e),t}},{key:"ifcGeometryToBuffer",value:function(e,t){for(var r=new p.BufferGeometry,n=new Float32Array(e.length/2),s=new Float32Array(e.length/2),i=0;i<e.length;i+=6)n[i/2]=e[i],n[i/2+1]=e[i+1],n[i/2+2]=e[i+2],s[i/2]=e[i+3],s[i/2+1]=e[i+4],s[i/2+2]=e[i+5];return r.setAttribute("position",new p.BufferAttribute(n,3)),r.setAttribute("normal",new p.BufferAttribute(s,3)),r.setIndex(new p.BufferAttribute(t,1)),r}}]),e}(),ct=function(){function e(){(0,u.Z)(this,e),this.state={models:[],api:new d.IfcAPI,useJSON:!1,worker:{active:!1,path:""}},this.BVH=new L,this.typesMap=N,this.parser=new T(this.state,this.BVH),this.subsets=new S(this.state,this.BVH),this.utils=new ee(this.state),this.sequenceData=new te(this.state),this.properties=new w(this.state),this.types=new b(this.state),this.fragments=new ht(this.state,this.properties,this.types,this.BVH),this.useFragments=!1,this.cleaner=new Q(this.state)}return(0,h.Z)(e,[{key:"ifcAPI",get:function(){return this.state.api}},{key:"parse",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var r,n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.useFragments){e.next=6;break}return e.next=3,this.fragments.parse(t,null===(r=this.state.coordinationMatrix)||void 0===r?void 0:r.toArray());case 3:i=e.sent,e.next=9;break;case 6:return e.next=8,this.parser.parse(t,null===(n=this.state.coordinationMatrix)||void 0===n?void 0:n.toArray());case 8:i=e.sent;case 9:return i.setIFCManager(this),e.next=12,this.types.getAllTypes(this.worker);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setWasmPath",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.api.SetWasmPath(t),this.state.wasmPath=t;case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupThreeMeshBVH",value:function(e,t,r){this.BVH.initializeMeshBVH(e,t,r)}},{key:"setOnProgress",value:function(e){this.state.onProgress=e}},{key:"setupCoordinationMatrix",value:function(e){this.state.coordinationMatrix=e}},{key:"clearCoordinationMatrix",value:function(){delete this.state.coordinationMatrix}},{key:"applyWebIfcConfig",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.webIfcSettings=t,!this.state.worker.active||!this.worker){e.next=4;break}return e.next=4,this.worker.workerState.updateStateWebIfcSettings();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"useWebWorkers",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.worker.active!==t){e.next=2;break}return e.abrupt("return");case 2:if(this.state.api=null,!t){e.next=16;break}if(r){e.next=6;break}throw new Error("You must provide a path to the web worker.");case 6:return this.state.worker.active=t,this.state.worker.path=r,e.next=10,this.initializeWorkers();case 10:if(!(n=this.state.wasmPath)){e.next=14;break}return e.next=14,this.setWasmPath(n);case 14:e.next=17;break;case 16:this.state.api=new d.IfcAPI;case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"useJSONData",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t,r,n=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],this.state.useJSON=t,!t){e.next=5;break}return e.next=5,null===(r=this.worker)||void 0===r?void 0:r.workerState.updateStateUseJson();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addModelJSONData",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.state.models[t]){e.next=3;break}throw new Error("The specified model for the JSON data does not exist");case 3:if(!this.state.worker.active){e.next=8;break}return e.next=6,null===(n=this.worker)||void 0===n?void 0:n.workerState.updateModelStateJsonData(t,r);case 6:e.next=9;break;case 8:i.jsonData=r;case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"loadJsonDataFromWorker",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.worker.active){e.next=3;break}return e.next=3,null===(n=this.worker)||void 0===n?void 0:n.workerState.loadJsonDataFromWorker(t,r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"close",value:function(e,t){this.state.api.CloseModel(e),t&&t.remove(this.state.models[e].mesh),delete this.state.models[e]}},{key:"getExpressId",value:function(e,t){return this.properties.getExpressId(e,t)}},{key:"getAllItemsOfType",value:function(e,t,r){return this.properties.getAllItemsOfType(e,t,r)}},{key:"getItemProperties",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.properties.getItemProperties(e,t,r)}},{key:"getPropertySets",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.properties.getPropertySets(e,t,r)}},{key:"getTypeProperties",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.properties.getTypeProperties(e,t,r)}},{key:"getMaterialsProperties",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.properties.getMaterialsProperties(e,t,r)}},{key:"getIfcType",value:function(e,t){var r=this.state.models[e].types[t];return x[r]}},{key:"getSpatialStructure",value:function(e,t){return this.properties.getSpatialStructure(e,t)}},{key:"getSubset",value:function(e,t,r){return this.subsets.getSubset(e,t,r)}},{key:"removeSubset",value:function(e,t,r){this.subsets.removeSubset(e,t,r)}},{key:"createSubset",value:function(e){return this.subsets.createSubset(e)}},{key:"removeFromSubset",value:function(e,t,r,n){return this.subsets.removeFromSubset(e,t,r,n)}},{key:"clearSubset",value:function(e,t,r){return this.subsets.clearSubset(e,t,r)}},{key:"isA",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.utils.isA(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSequenceData",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sequenceData.load(t);case 2:return e.abrupt("return",this.sequenceData);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"byType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.utils.byType(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"byId",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.utils.byId(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"idsByType",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.utils.idsByType(t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.dispose(),e.next=3,this.cleaner.dispose();case 3:if(this.subsets.dispose(),!this.worker||!this.state.worker.active){e.next=7;break}return e.next=7,this.worker.terminate();case 7:this.state=null;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disposeMemory",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.worker.active){e.next=5;break}return e.next=3,null===(t=this.worker)||void 0===t?void 0:t.Close();case 3:e.next=8;break;case 5:this.state.api.Close(),this.state.api=null,this.state.api=new d.IfcAPI;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAndClearErrors",value:function(e){return this.parser.getAndClearErrors(e)}},{key:"initializeWorkers",value:function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.worker=new $(this.state,this.BVH),this.state.api=this.worker.webIfc,this.properties=this.worker.properties,e.next=5,this.worker.parser.setupOptionalCategories(this.parser.optionalCategories);case 5:return this.parser=this.worker.parser,e.next=8,this.worker.workerState.updateStateUseJson();case 8:return e.next=10,this.worker.workerState.updateStateWebIfcSettings();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),lt=function(e){(0,l.Z)(r,e);var t=(0,f.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).ifcManager=new ct,n}return(0,h.Z)(r,[{key:"load",value:function(e,t,r,n){var a=this,o=new p.FileLoader(a.manager);this.onProgress=r,o.setPath(a.path),o.setResponseType("arraybuffer"),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(){var r=(0,i.Z)((0,s.Z)().mark((function r(i){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,"string"!=typeof i){r.next=3;break}throw new Error("IFC files must be given as a buffer!");case 3:return r.t0=t,r.next=6,a.parse(i);case 6:r.t1=r.sent,(0,r.t0)(r.t1),r.next=14;break;case 10:r.prev=10,r.t2=r.catch(0),n?n(r.t2):console.error(r.t2),a.manager.itemError(e);case 14:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}(),r,n)}},{key:"parse",value:function(e){return this.ifcManager.parse(e)}}]),r}(p.Loader)},23912:function(){},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},75263:function(e,t,r){var n=r(18698).default;function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=a?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(i,o,u):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},18698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},49374:function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}r.d(t,{Z:function(){return n}})}}]);
//# sourceMappingURL=691.bundle.js.map